<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>k1lib.cli module &mdash; k1lib  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="JS transpiler tutorial" href="js_transpiler.html" />
    <link rel="prev" title="Base module" href="../base.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> k1lib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../base.html">Base module</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">k1lib.cli module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#intro">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="#argument-expansion">Argument expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inverting-conditions">Inverting conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#capturing-operators">Capturing operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cli-composition">Cli composition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#serial-composition">Serial composition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#composition-or-onetomany">“&amp;” composition, or “oneToMany”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#composition-or-mtms">“+” composition, or “mtmS”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vanilla-alternatives">Vanilla alternatives</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#js-transpiler">JS transpiler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="js_transpiler.html">JS transpiler tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#philosophy">Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-to-start">Where to start?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#under-the-hood">Under the hood</a><ul>
<li class="toctree-l3"><a class="reference internal" href="llvm.html">LLVM optimizer tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-your-own-cli">Creating your own cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accelerations">Accelerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#biology-related-clis">Biology-related clis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.bio">bio module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.go"><code class="docutils literal notranslate"><span class="pre">go()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.quality"><code class="docutils literal notranslate"><span class="pre">quality()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.longFa"><code class="docutils literal notranslate"><span class="pre">longFa()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.idx"><code class="docutils literal notranslate"><span class="pre">idx</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.idx.blast"><code class="docutils literal notranslate"><span class="pre">idx.blast()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.idx.bwa"><code class="docutils literal notranslate"><span class="pre">idx.bwa()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.idx.bam"><code class="docutils literal notranslate"><span class="pre">idx.bam()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.transcribe"><code class="docutils literal notranslate"><span class="pre">transcribe</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.transcribe.__ror__"><code class="docutils literal notranslate"><span class="pre">transcribe.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.complement"><code class="docutils literal notranslate"><span class="pre">complement</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.complement.__ror__"><code class="docutils literal notranslate"><span class="pre">complement.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.translate"><code class="docutils literal notranslate"><span class="pre">translate</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.translate.__init__"><code class="docutils literal notranslate"><span class="pre">translate.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.translate.__ror__"><code class="docutils literal notranslate"><span class="pre">translate.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.medAa"><code class="docutils literal notranslate"><span class="pre">medAa</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.medAa.__ror__"><code class="docutils literal notranslate"><span class="pre">medAa.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.bio.longAa"><code class="docutils literal notranslate"><span class="pre">longAa</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.bio.longAa.__ror__"><code class="docutils literal notranslate"><span class="pre">longAa.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.cif">cif module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.cif.tables"><code class="docutils literal notranslate"><span class="pre">tables()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.cif.records"><code class="docutils literal notranslate"><span class="pre">records()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.conv">conv module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toNdArray"><code class="docutils literal notranslate"><span class="pre">toNdArray</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toNdArray.blurb"><code class="docutils literal notranslate"><span class="pre">toNdArray.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toNdArray.__init__"><code class="docutils literal notranslate"><span class="pre">toNdArray.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toNdArray.__ror__"><code class="docutils literal notranslate"><span class="pre">toNdArray.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toTensor"><code class="docutils literal notranslate"><span class="pre">toTensor</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toTensor.blurb"><code class="docutils literal notranslate"><span class="pre">toTensor.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toTensor.__init__"><code class="docutils literal notranslate"><span class="pre">toTensor.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toTensor.__ror__"><code class="docutils literal notranslate"><span class="pre">toTensor.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toRange"><code class="docutils literal notranslate"><span class="pre">toRange</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRange.blurb"><code class="docutils literal notranslate"><span class="pre">toRange.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRange.__init__"><code class="docutils literal notranslate"><span class="pre">toRange.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRange.__ror__"><code class="docutils literal notranslate"><span class="pre">toRange.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toList"><code class="docutils literal notranslate"><span class="pre">toList</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toList.__init__"><code class="docutils literal notranslate"><span class="pre">toList.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toList.__ror__"><code class="docutils literal notranslate"><span class="pre">toList.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toSum"><code class="docutils literal notranslate"><span class="pre">toSum</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toSum.blurb"><code class="docutils literal notranslate"><span class="pre">toSum.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toSum.__init__"><code class="docutils literal notranslate"><span class="pre">toSum.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toSum.__ror__"><code class="docutils literal notranslate"><span class="pre">toSum.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toProd"><code class="docutils literal notranslate"><span class="pre">toProd</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toProd.blurb"><code class="docutils literal notranslate"><span class="pre">toProd.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toProd.__init__"><code class="docutils literal notranslate"><span class="pre">toProd.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toProd.__ror__"><code class="docutils literal notranslate"><span class="pre">toProd.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toAvg"><code class="docutils literal notranslate"><span class="pre">toAvg</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAvg.blurb"><code class="docutils literal notranslate"><span class="pre">toAvg.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAvg.__init__"><code class="docutils literal notranslate"><span class="pre">toAvg.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAvg.__ror__"><code class="docutils literal notranslate"><span class="pre">toAvg.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toMean"><code class="docutils literal notranslate"><span class="pre">toMean</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toStd"><code class="docutils literal notranslate"><span class="pre">toStd</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toStd.blurb"><code class="docutils literal notranslate"><span class="pre">toStd.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toStd.__init__"><code class="docutils literal notranslate"><span class="pre">toStd.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toStd.__ror__"><code class="docutils literal notranslate"><span class="pre">toStd.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toMedian"><code class="docutils literal notranslate"><span class="pre">toMedian</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMedian.blurb"><code class="docutils literal notranslate"><span class="pre">toMedian.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMedian.__init__"><code class="docutils literal notranslate"><span class="pre">toMedian.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMedian.__ror__"><code class="docutils literal notranslate"><span class="pre">toMedian.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toMax"><code class="docutils literal notranslate"><span class="pre">toMax</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMax.blurb"><code class="docutils literal notranslate"><span class="pre">toMax.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMax.__init__"><code class="docutils literal notranslate"><span class="pre">toMax.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMax.__ror__"><code class="docutils literal notranslate"><span class="pre">toMax.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toMin"><code class="docutils literal notranslate"><span class="pre">toMin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMin.blurb"><code class="docutils literal notranslate"><span class="pre">toMin.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMin.__init__"><code class="docutils literal notranslate"><span class="pre">toMin.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMin.__ror__"><code class="docutils literal notranslate"><span class="pre">toMin.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toArgmin"><code class="docutils literal notranslate"><span class="pre">toArgmin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toArgmin.blurb"><code class="docutils literal notranslate"><span class="pre">toArgmin.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toArgmin.__init__"><code class="docutils literal notranslate"><span class="pre">toArgmin.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toArgmin.__ror__"><code class="docutils literal notranslate"><span class="pre">toArgmin.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toArgmax"><code class="docutils literal notranslate"><span class="pre">toArgmax</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toArgmax.blurb"><code class="docutils literal notranslate"><span class="pre">toArgmax.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toArgmax.__init__"><code class="docutils literal notranslate"><span class="pre">toArgmax.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toArgmax.__ror__"><code class="docutils literal notranslate"><span class="pre">toArgmax.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toImg"><code class="docutils literal notranslate"><span class="pre">toImg</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toImg.blurb"><code class="docutils literal notranslate"><span class="pre">toImg.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toImg.__init__"><code class="docutils literal notranslate"><span class="pre">toImg.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toImg.__ror__"><code class="docutils literal notranslate"><span class="pre">toImg.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toRgb"><code class="docutils literal notranslate"><span class="pre">toRgb</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRgb.blurb"><code class="docutils literal notranslate"><span class="pre">toRgb.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRgb.__init__"><code class="docutils literal notranslate"><span class="pre">toRgb.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRgb.__ror__"><code class="docutils literal notranslate"><span class="pre">toRgb.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toRgba"><code class="docutils literal notranslate"><span class="pre">toRgba</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRgba.blurb"><code class="docutils literal notranslate"><span class="pre">toRgba.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRgba.__init__"><code class="docutils literal notranslate"><span class="pre">toRgba.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toRgba.__ror__"><code class="docutils literal notranslate"><span class="pre">toRgba.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toGray"><code class="docutils literal notranslate"><span class="pre">toGray</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toGray.blurb"><code class="docutils literal notranslate"><span class="pre">toGray.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toGray.__init__"><code class="docutils literal notranslate"><span class="pre">toGray.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toGray.__ror__"><code class="docutils literal notranslate"><span class="pre">toGray.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toDict"><code class="docutils literal notranslate"><span class="pre">toDict</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDict.blurb"><code class="docutils literal notranslate"><span class="pre">toDict.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDict.__init__"><code class="docutils literal notranslate"><span class="pre">toDict.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDict.__ror__"><code class="docutils literal notranslate"><span class="pre">toDict.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toFloat"><code class="docutils literal notranslate"><span class="pre">toFloat</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toFloat.blurb"><code class="docutils literal notranslate"><span class="pre">toFloat.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toFloat.__init__"><code class="docutils literal notranslate"><span class="pre">toFloat.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toFloat.__ror__"><code class="docutils literal notranslate"><span class="pre">toFloat.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toInt"><code class="docutils literal notranslate"><span class="pre">toInt</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toInt.blurb"><code class="docutils literal notranslate"><span class="pre">toInt.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toInt.__init__"><code class="docutils literal notranslate"><span class="pre">toInt.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toInt.__ror__"><code class="docutils literal notranslate"><span class="pre">toInt.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toBytes"><code class="docutils literal notranslate"><span class="pre">toBytes</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toBytes.blurb"><code class="docutils literal notranslate"><span class="pre">toBytes.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toBytes.__init__"><code class="docutils literal notranslate"><span class="pre">toBytes.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toBytes.__ror__"><code class="docutils literal notranslate"><span class="pre">toBytes.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toDataUri"><code class="docutils literal notranslate"><span class="pre">toDataUri</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDataUri.blurb"><code class="docutils literal notranslate"><span class="pre">toDataUri.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDataUri.__init__"><code class="docutils literal notranslate"><span class="pre">toDataUri.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDataUri.__ror__"><code class="docutils literal notranslate"><span class="pre">toDataUri.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toAnchor"><code class="docutils literal notranslate"><span class="pre">toAnchor</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAnchor.blurb"><code class="docutils literal notranslate"><span class="pre">toAnchor.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAnchor.__init__"><code class="docutils literal notranslate"><span class="pre">toAnchor.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAnchor.__ror__"><code class="docutils literal notranslate"><span class="pre">toAnchor.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toHtml"><code class="docutils literal notranslate"><span class="pre">toHtml</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toHtml.blurb"><code class="docutils literal notranslate"><span class="pre">toHtml.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toHtml.__init__"><code class="docutils literal notranslate"><span class="pre">toHtml.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toHtml.__ror__"><code class="docutils literal notranslate"><span class="pre">toHtml.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toAscii"><code class="docutils literal notranslate"><span class="pre">toAscii()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toHash"><code class="docutils literal notranslate"><span class="pre">toHash()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toCsv"><code class="docutils literal notranslate"><span class="pre">toCsv</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toCsv.blurb"><code class="docutils literal notranslate"><span class="pre">toCsv.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toCsv.__init__"><code class="docutils literal notranslate"><span class="pre">toCsv.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toCsv.__ror__"><code class="docutils literal notranslate"><span class="pre">toCsv.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toYaml"><code class="docutils literal notranslate"><span class="pre">toYaml</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toYaml.blurb"><code class="docutils literal notranslate"><span class="pre">toYaml.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toYaml.__init__"><code class="docutils literal notranslate"><span class="pre">toYaml.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toYaml.__ror__"><code class="docutils literal notranslate"><span class="pre">toYaml.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.Audio"><code class="docutils literal notranslate"><span class="pre">Audio</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.Audio.resample"><code class="docutils literal notranslate"><span class="pre">Audio.resample()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toAudio"><code class="docutils literal notranslate"><span class="pre">toAudio</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAudio.blurb"><code class="docutils literal notranslate"><span class="pre">toAudio.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAudio.__init__"><code class="docutils literal notranslate"><span class="pre">toAudio.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAudio.__ror__"><code class="docutils literal notranslate"><span class="pre">toAudio.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toUnix"><code class="docutils literal notranslate"><span class="pre">toUnix</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toUnix.blurb"><code class="docutils literal notranslate"><span class="pre">toUnix.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toUnix.__init__"><code class="docutils literal notranslate"><span class="pre">toUnix.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toUnix.tzs"><code class="docutils literal notranslate"><span class="pre">toUnix.tzs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toUnix.__ror__"><code class="docutils literal notranslate"><span class="pre">toUnix.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toIso"><code class="docutils literal notranslate"><span class="pre">toIso</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toIso.blurb"><code class="docutils literal notranslate"><span class="pre">toIso.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toIso.__init__"><code class="docutils literal notranslate"><span class="pre">toIso.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toIso.__ror__"><code class="docutils literal notranslate"><span class="pre">toIso.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toYMD"><code class="docutils literal notranslate"><span class="pre">toYMD</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toYMD.blurb"><code class="docutils literal notranslate"><span class="pre">toYMD.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toYMD.__init__"><code class="docutils literal notranslate"><span class="pre">toYMD.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toYMD.__ror__"><code class="docutils literal notranslate"><span class="pre">toYMD.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toLinks"><code class="docutils literal notranslate"><span class="pre">toLinks</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toLinks.blurb"><code class="docutils literal notranslate"><span class="pre">toLinks.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toLinks.__init__"><code class="docutils literal notranslate"><span class="pre">toLinks.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toLinks.__ror__"><code class="docutils literal notranslate"><span class="pre">toLinks.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toMovingAvg"><code class="docutils literal notranslate"><span class="pre">toMovingAvg</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMovingAvg.blurb"><code class="docutils literal notranslate"><span class="pre">toMovingAvg.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMovingAvg.__init__"><code class="docutils literal notranslate"><span class="pre">toMovingAvg.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toMovingAvg.__ror__"><code class="docutils literal notranslate"><span class="pre">toMovingAvg.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toCm"><code class="docutils literal notranslate"><span class="pre">toCm</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toCm.blurb"><code class="docutils literal notranslate"><span class="pre">toCm.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toCm.__init__"><code class="docutils literal notranslate"><span class="pre">toCm.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toCm.__ror__"><code class="docutils literal notranslate"><span class="pre">toCm.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.Pdf"><code class="docutils literal notranslate"><span class="pre">Pdf</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toPdf"><code class="docutils literal notranslate"><span class="pre">toPdf</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toPdf.blurb"><code class="docutils literal notranslate"><span class="pre">toPdf.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toPdf.__init__"><code class="docutils literal notranslate"><span class="pre">toPdf.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toPdf.__ror__"><code class="docutils literal notranslate"><span class="pre">toPdf.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toDist"><code class="docutils literal notranslate"><span class="pre">toDist</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDist.blurb"><code class="docutils literal notranslate"><span class="pre">toDist.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDist.__init__"><code class="docutils literal notranslate"><span class="pre">toDist.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toDist.__ror__"><code class="docutils literal notranslate"><span class="pre">toDist.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toAngle"><code class="docutils literal notranslate"><span class="pre">toAngle</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAngle.blurb"><code class="docutils literal notranslate"><span class="pre">toAngle.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAngle.__init__"><code class="docutils literal notranslate"><span class="pre">toAngle.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toAngle.__ror__"><code class="docutils literal notranslate"><span class="pre">toAngle.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.idxsToNdArray"><code class="docutils literal notranslate"><span class="pre">idxsToNdArray</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.idxsToNdArray.blurb"><code class="docutils literal notranslate"><span class="pre">idxsToNdArray.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.idxsToNdArray.__init__"><code class="docutils literal notranslate"><span class="pre">idxsToNdArray.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.idxsToNdArray.__ror__"><code class="docutils literal notranslate"><span class="pre">idxsToNdArray.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.conv.toFileType"><code class="docutils literal notranslate"><span class="pre">toFileType</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toFileType.blurb"><code class="docutils literal notranslate"><span class="pre">toFileType.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toFileType.__init__"><code class="docutils literal notranslate"><span class="pre">toFileType.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.conv.toFileType.__ror__"><code class="docutils literal notranslate"><span class="pre">toFileType.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.mgi">mgi module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.mgi.batch"><code class="docutils literal notranslate"><span class="pre">batch</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.mgi.batch.__init__"><code class="docutils literal notranslate"><span class="pre">batch.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.mgi.batch.__ror__"><code class="docutils literal notranslate"><span class="pre">batch.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.filt">filt module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.filt"><code class="docutils literal notranslate"><span class="pre">filt</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.filt.__init__"><code class="docutils literal notranslate"><span class="pre">filt.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.filt.__ror__"><code class="docutils literal notranslate"><span class="pre">filt.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.filt.__invert__"><code class="docutils literal notranslate"><span class="pre">filt.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.filt.split"><code class="docutils literal notranslate"><span class="pre">filt.split()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.filter_"><code class="docutils literal notranslate"><span class="pre">filter_</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.inSet"><code class="docutils literal notranslate"><span class="pre">inSet</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.inSet.__init__"><code class="docutils literal notranslate"><span class="pre">inSet.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.inSet.__invert__"><code class="docutils literal notranslate"><span class="pre">inSet.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.contains"><code class="docutils literal notranslate"><span class="pre">contains</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.contains.__init__"><code class="docutils literal notranslate"><span class="pre">contains.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.contains.__invert__"><code class="docutils literal notranslate"><span class="pre">contains.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.empty"><code class="docutils literal notranslate"><span class="pre">empty</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.empty.__init__"><code class="docutils literal notranslate"><span class="pre">empty.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.empty.__ror__"><code class="docutils literal notranslate"><span class="pre">empty.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.empty.__invert__"><code class="docutils literal notranslate"><span class="pre">empty.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.isNumeric"><code class="docutils literal notranslate"><span class="pre">isNumeric()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.instanceOf"><code class="docutils literal notranslate"><span class="pre">instanceOf()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.head"><code class="docutils literal notranslate"><span class="pre">head</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.head.__init__"><code class="docutils literal notranslate"><span class="pre">head.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.head.__ror__"><code class="docutils literal notranslate"><span class="pre">head.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.head.__invert__"><code class="docutils literal notranslate"><span class="pre">head.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.head.split"><code class="docutils literal notranslate"><span class="pre">head.split()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.tail"><code class="docutils literal notranslate"><span class="pre">tail</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.tail.__init__"><code class="docutils literal notranslate"><span class="pre">tail.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.tail.__ror__"><code class="docutils literal notranslate"><span class="pre">tail.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.cut"><code class="docutils literal notranslate"><span class="pre">cut</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.cut.__init__"><code class="docutils literal notranslate"><span class="pre">cut.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.cut.__ror__"><code class="docutils literal notranslate"><span class="pre">cut.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.cut.__invert__"><code class="docutils literal notranslate"><span class="pre">cut.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.rows"><code class="docutils literal notranslate"><span class="pre">rows</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.rows.__init__"><code class="docutils literal notranslate"><span class="pre">rows.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.rows.__invert__"><code class="docutils literal notranslate"><span class="pre">rows.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.rows.__ror__"><code class="docutils literal notranslate"><span class="pre">rows.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.intersection"><code class="docutils literal notranslate"><span class="pre">intersection</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.intersection.__init__"><code class="docutils literal notranslate"><span class="pre">intersection.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.intersection.__ror__"><code class="docutils literal notranslate"><span class="pre">intersection.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.union"><code class="docutils literal notranslate"><span class="pre">union</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.union.__init__"><code class="docutils literal notranslate"><span class="pre">union.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.union.__ror__"><code class="docutils literal notranslate"><span class="pre">union.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.unique"><code class="docutils literal notranslate"><span class="pre">unique</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.unique.__init__"><code class="docutils literal notranslate"><span class="pre">unique.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.unique.__ror__"><code class="docutils literal notranslate"><span class="pre">unique.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.breakIf"><code class="docutils literal notranslate"><span class="pre">breakIf</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.breakIf.__init__"><code class="docutils literal notranslate"><span class="pre">breakIf.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.breakIf.__ror__"><code class="docutils literal notranslate"><span class="pre">breakIf.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.mask"><code class="docutils literal notranslate"><span class="pre">mask</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.mask.__init__"><code class="docutils literal notranslate"><span class="pre">mask.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.mask.__invert__"><code class="docutils literal notranslate"><span class="pre">mask.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.mask.__ror__"><code class="docutils literal notranslate"><span class="pre">mask.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.tryout"><code class="docutils literal notranslate"><span class="pre">tryout</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.tryout.__init__"><code class="docutils literal notranslate"><span class="pre">tryout.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.tryout.__ror__"><code class="docutils literal notranslate"><span class="pre">tryout.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.tryout.__invert__"><code class="docutils literal notranslate"><span class="pre">tryout.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.resume"><code class="docutils literal notranslate"><span class="pre">resume()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.trigger"><code class="docutils literal notranslate"><span class="pre">trigger</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.trigger.__init__"><code class="docutils literal notranslate"><span class="pre">trigger.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.trigger.__ror__"><code class="docutils literal notranslate"><span class="pre">trigger.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.filt.filtStd"><code class="docutils literal notranslate"><span class="pre">filtStd</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.filtStd.__init__"><code class="docutils literal notranslate"><span class="pre">filtStd.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.filtStd.__invert__"><code class="docutils literal notranslate"><span class="pre">filtStd.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.filt.filtStd.__ror__"><code class="docutils literal notranslate"><span class="pre">filtStd.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.gb">gb module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.gb.feats"><code class="docutils literal notranslate"><span class="pre">feats</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.gb.feats.__ror__"><code class="docutils literal notranslate"><span class="pre">feats.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.gb.feats.filt"><code class="docutils literal notranslate"><span class="pre">feats.filt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.gb.feats.root"><code class="docutils literal notranslate"><span class="pre">feats.root()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.gb.feats.tags"><code class="docutils literal notranslate"><span class="pre">feats.tags()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.gb.origin"><code class="docutils literal notranslate"><span class="pre">origin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.gb.origin.__ror__"><code class="docutils literal notranslate"><span class="pre">origin.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.grep">grep module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.grep.grep"><code class="docutils literal notranslate"><span class="pre">grep</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.grep.grep.__init__"><code class="docutils literal notranslate"><span class="pre">grep.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.grep.grep.till"><code class="docutils literal notranslate"><span class="pre">grep.till()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.grep.grep.__ror__"><code class="docutils literal notranslate"><span class="pre">grep.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.grep.grep.__invert__"><code class="docutils literal notranslate"><span class="pre">grep.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.grep.grepTemplate"><code class="docutils literal notranslate"><span class="pre">grepTemplate</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.grep.grepTemplate.__init__"><code class="docutils literal notranslate"><span class="pre">grepTemplate.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.grep.grepTemplate.__ror__"><code class="docutils literal notranslate"><span class="pre">grepTemplate.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#init-module">init module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.init.BaseCli"><code class="docutils literal notranslate"><span class="pre">BaseCli</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.__init__"><code class="docutils literal notranslate"><span class="pre">BaseCli.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.capturedClis"><code class="docutils literal notranslate"><span class="pre">BaseCli.capturedClis</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.capturedSerial"><code class="docutils literal notranslate"><span class="pre">BaseCli.capturedSerial</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.hint"><code class="docutils literal notranslate"><span class="pre">BaseCli.hint()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.hasHint"><code class="docutils literal notranslate"><span class="pre">BaseCli.hasHint</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.__and__"><code class="docutils literal notranslate"><span class="pre">BaseCli.__and__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.__add__"><code class="docutils literal notranslate"><span class="pre">BaseCli.__add__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.all"><code class="docutils literal notranslate"><span class="pre">BaseCli.all()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.__or__"><code class="docutils literal notranslate"><span class="pre">BaseCli.__or__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.__ror__"><code class="docutils literal notranslate"><span class="pre">BaseCli.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.f"><code class="docutils literal notranslate"><span class="pre">BaseCli.f()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.__lt__"><code class="docutils literal notranslate"><span class="pre">BaseCli.__lt__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.BaseCli.__call__"><code class="docutils literal notranslate"><span class="pre">BaseCli.__call__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.init.yieldT"><code class="docutils literal notranslate"><span class="pre">yieldT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.init.fastF"><code class="docutils literal notranslate"><span class="pre">fastF()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.init.serial"><code class="docutils literal notranslate"><span class="pre">serial</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.serial.__init__"><code class="docutils literal notranslate"><span class="pre">serial.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.serial.__ror__"><code class="docutils literal notranslate"><span class="pre">serial.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.serial.repeat"><code class="docutils literal notranslate"><span class="pre">serial.repeat()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.init.oneToMany"><code class="docutils literal notranslate"><span class="pre">oneToMany</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.oneToMany.__init__"><code class="docutils literal notranslate"><span class="pre">oneToMany.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.oneToMany.__ror__"><code class="docutils literal notranslate"><span class="pre">oneToMany.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.init.mtmS"><code class="docutils literal notranslate"><span class="pre">mtmS</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.mtmS.__init__"><code class="docutils literal notranslate"><span class="pre">mtmS.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.mtmS.__ror__"><code class="docutils literal notranslate"><span class="pre">mtmS.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.init.mtmS.f"><code class="docutils literal notranslate"><span class="pre">mtmS.f()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.init.patchDict"><code class="docutils literal notranslate"><span class="pre">patchDict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.init.patchNumpy"><code class="docutils literal notranslate"><span class="pre">patchNumpy()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.inp">inp module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.cat.pickle"><code class="docutils literal notranslate"><span class="pre">cat.pickle()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.cat"><code class="docutils literal notranslate"><span class="pre">cat()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.catPickle"><code class="docutils literal notranslate"><span class="pre">catPickle</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.catPickle.__init__"><code class="docutils literal notranslate"><span class="pre">catPickle.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.catPickle.__ror__"><code class="docutils literal notranslate"><span class="pre">catPickle.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.splitSeek"><code class="docutils literal notranslate"><span class="pre">splitSeek</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.splitSeek.__init__"><code class="docutils literal notranslate"><span class="pre">splitSeek.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.splitSeek.forward"><code class="docutils literal notranslate"><span class="pre">splitSeek.forward()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.splitSeek.backward"><code class="docutils literal notranslate"><span class="pre">splitSeek.backward()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.splitSeek.__ror__"><code class="docutils literal notranslate"><span class="pre">splitSeek.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.refineSeek"><code class="docutils literal notranslate"><span class="pre">refineSeek</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.refineSeek.__init__"><code class="docutils literal notranslate"><span class="pre">refineSeek.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.refineSeek.__ror__"><code class="docutils literal notranslate"><span class="pre">refineSeek.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.refineSeek.injectFn"><code class="docutils literal notranslate"><span class="pre">refineSeek.injectFn()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.refineSeek.fastq"><code class="docutils literal notranslate"><span class="pre">refineSeek.fastq()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.wget"><code class="docutils literal notranslate"><span class="pre">wget()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.ls"><code class="docutils literal notranslate"><span class="pre">ls()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.cmd"><code class="docutils literal notranslate"><span class="pre">cmd</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.cmd.__init__"><code class="docutils literal notranslate"><span class="pre">cmd.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.cmd.__ror__"><code class="docutils literal notranslate"><span class="pre">cmd.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.walk"><code class="docutils literal notranslate"><span class="pre">walk</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.walk.__init__"><code class="docutils literal notranslate"><span class="pre">walk.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.walk.__ror__"><code class="docutils literal notranslate"><span class="pre">walk.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.urlPath"><code class="docutils literal notranslate"><span class="pre">urlPath()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.kzip"><code class="docutils literal notranslate"><span class="pre">kzip</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.kzip.__init__"><code class="docutils literal notranslate"><span class="pre">kzip.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.kzip.__ror__"><code class="docutils literal notranslate"><span class="pre">kzip.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.kunzip"><code class="docutils literal notranslate"><span class="pre">kunzip</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.kunzip.__init__"><code class="docutils literal notranslate"><span class="pre">kunzip.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.inp.kunzip.__ror__"><code class="docutils literal notranslate"><span class="pre">kunzip.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.inp.unzip"><code class="docutils literal notranslate"><span class="pre">unzip</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.kapi">kapi module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.status"><code class="docutils literal notranslate"><span class="pre">status()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.segment"><code class="docutils literal notranslate"><span class="pre">segment</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.segment.__init__"><code class="docutils literal notranslate"><span class="pre">segment.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.segment.__ror__"><code class="docutils literal notranslate"><span class="pre">segment.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.demo"><code class="docutils literal notranslate"><span class="pre">demo</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.demo.__init__"><code class="docutils literal notranslate"><span class="pre">demo.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.demo.__ror__"><code class="docutils literal notranslate"><span class="pre">demo.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.embed"><code class="docutils literal notranslate"><span class="pre">embed</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.embed.__init__"><code class="docutils literal notranslate"><span class="pre">embed.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.embed.__ror__"><code class="docutils literal notranslate"><span class="pre">embed.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.embeds"><code class="docutils literal notranslate"><span class="pre">embeds</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.embeds.__init__"><code class="docutils literal notranslate"><span class="pre">embeds.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.embeds.__ror__"><code class="docutils literal notranslate"><span class="pre">embeds.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.complete"><code class="docutils literal notranslate"><span class="pre">complete</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.complete.__init__"><code class="docutils literal notranslate"><span class="pre">complete.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.complete.__ror__"><code class="docutils literal notranslate"><span class="pre">complete.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.ocr"><code class="docutils literal notranslate"><span class="pre">ocr</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.ocr.__init__"><code class="docutils literal notranslate"><span class="pre">ocr.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.ocr.__ror__"><code class="docutils literal notranslate"><span class="pre">ocr.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.Ocr"><code class="docutils literal notranslate"><span class="pre">Ocr</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.Ocr.__init__"><code class="docutils literal notranslate"><span class="pre">Ocr.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.Ocr.npImg"><code class="docutils literal notranslate"><span class="pre">Ocr.npImg()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.OcrBox"><code class="docutils literal notranslate"><span class="pre">OcrBox</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.OcrBox.__init__"><code class="docutils literal notranslate"><span class="pre">OcrBox.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.OcrBox.coords"><code class="docutils literal notranslate"><span class="pre">OcrBox.coords</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.OcrBox.text"><code class="docutils literal notranslate"><span class="pre">OcrBox.text</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.OcrBox.confidence"><code class="docutils literal notranslate"><span class="pre">OcrBox.confidence</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.tess"><code class="docutils literal notranslate"><span class="pre">tess</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.tess.__init__"><code class="docutils literal notranslate"><span class="pre">tess.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.tess.__ror__"><code class="docutils literal notranslate"><span class="pre">tess.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.txt2im"><code class="docutils literal notranslate"><span class="pre">txt2im</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.txt2im.__init__"><code class="docutils literal notranslate"><span class="pre">txt2im.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.txt2im.__ror__"><code class="docutils literal notranslate"><span class="pre">txt2im.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.caption"><code class="docutils literal notranslate"><span class="pre">caption</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.caption.__init__"><code class="docutils literal notranslate"><span class="pre">caption.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.caption.__ror__"><code class="docutils literal notranslate"><span class="pre">caption.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.speech"><code class="docutils literal notranslate"><span class="pre">speech</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.speech.__init__"><code class="docutils literal notranslate"><span class="pre">speech.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.speech.__ror__"><code class="docutils literal notranslate"><span class="pre">speech.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.summarize"><code class="docutils literal notranslate"><span class="pre">summarize</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.summarize.__init__"><code class="docutils literal notranslate"><span class="pre">summarize.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.summarize.__ror__"><code class="docutils literal notranslate"><span class="pre">summarize.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kapi.post"><code class="docutils literal notranslate"><span class="pre">post</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.post.__init__"><code class="docutils literal notranslate"><span class="pre">post.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kapi.post.__ror__"><code class="docutils literal notranslate"><span class="pre">post.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.kcv">kcv module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kcv.markers"><code class="docutils literal notranslate"><span class="pre">markers</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kcv.markers.__init__"><code class="docutils literal notranslate"><span class="pre">markers.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kcv.markers.__ror__"><code class="docutils literal notranslate"><span class="pre">markers.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kcv.Markers"><code class="docutils literal notranslate"><span class="pre">Markers</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kcv.Markers.__init__"><code class="docutils literal notranslate"><span class="pre">Markers.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kcv.map3d"><code class="docutils literal notranslate"><span class="pre">map3d()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.kgv">kgv module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kgv.sketch"><code class="docutils literal notranslate"><span class="pre">sketch</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.sketch.ctxIdx"><code class="docutils literal notranslate"><span class="pre">sketch.ctxIdx</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.sketch.__init__"><code class="docutils literal notranslate"><span class="pre">sketch.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.sketch.__ror__"><code class="docutils literal notranslate"><span class="pre">sketch.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kgv.nodes"><code class="docutils literal notranslate"><span class="pre">nodes</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.nodes.__init__"><code class="docutils literal notranslate"><span class="pre">nodes.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.nodes.__ror__"><code class="docutils literal notranslate"><span class="pre">nodes.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kgv.edges"><code class="docutils literal notranslate"><span class="pre">edges</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.edges.blurb"><code class="docutils literal notranslate"><span class="pre">edges.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.edges.__init__"><code class="docutils literal notranslate"><span class="pre">edges.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.edges.__ror__"><code class="docutils literal notranslate"><span class="pre">edges.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kgv.Graph"><code class="docutils literal notranslate"><span class="pre">Graph</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.Graph.__init__"><code class="docutils literal notranslate"><span class="pre">Graph.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kgv.Graph.focus"><code class="docutils literal notranslate"><span class="pre">Graph.focus()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kgv.InteractiveGraph"><code class="docutils literal notranslate"><span class="pre">InteractiveGraph</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.kjs">kjs module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kjs.JsFunc"><code class="docutils literal notranslate"><span class="pre">JsFunc</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kjs.JsFunc.__init__"><code class="docutils literal notranslate"><span class="pre">JsFunc.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kjs.JsFunc.interface"><code class="docutils literal notranslate"><span class="pre">JsFunc.interface()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kjs.toJsFunc"><code class="docutils literal notranslate"><span class="pre">toJsFunc</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kjs.toJsFunc.__init__"><code class="docutils literal notranslate"><span class="pre">toJsFunc.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kjs.toJsFunc.__ror__"><code class="docutils literal notranslate"><span class="pre">toJsFunc.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.ktree">ktree module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.create"><code class="docutils literal notranslate"><span class="pre">create</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.create.__init__"><code class="docutils literal notranslate"><span class="pre">create.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.create.__ror__"><code class="docutils literal notranslate"><span class="pre">create.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.apply"><code class="docutils literal notranslate"><span class="pre">apply</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.apply.__init__"><code class="docutils literal notranslate"><span class="pre">apply.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.apply.__ror__"><code class="docutils literal notranslate"><span class="pre">apply.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.filt"><code class="docutils literal notranslate"><span class="pre">filt</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.filt.__init__"><code class="docutils literal notranslate"><span class="pre">filt.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.filt.__ror__"><code class="docutils literal notranslate"><span class="pre">filt.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.select"><code class="docutils literal notranslate"><span class="pre">select</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.select.__init__"><code class="docutils literal notranslate"><span class="pre">select.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.select.__ror__"><code class="docutils literal notranslate"><span class="pre">select.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.flatten"><code class="docutils literal notranslate"><span class="pre">flatten</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.flatten.__init__"><code class="docutils literal notranslate"><span class="pre">flatten.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.flatten.__ror__"><code class="docutils literal notranslate"><span class="pre">flatten.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.pretty"><code class="docutils literal notranslate"><span class="pre">pretty</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.pretty.__init__"><code class="docutils literal notranslate"><span class="pre">pretty.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.pretty.__ror__"><code class="docutils literal notranslate"><span class="pre">pretty.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.display"><code class="docutils literal notranslate"><span class="pre">display</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.display.__init__"><code class="docutils literal notranslate"><span class="pre">display.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.ktree.display.__ror__"><code class="docutils literal notranslate"><span class="pre">display.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.search"><code class="docutils literal notranslate"><span class="pre">search()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.ktree.walk"><code class="docutils literal notranslate"><span class="pre">walk()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.kxml">kxml module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kxml.node"><code class="docutils literal notranslate"><span class="pre">node</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.node.__ror__"><code class="docutils literal notranslate"><span class="pre">node.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kxml.maxDepth"><code class="docutils literal notranslate"><span class="pre">maxDepth</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.maxDepth.__init__"><code class="docutils literal notranslate"><span class="pre">maxDepth.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.maxDepth.__ror__"><code class="docutils literal notranslate"><span class="pre">maxDepth.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kxml.tags"><code class="docutils literal notranslate"><span class="pre">tags</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.tags.__init__"><code class="docutils literal notranslate"><span class="pre">tags.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.tags.__ror__"><code class="docutils literal notranslate"><span class="pre">tags.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kxml.pretty"><code class="docutils literal notranslate"><span class="pre">pretty</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.pretty.__init__"><code class="docutils literal notranslate"><span class="pre">pretty.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.pretty.__ror__"><code class="docutils literal notranslate"><span class="pre">pretty.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.kxml.display"><code class="docutils literal notranslate"><span class="pre">display</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.display.__init__"><code class="docutils literal notranslate"><span class="pre">display.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.kxml.display.__ror__"><code class="docutils literal notranslate"><span class="pre">display.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.lsext">lsext module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.sql"><code class="docutils literal notranslate"><span class="pre">sql</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sql.__init__"><code class="docutils literal notranslate"><span class="pre">sql.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sql.refresh"><code class="docutils literal notranslate"><span class="pre">sql.refresh()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sql.cursor"><code class="docutils literal notranslate"><span class="pre">sql.cursor()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sql.query"><code class="docutils literal notranslate"><span class="pre">sql.query()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sql.queryDesc"><code class="docutils literal notranslate"><span class="pre">sql.queryDesc()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sql.queryMany"><code class="docutils literal notranslate"><span class="pre">sql.queryMany()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sql.__ror__"><code class="docutils literal notranslate"><span class="pre">sql.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.sqldb"><code class="docutils literal notranslate"><span class="pre">sqldb</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqldb.__init__"><code class="docutils literal notranslate"><span class="pre">sqldb.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqldb.query"><code class="docutils literal notranslate"><span class="pre">sqldb.query()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqldb.queryDesc"><code class="docutils literal notranslate"><span class="pre">sqldb.queryDesc()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqldb.queryMany"><code class="docutils literal notranslate"><span class="pre">sqldb.queryMany()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqldb.__ror__"><code class="docutils literal notranslate"><span class="pre">sqldb.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.sqltable"><code class="docutils literal notranslate"><span class="pre">sqltable</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.__init__"><code class="docutils literal notranslate"><span class="pre">sqltable.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.cols"><code class="docutils literal notranslate"><span class="pre">sqltable.cols</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.insert"><code class="docutils literal notranslate"><span class="pre">sqltable.insert()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.insertBulk"><code class="docutils literal notranslate"><span class="pre">sqltable.insertBulk()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.info"><code class="docutils literal notranslate"><span class="pre">sqltable.info()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.query"><code class="docutils literal notranslate"><span class="pre">sqltable.query()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.queryDesc"><code class="docutils literal notranslate"><span class="pre">sqltable.queryDesc()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.queryMany"><code class="docutils literal notranslate"><span class="pre">sqltable.queryMany()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.select"><code class="docutils literal notranslate"><span class="pre">sqltable.select()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.__ror__"><code class="docutils literal notranslate"><span class="pre">sqltable.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.sqltable.lookup"><code class="docutils literal notranslate"><span class="pre">sqltable.lookup()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.sqlrow"><code class="docutils literal notranslate"><span class="pre">sqlrow</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.minio"><code class="docutils literal notranslate"><span class="pre">minio()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.s3"><code class="docutils literal notranslate"><span class="pre">s3</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.s3.__init__"><code class="docutils literal notranslate"><span class="pre">s3.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.s3bucket"><code class="docutils literal notranslate"><span class="pre">s3bucket</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.s3bucket.__init__"><code class="docutils literal notranslate"><span class="pre">s3bucket.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.s3bucket.upload"><code class="docutils literal notranslate"><span class="pre">s3bucket.upload()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.s3obj"><code class="docutils literal notranslate"><span class="pre">s3obj</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.s3obj.__init__"><code class="docutils literal notranslate"><span class="pre">s3obj.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.lsext.Redis"><code class="docutils literal notranslate"><span class="pre">Redis</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.lsext.Redis.__init__"><code class="docutils literal notranslate"><span class="pre">Redis.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.models">models module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.models.embed"><code class="docutils literal notranslate"><span class="pre">embed</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.embed.__init__"><code class="docutils literal notranslate"><span class="pre">embed.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.embed.__ror__"><code class="docutils literal notranslate"><span class="pre">embed.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.models.complete"><code class="docutils literal notranslate"><span class="pre">complete</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.complete.__init__"><code class="docutils literal notranslate"><span class="pre">complete.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.complete.__ror__"><code class="docutils literal notranslate"><span class="pre">complete.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.models.kmeans"><code class="docutils literal notranslate"><span class="pre">kmeans</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.kmeans.__init__"><code class="docutils literal notranslate"><span class="pre">kmeans.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.kmeans.__ror__"><code class="docutils literal notranslate"><span class="pre">kmeans.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.models.tsne"><code class="docutils literal notranslate"><span class="pre">tsne</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.tsne.__init__"><code class="docutils literal notranslate"><span class="pre">tsne.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.tsne.__ror__"><code class="docutils literal notranslate"><span class="pre">tsne.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.models.bloom"><code class="docutils literal notranslate"><span class="pre">bloom</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.bloom.__init__"><code class="docutils literal notranslate"><span class="pre">bloom.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.bloom.__ror__"><code class="docutils literal notranslate"><span class="pre">bloom.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.models.bloom.join"><code class="docutils literal notranslate"><span class="pre">bloom.join()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.modifier">modifier module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.applyS"><code class="docutils literal notranslate"><span class="pre">applyS</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyS.blurb"><code class="docutils literal notranslate"><span class="pre">applyS.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyS.__init__"><code class="docutils literal notranslate"><span class="pre">applyS.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyS.__ror__"><code class="docutils literal notranslate"><span class="pre">applyS.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyS.__invert__"><code class="docutils literal notranslate"><span class="pre">applyS.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.aS"><code class="docutils literal notranslate"><span class="pre">aS</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.iterDelay"><code class="docutils literal notranslate"><span class="pre">iterDelay</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.iterDelay.__init__"><code class="docutils literal notranslate"><span class="pre">iterDelay.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.iterDelay.__ror__"><code class="docutils literal notranslate"><span class="pre">iterDelay.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.apply"><code class="docutils literal notranslate"><span class="pre">apply</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.apply.blurb"><code class="docutils literal notranslate"><span class="pre">apply.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.apply.__init__"><code class="docutils literal notranslate"><span class="pre">apply.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.apply.__ror__"><code class="docutils literal notranslate"><span class="pre">apply.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.apply.__invert__"><code class="docutils literal notranslate"><span class="pre">apply.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.applyMp"><code class="docutils literal notranslate"><span class="pre">applyMp</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyMp.blurb"><code class="docutils literal notranslate"><span class="pre">applyMp.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyMp.__init__"><code class="docutils literal notranslate"><span class="pre">applyMp.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyMp.__ror__"><code class="docutils literal notranslate"><span class="pre">applyMp.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyMp.cat"><code class="docutils literal notranslate"><span class="pre">applyMp.cat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyMp.shared"><code class="docutils literal notranslate"><span class="pre">applyMp.shared()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyMp.__invert__"><code class="docutils literal notranslate"><span class="pre">applyMp.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyMp.clearPools"><code class="docutils literal notranslate"><span class="pre">applyMp.clearPools()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyMp.pools"><code class="docutils literal notranslate"><span class="pre">applyMp.pools()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.parallel"><code class="docutils literal notranslate"><span class="pre">parallel</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.applyCl"><code class="docutils literal notranslate"><span class="pre">applyCl</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.blurb"><code class="docutils literal notranslate"><span class="pre">applyCl.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.__init__"><code class="docutils literal notranslate"><span class="pre">applyCl.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.installSo"><code class="docutils literal notranslate"><span class="pre">applyCl.installSo()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.__ror__"><code class="docutils literal notranslate"><span class="pre">applyCl.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.__invert__"><code class="docutils literal notranslate"><span class="pre">applyCl.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.nodeIds"><code class="docutils literal notranslate"><span class="pre">applyCl.nodeIds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.nodeId"><code class="docutils literal notranslate"><span class="pre">applyCl.nodeId()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.meta"><code class="docutils literal notranslate"><span class="pre">applyCl.meta()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.cpu"><code class="docutils literal notranslate"><span class="pre">applyCl.cpu()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.aS"><code class="docutils literal notranslate"><span class="pre">applyCl.aS()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.cmd"><code class="docutils literal notranslate"><span class="pre">applyCl.cmd()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.lookup"><code class="docutils literal notranslate"><span class="pre">applyCl.lookup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.replicateFile"><code class="docutils literal notranslate"><span class="pre">applyCl.replicateFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.balanceFile"><code class="docutils literal notranslate"><span class="pre">applyCl.balanceFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.decommissionFile"><code class="docutils literal notranslate"><span class="pre">applyCl.decommissionFile()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.cat"><code class="docutils literal notranslate"><span class="pre">applyCl.cat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.replicateFolder"><code class="docutils literal notranslate"><span class="pre">applyCl.replicateFolder()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.balanceFolder"><code class="docutils literal notranslate"><span class="pre">applyCl.balanceFolder()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.decommissionFolder"><code class="docutils literal notranslate"><span class="pre">applyCl.decommissionFolder()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.pruneFolder"><code class="docutils literal notranslate"><span class="pre">applyCl.pruneFolder()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.diskScan"><code class="docutils literal notranslate"><span class="pre">applyCl.diskScan()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.balancedNodeIds"><code class="docutils literal notranslate"><span class="pre">applyCl.balancedNodeIds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.balancedCpus"><code class="docutils literal notranslate"><span class="pre">applyCl.balancedCpus()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.loadTest"><code class="docutils literal notranslate"><span class="pre">applyCl.loadTest()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.getFolderSize"><code class="docutils literal notranslate"><span class="pre">applyCl.getFolderSize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyCl.getFilesInFolder"><code class="docutils literal notranslate"><span class="pre">applyCl.getFilesInFolder()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.applyTh"><code class="docutils literal notranslate"><span class="pre">applyTh</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyTh.blurb"><code class="docutils literal notranslate"><span class="pre">applyTh.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyTh.__init__"><code class="docutils literal notranslate"><span class="pre">applyTh.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyTh.__ror__"><code class="docutils literal notranslate"><span class="pre">applyTh.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applyTh.__invert__"><code class="docutils literal notranslate"><span class="pre">applyTh.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.applySerial"><code class="docutils literal notranslate"><span class="pre">applySerial</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applySerial.blurb"><code class="docutils literal notranslate"><span class="pre">applySerial.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applySerial.__init__"><code class="docutils literal notranslate"><span class="pre">applySerial.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applySerial.__ror__"><code class="docutils literal notranslate"><span class="pre">applySerial.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.applySerial.__invert__"><code class="docutils literal notranslate"><span class="pre">applySerial.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.sort"><code class="docutils literal notranslate"><span class="pre">sort</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.sort.blurb"><code class="docutils literal notranslate"><span class="pre">sort.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.sort.__init__"><code class="docutils literal notranslate"><span class="pre">sort.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.sort.__ror__"><code class="docutils literal notranslate"><span class="pre">sort.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.sort.__invert__"><code class="docutils literal notranslate"><span class="pre">sort.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.sortF"><code class="docutils literal notranslate"><span class="pre">sortF</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.sortF.__init__"><code class="docutils literal notranslate"><span class="pre">sortF.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.sortF.__ror__"><code class="docutils literal notranslate"><span class="pre">sortF.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.sortF.__invert__"><code class="docutils literal notranslate"><span class="pre">sortF.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.consume"><code class="docutils literal notranslate"><span class="pre">consume</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.consume.blurb"><code class="docutils literal notranslate"><span class="pre">consume.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.consume.__init__"><code class="docutils literal notranslate"><span class="pre">consume.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.consume.__ror__"><code class="docutils literal notranslate"><span class="pre">consume.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.randomize"><code class="docutils literal notranslate"><span class="pre">randomize</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.randomize.blurb"><code class="docutils literal notranslate"><span class="pre">randomize.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.randomize.__init__"><code class="docutils literal notranslate"><span class="pre">randomize.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.randomize.__ror__"><code class="docutils literal notranslate"><span class="pre">randomize.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.stagger"><code class="docutils literal notranslate"><span class="pre">stagger</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.stagger.blurb"><code class="docutils literal notranslate"><span class="pre">stagger.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.stagger.__init__"><code class="docutils literal notranslate"><span class="pre">stagger.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.stagger.__ror__"><code class="docutils literal notranslate"><span class="pre">stagger.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.stagger.tv"><code class="docutils literal notranslate"><span class="pre">stagger.tv()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.op"><code class="docutils literal notranslate"><span class="pre">op</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.op.blurb"><code class="docutils literal notranslate"><span class="pre">op.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.op.__init__"><code class="docutils literal notranslate"><span class="pre">op.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.op.solidify"><code class="docutils literal notranslate"><span class="pre">op.solidify()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.op.__ror__"><code class="docutils literal notranslate"><span class="pre">op.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.op.op_hint"><code class="docutils literal notranslate"><span class="pre">op.op_hint()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.integrate"><code class="docutils literal notranslate"><span class="pre">integrate</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.integrate.blurb"><code class="docutils literal notranslate"><span class="pre">integrate.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.integrate.__init__"><code class="docutils literal notranslate"><span class="pre">integrate.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.integrate.__ror__"><code class="docutils literal notranslate"><span class="pre">integrate.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.roll"><code class="docutils literal notranslate"><span class="pre">roll</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.roll.blurb"><code class="docutils literal notranslate"><span class="pre">roll.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.roll.__init__"><code class="docutils literal notranslate"><span class="pre">roll.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.roll.__ror__"><code class="docutils literal notranslate"><span class="pre">roll.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.modifier.clamp"><code class="docutils literal notranslate"><span class="pre">clamp</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.clamp.blurb"><code class="docutils literal notranslate"><span class="pre">clamp.blurb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.clamp.__init__"><code class="docutils literal notranslate"><span class="pre">clamp.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.modifier.clamp.__ror__"><code class="docutils literal notranslate"><span class="pre">clamp.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#applycl-module">_applyCl module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli._applyCl.dummy"><code class="docutils literal notranslate"><span class="pre">dummy()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.nb">nb module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.nb.cells"><code class="docutils literal notranslate"><span class="pre">cells()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.nb.grabTags"><code class="docutils literal notranslate"><span class="pre">grabTags()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.nb.executeTags"><code class="docutils literal notranslate"><span class="pre">executeTags()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.nb.pretty"><code class="docutils literal notranslate"><span class="pre">pretty</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.nb.pretty.__init__"><code class="docutils literal notranslate"><span class="pre">pretty.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.nb.pretty.__ror__"><code class="docutils literal notranslate"><span class="pre">pretty.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.nb.execute"><code class="docutils literal notranslate"><span class="pre">execute</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.nb.execute.__init__"><code class="docutils literal notranslate"><span class="pre">execute.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.nb.execute.__ror__"><code class="docutils literal notranslate"><span class="pre">execute.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.nb.execute.rightAway"><code class="docutils literal notranslate"><span class="pre">execute.rightAway()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.output">output module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.stdout"><code class="docutils literal notranslate"><span class="pre">stdout</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.stdout.__init__"><code class="docutils literal notranslate"><span class="pre">stdout.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.stdout.__ror__"><code class="docutils literal notranslate"><span class="pre">stdout.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.tee"><code class="docutils literal notranslate"><span class="pre">tee</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.tee.__init__"><code class="docutils literal notranslate"><span class="pre">tee.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.tee.__ror__"><code class="docutils literal notranslate"><span class="pre">tee.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.tee.cr"><code class="docutils literal notranslate"><span class="pre">tee.cr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.tee.crt"><code class="docutils literal notranslate"><span class="pre">tee.crt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.tee.autoInc"><code class="docutils literal notranslate"><span class="pre">tee.autoInc()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.file"><code class="docutils literal notranslate"><span class="pre">file</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.file.__init__"><code class="docutils literal notranslate"><span class="pre">file.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.file.__ror__"><code class="docutils literal notranslate"><span class="pre">file.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.file.name"><code class="docutils literal notranslate"><span class="pre">file.name</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.pretty"><code class="docutils literal notranslate"><span class="pre">pretty</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.pretty.__init__"><code class="docutils literal notranslate"><span class="pre">pretty.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.pretty.__ror__"><code class="docutils literal notranslate"><span class="pre">pretty.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.pretty.__invert__"><code class="docutils literal notranslate"><span class="pre">pretty.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.unpretty"><code class="docutils literal notranslate"><span class="pre">unpretty</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.unpretty.__init__"><code class="docutils literal notranslate"><span class="pre">unpretty.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.unpretty.__ror__"><code class="docutils literal notranslate"><span class="pre">unpretty.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.display"><code class="docutils literal notranslate"><span class="pre">display()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.headOut"><code class="docutils literal notranslate"><span class="pre">headOut()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.intercept"><code class="docutils literal notranslate"><span class="pre">intercept</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.intercept.__init__"><code class="docutils literal notranslate"><span class="pre">intercept.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.intercept.__ror__"><code class="docutils literal notranslate"><span class="pre">intercept.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.output.plotImgs"><code class="docutils literal notranslate"><span class="pre">plotImgs</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.plotImgs.__init__"><code class="docutils literal notranslate"><span class="pre">plotImgs.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.output.plotImgs.__ror__"><code class="docutils literal notranslate"><span class="pre">plotImgs.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.sam">sam module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.sam.cat"><code class="docutils literal notranslate"><span class="pre">cat()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.sam.header"><code class="docutils literal notranslate"><span class="pre">header</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.sam.header.__init__"><code class="docutils literal notranslate"><span class="pre">header.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.sam.header.__ror__"><code class="docutils literal notranslate"><span class="pre">header.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.sam.flag"><code class="docutils literal notranslate"><span class="pre">flag</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.sam.flag.__init__"><code class="docutils literal notranslate"><span class="pre">flag.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.structural">structural module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.joinStreamsRandom"><code class="docutils literal notranslate"><span class="pre">joinStreamsRandom</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.joinStreamsRandom.__init__"><code class="docutils literal notranslate"><span class="pre">joinStreamsRandom.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.joinStreamsRandom.__ror__"><code class="docutils literal notranslate"><span class="pre">joinStreamsRandom.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.transpose"><code class="docutils literal notranslate"><span class="pre">transpose</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.transpose.__init__"><code class="docutils literal notranslate"><span class="pre">transpose.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.transpose.__ror__"><code class="docutils literal notranslate"><span class="pre">transpose.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.transpose.fill"><code class="docutils literal notranslate"><span class="pre">transpose.fill()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.transpose.wrap"><code class="docutils literal notranslate"><span class="pre">transpose.wrap()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.T"><code class="docutils literal notranslate"><span class="pre">T</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.reshape"><code class="docutils literal notranslate"><span class="pre">reshape</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.reshape.__init__"><code class="docutils literal notranslate"><span class="pre">reshape.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.reshape.__ror__"><code class="docutils literal notranslate"><span class="pre">reshape.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.insert"><code class="docutils literal notranslate"><span class="pre">insert</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.insert.__init__"><code class="docutils literal notranslate"><span class="pre">insert.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.insert.__ror__"><code class="docutils literal notranslate"><span class="pre">insert.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.splitW"><code class="docutils literal notranslate"><span class="pre">splitW</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.splitW.__init__"><code class="docutils literal notranslate"><span class="pre">splitW.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.splitW.__ror__"><code class="docutils literal notranslate"><span class="pre">splitW.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.splitC"><code class="docutils literal notranslate"><span class="pre">splitC</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.splitC.__init__"><code class="docutils literal notranslate"><span class="pre">splitC.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.splitC.__ror__"><code class="docutils literal notranslate"><span class="pre">splitC.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.joinStreams"><code class="docutils literal notranslate"><span class="pre">joinStreams</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.joinStreams.__init__"><code class="docutils literal notranslate"><span class="pre">joinStreams.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.joinStreams.__ror__"><code class="docutils literal notranslate"><span class="pre">joinStreams.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.joinSt"><code class="docutils literal notranslate"><span class="pre">joinSt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.activeSamples"><code class="docutils literal notranslate"><span class="pre">activeSamples</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.activeSamples.__init__"><code class="docutils literal notranslate"><span class="pre">activeSamples.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.activeSamples.append"><code class="docutils literal notranslate"><span class="pre">activeSamples.append()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.activeSamples.extend"><code class="docutils literal notranslate"><span class="pre">activeSamples.extend()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.table"><code class="docutils literal notranslate"><span class="pre">table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.batched"><code class="docutils literal notranslate"><span class="pre">batched</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.batched.__init__"><code class="docutils literal notranslate"><span class="pre">batched.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.batched.__ror__"><code class="docutils literal notranslate"><span class="pre">batched.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.batchedTrigger"><code class="docutils literal notranslate"><span class="pre">batchedTrigger</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.batchedTrigger.__init__"><code class="docutils literal notranslate"><span class="pre">batchedTrigger.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.batchedTrigger.__invert__"><code class="docutils literal notranslate"><span class="pre">batchedTrigger.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.batchedTrigger.__ror__"><code class="docutils literal notranslate"><span class="pre">batchedTrigger.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.window"><code class="docutils literal notranslate"><span class="pre">window</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.window.__init__"><code class="docutils literal notranslate"><span class="pre">window.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.window.__ror__"><code class="docutils literal notranslate"><span class="pre">window.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.groupBy"><code class="docutils literal notranslate"><span class="pre">groupBy</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.groupBy.__init__"><code class="docutils literal notranslate"><span class="pre">groupBy.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.groupBy.__ror__"><code class="docutils literal notranslate"><span class="pre">groupBy.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.ungroup"><code class="docutils literal notranslate"><span class="pre">ungroup</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.ungroup.__init__"><code class="docutils literal notranslate"><span class="pre">ungroup.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.ungroup.__ror__"><code class="docutils literal notranslate"><span class="pre">ungroup.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.insertColumn"><code class="docutils literal notranslate"><span class="pre">insertColumn</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.insertColumn.__init__"><code class="docutils literal notranslate"><span class="pre">insertColumn.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.insertColumn.__ror__"><code class="docutils literal notranslate"><span class="pre">insertColumn.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.insertIdColumn"><code class="docutils literal notranslate"><span class="pre">insertIdColumn</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.insertIdColumn.__init__"><code class="docutils literal notranslate"><span class="pre">insertIdColumn.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.insertIdColumn.__ror__"><code class="docutils literal notranslate"><span class="pre">insertIdColumn.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.insId"><code class="docutils literal notranslate"><span class="pre">insId</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.unsqueeze"><code class="docutils literal notranslate"><span class="pre">unsqueeze()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.count"><code class="docutils literal notranslate"><span class="pre">count</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.count.__init__"><code class="docutils literal notranslate"><span class="pre">count.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.count.__ror__"><code class="docutils literal notranslate"><span class="pre">count.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.count.join"><code class="docutils literal notranslate"><span class="pre">count.join()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.hist"><code class="docutils literal notranslate"><span class="pre">hist</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.hist.__init__"><code class="docutils literal notranslate"><span class="pre">hist.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.hist.__ror__"><code class="docutils literal notranslate"><span class="pre">hist.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.hist.join"><code class="docutils literal notranslate"><span class="pre">hist.join()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.permute"><code class="docutils literal notranslate"><span class="pre">permute</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.permute.__init__"><code class="docutils literal notranslate"><span class="pre">permute.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.permute.__ror__"><code class="docutils literal notranslate"><span class="pre">permute.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.AA_"><code class="docutils literal notranslate"><span class="pre">AA_</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.AA_.__init__"><code class="docutils literal notranslate"><span class="pre">AA_.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.AA_.__ror__"><code class="docutils literal notranslate"><span class="pre">AA_.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.peek"><code class="docutils literal notranslate"><span class="pre">peek</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.peek.__init__"><code class="docutils literal notranslate"><span class="pre">peek.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.peek.__ror__"><code class="docutils literal notranslate"><span class="pre">peek.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.peekF"><code class="docutils literal notranslate"><span class="pre">peekF</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.peekF.__init__"><code class="docutils literal notranslate"><span class="pre">peekF.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.peekF.__ror__"><code class="docutils literal notranslate"><span class="pre">peekF.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.repeat"><code class="docutils literal notranslate"><span class="pre">repeat</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.repeat.__init__"><code class="docutils literal notranslate"><span class="pre">repeat.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.repeat.__ror__"><code class="docutils literal notranslate"><span class="pre">repeat.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.repeatF"><code class="docutils literal notranslate"><span class="pre">repeatF()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.repeatFrom"><code class="docutils literal notranslate"><span class="pre">repeatFrom</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.repeatFrom.__init__"><code class="docutils literal notranslate"><span class="pre">repeatFrom.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.repeatFrom.__ror__"><code class="docutils literal notranslate"><span class="pre">repeatFrom.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.oneHot"><code class="docutils literal notranslate"><span class="pre">oneHot</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.oneHot.__init__"><code class="docutils literal notranslate"><span class="pre">oneHot.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.oneHot.__ror__"><code class="docutils literal notranslate"><span class="pre">oneHot.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.structural.latch"><code class="docutils literal notranslate"><span class="pre">latch</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.latch.__init__"><code class="docutils literal notranslate"><span class="pre">latch.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.structural.latch.__ror__"><code class="docutils literal notranslate"><span class="pre">latch.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.trace">trace module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.trace.trace"><code class="docutils literal notranslate"><span class="pre">trace</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.trace.trace.last"><code class="docutils literal notranslate"><span class="pre">trace.last</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.trace.trace.__init__"><code class="docutils literal notranslate"><span class="pre">trace.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.utils">utils module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.size"><code class="docutils literal notranslate"><span class="pre">size</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.size.__init__"><code class="docutils literal notranslate"><span class="pre">size.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.size.__ror__"><code class="docutils literal notranslate"><span class="pre">size.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.shape"><code class="docutils literal notranslate"><span class="pre">shape</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.item"><code class="docutils literal notranslate"><span class="pre">item</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.item.__init__"><code class="docutils literal notranslate"><span class="pre">item.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.item.__ror__"><code class="docutils literal notranslate"><span class="pre">item.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.rItem"><code class="docutils literal notranslate"><span class="pre">rItem</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.rItem.__init__"><code class="docutils literal notranslate"><span class="pre">rItem.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.rItem.__ror__"><code class="docutils literal notranslate"><span class="pre">rItem.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.iden"><code class="docutils literal notranslate"><span class="pre">iden</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.iden.__init__"><code class="docutils literal notranslate"><span class="pre">iden.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.iden.__ror__"><code class="docutils literal notranslate"><span class="pre">iden.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.join"><code class="docutils literal notranslate"><span class="pre">join</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.join.__init__"><code class="docutils literal notranslate"><span class="pre">join.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.join.__ror__"><code class="docutils literal notranslate"><span class="pre">join.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.wrapList"><code class="docutils literal notranslate"><span class="pre">wrapList</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.wrapList.__init__"><code class="docutils literal notranslate"><span class="pre">wrapList.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.wrapList.__ror__"><code class="docutils literal notranslate"><span class="pre">wrapList.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.equals"><code class="docutils literal notranslate"><span class="pre">equals</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.equals.__init__"><code class="docutils literal notranslate"><span class="pre">equals.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.equals.__ror__"><code class="docutils literal notranslate"><span class="pre">equals.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.reverse"><code class="docutils literal notranslate"><span class="pre">reverse</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.reverse.__init__"><code class="docutils literal notranslate"><span class="pre">reverse.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.reverse.__ror__"><code class="docutils literal notranslate"><span class="pre">reverse.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.ignore"><code class="docutils literal notranslate"><span class="pre">ignore</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.ignore.__init__"><code class="docutils literal notranslate"><span class="pre">ignore.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.ignore.__ror__"><code class="docutils literal notranslate"><span class="pre">ignore.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.rateLimit"><code class="docutils literal notranslate"><span class="pre">rateLimit</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.rateLimit.__init__"><code class="docutils literal notranslate"><span class="pre">rateLimit.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.rateLimit.__ror__"><code class="docutils literal notranslate"><span class="pre">rateLimit.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.rateLimit.cpu"><code class="docutils literal notranslate"><span class="pre">rateLimit.cpu()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.timeLimit"><code class="docutils literal notranslate"><span class="pre">timeLimit</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.timeLimit.__init__"><code class="docutils literal notranslate"><span class="pre">timeLimit.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.timeLimit.__ror__"><code class="docutils literal notranslate"><span class="pre">timeLimit.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.tab"><code class="docutils literal notranslate"><span class="pre">tab()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.indent"><code class="docutils literal notranslate"><span class="pre">indent()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.clipboard"><code class="docutils literal notranslate"><span class="pre">clipboard</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.clipboard.__init__"><code class="docutils literal notranslate"><span class="pre">clipboard.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.clipboard.__ror__"><code class="docutils literal notranslate"><span class="pre">clipboard.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.deref"><code class="docutils literal notranslate"><span class="pre">deref</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.deref.__init__"><code class="docutils literal notranslate"><span class="pre">deref.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.deref.__ror__"><code class="docutils literal notranslate"><span class="pre">deref.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.deref.__invert__"><code class="docutils literal notranslate"><span class="pre">deref.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.deref.js"><code class="docutils literal notranslate"><span class="pre">deref.js()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.bindec"><code class="docutils literal notranslate"><span class="pre">bindec</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.bindec.__init__"><code class="docutils literal notranslate"><span class="pre">bindec.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.bindec.__ror__"><code class="docutils literal notranslate"><span class="pre">bindec.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.smooth"><code class="docutils literal notranslate"><span class="pre">smooth</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.smooth.__init__"><code class="docutils literal notranslate"><span class="pre">smooth.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.smooth.__ror__"><code class="docutils literal notranslate"><span class="pre">smooth.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.disassemble"><code class="docutils literal notranslate"><span class="pre">disassemble()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.tree"><code class="docutils literal notranslate"><span class="pre">tree()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.lookup"><code class="docutils literal notranslate"><span class="pre">lookup</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.lookup.__init__"><code class="docutils literal notranslate"><span class="pre">lookup.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.lookup.__ror__"><code class="docutils literal notranslate"><span class="pre">lookup.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.lookupRange"><code class="docutils literal notranslate"><span class="pre">lookupRange</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.lookupRange.__init__"><code class="docutils literal notranslate"><span class="pre">lookupRange.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.lookupRange.__ror__"><code class="docutils literal notranslate"><span class="pre">lookupRange.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.getitems"><code class="docutils literal notranslate"><span class="pre">getitems</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.getitems.__init__"><code class="docutils literal notranslate"><span class="pre">getitems.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.getitems.__ror__"><code class="docutils literal notranslate"><span class="pre">getitems.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.backup"><code class="docutils literal notranslate"><span class="pre">backup</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.backup.__init__"><code class="docutils literal notranslate"><span class="pre">backup.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.backup.__ror__"><code class="docutils literal notranslate"><span class="pre">backup.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.backup.restore"><code class="docutils literal notranslate"><span class="pre">backup.restore()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.sketch"><code class="docutils literal notranslate"><span class="pre">sketch</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.sketch.__init__"><code class="docutils literal notranslate"><span class="pre">sketch.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.sketch.__ror__"><code class="docutils literal notranslate"><span class="pre">sketch.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.syncStepper"><code class="docutils literal notranslate"><span class="pre">syncStepper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.syncStepper.__init__"><code class="docutils literal notranslate"><span class="pre">syncStepper.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.syncStepper.__ror__"><code class="docutils literal notranslate"><span class="pre">syncStepper.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.zeroes"><code class="docutils literal notranslate"><span class="pre">zeroes</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.zeroes.__init__"><code class="docutils literal notranslate"><span class="pre">zeroes.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.zeroes.__invert__"><code class="docutils literal notranslate"><span class="pre">zeroes.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.zeroes.__ror__"><code class="docutils literal notranslate"><span class="pre">zeroes.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.normalize"><code class="docutils literal notranslate"><span class="pre">normalize</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.normalize.__init__"><code class="docutils literal notranslate"><span class="pre">normalize.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.normalize.__ror__"><code class="docutils literal notranslate"><span class="pre">normalize.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.utils.branch"><code class="docutils literal notranslate"><span class="pre">branch</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.branch.__init__"><code class="docutils literal notranslate"><span class="pre">branch.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.utils.branch.__ror__"><code class="docutils literal notranslate"><span class="pre">branch.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.typehint">typehint module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tBase"><code class="docutils literal notranslate"><span class="pre">tBase</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tBase.check"><code class="docutils literal notranslate"><span class="pre">tBase.check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tBase.item"><code class="docutils literal notranslate"><span class="pre">tBase.item()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tBase.expand"><code class="docutils literal notranslate"><span class="pre">tBase.expand()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tAny"><code class="docutils literal notranslate"><span class="pre">tAny</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tAny.check"><code class="docutils literal notranslate"><span class="pre">tAny.check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tAny.item"><code class="docutils literal notranslate"><span class="pre">tAny.item()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tList"><code class="docutils literal notranslate"><span class="pre">tList</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tList.check"><code class="docutils literal notranslate"><span class="pre">tList.check()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tIter"><code class="docutils literal notranslate"><span class="pre">tIter</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tIter.check"><code class="docutils literal notranslate"><span class="pre">tIter.check()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tSet"><code class="docutils literal notranslate"><span class="pre">tSet</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tSet.check"><code class="docutils literal notranslate"><span class="pre">tSet.check()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tCollection"><code class="docutils literal notranslate"><span class="pre">tCollection</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tCollection.__init__"><code class="docutils literal notranslate"><span class="pre">tCollection.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tCollection.check"><code class="docutils literal notranslate"><span class="pre">tCollection.check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tCollection.reduce"><code class="docutils literal notranslate"><span class="pre">tCollection.reduce()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tCollection.item"><code class="docutils literal notranslate"><span class="pre">tCollection.item()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tCollection.expand"><code class="docutils literal notranslate"><span class="pre">tCollection.expand()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tExpand"><code class="docutils literal notranslate"><span class="pre">tExpand</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tExpand.__init__"><code class="docutils literal notranslate"><span class="pre">tExpand.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tExpand.check"><code class="docutils literal notranslate"><span class="pre">tExpand.check()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tNpArray"><code class="docutils literal notranslate"><span class="pre">tNpArray</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tNpArray.__init__"><code class="docutils literal notranslate"><span class="pre">tNpArray.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tNpArray.check"><code class="docutils literal notranslate"><span class="pre">tNpArray.check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tNpArray.item"><code class="docutils literal notranslate"><span class="pre">tNpArray.item()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tNpArray.expand"><code class="docutils literal notranslate"><span class="pre">tNpArray.expand()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tTensor"><code class="docutils literal notranslate"><span class="pre">tTensor</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tTensor.__init__"><code class="docutils literal notranslate"><span class="pre">tTensor.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tTensor.check"><code class="docutils literal notranslate"><span class="pre">tTensor.check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tTensor.item"><code class="docutils literal notranslate"><span class="pre">tTensor.item()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tTensor.expand"><code class="docutils literal notranslate"><span class="pre">tTensor.expand()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.inferType"><code class="docutils literal notranslate"><span class="pre">inferType()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.TypeHintException"><code class="docutils literal notranslate"><span class="pre">TypeHintException</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tLowest"><code class="docutils literal notranslate"><span class="pre">tLowest()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tCheck"><code class="docutils literal notranslate"><span class="pre">tCheck</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tCheck.__init__"><code class="docutils literal notranslate"><span class="pre">tCheck.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tCheck.__ror__"><code class="docutils literal notranslate"><span class="pre">tCheck.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.typehint.tOpt"><code class="docutils literal notranslate"><span class="pre">tOpt</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tOpt.n"><code class="docutils literal notranslate"><span class="pre">tOpt.n</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tOpt.__init__"><code class="docutils literal notranslate"><span class="pre">tOpt.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tOpt.addPass"><code class="docutils literal notranslate"><span class="pre">tOpt.addPass()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tOpt.clearPasses"><code class="docutils literal notranslate"><span class="pre">tOpt.clearPasses()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tOpt.out"><code class="docutils literal notranslate"><span class="pre">tOpt.out</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tOpt.optCli"><code class="docutils literal notranslate"><span class="pre">tOpt.optCli</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cli.typehint.tOpt.__ror__"><code class="docutils literal notranslate"><span class="pre">tOpt.__ror__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-k1lib.cli.optimizations">optimizations module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cli.optimizations.dummy"><code class="docutils literal notranslate"><span class="pre">dummy()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#elsewhere-in-the-library">Elsewhere in the library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../callbacks/index.html">k1lib.callbacks module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../k1a.html">k1lib._k1a module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k1ui.html">k1lib.k1ui module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eqn.html">k1lib.eqn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fmt.html">k1lib.fmt module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graphEqn.html">k1lib.graphEqn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../imports.html">k1lib.imports module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mo.html">k1lib.mo module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kast.html">k1lib.kast module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kcom.html">k1lib.kcom module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knn.html">k1lib.knn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kop.html">k1lib.kop module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kws.html">k1lib.kws module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../p5.html">k1lib.p5 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html">k1lib.schedule module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../selector.html">k1lib.selector module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../selen.html">k1lib.selen module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serpent.html">k1lib.serpent module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serve.html">k1lib.serve module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../viz.html">k1lib.viz module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zircon.html">k1lib.zircon module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../monkey.html">Monkey patched classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelogs.html">Changelogs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">k1lib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">k1lib.cli module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cli/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="module-k1lib.cli"></span><section id="k1lib-cli-module">
<h1>k1lib.cli module<a class="headerlink" href="#k1lib-cli-module" title="Permalink to this heading"></a></h1>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this heading"></a></h2>
<p>To install the library, run this in a terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install k1lib[all]</span>
</pre></div>
</div>
<p>If you don’t want to install extra dependencies (not recommended), you can do this instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install k1lib</span>
</pre></div>
</div>
<p>To use it in a python file or a notebook, do this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Because there are a lot of functions with common names, you may have custom functions or
classes that have the same name, which will override the functions in the library. If you
want to use them, you can use <code class="docutils literal notranslate"><span class="pre">cli.sort()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">sort()</span></code> for example.</p>
</section>
<section id="intro">
<h2>Intro<a class="headerlink" href="#intro" title="Permalink to this heading"></a></h2>
<p>The main idea of this package is to emulate the terminal (hence “cli”, or “command
line interface”), but doing all of that inside Python itself. So this bash statement:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cat file.txt | head -5 &gt; headerFile.txt</span>
</pre></div>
</div>
<p>Turns into this statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;file.txt&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;headerFile.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s step back a little bit. In the bash statement, “cat” and “head” are actual programs
accessible through the terminal, and “|” will pipe the output of 1 program into another
program. <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">file.txt</span></code> will read a file and returns a list of all rows in it, which
will then be piped into <code class="docutils literal notranslate"><span class="pre">head</span> <span class="pre">-5</span></code>, which will only return the first 5 lines. Finally,
<code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">headerFile.txt</span></code> will redirect the output to the “headerFile.txt” file. See this video
for more: <a class="reference external" href="https://www.youtube.com/watch?v=bKzonnwoR2I">https://www.youtube.com/watch?v=bKzonnwoR2I</a></p>
<p>On the Python side, “cat”, “head” and “file” are Python classes extended from <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a>.
<code class="docutils literal notranslate"><span class="pre">cat(&quot;file.txt&quot;)</span></code> will read the file line by line, and return a list of all of them. <code class="docutils literal notranslate"><span class="pre">head(5)</span></code>
will take in that list and return a list with only the first 5 lines. Finally, <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">file(&quot;headerFile.txt&quot;)</span></code>
will take that in and writes it to a file.</p>
<p>You can even integrate with existing shell commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;grep *.so&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, “ls” will list out files inside the home directory, then pipes it into regular
grep on linux, which is then piped back into Python as a list of strings. So it’s
equivalent to this bash statement:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ls | grep *.so</span>
</pre></div>
</div>
<p>Let’s see a really basic example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># just a normal function</span>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
<span class="c1"># returns 9, no surprises here</span>
<span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># f is now a cli tool</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># returns 9, demonstrating that they act like normal functions</span>
<span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># returns 9, demonstrating that you can also pipe into them</span>
<span class="mi">3</span> <span class="o">|</span> <span class="n">f</span>
</pre></div>
</div>
<p>Here, <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a> is pretty much the simplest cli available. It just makes whatever
function you give it pipe-able, as you can’t quite pipe things to lambda functions in vanilla Python.</p>
<p>You can think of the flow of these clis in terms of 2 phases. 1 is configuring what you
want the cli to do, and 2 is actually executing it. Let’s say you want to take a list
of numbers and take the square of them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># configuration stage. You provide a function to `apply` to tell it what function to apply to each element in the list, kinda like Python&#39;s &quot;map&quot; function</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># initialize the input</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># execution stage, normal style, returns [0, 1, 4, 9, 16]</span>
<span class="nb">list</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1"># execution stage, pipe style, returns [0, 1, 4, 9, 16]</span>
<span class="nb">list</span><span class="p">(</span><span class="n">x</span> <span class="o">|</span> <span class="n">f</span><span class="p">)</span>

<span class="c1"># typical usage: combining configuration stage and execution stage, returns [0, 1, 4, 9, 16]</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
<span class="c1"># refactor converting to list so that it uses pipes, returns [0, 1, 4, 9, 16]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
<p>You may wonder why do we have to turn it into a list. That’s because all cli tools execute
things lazily, so they will return iterators, instead of lists. Here’s how iterators work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span> <span class="c1"># this is a generator, a special type of iterator. It generates elements</span>
    <span class="k">yield</span> <span class="mi">3</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;after yielding 3&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="k">yield</span> <span class="mi">5</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;in for loop:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<p>It will print this out:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>in for loop: 3
after yielding 3
in for loop: 2
in for loop: 5
</pre></div>
</div>
<p>So, iterators feels like lists. In fact, a list is an iterator, <code class="docutils literal notranslate"><span class="pre">range(5)</span></code>, numpy arrays
and strings are also iterators. Basically anything that you can iterate through is an
iterator. The above iterator is a little special, as it’s specifically called a “generator”.
They are actually a really cool aspect of Python, in terms of they execute code lazily, meaning
<code class="docutils literal notranslate"><span class="pre">gen()</span></code> won’t run all the way when you call it. In fact, it doesn’t run at all. Only once you
request new elements when trying to iterate over it will the function run.</p>
<p>All cli tools utilize this fact, in terms of they will not actually execute anything unless you
force them to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns &quot;&lt;generator object apply.__ror__.&lt;locals&gt;.&lt;genexpr&gt; at 0x7f7ae48e4d60&gt;&quot;</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># you can iterate through it directly:</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="c1"># returns [0, 1, 4, 9, 16], in case you want it in a list</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
<span class="c1"># returns [0, 1, 4, 9, 16], demonstrating deref</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>In the first line, it returns a generator, instead of a normal list, as nothing has actually been
executed. You can still iterate through generators using for loops as usual, or you can convert it
into a list. When you get more advanced, and have iterators nested within iterators within iterators,
you can use <a class="reference internal" href="#k1lib.cli.utils.deref" title="k1lib.cli.utils.deref"><code class="xref py py-class docutils literal notranslate"><span class="pre">deref</span></code></a> to turn all of them into lists.</p>
<p>Also, a lot of these tools (like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a> and <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a>)
sometimes assume that we are operating on a table. So this table:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>col1</p></th>
<th class="head"><p>col2</p></th>
<th class="head"><p>col3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>2</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>5</p></td>
<td><p>6</p></td>
</tr>
</tbody>
</table>
<p>Is equivalent to this list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="s2">&quot;col3&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you’re not an advanced user, just skip this warning.</p>
<p>All cli tools should work fine with <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> and <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.core.series.Series</span></code></a>,
but k1lib actually modifies Numpy arrays and Pandas series deep down for it to work.
This means that you can still do normal bitwise or with a numpy float value, and
they work fine in all regression tests that I have, but you might encounter strange bugs.
You can disable it manually by changing <a class="reference internal" href="../base.html#k1lib.settings" title="k1lib.settings"><code class="xref py py-attr docutils literal notranslate"><span class="pre">settings</span></code></a>.startup.or_patch like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">k1lib</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">startup</span><span class="o">.</span><span class="n">or_patch</span><span class="o">.</span><span class="n">numpy</span> <span class="o">=</span> <span class="kc">False</span>
<span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>If you choose to do this, you’ll have to be careful and use these workarounds:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>                  <span class="c1"># returns (2, 3, 5), works fine</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>              <span class="c1"># will not work, returns weird numpy array of shape (2, 3, 5)</span>
<span class="n">shape</span><span class="p">()(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>               <span class="c1"># returns (2, 3, 5), mitigation strategy #1</span>
<span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span> <span class="o">|</span> <span class="p">(</span><span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">())</span> <span class="c1"># returns (2, 3, 5), mitigation strategy #2</span>
</pre></div>
</div>
<p>Again, please note that you only need to do these workarounds if you choose to turn off C-type
modifications. If you keep things by default, then all examples above should work just fine.</p>
</div>
<p>All cli-related settings are at <a class="reference internal" href="../base.html#k1lib.settings" title="k1lib.settings"><code class="xref py py-attr docutils literal notranslate"><span class="pre">settings</span></code></a>.cli.</p>
</section>
<section id="argument-expansion">
<h2>Argument expansion<a class="headerlink" href="#argument-expansion" title="Permalink to this heading"></a></h2>
<p>I’d like to quickly mention the argument expansion motif that’s prominent in some cli tools. Check out this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># returns 8, long version, not descriptive elements (&quot;a[0]&quot; and &quot;a[1]&quot;)</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="c1"># returns 8, short version, descriptive elements (&quot;x&quot; and &quot;y&quot;)</span>

<span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">]]</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># returns [8, 9], long version</span>
<span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">]]</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># returns [8, 9], short version</span>
</pre></div>
</div>
<p>Here, the tilde operator (“~”, officially called “invert” in Python) used on <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a> and
<a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a> means that the input object/iterator will be expanded so that it fills all
available arguments. This is a small quality-of-life feature, but makes a big difference, as parameters
can now be named separately and nicely (“x” and “y”, which can convey that this is a coordinate of some
sort, instead of “a[0]” and “a[1]”, which conveys nothing).</p>
</section>
<section id="inverting-conditions">
<h2>Inverting conditions<a class="headerlink" href="#inverting-conditions" title="Permalink to this heading"></a></h2>
<p>The tilde operator does not always mean expanding the arguments though. Sometimes it’s used for actually
inverting the functionality of some clis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span>  <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># returns [0, 2, 4]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># returns [1, 3]</span>

<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mf">5.5</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">instanceOf</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># returns [5.5, &quot;text&quot;]</span>
</pre></div>
</div>
</section>
<section id="capturing-operators">
<h2>Capturing operators<a class="headerlink" href="#capturing-operators" title="Permalink to this heading"></a></h2>
<p>Some clis have the ability to “capture” the behavior of other clis and modify them on the fly. For
example, let’s see tryout(), which catches errors in the pipeline and returns a default value if
an error is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;a3&quot;</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="c1"># returns 8, because int(&quot;a3&quot;) will throws an error, which will be caught, and the pipeline reduces down to 4*2</span>
<span class="s2">&quot;3&quot;</span>  <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="c1"># returns 6, because int(&quot;3&quot;) will not throw an error, and the pipeline effectively reduces down to int(&quot;3&quot;)*2</span>
<span class="s2">&quot;3&quot;</span>  <span class="o">|</span>  <span class="n">tryout</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="c1"># throws an error, because tryout() doesn&#39;t capture anything</span>
</pre></div>
</div>
<p>Just a side note, op() will record all operations done on it, and it will replay those operations
on anything that’s piped into it.</p>
<p>In the first line, <code class="docutils literal notranslate"><span class="pre">tryout()</span> <span class="pre">|</span> <span class="pre">aS(int)</span></code> will be executed first, which will lead to tryout()
capturing all of the clis behind it and injecting in a try-catch code block to wrap all of them
together. In the third line, it doesn’t work because <code class="docutils literal notranslate"><span class="pre">&quot;3&quot;</span> <span class="pre">|</span> <span class="pre">tryout(4)</span></code> is executed first,
but here, tryout() doesn’t have the chance to capture the clis behind it, so it can’t inject
a try-catch block around them. This also means that in the 1st and 2nd line, the final multify-by-2
step is not caught, because tryout() is bounded by the parentheses. If you’re composing this
inside of another cli, then the scope is bounded by the outside cli:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span> <span class="n">tryout</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [0, 1, 4, 9, 16]. tryout() will capture op()**2</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">((</span><span class="n">tryout</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [0, 1, 4, 9, 16], exactly the same as before, demonstrating that you don&#39;t have to wrap tryout() around another pair of braces</span>
</pre></div>
</div>
</section>
<section id="cli-composition">
<h2>Cli composition<a class="headerlink" href="#cli-composition" title="Permalink to this heading"></a></h2>
<p>One of the very powerful things about this workflow is that you can easily combine cli tools together,
to reach unfathomable levels of complexity while using very little code and still remain relatively readable.
For example, this is an <a class="reference external" href="https://mlexps.com/imagenet/8-vit/">image dataloader</a> built pretty much from
scratch, but with full functionality comparable to PyTorch’s dataloaders:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">base</span> <span class="o">=</span> <span class="s2">&quot;~/ssd/data/imagenet/set1/192px&quot;</span>
<span class="n">idxToCat</span> <span class="o">=</span> <span class="n">base</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">insertIdColumn</span><span class="p">()</span> <span class="o">|</span> <span class="n">toDict</span><span class="p">()</span>
<span class="n">catToIdx</span> <span class="o">=</span> <span class="n">idxToCat</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="o">|</span> <span class="n">permute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">toDict</span><span class="p">()</span>
<span class="c1"># stage 1, (train/valid, classes, samples (url of img))</span>
<span class="n">st1</span> <span class="o">=</span> <span class="n">base</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">ls</span><span class="p">()</span> <span class="o">|</span> <span class="n">splitW</span><span class="p">())</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">k1</span><span class="o">.</span><span class="n">Wrapper</span><span class="p">)</span>
<span class="c1"># stage 2, (train/valid, classes, samples, [img, class])</span>
<span class="n">st2</span> <span class="o">=</span> <span class="n">st1</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span> <span class="n">catToIdx</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">]]])</span> <span class="o">|</span> <span class="n">repeatFrom</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">aS</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">Resize</span><span class="p">(</span><span class="mi">192</span><span class="p">))</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">AutoAugment</span><span class="p">())</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">k1</span><span class="o">.</span><span class="n">Wrapper</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">dataF</span><span class="p">(</span><span class="n">bs</span><span class="p">):</span> <span class="k">return</span> <span class="n">st2</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">repeatFrom</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">joinStreamsRandom</span><span class="p">()</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="n">bs</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">stack</span><span class="p">)</span> <span class="o">+</span> <span class="n">toTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">long</span><span class="p">)))</span> <span class="o">|</span> <span class="n">stagger</span><span class="o">.</span><span class="n">tv</span><span class="p">(</span><span class="mi">10000</span><span class="o">/</span><span class="n">bs</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
<p>These 6 lines of code will read from a directory, grabs all images from the first 80 categories, splits
them into train and valid sets. Then it will extend the data infinitely (so that we never run out of batches
to train), load the images on multiple worker processes, do augmentations on them, renormalize them, batch
them up, stack them together into a tensor, and split batches into multiple epochs.</p>
<p>All of that, from scratch, where you’re in control of every detail, operating in 7 dimensions, in multiple
processes, in just 6 lines of code. This is just so ridiculously powerful that it boggles my mind every day.
Yes, you can argue that it’s not clear what’s going on, but for a person that is already familiar with them
like I do, seeing exactly how data is being transformed at every stage is quite straightforward and trivial.</p>
<section id="serial-composition">
<h3>Serial composition<a class="headerlink" href="#serial-composition" title="Permalink to this heading"></a></h3>
<p>So let’s see a few examples on how to compose clis together. Let’s say you have a list of files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fileNames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;b.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;c.txt&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Let’s say you now want to read every line from every file quickly, using cli tools,
and get the number of lines in each file. Instead of something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sizes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">fileName</span> <span class="ow">in</span> <span class="n">fileNames</span><span class="p">:</span>
   <span class="n">sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cat</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="c1"># shape(0) is kinda like aS(len). It just returns the length of the input iterator, but difference is that aS(len) can only operate on lists</span>
</pre></div>
</div>
<p>…which really defeats the purpose of the elegant cli workflow, you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sizes</span> <span class="o">=</span> <span class="n">fileNames</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, there is 1 “composition”: <code class="docutils literal notranslate"><span class="pre">cat()</span> <span class="pre">|</span> <span class="pre">shape(0)</span></code>. If you check out the
docs for <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-class docutils literal notranslate"><span class="pre">cat</span></code></a>, which is used to read files, you’d know that there’re 2 modes of operation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;a.txt&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># mode 1: cat() acts like a function, returning a list of lines in the file</span>
<span class="s2">&quot;a.txt&quot;</span> <span class="o">|</span> <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># mode 2: cat() acts like a cli tool, which will return a list of lines in the file when a file name is piped into it</span>
<span class="s2">&quot;a.txt&quot;</span> <span class="o">|</span> <span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="c1"># mode 2: cat() acts like a cli tool, &quot;cat() | shape(0)&quot; acts as a &quot;serial&quot; cli</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="s2">&quot;a.txt&quot;</span> <span class="o">|</span> <span class="n">s</span> <span class="c1"># equivalent to the 3rd line, but this time declaring &quot;cat() | shape(0)&quot; as a separate object</span>
</pre></div>
</div>
<p>In the second case, <code class="docutils literal notranslate"><span class="pre">&quot;a.txt&quot;</span> <span class="pre">|</span> <span class="pre">cat()</span></code> will be executed first, then getting the number of elements will be
executed later (<code class="docutils literal notranslate"><span class="pre">...</span> <span class="pre">|</span> <span class="pre">shape(0)</span></code>), but in the third case, <code class="docutils literal notranslate"><span class="pre">cat()</span> <span class="pre">|</span> <span class="pre">shape(0)</span></code> will be executed first, which
returns the special cli <a class="reference internal" href="#k1lib.cli.init.serial" title="k1lib.cli.init.serial"><code class="xref py py-class docutils literal notranslate"><span class="pre">serial</span></code></a>, then the file name will be piped in later (<code class="docutils literal notranslate"><span class="pre">&quot;a.txt&quot;</span> <span class="pre">|</span> <span class="pre">(...)</span></code>)</p>
<p>Because cli tools are also functions, which includes <a class="reference internal" href="#k1lib.cli.init.serial" title="k1lib.cli.init.serial"><code class="xref py py-class docutils literal notranslate"><span class="pre">serial</span></code></a>, you can pass them into other cli
tools that expects a function, like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>. You can be extra meta, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># assume a.txt, b.txt, c.txt has 10, 20, 30 lines</span>
<span class="n">fileNames</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a.txt&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;c.txt&quot;</span><span class="p">]]</span>
<span class="c1"># returns [[10], [20, 30]]</span>
<span class="n">sizes</span> <span class="o">=</span> <span class="n">fileNames</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">apply</span><span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<span class="c1"># also returns [[10], [20, 30]], and is equivalent to the line above, as &quot;apply(apply(...))&quot; is equivalent to &quot;(...).all(2)&quot;</span>
<span class="n">sizes</span> <span class="o">=</span> <span class="n">fileNames</span> <span class="o">|</span> <span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>This type of composition is quite straightforward, unlike the next 2.</p>
</section>
<section id="composition-or-onetomany">
<h3>“&amp;” composition, or “oneToMany”<a class="headerlink" href="#composition-or-onetomany" title="Permalink to this heading"></a></h3>
<p>Take a look at this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">toRange</span><span class="p">()</span>                       <span class="c1"># returns range(3), equivalent to [0, 1, 2]</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">iden</span><span class="p">()</span>                          <span class="c1"># returns [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
<span class="n">arr</span> <span class="o">|</span> <span class="p">(</span><span class="n">toRange</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">iden</span><span class="p">())</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># returns [range(3), [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]]</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">toRange</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">iden</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>   <span class="c1"># returns [range(3), [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]], demonstrating &quot;&amp;&quot; will be executed before &quot;|&quot;, so you don&#39;t need parentheses around it</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">toRange</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">iden</span><span class="p">()</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># returns [0, 1, 2, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
</pre></div>
</div>
<p>So, this will take the input iterator, duplicates into 2 versions, pipes them into the 2
clis you specified and return both of them. You can do this with as much clis as you want:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">|</span> <span class="n">toRange</span><span class="p">()</span> <span class="o">&amp;</span>  <span class="n">shape</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[0, 1, 2], [3, 1], [&quot;a&quot;]]</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">toRange</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">shape</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># also returns [[0, 1, 2], [3, 1], [&quot;a&quot;]], demonstrating a strange edge case that parentheses won&#39;t stop all clis adjacent to each other joined by &quot;&amp;&quot; from combining together</span>
</pre></div>
</div>
<p>Hopefully it now makes sense why it’s called “oneToMany”, as we’re making 1 iterator available
for many clis. Also, if the exact cli operation is only known at run time, then you can
procedurally do this using <a class="reference internal" href="#k1lib.cli.init.oneToMany" title="k1lib.cli.init.oneToMany"><code class="xref py py-class docutils literal notranslate"><span class="pre">oneToMany</span></code></a>.</p>
</section>
<section id="composition-or-mtms">
<h3>“+” composition, or “mtmS”<a class="headerlink" href="#composition-or-mtms" title="Permalink to this heading"></a></h3>
<p>Take a look at this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">even</span> <span class="o">=</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">odd</span>  <span class="o">=</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># can also just be &quot;~even&quot;, but I&#39;m writing it out this way to be clear</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span> <span class="o">|</span> <span class="p">(</span><span class="n">even</span> <span class="o">+</span> <span class="n">odd</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>    <span class="c1"># returns [[10, 12, 14, 16, 18], [31, 33, 35, 37, 39]]</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">even</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span> <span class="o">|</span> <span class="n">odd</span><span class="p">]</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># also returns [[10, 12, 14, 16, 18], [31, 33, 35, 37, 39]], demonstrating that these are equivalent to each other</span>
</pre></div>
</div>
<p>So, let’s say that there’re n items inside of the input iterator and that you specified n
clis. Then, each item will be piped into the corresponding cli, hence the name <a class="reference internal" href="#k1lib.cli.init.mtmS" title="k1lib.cli.init.mtmS"><code class="xref py py-class docutils literal notranslate"><span class="pre">mtmS</span></code></a>, or
“manyToManySpecific”. Why not just “mtm”? Well, there used to be a “manyToMany” operator,
but it’s been removed and I’m lazy to change it back.</p>
</section>
<section id="vanilla-alternatives">
<h3>Vanilla alternatives<a class="headerlink" href="#vanilla-alternatives" title="Permalink to this heading"></a></h3>
<p>These operations are not actually strictly necessary, they’re just convenience functions
so that writing code is simpler and more straightforward. They can be implemented using
normal clis like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">iden</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">shape</span><span class="p">()</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="n">x</span> <span class="o">|</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>                                  <span class="c1"># returns [[1, 2], [9, 16], [2]]</span>
<span class="n">x</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span> <span class="o">|</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">|</span> <span class="n">b</span><span class="p">,</span> <span class="n">z</span> <span class="o">|</span> <span class="n">c</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[1, 2], [9, 16], [2]]</span>

<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">x</span> <span class="o">|</span> <span class="n">a</span> <span class="o">&amp;</span> <span class="n">b</span> <span class="o">&amp;</span> <span class="n">c</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>                           <span class="c1"># returns [[0, 1, 2, 3, 4], [0, 1, 4, 9, 16], [5]]</span>
<span class="n">x</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span> <span class="o">|</span> <span class="n">a</span><span class="p">,</span> <span class="n">x</span> <span class="o">|</span> <span class="n">b</span><span class="p">,</span> <span class="n">x</span> <span class="o">|</span> <span class="n">c</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[0, 1, 2, 3, 4], [0, 1, 4, 9, 16], [5]]</span>
</pre></div>
</div>
<p>So you might want to use these vanilla versions initially if you’re having a hard time with this,
but I wouldn’t recommend using vanilla in the long term.</p>
</section>
</section>
<section id="js-transpiler">
<h2>JS transpiler<a class="headerlink" href="#js-transpiler" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="js_transpiler.html">JS transpiler tutorial</a></li>
</ul>
</div>
</section>
<section id="philosophy">
<h2>Philosophy<a class="headerlink" href="#philosophy" title="Permalink to this heading"></a></h2>
<p>Just a short note: while I was developing this, the emphasis is on creating very succinct
code that does a whole lot, to aid in exploring/creating datasets. Because of it, I’ve chosen
to sacrifice readability. The idea is, if it’s so fast to create a functionality, whenever
you need to change the code, it’ll be faster to just recreate it from scratch than try to
change the existing code. And the mental effort to recreate it is substantially lower than
the mental effort needed to understand a normal codebase written using vanilla Python. Also
this encourages you to rethink the problem in a new light entirely, which usually results in
much shorter and simpler code than if you were to adapt an existing solution. This seem to be
true for me so far.</p>
<p>Note that creating unreadable, fantastically complicated code only happens around 5%. Majority
of the time it’s actually very readable and I can change an obscure detail after 10 seconds.
The way I usually do it is to “feel” what the data looks like, instead of trying to trace what
it looks like from the very beginning. This is possible because certain functions has certain
common signatures. For example, <code class="docutils literal notranslate"><span class="pre">~apply(lambda</span> <span class="pre">x,y:</span> <span class="pre">x+y,</span> <span class="pre">3)</span></code> probably means that it’s manipulating
a table with the 3rd column being a list of 2 coordinate numbers. So, overtime, you’ll develop
an intuition for what’s happenning and can visualize the data’s shape right in the middle of the
pipeline.</p>
</section>
<section id="where-to-start">
<h2>Where to start?<a class="headerlink" href="#where-to-start" title="Permalink to this heading"></a></h2>
<p>Core clis include:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>, <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a>, <a class="reference internal" href="#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">op</span></code></a>, <a class="reference internal" href="#k1lib.cli.grep.grep" title="k1lib.cli.grep.grep"><code class="xref py py-class docutils literal notranslate"><span class="pre">grep</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a>, <a class="reference internal" href="#k1lib.cli.filt.head" title="k1lib.cli.filt.head"><code class="xref py py-class docutils literal notranslate"><span class="pre">head</span></code></a>, <a class="reference internal" href="#k1lib.cli.filt.rows" title="k1lib.cli.filt.rows"><code class="xref py py-class docutils literal notranslate"><span class="pre">rows</span></code></a>, <a class="reference internal" href="#k1lib.cli.filt.cut" title="k1lib.cli.filt.cut"><code class="xref py py-class docutils literal notranslate"><span class="pre">cut</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.cli.utils.deref" title="k1lib.cli.utils.deref"><code class="xref py py-class docutils literal notranslate"><span class="pre">deref</span></code></a>, <a class="reference internal" href="#k1lib.cli.utils.item" title="k1lib.cli.utils.item"><code class="xref py py-class docutils literal notranslate"><span class="pre">item</span></code></a>, <a class="reference internal" href="#k1lib.cli.utils.shape" title="k1lib.cli.utils.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.cli.structural.transpose" title="k1lib.cli.structural.transpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">transpose</span></code></a>, <a class="reference internal" href="#k1lib.cli.structural.joinStreams" title="k1lib.cli.structural.joinStreams"><code class="xref py py-class docutils literal notranslate"><span class="pre">joinStreams</span></code></a>, <a class="reference internal" href="#k1lib.cli.structural.batched" title="k1lib.cli.structural.batched"><code class="xref py py-class docutils literal notranslate"><span class="pre">batched</span></code></a>, <a class="reference internal" href="#k1lib.cli.structural.count" title="k1lib.cli.structural.count"><code class="xref py py-class docutils literal notranslate"><span class="pre">count</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a>, <a class="reference internal" href="#k1lib.cli.inp.ls" title="k1lib.cli.inp.ls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ls()</span></code></a>, <a class="reference internal" href="#k1lib.cli.output.file" title="k1lib.cli.output.file"><code class="xref py py-class docutils literal notranslate"><span class="pre">file</span></code></a>, <a class="reference internal" href="#k1lib.cli.output.stdout" title="k1lib.cli.output.stdout"><code class="xref py py-class docutils literal notranslate"><span class="pre">stdout</span></code></a></p></li>
</ul>
<p>These clis are pretty important, and are used all the time, so look over
them to see what the library can do. Whenever you find some cli you have
not encountered before, you can just search it in the search bar on the
top left of the page.</p>
<p>Then other important, not necessarily core clis include:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>, <a class="reference internal" href="#k1lib.cli.modifier.sort" title="k1lib.cli.modifier.sort"><code class="xref py py-class docutils literal notranslate"><span class="pre">sort</span></code></a>, <a class="reference internal" href="#k1lib.cli.modifier.randomize" title="k1lib.cli.modifier.randomize"><code class="xref py py-class docutils literal notranslate"><span class="pre">randomize</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.cli.utils.wrapList" title="k1lib.cli.utils.wrapList"><code class="xref py py-class docutils literal notranslate"><span class="pre">wrapList</span></code></a>, <a class="reference internal" href="#k1lib.cli.utils.ignore" title="k1lib.cli.utils.ignore"><code class="xref py py-class docutils literal notranslate"><span class="pre">ignore</span></code></a>, <a class="reference internal" href="#k1lib.cli.inp.cmd" title="k1lib.cli.inp.cmd"><code class="xref py py-class docutils literal notranslate"><span class="pre">cmd</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.cli.structural.repeat" title="k1lib.cli.structural.repeat"><code class="xref py py-class docutils literal notranslate"><span class="pre">repeat</span></code></a> and friends, <a class="reference internal" href="#k1lib.cli.structural.groupBy" title="k1lib.cli.structural.groupBy"><code class="xref py py-class docutils literal notranslate"><span class="pre">groupBy</span></code></a>, <a class="reference internal" href="#k1lib.cli.structural.ungroup" title="k1lib.cli.structural.ungroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ungroup</span></code></a>,
<a class="reference internal" href="#k1lib.cli.structural.hist" title="k1lib.cli.structural.hist"><code class="xref py py-class docutils literal notranslate"><span class="pre">hist</span></code></a>, <a class="reference internal" href="#k1lib.cli.structural.insert" title="k1lib.cli.structural.insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">insert</span></code></a>, <a class="reference internal" href="#k1lib.cli.structural.insertIdColumn" title="k1lib.cli.structural.insertIdColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">insertIdColumn</span></code></a></p></li>
</ul>
<p>So, start reading over what these do first, as you can pretty much 95% utilize everything
the cli workflow has to offer with those alone. Then skim over basic conversions in
module <a class="reference internal" href="#module-k1lib.cli.conv" title="k1lib.cli.conv"><code class="xref py py-mod docutils literal notranslate"><span class="pre">conv</span></code></a>. While you’re doing that, checkout <a class="reference internal" href="#k1lib.cli.trace.trace" title="k1lib.cli.trace.trace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trace()</span></code></a>,
for a quite powerful debugging tool.</p>
<p>There are several <a class="reference external" href="../tutorials.html">written tutorials</a> about cli here, and I
also made some <a class="reference external" href="https://www.youtube.com/playlist?list=PLP1sw-g877osNI_dMXwR72kVDREeHsYnt">video tutorials</a>
as well, so go check those out.</p>
<p>For every example in the tutorials that you found, you might find it useful to follow
the following debugging steps, to see how everything works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># assume there&#39;s this piece of code:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">C</span> <span class="o">|</span> <span class="n">D</span>
<span class="c1"># do this instead:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># once you understand it, do this:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># assume there&#39;s this piece of code:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">B</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">C</span>
<span class="c1"># do this instead:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># once you understand it, you can move on:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">B</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># assume there&#39;s this piece of code:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">B</span> <span class="o">&amp;</span> <span class="n">C</span>
<span class="c1"># do this instead:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># assume there&#39;s this piece of code:</span>
<span class="n">A</span> <span class="o">|</span> <span class="p">(</span><span class="n">B</span> <span class="o">+</span> <span class="n">C</span><span class="p">)</span>
<span class="c1"># do these instead:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">op</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">op</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="n">C</span> <span class="o">|</span> <span class="n">dereF</span><span class="p">()</span>
<span class="c1"># there are alternatives to that:</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">A</span> <span class="o">|</span> <span class="n">rows</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">C</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Finally, you can read over the summary below, see what catches your eye and
check that cli out.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>conv</p></th>
<th class="head"><p>structural</p></th>
<th class="head"><p>utils</p></th>
<th class="head"><p>filt</p></th>
<th class="head"><p>modifier</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toNdArray" title="k1lib.cli.conv.toNdArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">toNdArray</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.transpose" title="k1lib.cli.structural.transpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">transpose</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.size" title="k1lib.cli.utils.size"><code class="xref py py-class docutils literal notranslate"><span class="pre">size</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.applyS" title="k1lib.cli.modifier.applyS"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyS</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toTensor" title="k1lib.cli.conv.toTensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">toTensor</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.T" title="k1lib.cli.structural.T"><code class="xref py py-class docutils literal notranslate"><span class="pre">T</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.shape" title="k1lib.cli.utils.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.filter_" title="k1lib.cli.filt.filter_"><code class="xref py py-class docutils literal notranslate"><span class="pre">filter_</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toRange" title="k1lib.cli.conv.toRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">toRange</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.reshape" title="k1lib.cli.structural.reshape"><code class="xref py py-class docutils literal notranslate"><span class="pre">reshape</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.item" title="k1lib.cli.utils.item"><code class="xref py py-class docutils literal notranslate"><span class="pre">item</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.inSet" title="k1lib.cli.filt.inSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">inSet</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.iterDelay" title="k1lib.cli.modifier.iterDelay"><code class="xref py py-class docutils literal notranslate"><span class="pre">iterDelay</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toList" title="k1lib.cli.conv.toList"><code class="xref py py-class docutils literal notranslate"><span class="pre">toList</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.insert" title="k1lib.cli.structural.insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">insert</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.rItem" title="k1lib.cli.utils.rItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">rItem</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.contains" title="k1lib.cli.filt.contains"><code class="xref py py-class docutils literal notranslate"><span class="pre">contains</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toSum" title="k1lib.cli.conv.toSum"><code class="xref py py-class docutils literal notranslate"><span class="pre">toSum</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.splitW" title="k1lib.cli.structural.splitW"><code class="xref py py-class docutils literal notranslate"><span class="pre">splitW</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.iden" title="k1lib.cli.utils.iden"><code class="xref py py-class docutils literal notranslate"><span class="pre">iden</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.empty" title="k1lib.cli.filt.empty"><code class="xref py py-class docutils literal notranslate"><span class="pre">empty</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toProd" title="k1lib.cli.conv.toProd"><code class="xref py py-class docutils literal notranslate"><span class="pre">toProd</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.splitC" title="k1lib.cli.structural.splitC"><code class="xref py py-class docutils literal notranslate"><span class="pre">splitC</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.join" title="k1lib.cli.utils.join"><code class="xref py py-class docutils literal notranslate"><span class="pre">join</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.isNumeric" title="k1lib.cli.filt.isNumeric"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isNumeric()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.parallel" title="k1lib.cli.modifier.parallel"><code class="xref py py-class docutils literal notranslate"><span class="pre">parallel</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toAvg" title="k1lib.cli.conv.toAvg"><code class="xref py py-class docutils literal notranslate"><span class="pre">toAvg</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.joinStreams" title="k1lib.cli.structural.joinStreams"><code class="xref py py-class docutils literal notranslate"><span class="pre">joinStreams</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.wrapList" title="k1lib.cli.utils.wrapList"><code class="xref py py-class docutils literal notranslate"><span class="pre">wrapList</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.instanceOf" title="k1lib.cli.filt.instanceOf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">instanceOf()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.applyCl" title="k1lib.cli.modifier.applyCl"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyCl</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toMean" title="k1lib.cli.conv.toMean"><code class="xref py py-class docutils literal notranslate"><span class="pre">toMean</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.joinSt" title="k1lib.cli.structural.joinSt"><code class="xref py py-class docutils literal notranslate"><span class="pre">joinSt</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.equals" title="k1lib.cli.utils.equals"><code class="xref py py-class docutils literal notranslate"><span class="pre">equals</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.head" title="k1lib.cli.filt.head"><code class="xref py py-class docutils literal notranslate"><span class="pre">head</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.applyTh" title="k1lib.cli.modifier.applyTh"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyTh</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toStd" title="k1lib.cli.conv.toStd"><code class="xref py py-class docutils literal notranslate"><span class="pre">toStd</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.joinStreamsRandom" title="k1lib.cli.structural.joinStreamsRandom"><code class="xref py py-class docutils literal notranslate"><span class="pre">joinStreamsRandom</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.reverse" title="k1lib.cli.utils.reverse"><code class="xref py py-class docutils literal notranslate"><span class="pre">reverse</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.tail" title="k1lib.cli.filt.tail"><code class="xref py py-class docutils literal notranslate"><span class="pre">tail</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.applySerial" title="k1lib.cli.modifier.applySerial"><code class="xref py py-class docutils literal notranslate"><span class="pre">applySerial</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toMedian" title="k1lib.cli.conv.toMedian"><code class="xref py py-class docutils literal notranslate"><span class="pre">toMedian</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.activeSamples" title="k1lib.cli.structural.activeSamples"><code class="xref py py-class docutils literal notranslate"><span class="pre">activeSamples</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.ignore" title="k1lib.cli.utils.ignore"><code class="xref py py-class docutils literal notranslate"><span class="pre">ignore</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.cut" title="k1lib.cli.filt.cut"><code class="xref py py-class docutils literal notranslate"><span class="pre">cut</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.sort" title="k1lib.cli.modifier.sort"><code class="xref py py-class docutils literal notranslate"><span class="pre">sort</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toMax" title="k1lib.cli.conv.toMax"><code class="xref py py-class docutils literal notranslate"><span class="pre">toMax</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.table" title="k1lib.cli.structural.table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">table()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.rateLimit" title="k1lib.cli.utils.rateLimit"><code class="xref py py-class docutils literal notranslate"><span class="pre">rateLimit</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.rows" title="k1lib.cli.filt.rows"><code class="xref py py-class docutils literal notranslate"><span class="pre">rows</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.sortF" title="k1lib.cli.modifier.sortF"><code class="xref py py-class docutils literal notranslate"><span class="pre">sortF</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toMin" title="k1lib.cli.conv.toMin"><code class="xref py py-class docutils literal notranslate"><span class="pre">toMin</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.batched" title="k1lib.cli.structural.batched"><code class="xref py py-class docutils literal notranslate"><span class="pre">batched</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.timeLimit" title="k1lib.cli.utils.timeLimit"><code class="xref py py-class docutils literal notranslate"><span class="pre">timeLimit</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.intersection" title="k1lib.cli.filt.intersection"><code class="xref py py-class docutils literal notranslate"><span class="pre">intersection</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.consume" title="k1lib.cli.modifier.consume"><code class="xref py py-class docutils literal notranslate"><span class="pre">consume</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toArgmin" title="k1lib.cli.conv.toArgmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">toArgmin</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.batchedTrigger" title="k1lib.cli.structural.batchedTrigger"><code class="xref py py-class docutils literal notranslate"><span class="pre">batchedTrigger</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.tab" title="k1lib.cli.utils.tab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tab()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.union" title="k1lib.cli.filt.union"><code class="xref py py-class docutils literal notranslate"><span class="pre">union</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.randomize" title="k1lib.cli.modifier.randomize"><code class="xref py py-class docutils literal notranslate"><span class="pre">randomize</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toArgmax" title="k1lib.cli.conv.toArgmax"><code class="xref py py-class docutils literal notranslate"><span class="pre">toArgmax</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.window" title="k1lib.cli.structural.window"><code class="xref py py-class docutils literal notranslate"><span class="pre">window</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.indent" title="k1lib.cli.utils.indent"><code class="xref py py-meth docutils literal notranslate"><span class="pre">indent()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.unique" title="k1lib.cli.filt.unique"><code class="xref py py-class docutils literal notranslate"><span class="pre">unique</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.stagger" title="k1lib.cli.modifier.stagger"><code class="xref py py-class docutils literal notranslate"><span class="pre">stagger</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toImg" title="k1lib.cli.conv.toImg"><code class="xref py py-class docutils literal notranslate"><span class="pre">toImg</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.groupBy" title="k1lib.cli.structural.groupBy"><code class="xref py py-class docutils literal notranslate"><span class="pre">groupBy</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.clipboard" title="k1lib.cli.utils.clipboard"><code class="xref py py-class docutils literal notranslate"><span class="pre">clipboard</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.breakIf" title="k1lib.cli.filt.breakIf"><code class="xref py py-class docutils literal notranslate"><span class="pre">breakIf</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">op</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toRgb" title="k1lib.cli.conv.toRgb"><code class="xref py py-class docutils literal notranslate"><span class="pre">toRgb</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.ungroup" title="k1lib.cli.structural.ungroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ungroup</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.deref" title="k1lib.cli.utils.deref"><code class="xref py py-class docutils literal notranslate"><span class="pre">deref</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.mask" title="k1lib.cli.filt.mask"><code class="xref py py-class docutils literal notranslate"><span class="pre">mask</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.integrate" title="k1lib.cli.modifier.integrate"><code class="xref py py-class docutils literal notranslate"><span class="pre">integrate</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toRgba" title="k1lib.cli.conv.toRgba"><code class="xref py py-class docutils literal notranslate"><span class="pre">toRgba</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.insertColumn" title="k1lib.cli.structural.insertColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">insertColumn</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.bindec" title="k1lib.cli.utils.bindec"><code class="xref py py-class docutils literal notranslate"><span class="pre">bindec</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.tryout" title="k1lib.cli.filt.tryout"><code class="xref py py-class docutils literal notranslate"><span class="pre">tryout</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.roll" title="k1lib.cli.modifier.roll"><code class="xref py py-class docutils literal notranslate"><span class="pre">roll</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toGray" title="k1lib.cli.conv.toGray"><code class="xref py py-class docutils literal notranslate"><span class="pre">toGray</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.insertIdColumn" title="k1lib.cli.structural.insertIdColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">insertIdColumn</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.smooth" title="k1lib.cli.utils.smooth"><code class="xref py py-class docutils literal notranslate"><span class="pre">smooth</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.resume" title="k1lib.cli.filt.resume"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resume()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.modifier.clamp" title="k1lib.cli.modifier.clamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">clamp</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toDict" title="k1lib.cli.conv.toDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">toDict</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.insId" title="k1lib.cli.structural.insId"><code class="xref py py-class docutils literal notranslate"><span class="pre">insId</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.disassemble" title="k1lib.cli.utils.disassemble"><code class="xref py py-meth docutils literal notranslate"><span class="pre">disassemble()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.trigger" title="k1lib.cli.filt.trigger"><code class="xref py py-class docutils literal notranslate"><span class="pre">trigger</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toFloat" title="k1lib.cli.conv.toFloat"><code class="xref py py-class docutils literal notranslate"><span class="pre">toFloat</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.unsqueeze" title="k1lib.cli.structural.unsqueeze"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unsqueeze()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.tree" title="k1lib.cli.utils.tree"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tree()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.filt.filtStd" title="k1lib.cli.filt.filtStd"><code class="xref py py-class docutils literal notranslate"><span class="pre">filtStd</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toInt" title="k1lib.cli.conv.toInt"><code class="xref py py-class docutils literal notranslate"><span class="pre">toInt</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.count" title="k1lib.cli.structural.count"><code class="xref py py-class docutils literal notranslate"><span class="pre">count</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.lookup" title="k1lib.cli.utils.lookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">lookup</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toBytes" title="k1lib.cli.conv.toBytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">toBytes</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.hist" title="k1lib.cli.structural.hist"><code class="xref py py-class docutils literal notranslate"><span class="pre">hist</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.lookupRange" title="k1lib.cli.utils.lookupRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">lookupRange</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toDataUri" title="k1lib.cli.conv.toDataUri"><code class="xref py py-class docutils literal notranslate"><span class="pre">toDataUri</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.permute" title="k1lib.cli.structural.permute"><code class="xref py py-class docutils literal notranslate"><span class="pre">permute</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.getitems" title="k1lib.cli.utils.getitems"><code class="xref py py-class docutils literal notranslate"><span class="pre">getitems</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toAnchor" title="k1lib.cli.conv.toAnchor"><code class="xref py py-class docutils literal notranslate"><span class="pre">toAnchor</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.AA_" title="k1lib.cli.structural.AA_"><code class="xref py py-class docutils literal notranslate"><span class="pre">AA_</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.backup" title="k1lib.cli.utils.backup"><code class="xref py py-class docutils literal notranslate"><span class="pre">backup</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toHtml" title="k1lib.cli.conv.toHtml"><code class="xref py py-class docutils literal notranslate"><span class="pre">toHtml</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.peek" title="k1lib.cli.structural.peek"><code class="xref py py-class docutils literal notranslate"><span class="pre">peek</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.sketch" title="k1lib.cli.utils.sketch"><code class="xref py py-class docutils literal notranslate"><span class="pre">sketch</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toAscii" title="k1lib.cli.conv.toAscii"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toAscii()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.peekF" title="k1lib.cli.structural.peekF"><code class="xref py py-class docutils literal notranslate"><span class="pre">peekF</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.syncStepper" title="k1lib.cli.utils.syncStepper"><code class="xref py py-class docutils literal notranslate"><span class="pre">syncStepper</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toHash" title="k1lib.cli.conv.toHash"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toHash()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.repeat" title="k1lib.cli.structural.repeat"><code class="xref py py-class docutils literal notranslate"><span class="pre">repeat</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.zeroes" title="k1lib.cli.utils.zeroes"><code class="xref py py-class docutils literal notranslate"><span class="pre">zeroes</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toCsv" title="k1lib.cli.conv.toCsv"><code class="xref py py-class docutils literal notranslate"><span class="pre">toCsv</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.repeatF" title="k1lib.cli.structural.repeatF"><code class="xref py py-meth docutils literal notranslate"><span class="pre">repeatF()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.normalize" title="k1lib.cli.utils.normalize"><code class="xref py py-class docutils literal notranslate"><span class="pre">normalize</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toYaml" title="k1lib.cli.conv.toYaml"><code class="xref py py-class docutils literal notranslate"><span class="pre">toYaml</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.repeatFrom" title="k1lib.cli.structural.repeatFrom"><code class="xref py py-class docutils literal notranslate"><span class="pre">repeatFrom</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.utils.branch" title="k1lib.cli.utils.branch"><code class="xref py py-class docutils literal notranslate"><span class="pre">branch</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.Audio" title="k1lib.cli.conv.Audio"><code class="xref py py-class docutils literal notranslate"><span class="pre">Audio</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.oneHot" title="k1lib.cli.structural.oneHot"><code class="xref py py-class docutils literal notranslate"><span class="pre">oneHot</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toAudio" title="k1lib.cli.conv.toAudio"><code class="xref py py-class docutils literal notranslate"><span class="pre">toAudio</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.structural.latch" title="k1lib.cli.structural.latch"><code class="xref py py-class docutils literal notranslate"><span class="pre">latch</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toUnix" title="k1lib.cli.conv.toUnix"><code class="xref py py-class docutils literal notranslate"><span class="pre">toUnix</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toIso" title="k1lib.cli.conv.toIso"><code class="xref py py-class docutils literal notranslate"><span class="pre">toIso</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toYMD" title="k1lib.cli.conv.toYMD"><code class="xref py py-class docutils literal notranslate"><span class="pre">toYMD</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toLinks" title="k1lib.cli.conv.toLinks"><code class="xref py py-class docutils literal notranslate"><span class="pre">toLinks</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toMovingAvg" title="k1lib.cli.conv.toMovingAvg"><code class="xref py py-class docutils literal notranslate"><span class="pre">toMovingAvg</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toCm" title="k1lib.cli.conv.toCm"><code class="xref py py-class docutils literal notranslate"><span class="pre">toCm</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.Pdf" title="k1lib.cli.conv.Pdf"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pdf</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toPdf" title="k1lib.cli.conv.toPdf"><code class="xref py py-class docutils literal notranslate"><span class="pre">toPdf</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.toDist" title="k1lib.cli.conv.toDist"><code class="xref py py-class docutils literal notranslate"><span class="pre">toDist</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toAngle" title="k1lib.cli.conv.toAngle"><code class="xref py py-class docutils literal notranslate"><span class="pre">toAngle</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.conv.idxsToNdArray" title="k1lib.cli.conv.idxsToNdArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">idxsToNdArray</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.conv.toFileType" title="k1lib.cli.conv.toFileType"><code class="xref py py-class docutils literal notranslate"><span class="pre">toFileType</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 18%" />
<col style="width: 20%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>typehint</p></th>
<th class="head"><p>inp</p></th>
<th class="head"><p>output</p></th>
<th class="head"><p>init</p></th>
<th class="head"><p>kxml</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.stdout" title="k1lib.cli.output.stdout"><code class="xref py py-class docutils literal notranslate"><span class="pre">stdout</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.kxml.node" title="k1lib.cli.kxml.node"><code class="xref py py-class docutils literal notranslate"><span class="pre">node</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tAny" title="k1lib.cli.typehint.tAny"><code class="xref py py-class docutils literal notranslate"><span class="pre">tAny</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.catPickle" title="k1lib.cli.inp.catPickle"><code class="xref py py-class docutils literal notranslate"><span class="pre">catPickle</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.tee" title="k1lib.cli.output.tee"><code class="xref py py-class docutils literal notranslate"><span class="pre">tee</span></code></a></p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.kxml.maxDepth" title="k1lib.cli.kxml.maxDepth"><code class="xref py py-class docutils literal notranslate"><span class="pre">maxDepth</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tList" title="k1lib.cli.typehint.tList"><code class="xref py py-class docutils literal notranslate"><span class="pre">tList</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.splitSeek" title="k1lib.cli.inp.splitSeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">splitSeek</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.file" title="k1lib.cli.output.file"><code class="xref py py-class docutils literal notranslate"><span class="pre">file</span></code></a></p></td>
<td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">T()</span></code></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.kxml.tags" title="k1lib.cli.kxml.tags"><code class="xref py py-class docutils literal notranslate"><span class="pre">tags</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tIter" title="k1lib.cli.typehint.tIter"><code class="xref py py-class docutils literal notranslate"><span class="pre">tIter</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.refineSeek" title="k1lib.cli.inp.refineSeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">refineSeek</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.pretty" title="k1lib.cli.output.pretty"><code class="xref py py-class docutils literal notranslate"><span class="pre">pretty</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.init.fastF" title="k1lib.cli.init.fastF"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fastF()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.kxml.pretty" title="k1lib.cli.kxml.pretty"><code class="xref py py-class docutils literal notranslate"><span class="pre">pretty</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tSet" title="k1lib.cli.typehint.tSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">tSet</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.wget" title="k1lib.cli.inp.wget"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wget()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.unpretty" title="k1lib.cli.output.unpretty"><code class="xref py py-class docutils literal notranslate"><span class="pre">unpretty</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-meth docutils literal notranslate"><span class="pre">yieldT()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.kxml.display" title="k1lib.cli.kxml.display"><code class="xref py py-class docutils literal notranslate"><span class="pre">display</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tCollection" title="k1lib.cli.typehint.tCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">tCollection</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.ls" title="k1lib.cli.inp.ls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ls()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.display" title="k1lib.cli.output.display"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.init.serial" title="k1lib.cli.init.serial"><code class="xref py py-class docutils literal notranslate"><span class="pre">serial</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tExpand" title="k1lib.cli.typehint.tExpand"><code class="xref py py-class docutils literal notranslate"><span class="pre">tExpand</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.cmd" title="k1lib.cli.inp.cmd"><code class="xref py py-class docutils literal notranslate"><span class="pre">cmd</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.headOut" title="k1lib.cli.output.headOut"><code class="xref py py-meth docutils literal notranslate"><span class="pre">headOut()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.init.oneToMany" title="k1lib.cli.init.oneToMany"><code class="xref py py-class docutils literal notranslate"><span class="pre">oneToMany</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tNpArray" title="k1lib.cli.typehint.tNpArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">tNpArray</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.walk" title="k1lib.cli.inp.walk"><code class="xref py py-class docutils literal notranslate"><span class="pre">walk</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.intercept" title="k1lib.cli.output.intercept"><code class="xref py py-class docutils literal notranslate"><span class="pre">intercept</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.init.mtmS" title="k1lib.cli.init.mtmS"><code class="xref py py-class docutils literal notranslate"><span class="pre">mtmS</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tTensor" title="k1lib.cli.typehint.tTensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">tTensor</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.urlPath" title="k1lib.cli.inp.urlPath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">urlPath()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.output.plotImgs" title="k1lib.cli.output.plotImgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotImgs</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">tListIterSet()</span></code></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.kzip" title="k1lib.cli.inp.kzip"><code class="xref py py-class docutils literal notranslate"><span class="pre">kzip</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">tListSet()</span></code></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.kunzip" title="k1lib.cli.inp.kunzip"><code class="xref py py-class docutils literal notranslate"><span class="pre">kunzip</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">tListIter()</span></code></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.inp.unzip" title="k1lib.cli.inp.unzip"><code class="xref py py-class docutils literal notranslate"><span class="pre">unzip</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">tArrayTypes()</span></code></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.typehint.inferType" title="k1lib.cli.typehint.inferType"><code class="xref py py-meth docutils literal notranslate"><span class="pre">inferType()</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.typehint.TypeHintException" title="k1lib.cli.typehint.TypeHintException"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeHintException</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tLowest" title="k1lib.cli.typehint.tLowest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tLowest()</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tCheck" title="k1lib.cli.typehint.tCheck"><code class="xref py py-class docutils literal notranslate"><span class="pre">tCheck</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.typehint.tOpt" title="k1lib.cli.typehint.tOpt"><code class="xref py py-class docutils literal notranslate"><span class="pre">tOpt</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 27%" />
<col style="width: 22%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>nb</p></th>
<th class="head"><p>grep</p></th>
<th class="head"><p>trace</p></th>
<th class="head"><p>optimizations</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.nb.cells" title="k1lib.cli.nb.cells"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cells()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.grep.grep" title="k1lib.cli.grep.grep"><code class="xref py py-class docutils literal notranslate"><span class="pre">grep</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.trace.trace" title="k1lib.cli.trace.trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">trace</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.optimizations.dummy" title="k1lib.cli.optimizations.dummy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dummy()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.nb.grabTags" title="k1lib.cli.nb.grabTags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">grabTags()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.grep.grepTemplate" title="k1lib.cli.grep.grepTemplate"><code class="xref py py-class docutils literal notranslate"><span class="pre">grepTemplate</span></code></a></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.nb.executeTags" title="k1lib.cli.nb.executeTags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">executeTags()</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.nb.pretty" title="k1lib.cli.nb.pretty"><code class="xref py py-class docutils literal notranslate"><span class="pre">pretty</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.nb.execute" title="k1lib.cli.nb.execute"><code class="xref py py-class docutils literal notranslate"><span class="pre">execute</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="under-the-hood">
<h2>Under the hood<a class="headerlink" href="#under-the-hood" title="Permalink to this heading"></a></h2>
<p>How it works underneath is pretty simple. All cli tools implement the “reverse or”
operation, or __ror__. So essentially, these 2 statements are equivalent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">|</span> <span class="n">obj</span>
<span class="n">obj</span><span class="o">.</span><span class="fm">__ror__</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>There are several other operations that certain clis can override, like “&gt;” or “&gt;&gt;”.
Also, if you’re an advanced user, there’s also an optimizer that looks like LLVM, so
you can implement optimization passes to speed up everything by a lot:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="llvm.html">LLVM optimizer tutorial</a></li>
</ul>
</div>
</section>
<section id="creating-your-own-cli">
<h2>Creating your own cli<a class="headerlink" href="#creating-your-own-cli" title="Permalink to this heading"></a></h2>
<p>It’s fairly simple to create your new cli. If it’s composed of other clis, you can do
something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">newCli</span> <span class="o">=</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">newCli</span> <span class="c1"># returns [0, 2, 4, 6]</span>
</pre></div>
</div>
<p>If it’s more complicated that needs to have access to some state, like a sum of numbers,
then you can extend from <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a> like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NewCli</span><span class="p">(</span><span class="n">BaseCli</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bias</span> <span class="o">=</span> <span class="n">bias</span> <span class="c1"># don&#39;t necessarily have to call super.__init__()</span>
    <span class="k">def</span> <span class="fm">__ror__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">it</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bias</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">elem</span>
         <span class="k">return</span> <span class="n">s</span>

<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)]</span> <span class="o">|</span> <span class="n">NewCli</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [373, 32]</span>
</pre></div>
</div>
</section>
<section id="accelerations">
<h2>Accelerations<a class="headerlink" href="#accelerations" title="Permalink to this heading"></a></h2>
<p>Cli tools are pretty dynamic and clever. A lot of times, they try to understand what you’re trying
to do, then rewrite your code into something else completely, but still produce exactly the desired
output. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;what is 3+4?&quot;</span><span class="p">,</span> <span class="s2">&quot;what is 8+7?&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">complete</span><span class="p">())</span> <span class="c1"># returns [&#39;0&#39;, &#39;7&#39;]. I know, LLMs are still bad at math</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">())</span> <span class="c1"># returns numpy array with shape (3, 8, 5)</span>
</pre></div>
</div>
<p>On the first line, normally, <code class="docutils literal notranslate"><span class="pre">complete()</span></code> takes in 1 single string and also outputs a single string.
But if you know how these LLMs are run, you know that it’s a lot more efficient for the GPU to batch
multiple sentences together to generate text at the same time. So on the surface, this line seems
horribly inefficient, as it will call the model 2 times, one for each string. However, cli tools are
smart enough to realize you’re trying feed multiple things to a model, and will batch them up automatically.</p>
<p>On the second line, there’re lots of operations that should normally heavily bisect the input data
(a numpy array), like <code class="docutils literal notranslate"><span class="pre">apply()</span></code> and <code class="docutils literal notranslate"><span class="pre">repeat()</span></code> and whatnot, but believe it or not, cli tools are
smart enough to transform the array completely in C, and the output of the whole thing is still another
numpy array and not a nested generator. Here’s the summary of the operations that are accelerated in this
way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>========== `array | cli` and `array | cli.all(int)` capability
conv.toArgmax              conv.toArgmin               conv.toAvg
conv.toMax                 conv.toMedian               conv.toMin
conv.toNdArray             conv.toProd                 conv.toStd
conv.toSum                 conv.toTensor               filt.cut
filt.rows                  modifier.clamp              modifier.randomize
modifier.roll              modifier.sort               structural.batched
structural.insert          structural.insertIdColumn   structural.joinStreams
structural.repeat          structural.repeatFrom       structural.transpose
structural.window          utils.item                  utils.normalize
utils.rItem                utils.reverse               utils.size
utils.wrapList

========== `array | cli.all(int)` capability alone
filt.head                  modifier.applyS             utils.smooth

========== `array | cli` capability alone
conv.idxsToNdArray         conv.toCm                   conv.toFloat
conv.toImg                 conv.toInt                  conv.toUnix
filt.contains              filt.filt                   filt.filtStd
filt.inSet                 filt.mask                   filt.unique
models.tsne                modifier.apply              output.plotImgs
structural.groupBy         structural.hist             structural.joinStreamsRandom
structural.peek            structural.peekF            structural.splitC
structural.splitW          utils.deref                 utils.ignore
utils.zeroes

========== No array acceleration
bio.complement             bio.idx                     bio.longAa
bio.medAa                  bio.transcribe              bio.translate
conv.toAnchor              conv.toAngle                conv.toAudio
conv.toBytes               conv.toCsv                  conv.toDataUri
conv.toDict                conv.toDist                 conv.toFileType
conv.toGray                conv.toHtml                 conv.toIso
conv.toLinks               conv.toList                 conv.toMovingAvg
conv.toPdf                 conv.toRange                conv.toRgb
conv.toRgba                conv.toYMD                  conv.toYaml
filt.breakIf               filt.empty                  filt.intersection
filt.tail                  filt.trigger                filt.tryout
filt.union                 init.BaseCli                init.mtmS
init.oneToMany             init.serial                 inp.catPickle
inp.cmd                    inp.kunzip                  inp.kzip
inp.refineSeek             inp.splitSeek               inp.walk
models.bloom               models.complete             models.embed
models.kmeans              modifier.applyCl            modifier.applyMp
modifier.applySerial       modifier.applyTh            modifier.consume
modifier.integrate         modifier.iterDelay          modifier.op
modifier.sortF             modifier.stagger            output.file
output.intercept           output.pretty               output.stdout
output.tee                 output.unpretty             structural.AA_
structural.activeSamples   structural.batchedTrigger   structural.count
structural.insertColumn    structural.latch            structural.oneHot
structural.permute         structural.reshape          structural.ungroup
typehint.tCheck            typehint.tOpt               utils.backup
utils.bindec               utils.branch                utils.clipboard
utils.getitems             utils.iden                  utils.join
utils.lookup               utils.lookupRange           utils.rateLimit
utils.sketch               utils.syncStepper           utils.timeLimit
</pre></div>
</div>
<section id="biology-related-clis">
<h3>Biology-related clis<a class="headerlink" href="#biology-related-clis" title="Permalink to this heading"></a></h3>
<p>I separated these out because they might not be interesting to the majority of users.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>bio</p></th>
<th class="head"><p>sam</p></th>
<th class="head"><p>cif</p></th>
<th class="head"><p>gb</p></th>
<th class="head"><p>mgi</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.bio.go" title="k1lib.cli.bio.go"><code class="xref py py-meth docutils literal notranslate"><span class="pre">go()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.sam.cat" title="k1lib.cli.sam.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.cif.tables" title="k1lib.cli.cif.tables"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tables()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.gb.feats" title="k1lib.cli.gb.feats"><code class="xref py py-class docutils literal notranslate"><span class="pre">feats</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.mgi.batch" title="k1lib.cli.mgi.batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">batch</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.bio.quality" title="k1lib.cli.bio.quality"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quality()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.sam.header" title="k1lib.cli.sam.header"><code class="xref py py-class docutils literal notranslate"><span class="pre">header</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.cif.records" title="k1lib.cli.cif.records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">records()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.gb.origin" title="k1lib.cli.gb.origin"><code class="xref py py-class docutils literal notranslate"><span class="pre">origin</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.bio.longFa" title="k1lib.cli.bio.longFa"><code class="xref py py-meth docutils literal notranslate"><span class="pre">longFa()</span></code></a></p></td>
<td><p><a class="reference internal" href="#k1lib.cli.sam.flag" title="k1lib.cli.sam.flag"><code class="xref py py-class docutils literal notranslate"><span class="pre">flag</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.bio.idx" title="k1lib.cli.bio.idx"><code class="xref py py-class docutils literal notranslate"><span class="pre">idx</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.bio.transcribe" title="k1lib.cli.bio.transcribe"><code class="xref py py-class docutils literal notranslate"><span class="pre">transcribe</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.bio.complement" title="k1lib.cli.bio.complement"><code class="xref py py-class docutils literal notranslate"><span class="pre">complement</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.bio.translate" title="k1lib.cli.bio.translate"><code class="xref py py-class docutils literal notranslate"><span class="pre">translate</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#k1lib.cli.bio.medAa" title="k1lib.cli.bio.medAa"><code class="xref py py-class docutils literal notranslate"><span class="pre">medAa</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#k1lib.cli.bio.longAa" title="k1lib.cli.bio.longAa"><code class="xref py py-class docutils literal notranslate"><span class="pre">longAa</span></code></a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="module-k1lib.cli.bio">
<span id="bio-module"></span><h2>bio module<a class="headerlink" href="#module-k1lib.cli.bio" title="Permalink to this heading"></a></h2>
<p>This is for functions that are actually biology-related</p>
<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.bio.go">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">go</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#go"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.go" title="Permalink to this definition"></a></dt>
<dd><p>Looks up a GO term</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.bio.quality">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">quality</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#quality"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.quality" title="Permalink to this definition"></a></dt>
<dd><p>Get numeric quality of sequence.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [2, 2, 5, 30]</span>
<span class="s2">&quot;##&amp;?&quot;</span> <span class="o">|</span> <span class="n">quality</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log</strong> – whether to use log scale (0 -&gt; 40), or linear scale (1 -&gt; 0.0001)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.bio.longFa">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">longFa</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#longFa"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.longFa" title="Permalink to this definition"></a></dt>
<dd><p>Takes in a fasta file and put each sequence on 1 line.
File “gene.fa”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span><span class="n">AF086833</span><span class="mf">.2</span> <span class="n">Ebola</span> <span class="n">virus</span> <span class="o">-</span> <span class="n">Mayinga</span><span class="p">,</span> <span class="n">Zaire</span><span class="p">,</span> <span class="mi">1976</span><span class="p">,</span> <span class="n">complete</span> <span class="n">genome</span>
<span class="n">CGGACACACAAAAAGAAAGAAGAATTTTTAGGATC</span>
<span class="n">TTTTGTGTGCGAATAACTATGAGGAAGATTAATAA</span>
<span class="o">&gt;</span><span class="n">something</span> <span class="n">other</span> <span class="n">gene</span>
<span class="n">CGGACACACAAAAAGAAAGAAGA</span>
<span class="n">TTTTGTGTGCGAATAACTATGAG</span>
</pre></div>
</div>
<p>Code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;gene.fa&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">bio</span><span class="o">.</span><span class="n">longFa</span><span class="p">()</span> <span class="o">|</span> <span class="n">cli</span><span class="o">.</span><span class="n">headOut</span><span class="p">()</span>
</pre></div>
</div>
<p>Prints out:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span><span class="n">AF086833</span><span class="mf">.2</span> <span class="n">Ebola</span> <span class="n">virus</span> <span class="o">-</span> <span class="n">Mayinga</span><span class="p">,</span> <span class="n">Zaire</span><span class="p">,</span> <span class="mi">1976</span><span class="p">,</span> <span class="n">complete</span> <span class="n">genome</span>
<span class="n">CGGACACACAAAAAGAAAGAAGAATTTTTAGGATCTTTTGTGTGCGAATAACTATGAGGAAGATTAATAA</span>
<span class="o">&gt;</span><span class="n">something</span> <span class="n">other</span> <span class="n">gene</span>
<span class="n">CGGACACACAAAAAGAAAGAAGATTTTGTGTGCGAATAACTATGAG</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.bio.idx">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#idx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.idx" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Indexes files with various formats.</p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.idx.blast">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">blast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#idx.blast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.idx.blast" title="Permalink to this definition"></a></dt>
<dd><p>Uses <code class="docutils literal notranslate"><span class="pre">makeblastdb</span></code> to create a blast database from a fasta file.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;file.fa&quot;</span> <span class="o">|</span> <span class="n">bio</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">blast</span><span class="p">()</span>
<span class="n">bio</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">blast</span><span class="p">(</span><span class="s2">&quot;file.fa&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.idx.bwa">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bwa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#idx.bwa"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.idx.bwa" title="Permalink to this definition"></a></dt>
<dd><p>Uses <code class="docutils literal notranslate"><span class="pre">bwa</span></code> to index a fasta file.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;file.fa&quot;</span> <span class="o">|</span> <span class="n">bio</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">bwa</span><span class="p">()</span>
<span class="n">bio</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">bwa</span><span class="p">(</span><span class="s2">&quot;file.bwa&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.idx.bam">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#idx.bam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.idx.bam" title="Permalink to this definition"></a></dt>
<dd><p>Uses <code class="docutils literal notranslate"><span class="pre">samtools</span></code> to index a bam file.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;file.bam&quot;</span> <span class="o">|</span> <span class="n">bio</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">bam</span><span class="p">()</span>
<span class="n">bio</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">bam</span><span class="p">(</span><span class="s2">&quot;file.bam&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.bio.transcribe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">transcribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#transcribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.transcribe" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Transcribes (DNA -&gt; RNA) incoming rows.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns &quot;AUCG&quot;</span>
<span class="s2">&quot;ATCG&quot;</span> <span class="o">|</span> <span class="n">transcribe</span><span class="p">()</span>
<span class="c1"># returns [&quot;AUCG&quot;]</span>
<span class="p">[</span><span class="s2">&quot;ATCG&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">transcribe</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.transcribe.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#transcribe.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.transcribe.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.bio.complement">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">complement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#complement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.complement" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Get the reverse complement of DNA.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns &quot;TAGC&quot;</span>
<span class="s2">&quot;ATCG&quot;</span> <span class="o">|</span> <span class="n">bio</span><span class="o">.</span><span class="n">complement</span><span class="p">()</span>
<span class="c1"># returns [&quot;TAGC&quot;]</span>
<span class="p">[</span><span class="s2">&quot;ATCG&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">bio</span><span class="o">.</span><span class="n">complement</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.complement.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#complement.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.complement.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.bio.translate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">translate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#translate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.translate" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.translate.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#translate.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.translate.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Translates incoming rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>length</strong> – 0 for short (L), 1 for med (Leu), 2 for long (Leucine)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.translate.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#translate.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.translate.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.bio.medAa">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">medAa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#medAa"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.medAa" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Converts short aa sequence to medium one</p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.medAa.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#medAa.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.medAa.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.bio.longAa">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.bio.</span></span><span class="sig-name descname"><span class="pre">longAa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#longAa"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.longAa" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Converts short aa sequence to long one</p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.bio.longAa.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/bio.html#longAa.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.bio.longAa.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.cif">
<span id="cif-module"></span><h2>cif module<a class="headerlink" href="#module-k1lib.cli.cif" title="Permalink to this heading"></a></h2>
<p>All tools related to cif file format that describes protein structures.
Expected to use behind the “cif” module name, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">cif</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;abc.cif&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.cif.tables">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.cif.</span></span><span class="sig-name descname"><span class="pre">tables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dikt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/cif.html#tables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.cif.tables" title="Permalink to this definition"></a></dt>
<dd><p>Loads table info.
Dictionary mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># both return output below</span>
<span class="s2">&quot;1z7z.cif&quot;</span> <span class="o">|</span> <span class="n">cif</span><span class="o">.</span><span class="n">tables</span><span class="p">()</span> <span class="o">|</span> <span class="n">op</span><span class="p">()[</span><span class="s2">&quot;_audit_author&quot;</span><span class="p">]</span>
<span class="s2">&quot;1z7z.cif&quot;</span> <span class="o">|</span> <span class="n">cif</span><span class="o">.</span><span class="n">tables</span><span class="p">(</span><span class="s2">&quot;_audit_author&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Potential output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&#39;Xiao, C.&#39;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&#39;Bator-Kelly, C.M.&#39;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&#39;Rieder, E.&#39;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&#39;Chipman, P.R.&#39;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&#39;Craig, A.&#39;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&#39;Kuhn, R.J.&#39;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&#39;Wimmer, E.&#39;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&#39;Rossmann, M.G.&#39;&quot;</span><span class="p">),</span>
 <span class="s1">&#39;pdbx_ordinal&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">)}</span>
</pre></div>
</div>
<p>Result is a dictionary of <code class="docutils literal notranslate"><span class="pre">table</span> <span class="pre">name</span> <span class="pre">-&gt;</span> <span class="pre">dict()</span></code>. That inner dictionary maps from
column name to a list of elements. All columns should have the same number of elements.</p>
<p>Table mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># both return output below</span>
<span class="s2">&quot;1z7z.cif&quot;</span> <span class="o">|</span> <span class="n">cif</span><span class="o">.</span><span class="n">tables</span><span class="p">(</span><span class="s2">&quot;_audit_author&quot;</span><span class="p">,</span> <span class="n">dikt</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="s2">&quot;1z7z.cif&quot;</span> <span class="o">|</span> <span class="n">cif</span><span class="o">.</span><span class="n">tables</span><span class="p">(</span><span class="n">dikt</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()[</span><span class="s2">&quot;_audit_author&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Potential output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;pdbx_ordinal&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&#39;Xiao, C.&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&#39;Bator-Kelly, C.M.&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&#39;Rieder, E.&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&#39;Chipman, P.R.&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&#39;Craig, A.&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&#39;Kuhn, R.J.&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&#39;Wimmer, E.&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&#39;Rossmann, M.G.&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>Result is a dictionary of <code class="docutils literal notranslate"><span class="pre">table</span> <span class="pre">name</span> <span class="pre">-&gt;</span> <span class="pre">List[List[str]]</span></code>. So basically you’re
getting the table directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – if specified, only grabs the specified table, else returns every table</p></li>
<li><p><strong>dikt</strong> – whether to return a dict or table for each table</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.cif.records">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.cif.</span></span><span class="sig-name descname"><span class="pre">records</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/cif.html#records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.cif.records" title="Permalink to this definition"></a></dt>
<dd><p>Load record info.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;1z7z.cif&quot;</span> <span class="o">|</span> <span class="n">cif</span><span class="o">.</span><span class="n">records</span><span class="p">()</span> <span class="o">|</span> <span class="n">op</span><span class="p">()[</span><span class="s2">&quot;_exptl&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Potential output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;entry_id&#39;</span><span class="p">,</span> <span class="s1">&#39;1Z7Z&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;ELECTRON MICROSCOPY&#39;&quot;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;crystals_number&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>Result is a dictionary of <code class="docutils literal notranslate"><span class="pre">record</span> <span class="pre">name</span> <span class="pre">-&gt;</span> <span class="pre">(n,</span> <span class="pre">2)</span> <span class="pre">table</span></code></p>
</dd></dl>

</section>
<section id="module-k1lib.cli.conv">
<span id="conv-module"></span><h2>conv module<a class="headerlink" href="#module-k1lib.cli.conv" title="Permalink to this heading"></a></h2>
<p>This is for all short utilities that converts from 1 data type to another. They
might feel they have different styles, as <a class="reference internal" href="#k1lib.cli.conv.toFloat" title="k1lib.cli.conv.toFloat"><code class="xref py py-class docutils literal notranslate"><span class="pre">toFloat</span></code></a> converts object iterator to
float iterator, while <a class="reference internal" href="#k1lib.cli.conv.toImg" title="k1lib.cli.conv.toImg"><code class="xref py py-class docutils literal notranslate"><span class="pre">toImg</span></code></a> converts single image url to single PIL image,
whereas <a class="reference internal" href="#k1lib.cli.conv.toSum" title="k1lib.cli.conv.toSum"><code class="xref py py-class docutils literal notranslate"><span class="pre">toSum</span></code></a> converts float iterator into a single float value.</p>
<p>The general convention is, if the intended operation sounds simple (convert to floats,
strings, types, …), then most likely it will convert iterator to iterator, as you
can always use the function directly if you only want to apply it on 1 object.</p>
<p>If it sounds complicated (convert to PIL image, tensor, …) then most likely it will
convert object to object. Lastly, there are some that just feels right to input
an iterator and output a single object (like getting max, min, std, mean values).</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toNdArray">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toNdArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toNdArray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toNdArray" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toNdArray.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">several</span> <span class="pre">data</span> <span class="pre">types</span> <span class="pre">to</span> <span class="pre">numpy.ndarray'</span></em><a class="headerlink" href="#k1lib.cli.conv.toNdArray.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toNdArray.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toNdArray.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toNdArray.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts generator/several data types to <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>. Essentially
<code class="docutils literal notranslate"><span class="pre">np.array(list(it))</span></code>. Can convert PIL Image. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns array([0., 1., 2.])</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">toNdArray</span><span class="p">()</span>
<span class="c1"># returns array([0., 1., 2.], dtype=float32)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">toNdArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toNdArray.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toNdArray.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toNdArray.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toTensor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toTensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toTensor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toTensor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toTensor.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">several</span> <span class="pre">data</span> <span class="pre">types</span> <span class="pre">to</span> <span class="pre">torch.Tensor'</span></em><a class="headerlink" href="#k1lib.cli.conv.toTensor.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toTensor.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toTensor.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toTensor.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts generator to <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a>. Essentially
<code class="docutils literal notranslate"><span class="pre">torch.tensor(list(it))</span></code>. Default dtype is float32. Can convert PIL Image. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tensor([0., 1., 2.], dtype=torch.float64)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">toTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toTensor.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><span class="pre">Tensor</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toTensor.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toTensor.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRange">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toRange</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRange" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRange.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Returns</span> <span class="pre">iter(range(len(it))),</span> <span class="pre">but</span> <span class="pre">incrementally'</span></em><a class="headerlink" href="#k1lib.cli.conv.toRange.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRange.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRange.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRange.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Returns iter(range(len(it))), effectively.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 2]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">toRange</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRange.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRange.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRange.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toList</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toList" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toList.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toList.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toList.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts generator to list.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 2, 3, 4]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span>
<span class="c1"># returns [0, 1, 2, 3, 4]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
<p>So this cli is sort of outdated. It still works fine, nothing wrong
with it, but just do <code class="docutils literal notranslate"><span class="pre">aS(list)</span></code> instead. It’s not removed to
avoid breaking old projects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toList.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toList.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toList.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toSum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toSum</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toSum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toSum" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toSum.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">sum</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">numbers'</span></em><a class="headerlink" href="#k1lib.cli.conv.toSum.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toSum.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toSum.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toSum.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the sum of list of numbers. Can pipe in <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> or <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>                <span class="o">|</span> <span class="n">toSum</span><span class="p">()</span>                 <span class="c1"># returns 45</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (2,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toSum.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toSum.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toSum.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toProd">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toProd</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toProd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toProd" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toProd.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">product</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">numbers'</span></em><a class="headerlink" href="#k1lib.cli.conv.toProd.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toProd.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toProd.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toProd.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the product of a list of numbers. Can pipe in <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> or <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>              <span class="o">|</span> <span class="n">toProd</span><span class="p">()</span>                 <span class="c1"># returns 362880</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">toProd</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (2,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toProd.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toProd.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toProd.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAvg">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toAvg</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAvg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAvg" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAvg.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">average</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">numbers'</span></em><a class="headerlink" href="#k1lib.cli.conv.toAvg.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAvg.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAvg.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAvg.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates average of list of numbers. Can pipe in <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> or <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>                <span class="o">|</span> <span class="n">toAvg</span><span class="p">()</span>                 <span class="c1"># returns 4.5</span>
<span class="p">[]</span>                       <span class="o">|</span> <span class="n">toAvg</span><span class="p">()</span>                 <span class="c1"># returns nan</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">toAvg</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (2,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAvg.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAvg.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAvg.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMean">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toMean</span></span><a class="headerlink" href="#k1lib.cli.conv.toMean" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.conv.toAvg" title="k1lib.cli.conv.toAvg"><code class="xref py py-class docutils literal notranslate"><span class="pre">toAvg</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toStd">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toStd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ddof</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toStd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toStd" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toStd.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">standard</span> <span class="pre">deviation</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">numbers'</span></em><a class="headerlink" href="#k1lib.cli.conv.toStd.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toStd.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ddof</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toStd.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toStd.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates standard deviation of list of numbers. Can pipe in <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a>
or <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> to be faster. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>                <span class="o">|</span> <span class="n">toStd</span><span class="p">()</span>                 <span class="c1"># returns 2.8722813232690143</span>
<span class="p">[]</span>                       <span class="o">|</span> <span class="n">toStd</span><span class="p">()</span>                 <span class="c1"># returns nan</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">toStd</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (2,)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ddof</strong> – “delta degree of freedom”. The divisor used in calculations is <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">-</span> <span class="pre">ddof</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toStd.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toStd.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toStd.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMedian">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toMedian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">percentile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMedian"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMedian" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMedian.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">median</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">numbers'</span></em><a class="headerlink" href="#k1lib.cli.conv.toMedian.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMedian.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">percentile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMedian.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMedian.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the median of a list of numbers.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>                <span class="o">|</span> <span class="n">toMedian</span><span class="p">()</span>                  <span class="c1"># returns 4.5</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>                <span class="o">|</span> <span class="n">toMedian</span><span class="p">()</span>                  <span class="c1"># returns 2.0</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">toMedian</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (3,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMedian.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMedian.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMedian.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMax">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toMax</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMax"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMax" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMax.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">max</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">numbers'</span></em><a class="headerlink" href="#k1lib.cli.conv.toMax.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMax.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMax.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMax.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the max of a bunch of numbers. Can pipe in <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> or <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>          <span class="o">|</span> <span class="n">toMax</span><span class="p">()</span>                 <span class="c1"># returns 6</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">toMax</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (2,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMax.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMax.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMax.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toMin</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMin.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">min</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">numbers'</span></em><a class="headerlink" href="#k1lib.cli.conv.toMin.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMin.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMin.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMin.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the min of a bunch of numbers. Can pipe in <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> or <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>          <span class="o">|</span> <span class="n">toMin</span><span class="p">()</span>                 <span class="c1"># returns 1</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">toMin</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (2,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMin.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMin.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMin.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toArgmin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toArgmin</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toArgmin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toArgmin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toArgmin.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;Grabs</span> <span class="pre">the</span> <span class="pre">min</span> <span class="pre">value's</span> <span class="pre">index&quot;</span></em><a class="headerlink" href="#k1lib.cli.conv.toArgmin.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toArgmin.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toArgmin.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toArgmin.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Get the input iterator’s index of the min value.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>          <span class="o">|</span> <span class="n">toArgmin</span><span class="p">()</span>                 <span class="c1"># returns 3</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">toArgmin</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (3,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toArgmin.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toArgmin.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toArgmin.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toArgmax">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toArgmax</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toArgmax"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toArgmax" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toArgmax.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;Grabs</span> <span class="pre">the</span> <span class="pre">max</span> <span class="pre">value's</span> <span class="pre">index&quot;</span></em><a class="headerlink" href="#k1lib.cli.conv.toArgmax.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toArgmax.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toArgmax.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toArgmax.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Get the input iterator’s index of the max value.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>          <span class="o">|</span> <span class="n">toArgmax</span><span class="p">()</span>                 <span class="c1"># returns 4</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">toArgmax</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (3,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toArgmax.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toArgmax.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toArgmax.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toImg">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toImg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">closeFig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toImg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toImg" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toImg.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">multiple</span> <span class="pre">data</span> <span class="pre">types</span> <span class="pre">into</span> <span class="pre">a</span> <span class="pre">PIL</span> <span class="pre">image'</span></em><a class="headerlink" href="#k1lib.cli.conv.toImg.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toImg.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">closeFig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toImg.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toImg.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts multiple data types into a PIL image.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>          <span class="c1"># grabs first image in the current folder</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>           <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># converts from tensor/array to image</span>
<span class="s2">&quot;abc.jpg&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># grabs image, converts to byte stream, and converts back to image</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">]</span>                  <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># converts paragraphs to image</span>
<span class="s2">&quot;c1ccc(C)cc1&quot;</span> <span class="o">|</span> <span class="n">toMol</span><span class="p">()</span>         <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># converts SMILES string to molecule, then to image</span>
<span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;bc&quot;</span><span class="p">,</span> <span class="s2">&quot;ca&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">kgv</span><span class="o">.</span><span class="n">sketch</span><span class="p">()</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">())</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># sketches a graphviz plot, converts to svg then renders the svg as an image</span>
<span class="n">df</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span>                   <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># converts pandas data frame to html, then render it to image</span>
</pre></div>
</div>
<p>You can also save a matplotlib figure by piping in a <a class="reference external" href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.8.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are working with image tensors, which is typically have
dimensions of (C, H, W), you have to permute it to PIL’s (H, W, C)
first before passing it into this cli.</p>
<p>Also it’s expected that
your tensor image ranges from 0-255, and not 0-1. Make sure you
renormalize it</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>closeFig</strong> – if input is a matplotlib figure, then closes the figure after generating the image</p></li>
<li><p><strong>crop</strong> – whether to crop white spaces around an image or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toImg.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.Image" title="(in Pillow (PIL Fork) v10.2.0)"><span class="pre">Image</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toImg.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toImg.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRgb">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toRgb</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRgb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRgb" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRgb.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">grayscale/rgb</span> <span class="pre">PIL</span> <span class="pre">image</span> <span class="pre">to</span> <span class="pre">rgb</span> <span class="pre">image'</span></em><a class="headerlink" href="#k1lib.cli.conv.toRgb.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRgb.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRgb.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRgb.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts greyscale/rgb PIL image to rgb image.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># reads image file and converts it to rgb</span>
<span class="s2">&quot;a.png&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toRgb</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRgb.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRgb.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRgb.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRgba">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toRgba</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRgba"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRgba" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRgba.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">random</span> <span class="pre">PIL</span> <span class="pre">image</span> <span class="pre">to</span> <span class="pre">rgba</span> <span class="pre">image'</span></em><a class="headerlink" href="#k1lib.cli.conv.toRgba.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRgba.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRgba.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRgba.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts random PIL image to rgba image.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># reads image file and converts it to rgba</span>
<span class="s2">&quot;a.png&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toRgba</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toRgba.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toRgba.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toRgba.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toGray">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toGray</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toGray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toGray" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toGray.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">random</span> <span class="pre">PIL</span> <span class="pre">image</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">grayscale</span> <span class="pre">image'</span></em><a class="headerlink" href="#k1lib.cli.conv.toGray.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toGray.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toGray.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toGray.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts random PIL image to a grayscale image.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># reads image file and converts it to rgba</span>
<span class="s2">&quot;a.png&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toGray</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toGray.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toGray.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toGray.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDict" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDict.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">2</span> <span class="pre">Iterators,</span> <span class="pre">1</span> <span class="pre">key,</span> <span class="pre">1</span> <span class="pre">value</span> <span class="pre">into</span> <span class="pre">a</span> <span class="pre">dictionary'</span></em><a class="headerlink" href="#k1lib.cli.conv.toDict.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDict.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDict.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDict.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts 2 Iterators, 1 key, 1 value into a dictionary.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns {1: 3, 2: 4}</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span> <span class="o">|</span> <span class="n">toDict</span><span class="p">()</span>
<span class="c1"># returns {1: 3, 2: 4}</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span> <span class="o">|</span> <span class="n">toDict</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">rows</span></code> is a string, then it will build a dictionary from key-value
pairs delimited by this character. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;gene_id &quot;ENSG00000290825.1&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;transcript_id &quot;ENST00000456328.2&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;gene_type &quot;lncRNA&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;gene_name &quot;DDX11L2&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;transcript_type &quot;lncRNA&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;transcript_name &quot;DDX11L2-202&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;level 2&#39;</span><span class="p">,</span>
 <span class="s1">&#39;transcript_support_level &quot;1&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tag &quot;basic&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tag &quot;Ensembl_canonical&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;havana_transcript &quot;OTTHUMT00000362751.1&quot;&#39;</span><span class="p">]</span> <span class="o">|</span> <span class="n">toDict</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>That returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;gene_id&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;ENSG00000290825.1&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;transcript_id&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;ENST00000456328.2&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;gene_type&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;lncRNA&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;gene_name&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;DDX11L2&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;transcript_type&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;lncRNA&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;transcript_name&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;DDX11L2-202&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span>
 <span class="s1">&#39;transcript_support_level&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;1&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tag&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;Ensembl_canonical&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;havana_transcript&#39;</span><span class="p">:</span> <span class="s1">&#39;&quot;OTTHUMT00000362751.1&quot;&#39;</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> – if True, reads input in row by row, else reads
in list of columns</p></li>
<li><p><strong>f</strong> – if specified, return a defaultdict that uses this function as its generator</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDict.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDict.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDict.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toFloat">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toFloat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toFloat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toFloat" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toFloat.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">an</span> <span class="pre">iterator</span> <span class="pre">into</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">floats'</span></em><a class="headerlink" href="#k1lib.cli.conv.toFloat.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toFloat.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toFloat.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toFloat.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts every row into a float. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [1, 3, -2.3]</span>
<span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;-2.3&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">toFloat</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1.0, &#39;a&#39;], [2.3, &#39;b&#39;], [8.0, &#39;c&#39;]]</span>
<span class="p">[[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;2.3&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">toFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>With weird rows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1.0, &#39;a&#39;], [8.0, &#39;c&#39;]]</span>
<span class="p">[[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">toFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1.0, &#39;a&#39;], [0.0, &#39;b&#39;], [8.0, &#39;c&#39;]]</span>
<span class="p">[[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">toFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This also works well with <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> and <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>,
as they will not be broken up into an iterator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns a numpy array, instead of an iterator</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="o">|</span> <span class="n">toFloat</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> – if nothing, then will convert each row. If available, then
convert all the specified columns</p></li>
<li><p><strong>mode</strong> – different conversion styles
- 0: simple <code class="docutils literal notranslate"><span class="pre">float()</span></code> function, fastest, but will throw errors if it can’t be parsed
- 1: if there are errors, then replace it with zero
- 2: if there are errors, then eliminate the row</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toFloat.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toFloat.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toFloat.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toInt">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toInt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toInt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toInt" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toInt.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">an</span> <span class="pre">iterator</span> <span class="pre">into</span> <span class="pre">a</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">ints'</span></em><a class="headerlink" href="#k1lib.cli.conv.toInt.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toInt.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toInt.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toInt.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts every row into an integer. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [1, 3, -2]</span>
<span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;-2.3&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">toInt</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> – if nothing, then will convert each row. If available, then
convert all the specified columns</p></li>
<li><p><strong>mode</strong> – different conversion styles
- 0: simple <code class="docutils literal notranslate"><span class="pre">float()</span></code> function, fastest, but will throw errors if it can’t be parsed
- 1: if there are errors, then replace it with zero
- 2: if there are errors, then eliminate the row</p></li>
</ul>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#k1lib.cli.conv.toFloat" title="k1lib.cli.conv.toFloat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toFloat()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toInt.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toInt.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toInt.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toBytes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toBytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toBytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toBytes" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toBytes.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">several</span> <span class="pre">object</span> <span class="pre">types</span> <span class="pre">to</span> <span class="pre">bytes'</span></em><a class="headerlink" href="#k1lib.cli.conv.toBytes.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toBytes.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toBytes.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toBytes.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts several object types to bytes.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># converts string to bytes</span>
<span class="s2">&quot;abc&quot;</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span>
<span class="c1"># converts image to bytes in jpg format</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span>
<span class="c1"># converts image to bytes in png format</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">(</span><span class="s2">&quot;PNG&quot;</span><span class="p">)</span>

<span class="s2">&quot;some_file.mp3&quot;</span> <span class="o">|</span> <span class="n">toAudio</span><span class="p">()</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">(</span><span class="s2">&quot;mp3&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If it doesn’t know how to convert to bytes, it will just pickle it</p>
<div class="admonition-custom-datatype admonition">
<p class="admonition-title">Custom datatype</p>
<p>It is possible to build objects that can interoperate with this cli,
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">custom1</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_toBytes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;abc&quot;</span>
<span class="k">class</span> <span class="nc">custom2</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_toBytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataType</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">dataType</span> <span class="o">==</span> <span class="s2">&quot;png&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;123&quot;</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;456&quot;</span>

<span class="n">custom1</span><span class="p">()</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span>      <span class="c1"># returns b&quot;abc&quot;</span>
<span class="n">custom2</span><span class="p">()</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span>      <span class="c1"># returns b&quot;456&quot;</span>
<span class="n">custom2</span><span class="p">()</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">(</span><span class="s2">&quot;png&quot;</span><span class="p">)</span> <span class="c1"># returns b&quot;123&quot;</span>
</pre></div>
</div>
<p>When called upon, <a class="reference internal" href="#k1lib.cli.conv.toBytes" title="k1lib.cli.conv.toBytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">toBytes</span></code></a> will detect that the input has the <code class="docutils literal notranslate"><span class="pre">_toBytes</span></code>
method, which will prompt it to execute that method of the complex object. Of
course, this means that you can return anything, not necessarily bytes, but to
maintain intuitiveness, you should return either bytes or iterator of bytes</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataType</strong> – depending on input. If it’s an image then this can be png, jpg. If
it’s a sound then this can be mp3, wav or things like that</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toBytes.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toBytes.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toBytes.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDataUri">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toDataUri</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDataUri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDataUri" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDataUri.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">several</span> <span class="pre">object</span> <span class="pre">types</span> <span class="pre">into</span> <span class="pre">data</span> <span class="pre">uri</span> <span class="pre">scheme'</span></em><a class="headerlink" href="#k1lib.cli.conv.toDataUri.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDataUri.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDataUri.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDataUri.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts incoming object into data uri scheme.
Data uris are the things that look like “<a class="reference external" href="data:image/png;base64">data:image/png;base64</a>, …”,
or “<a class="reference external" href="data:text/html;base64">data:text/html;base64</a>, …”. This is a convenience tool mainly
for other tools, and not quite useful directly. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">randomImg</span> <span class="o">=</span> <span class="n">cat</span><span class="p">(</span><span class="s2">&quot;https://mlexps.com/ergun.png&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># returns PIL image</span>
<span class="n">randomImg</span> <span class="o">|</span> <span class="n">toDataUri</span><span class="p">()</span>              <span class="c1"># returns k1lib.cli.conv.DataUri object with .mime field &quot;image/png&quot; and .uri field &quot;data:image/png;base64, ...&quot;</span>
<span class="n">randomImg</span> <span class="o">|</span> <span class="n">toDataUri</span><span class="p">()</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span>   <span class="c1"># returns hmtl string `&lt;img src=&quot;data:image/png;base64, ...&quot;/&gt;`</span>
<span class="n">randomImg</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span>                 <span class="c1"># same like above. toHtml() actually calls toDataUri() behind the scenes</span>
<span class="n">randomImg</span> <span class="o">|</span> <span class="n">toDataUri</span><span class="p">()</span> <span class="o">|</span> <span class="n">toAnchor</span><span class="p">()</span> <span class="c1"># creates anchor tag (aka link elements &quot;&lt;a&gt;&lt;/a&gt;&quot;) that, when clicked, displays the image in a new tab</span>
<span class="n">randomImg</span> <span class="o">|</span> <span class="n">toAnchor</span><span class="p">()</span>               <span class="c1"># same as above. toAnchor() actually calls toDataUri() behind the scenes</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDataUri.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDataUri.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDataUri.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAnchor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toAnchor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'click</span> <span class="pre">here'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAnchor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAnchor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAnchor.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">several</span> <span class="pre">object</span> <span class="pre">types</span> <span class="pre">into</span> <span class="pre">a</span> <span class="pre">html</span> <span class="pre">anchor</span> <span class="pre">tag'</span></em><a class="headerlink" href="#k1lib.cli.conv.toAnchor.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAnchor.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'click</span> <span class="pre">here'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAnchor.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAnchor.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts incoming object into a html anchor tag that, when clicked,
displays the incoming object’s html in another tab. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">randomImg</span> <span class="o">=</span> <span class="n">cat</span><span class="p">(</span><span class="s2">&quot;https://mlexps.com/ergun.png&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># returns PIL image</span>
<span class="n">randomImg</span> <span class="o">|</span> <span class="n">toAnchor</span><span class="p">()</span> <span class="c1"># returns html string `&lt;a href=&quot;data:image/png;base64, ...&quot;&gt;&lt;/a&gt;`</span>
</pre></div>
</div>
<p>On some browsers, there’s sort of a weird bug where a new tab would open, but
there’s nothing displayed on that tab. If you see this is happening, just press
F5 or Ctrl+R to refresh the page and it should display everything nicely</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – text to display inside of the anchor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAnchor.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAnchor.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAnchor.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toHtml">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toHtml</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toHtml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toHtml" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toHtml.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">several</span> <span class="pre">object</span> <span class="pre">types</span> <span class="pre">to</span> <span class="pre">html'</span></em><a class="headerlink" href="#k1lib.cli.conv.toHtml.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toHtml.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toHtml.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toHtml.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts several object types to html.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># converts PIL image to html &lt;img&gt; tag</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span>
<span class="c1"># converts graphviz graph to svg text (which is essentially html)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">digraph</span><span class="p">();</span> <span class="n">g</span><span class="p">(</span><span class="o">*</span><span class="s2">&quot;abc&quot;</span><span class="p">);</span> <span class="n">g</span><span class="p">(</span><span class="o">*</span><span class="s2">&quot;bcd&quot;</span><span class="p">);</span> <span class="n">g</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span>

<span class="c1"># converts plotly graphs to html</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]})</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Simple Line Chart&#39;</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span>

<span class="c1"># converts matplotlib plot to image, and then to html. Do this if you want a static plot</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span>
<span class="c1"># converts matplotlib plot to D3.js html sketch</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span> <span class="o">|</span> <span class="n">toHtml</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toHtml.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toHtml.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toHtml.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAscii">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toAscii</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAscii"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAscii" title="Permalink to this definition"></a></dt>
<dd><p>Converts complex unicode text to its base ascii form.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;hà nội&quot;</span> <span class="o">|</span> <span class="n">toAscii</span><span class="p">()</span> <span class="c1"># returns &quot;ha noi&quot;</span>
</pre></div>
</div>
<p>Taken from <a class="reference external" href="https://stackoverflow.com/questions/2365411/convert-unicode-to-ascii-without-errors-in-python">https://stackoverflow.com/questions/2365411/convert-unicode-to-ascii-without-errors-in-python</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.conv.toHash">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toHash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toHash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toHash" title="Permalink to this definition"></a></dt>
<dd><p>Converts some string into some hash string.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;abc&quot;</span> <span class="o">|</span> <span class="n">toHash</span><span class="p">()</span> <span class="c1"># returns &#39;gASVJAAAAAAAAABDILp4Fr+PAc/qQUFA3l2uIiOwA2Gjlhd6nLQQ/2HyABWtlC4=&#39;</span>
</pre></div>
</div>
<p>Why not just use the builtin function <code class="docutils literal notranslate"><span class="pre">hash(&quot;abc&quot;)</span></code>? Because it generates different
hashes for different interpreter sessions, and that breaks many of my applications that
need the hash value to stay constant forever.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toCsv">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toCsv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allSheets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toCsv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toCsv" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toCsv.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">several</span> <span class="pre">object</span> <span class="pre">types</span> <span class="pre">into</span> <span class="pre">a</span> <span class="pre">table/dataframe'</span></em><a class="headerlink" href="#k1lib.cli.conv.toCsv.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toCsv.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allSheets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toCsv.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toCsv.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts a csv file name into a table.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;abc.csv&quot;</span>  <span class="o">|</span> <span class="n">toCsv</span><span class="p">()</span>                       <span class="c1"># returns table of values (Iterator[List[str]])</span>
<span class="s2">&quot;abc.csv&quot;</span>  <span class="o">|</span> <span class="n">toCsv</span><span class="p">()</span>                       <span class="c1"># returns pd.DataFrame, if configure &#39;settings.toCsv.df = True&#39;</span>
<span class="s2">&quot;def.xlsx&quot;</span> <span class="o">|</span> <span class="n">toCsv</span><span class="p">()</span>                       <span class="c1"># returns table of values in the first sheet</span>
<span class="s2">&quot;def.xlsx&quot;</span> <span class="o">|</span> <span class="n">toCsv</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>                   <span class="c1"># returns List[Sheet name (str), table of values]</span>
<span class="p">[</span><span class="s2">&quot;a,b,c,d&quot;</span><span class="p">,</span> <span class="s2">&quot;1,2,3,4&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">toCsv</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;]]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that this is pretty slow compared to just splitting by semicolons. If your
dataset doesn’t have anything complicated like semicolons in quotes, then just
do <code class="docutils literal notranslate"><span class="pre">op().split(&quot;,&quot;).all()</span></code></p>
<p>If your dataset does have complicated quotes, then I’d suggest reading the csv
using this cli, then convert it to a tsv file (tab-separated value). Then you can
always just split the string using tab characters</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>allSheets</strong> – if input is an Excel sheet, whether to read in all sheets or
just the first sheet. No effect if input is a normal csv file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toCsv.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toCsv.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toCsv.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toYaml">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toYaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toYaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toYaml" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toYaml.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">file</span> <span class="pre">name/yaml</span> <span class="pre">string</span> <span class="pre">to</span> <span class="pre">object</span> <span class="pre">and</span> <span class="pre">object</span> <span class="pre">to</span> <span class="pre">yaml</span> <span class="pre">string'</span></em><a class="headerlink" href="#k1lib.cli.conv.toYaml.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toYaml.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toYaml.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toYaml.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts file name/yaml string to object and object to yaml string.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;some_file.yaml&quot;</span>                   <span class="o">|</span> <span class="n">toYaml</span><span class="p">()</span>  <span class="c1"># returns python object</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;some_file.yaml&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="simple">
<dt>“) | toYaml(1) # returns python object</dt><dd><p>{“some”: “object”, “arr”: [1, 2]}  | toYaml()  # returns yaml string. Detected object coming in, instead of string, so will convert object into yaml string</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> – None (default) for figure it out automatically,
0 for loading from file name, 1 for loading from raw yaml string,
2 for converting object to yaml string</p></li>
<li><p><strong>safe</strong> – if True, always use safe_load() instead of load()</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toYaml.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toYaml.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toYaml.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.Audio">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">Audio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pydub.audio_segment.AudioSegment</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#Audio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.Audio" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.Audio.resample">
<span class="sig-name descname"><span class="pre">resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.conv.Audio" title="k1lib.cli.conv.Audio"><span class="pre">Audio</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#Audio.resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.Audio.resample" title="Permalink to this definition"></a></dt>
<dd><p>Resamples the audio</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAudio">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toAudio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAudio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAudio" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAudio.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Reads</span> <span class="pre">audio</span> <span class="pre">from</span> <span class="pre">either</span> <span class="pre">a</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">a</span> <span class="pre">URL</span> <span class="pre">or</span> <span class="pre">from</span> <span class="pre">bytes'</span></em><a class="headerlink" href="#k1lib.cli.conv.toAudio.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAudio.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAudio.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAudio.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Reads audio from either a file or a URL or from bytes directly.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">au</span> <span class="o">=</span> <span class="s2">&quot;some_file.wav&quot;</span> <span class="o">|</span> <span class="n">toAudio</span><span class="p">()</span> <span class="c1"># can display in a notebook, which will preview the first 10 second</span>
<span class="n">au</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span>      <span class="c1"># exports audio as .wav file</span>
<span class="n">au</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">(</span><span class="s2">&quot;mp3&quot;</span><span class="p">)</span> <span class="c1"># exports audio as .mp3 file</span>
<span class="n">au</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="mi">16000</span><span class="p">)</span>  <span class="c1"># resamples audio to new rate</span>
<span class="n">au</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>      <span class="c1"># returns new Audio that has the first 10% of the audio only</span>
<span class="n">au</span> <span class="o">|</span> <span class="n">splitW</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>   <span class="c1"># splits Audio into 2 Audios, first one covering 80% and second one covering 20% of the track</span>
<span class="n">au</span><span class="o">.</span><span class="n">raw</span>              <span class="c1"># internal pydub.AudioSegment object. If displayed in a notebook, will play the whole thing</span>
</pre></div>
</div>
<p>You can also use this on any Youtube video or random mp3 links online and on raw bytes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;https://www.youtube.com/watch?v=FtutLA63Cp8&quot;</span> <span class="o">|</span> <span class="n">toAudio</span><span class="p">()</span> <span class="c1"># grab Bad Apple song from internet</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;some_file.wav&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">toAudio</span><span class="p">()</span> <span class="c1"># grab from raw bytes of mp3 or wav, etc.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAudio.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.conv.Audio" title="k1lib.cli.conv.Audio"><span class="pre">Audio</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAudio.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAudio.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toUnix">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toUnix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dateutil.tz.tz.tzfile</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toUnix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toUnix" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toUnix.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">to</span> <span class="pre">unix</span> <span class="pre">timestamp'</span></em><a class="headerlink" href="#k1lib.cli.conv.toUnix.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toUnix.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dateutil.tz.tz.tzfile</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toUnix.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toUnix.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Tries anything piped in into a unix timestamp. If can’t convert
then return None or the current timestamp (depending on mode). Example:</p>
<p>Local time zone independent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;2023&quot;</span> <span class="o">|</span> <span class="n">toUnix</span><span class="p">()</span>                      <span class="c1"># returns 2023, or 2023 seconds after unix epoch. Might be undesirable, but has to support raw ints/floats</span>
<span class="s2">&quot;2023-11-01T00Z&quot;</span> <span class="o">|</span> <span class="n">toUnix</span><span class="p">()</span>            <span class="c1"># midnight Nov 1st 2023 GMT</span>
<span class="s2">&quot;2023-11-01T00:00:00-04:00&quot;</span> <span class="o">|</span> <span class="n">toUnix</span><span class="p">()</span> <span class="c1"># midnight Nov 1st 2023 EST</span>
<span class="s2">&quot;2023-11-01&quot;</span> <span class="o">|</span> <span class="n">toUnix</span><span class="p">(</span><span class="s2">&quot;US/Pacific&quot;</span><span class="p">)</span>    <span class="c1"># midnight Nov 1st 2023 PST</span>
<span class="s2">&quot;2023-11-01&quot;</span> <span class="o">|</span> <span class="n">toUnix</span><span class="p">(</span><span class="s2">&quot;UTC&quot;</span><span class="p">)</span>           <span class="c1"># midnight Nov 1st 2023 UTC</span>
</pre></div>
</div>
<p>Local time zone dependent (assumes EST):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;2023-11&quot;</span> <span class="o">|</span> <span class="n">toUnix</span><span class="p">()</span> <span class="c1"># if today&#39;s Nov 2nd EST, then this would be 1698897600, or midnight Nov 2nd 2023 EST</span>
<span class="s2">&quot;2023-11-04&quot;</span> <span class="o">|</span> <span class="n">toUnix</span><span class="p">()</span> <span class="c1"># midnight Nov 4th 2023 EST</span>
</pre></div>
</div>
<p>Feel free to experiment more, but in general, this is pretty versatile in what it can
convert. With more effort, I’d probably make this so that every example given will not
depend on local time, but since I just use this to calculate time differences, I don’t
really care.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tz</strong> – Timezone, like “US/Eastern”, “US/Pacific”. If not specified, then assumes local
timezone. Get all available timezones by executing <code class="docutils literal notranslate"><span class="pre">toUnix.tzs()</span></code></p></li>
<li><p><strong>mode</strong> – if 0, then returns None if can’t convert, to catch errors quickly. If 1, then returns current timestamp instead</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toUnix.tzs">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tzs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toUnix.tzs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toUnix.tzs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toUnix.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toUnix.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toUnix.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toIso">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toIso</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dateutil.tz.tz.tzfile</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toIso"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toIso" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toIso.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">unix</span> <span class="pre">timestamp</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">human</span> <span class="pre">readable</span> <span class="pre">time</span> <span class="pre">string'</span></em><a class="headerlink" href="#k1lib.cli.conv.toIso.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toIso.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dateutil.tz.tz.tzfile</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toIso.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toIso.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts unix timestamp into ISO 8601 string format.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1701382420</span> <span class="o">|</span> <span class="n">toIso</span><span class="p">()</span>            <span class="c1"># returns &#39;2023-11-30T17:13:40&#39;, which is correct in EST time</span>
<span class="mi">1701382420</span> <span class="o">|</span> <span class="n">toIso</span><span class="p">()</span> <span class="o">|</span> <span class="n">toUnix</span><span class="p">()</span> <span class="c1"># returns 1701382420, the input timestamp, showing it&#39;s correct</span>
<span class="mf">1701382420.123456789</span> <span class="o">|</span> <span class="n">toIso</span><span class="p">()</span>  <span class="c1"># still returns &#39;2023-11-30T17:13:40&#39;</span>
</pre></div>
</div>
<p>As you might have noticed, this cli depends on the timezone of the host computer. If you want
to get it in a different timezone, do this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1701382420</span> <span class="o">|</span> <span class="n">toIso</span><span class="p">(</span><span class="s2">&quot;UTC&quot;</span><span class="p">)</span>        <span class="c1"># returns &#39;2023-11-30T22:13:40&#39;</span>
<span class="mi">1701382420</span> <span class="o">|</span> <span class="n">toIso</span><span class="p">(</span><span class="s2">&quot;US/Pacific&quot;</span><span class="p">)</span> <span class="c1"># returns &#39;2023-11-30T14:13:40&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tz</strong> – Timezone, like “US/Eastern”, “US/Pacific”. If not specified, then assumes local
timezone. Get all available timezones by executing <code class="docutils literal notranslate"><span class="pre">toUnix.tzs()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toIso.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toIso.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toIso.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toYMD">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toYMD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode=&lt;class</span> <span class="pre">'int'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toYMD"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toYMD" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toYMD.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">unix</span> <span class="pre">timestamp</span> <span class="pre">into</span> <span class="pre">tuple</span> <span class="pre">(year,</span> <span class="pre">month,</span> <span class="pre">day,</span> <span class="pre">hour,</span> <span class="pre">minute,</span> <span class="pre">second)'</span></em><a class="headerlink" href="#k1lib.cli.conv.toYMD.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toYMD.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode=&lt;class</span> <span class="pre">'int'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toYMD.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toYMD.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts unix timestamp into tuple (year, month, day, hour, minute, second).
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1701382420</span> <span class="o">|</span> <span class="n">toYMD</span><span class="p">()</span>  <span class="c1"># returns [2023, 11, 30, 17, 13, 40] in EST timezone</span>
<span class="mi">1701382420</span> <span class="o">|</span> <span class="n">toYMD</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># returns 2023</span>
<span class="mi">1701382420</span> <span class="o">|</span> <span class="n">toYMD</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># returns 11</span>

<span class="mi">1701382395</span> <span class="o">|</span> <span class="n">toYMD</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span> <span class="c1"># returns [&#39;2023&#39;, &#39;11&#39;, &#39;30&#39;, &#39;17&#39;, &#39;13&#39;, &#39;15&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idx</strong> – if specified, take the desired element only. If 0, then take year, 1, then month, etc.</p></li>
<li><p><strong>mode</strong> – either int or str. If str, then returns nicely adjusted numbers</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toYMD.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toYMD.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toYMD.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toLinks">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toLinks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toLinks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toLinks" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toLinks.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Extracts</span> <span class="pre">links</span> <span class="pre">and</span> <span class="pre">urls</span> <span class="pre">from</span> <span class="pre">a</span> <span class="pre">paragraph'</span></em><a class="headerlink" href="#k1lib.cli.conv.toLinks.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toLinks.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toLinks.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toLinks.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Extracts links and urls from a paragraph.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">paragraph</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;http://a.c&quot;</span><span class="p">,</span>
    <span class="s2">&quot;http://a2.c some other text in between &lt;a href=&#39;http://b.d&#39;&gt;some link&lt;/a&gt; fdvb&quot;</span>
<span class="p">]</span>
<span class="c1"># returns {&#39;http://a.c&#39;, &#39;http://a2.c&#39;, &#39;http://b.d&#39;}</span>
<span class="n">paragraph</span> <span class="o">|</span> <span class="n">toLinks</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If the input is a string instead of an iterator of strings, then
it will <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a> it first, then look for links
inside the result. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;https://en.wikipedia.org/wiki/Cheese&quot;</span> <span class="o">|</span> <span class="n">toLinks</span><span class="p">()</span>
</pre></div>
</div>
<p>At the time of writing, that returns a lot of links:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;/wiki/Rind-washed_cheese&#39;</span><span class="p">,</span>
 <span class="s1">&#39;#cite_ref-online_5-7&#39;</span><span class="p">,</span>
 <span class="s1">&#39;https://web.archive.org/web/20160609031000/http://www.theguardian.com/lifeandstyle/wordofmouth/2012/jun/27/how-eat-cheese-and-biscuits&#39;</span><span class="p">,</span>
 <span class="s1">&#39;https://is.wikipedia.org/wiki/Ostur&#39;</span><span class="p">,</span>
 <span class="s1">&#39;/wiki/Meat_and_milk&#39;</span><span class="p">,</span>
 <span class="s1">&#39;/wiki/Wayback_Machine&#39;</span><span class="p">,</span>
 <span class="s1">&#39;/wiki/File:WikiCheese_-_Saint-Julien_aux_noix_01.jpg&#39;</span><span class="p">,</span>
 <span class="s1">&#39;https://gv.wikipedia.org/wiki/Caashey&#39;</span><span class="p">,</span>
 <span class="s1">&#39;/wiki/Eyes_(cheese)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;/wiki/Template_talk:Condiments&#39;</span><span class="p">,</span>
 <span class="s1">&#39;#Pasteurization&#39;</span><span class="p">,</span>
 <span class="s1">&#39;/wiki/Tuscan_dialect&#39;</span><span class="p">,</span>
 <span class="s1">&#39;#cite_note-23&#39;</span><span class="p">,</span>
 <span class="s1">&#39;#cite_note-aha2017-48&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>So, keep in mind that lots of different things can be considered a
link. That includes absolute links (’<a class="reference external" href="https://gv.wikipedia.org/wiki/Caashey">https://gv.wikipedia.org/wiki/Caashey</a>’),
relative links within that particular site (‘/wiki/Tuscan_dialect’), and
relative links within the page (‘#Pasteurization’).</p>
<p>How it works underneath is that it’s looking for a string like “<a class="reference external" href="https://">https://</a>…”
and a string like “href=’…’”, which usually have a link inside. For the
first detection style, you can specify extra protocols that you want to
search for using <code class="docutils literal notranslate"><span class="pre">settings.cli.toLinks.protocols</span> <span class="pre">=</span> <span class="pre">[...]</span></code>.</p>
<p>Also, this will detect links nested within each other multiple times.
For example, the link ‘<a class="reference external" href="https://web.archive.org/web/20160609031000/http://www.theguardian.com/lifeandstyle/wordofmouth/2012/jun/27/how-eat-cheese-and-biscuits">https://web.archive.org/web/20160609031000/http://www.theguardian.com/lifeandstyle/wordofmouth/2012/jun/27/how-eat-cheese-and-biscuits</a>’
will appear twice in the result, once as itself, but also ‘<a class="reference external" href="https://www.theguardian.com/lifeandstyle/wordofmouth/2012/jun/27/how-eat-cheese-and-biscuits">https://www.theguardian.com/lifeandstyle/wordofmouth/2012/jun/27/how-eat-cheese-and-biscuits</a>’</p>
<p>Note that if you really try, you will be able to find an example where this won’t
work, so don’t expect 100% reliability. But for ost use cases, this should perform
splendidly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toLinks.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toLinks.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toLinks.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMovingAvg">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toMovingAvg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMovingAvg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMovingAvg" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMovingAvg.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Smoothes</span> <span class="pre">out</span> <span class="pre">sequential</span> <span class="pre">data</span> <span class="pre">using</span> <span class="pre">some</span> <span class="pre">momentum</span> <span class="pre">and</span> <span class="pre">debias</span> <span class="pre">values'</span></em><a class="headerlink" href="#k1lib.cli.conv.toMovingAvg.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMovingAvg.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMovingAvg.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMovingAvg.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Smoothes out sequential data using momentum.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [4.8, 4.62, 4.458]. 4.8 because 0.9*5 + 0.1*3 = 4.8, and so on</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">toMovingAvg</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">debias</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Sometimes you want to ignore the initial value, then you can turn on debias mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">|</span> <span class="n">toMovingAvg</span><span class="p">(</span><span class="n">debias</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>             <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">|</span> <span class="n">toMovingAvg</span><span class="p">(</span><span class="n">debias</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">|</span> <span class="n">toMovingAvg</span><span class="p">(</span><span class="n">debias</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>              <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">|</span> <span class="n">toMovingAvg</span><span class="p">(</span><span class="n">debias</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">alpha</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Signal&quot;</span><span class="p">,</span> <span class="s2">&quot;Normal - 0.9 alpha&quot;</span><span class="p">,</span> <span class="s2">&quot;Normal - 0.95 alpha&quot;</span><span class="p">,</span> <span class="s2">&quot;Debiased - 0.9 alpha&quot;</span><span class="p">,</span> <span class="s2">&quot;Debiased - 0.95 alpha&quot;</span><span class="p">],</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/movingAvg.png" src="../_images/movingAvg.png" />
<p>As you can see, normal mode still has the influence of the initial value at
0 and can’t rise up fast, whereas the debias mode will ignore the initial
value and immediately snaps to the first value.</p>
<p>Also, the 2 graphs with 0.9 alpha snap together quicker than the 2 graphs
with 0.95 alpha. Here’s the effect of several alpha values:</p>
<img alt="../_images/movingAvg-alphas.png" src="../_images/movingAvg-alphas.png" />
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column to apply moving average to</p></li>
<li><p><strong>alpha</strong> – momentum term</p></li>
<li><p><strong>debias</strong> – whether to turn on debias mode or not</p></li>
<li><p><strong>v</strong> – initial value, doesn’t matter in debias mode</p></li>
<li><p><strong>dt</strong> – pretty much never used, hard to describe, belongs to debias mode, checkout source code for details</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toMovingAvg.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toMovingAvg.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toMovingAvg.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toCm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toCm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toCm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toCm" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toCm.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">the</span> <span class="pre">specified</span> <span class="pre">column</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">bunch</span> <span class="pre">of</span> <span class="pre">color</span> <span class="pre">values,</span> <span class="pre">and</span> <span class="pre">adds</span> <span class="pre">a</span> <span class="pre">matplotlib</span> <span class="pre">colorbar</span> <span class="pre">automatically'</span></em><a class="headerlink" href="#k1lib.cli.conv.toCm.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toCm.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toCm.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toCm.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts the specified column to a bunch of color
values, and adds a matplotlib colorbar automatically. “cm” = “color map”. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="n">exps</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">exps</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">exp</span><span class="p">:</span> <span class="p">[</span><span class="n">exp</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="n">exp</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># without toCm(), plots fine, demonstrates underlying mechanism, but doesn&#39;t allow plotting a separate colorbar</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">normalize</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">viridis</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">))</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
<span class="c1"># with toCm(), draws a colorbar automatically</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">toCm</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">cm</span><span class="o">.</span><span class="n">viridis</span><span class="p">,</span> <span class="s2">&quot;Exponential&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">))</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/toCm.png" src="../_images/toCm.png" />
<p>Functionality is kind of niche, but I need this over and over
again, so have to make it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column to convert float/int to color (tuple of 4 floats)</p></li>
<li><p><strong>cmap</strong> – colormap to use. If not specified, defaults to <code class="docutils literal notranslate"><span class="pre">cm.viridis</span></code></p></li>
<li><p><strong>title</strong> – title of the colorbar, optional</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toCm.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toCm.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toCm.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.Pdf">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">Pdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#Pdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.Pdf" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toPdf">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toPdf</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toPdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toPdf" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toPdf.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Reads</span> <span class="pre">a</span> <span class="pre">pdf</span> <span class="pre">file</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">managed</span> <span class="pre">object</span> <span class="pre">and</span> <span class="pre">can</span> <span class="pre">do</span> <span class="pre">lots</span> <span class="pre">of</span> <span class="pre">downstream</span> <span class="pre">tasks</span> <span class="pre">from</span> <span class="pre">there'</span></em><a class="headerlink" href="#k1lib.cli.conv.toPdf.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toPdf.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toPdf.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toPdf.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Reads a pdf file. Can do lots of downstream tasks.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdf</span> <span class="o">=</span> <span class="s2">&quot;someFile.pdf&quot;</span> <span class="o">|</span> <span class="n">toPdf</span><span class="p">()</span>
<span class="nb">len</span><span class="p">(</span><span class="n">pdf</span><span class="p">)</span>         <span class="c1"># get number of pages</span>
<span class="n">pdf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">cat</span><span class="p">()</span>   <span class="c1"># get text content of 2nd (0-indexed) page</span>
<span class="n">pdf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># converts 2nd page to an image</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toPdf.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.conv.Pdf" title="k1lib.cli.conv.Pdf"><span class="pre">Pdf</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toPdf.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toPdf.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDist">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toDist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDist" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDist.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">euclidean</span> <span class="pre">distance</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">input</span> <span class="pre">points'</span></em><a class="headerlink" href="#k1lib.cli.conv.toDist.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDist.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDist.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDist.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the euclidean distance of the input points.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">toDist</span><span class="p">()</span> <span class="c1"># returns distance between those 2 points</span>
</pre></div>
</div>
<p>Essentially just ((a-b)**2).sum()**0.5. But I kept needing this over and
over again so gotta make it into a separate cli.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toDist.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toDist.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toDist.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAngle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toAngle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radians</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAngle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAngle" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAngle.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">angle</span> <span class="pre">between</span> <span class="pre">2</span> <span class="pre">vectors'</span></em><a class="headerlink" href="#k1lib.cli.conv.toAngle.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAngle.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radians</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAngle.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAngle.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the angle between 2 vectors.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">toAngle</span><span class="p">()</span> <span class="c1"># returns angle between those 2 vectors</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toAngle.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toAngle.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toAngle.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.idxsToNdArray">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">idxsToNdArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#idxsToNdArray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.idxsToNdArray" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.idxsToNdArray.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Converts</span> <span class="pre">indices</span> <span class="pre">(aka</span> <span class="pre">point</span> <span class="pre">cloud)</span> <span class="pre">to</span> <span class="pre">numpy</span> <span class="pre">array'</span></em><a class="headerlink" href="#k1lib.cli.conv.idxsToNdArray.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.idxsToNdArray.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#idxsToNdArray.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.idxsToNdArray.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts indices (aka point cloud) to numpy array.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>         <span class="o">|</span> <span class="n">idxsToNdArray</span><span class="p">()</span>         <span class="c1"># returns np.array([[0, 0, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]])</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>         <span class="o">|</span> <span class="n">idxsToNdArray</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>      <span class="c1"># returns np.array([[0, 0, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]])</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>         <span class="o">|</span> <span class="n">idxsToNdArray</span><span class="p">(</span><span class="n">ds</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># returns np.array([[0, 0, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]])</span>
</pre></div>
</div>
<p>So, the standard use case is that you have a point cloud (points [1,2] and [2,3]) and you want
to get the dense array with those points filled in. Then you can do it with this function. Notice
how in all 3 examples, the points are marked with a 1. You can specify either the dense array’s
shape using parameter “.ds”, or just the number of dimensions with parameter “.n”. If you specify
neither then it will auto figure that out, but the final shape might not be what you wanted.</p>
<p>Let’s see some other use cases:</p>
<blockquote>
<div><p>[[1,2,3], [2,3,4]]     | idxsToNdArray() | shape() # returns (3, 4, 5)
[[1,2,3], [2,3,4]]     | idxsToNdArray(n=2)        # returns np.array([[0, 0, 0, 0], [0, 0, 3, 0], [0, 0, 0, 4]])
[[1,2,3], [2,3,4]]     | idxsToNdArray(n=1)        # returns np.array([[0, 0], [2, 3], [3, 4]])
[[1,2,3,4], [2,3,4,5]] | idxsToNdArray(n=2)        # returns np.array([[[0, 0], [0, 0], [0, 0], [0, 0]], [[0, 0], [0, 0], [3, 4], [0, 0]], [[0, 0], [0, 0], [0, 0], [4, 5]]])</p>
</div></blockquote>
<p>In the first example, if you don’t specify the dimensions, it will return a 3d array, and
the selected points will have the value 1. But if you insist that it should have 2 dimensions
only, and the remaining columns should be the selected points’ values, then you can either limit
.n, or specify the shape .ds but only has length of 2. Notice how the second example got filled
in by values 3 and 4 and not 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> – dimensions</p></li>
<li><p><strong>n</strong> – number of dimensions</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.idxsToNdArray.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#idxsToNdArray.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.idxsToNdArray.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.conv.toFileType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.conv.</span></span><span class="sig-name descname"><span class="pre">toFileType</span></span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toFileType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toFileType" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.conv.toFileType.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Grab</span> <span class="pre">file</span> <span class="pre">type</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">file</span> <span class="pre">contents</span> <span class="pre">(bytes)'</span></em><a class="headerlink" href="#k1lib.cli.conv.toFileType.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toFileType.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toFileType.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toFileType.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Grab file type of a file or file contents.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns &quot;PNG image data, 1024 x 1365, 8-bit/color RGBA, non-interlaced&quot;</span>
<span class="s2">&quot;some_image.png&quot;</span> <span class="o">|</span> <span class="n">toFileType</span><span class="p">()</span>
<span class="c1"># returns &quot;JPEG image data, JFIF standard 1.01, aspect ratio, density 1x1, segment length 16, baseline, precision 8, 1024x1365, components 3&quot;</span>
<span class="s2">&quot;some_image.png&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span> <span class="o">|</span> <span class="n">toFileType</span><span class="p">()</span>
</pre></div>
</div>
<p>This does take quite a while to execute, up to 42ms/file, so if you’re doing it a lot, would
suggest you use <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a> or something like that. Internally, this
will call the command line program <code class="docutils literal notranslate"><span class="pre">file</span></code> and returns its results, so this is just a convenience
cli.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.conv.toFileType.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/conv.html#toFileType.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.conv.toFileType.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.mgi">
<span id="mgi-module"></span><h2>mgi module<a class="headerlink" href="#module-k1lib.cli.mgi" title="Permalink to this heading"></a></h2>
<p>All tools related to the MGI database. Expected to use behind the “mgi”
module name, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="p">[</span><span class="s2">&quot;SOD1&quot;</span><span class="p">,</span> <span class="s2">&quot;AMPK&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">mgi</span><span class="o">.</span><span class="n">batch</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.mgi.batch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.mgi.</span></span><span class="sig-name descname"><span class="pre">batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headless</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/mgi.html#batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.mgi.batch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Queries MGI database, convert list of genes to MGI ids</p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.mgi.batch.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headless</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/mgi.html#batch.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.mgi.batch.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>headless</strong> – whether to run this operation headless, or actually
display the browser</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.mgi.batch.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/mgi.html#batch.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.mgi.batch.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.filt">
<span id="filt-module"></span><h2>filt module<a class="headerlink" href="#module-k1lib.cli.filt" title="Permalink to this heading"></a></h2>
<p>This is for functions that cuts out specific parts of the table</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.filt">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">filt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catchErrors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filt" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.filt.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catchErrors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filt.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filt.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Filters out elements.
Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [2, 6], grabbing all the even elements</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [3, 5], grabbing all the odd elements</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[2, &#39;a&#39;], [6, &#39;c&#39;]], grabbing all the even elements in the 1st column</span>
<span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># throws error, because strings can&#39;t mod divide</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [2, 8]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">catchErrors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also pass in <a class="reference internal" href="#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">op</span></code></a> or string, for extra intuitiveness and quickness:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [2, 6]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;abc&#39;, &#39;a12&#39;]</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">,</span> <span class="s2">&quot;a12&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [3, 4, 5, 6, 7, 8, 9]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="mi">3</span> <span class="o">&lt;=</span> <span class="n">op</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [3, 4, 5, 6, 7, 8, 9]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;3 &lt;= x &lt; 10&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a> for more details on string mode. If you
pass in <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> or <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a>, then it will
automatically use the C-accelerated versions if possible, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns np.array([2, 3, 4]), instead of iter([2, 3, 4])</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [2, 3, 4], instead of np.array([2, 3, 4]), because `math.exp` can&#39;t operate on numpy arrays</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If you need more extensive filtering capabilities involving text, check out <a class="reference internal" href="#k1lib.cli.grep.grep" title="k1lib.cli.grep.grep"><code class="xref py py-class docutils literal notranslate"><span class="pre">grep</span></code></a></p>
<p>If “filt” is too hard to remember, this cli also has an alias <a class="reference internal" href="#k1lib.cli.filt.filter_" title="k1lib.cli.filt.filter_"><code class="xref py py-class docutils literal notranslate"><span class="pre">filter_</span></code></a>
that kinda mimics Python’s <code class="docutils literal notranslate"><span class="pre">filter()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>predicate</strong> – function that returns True or False</p></li>
<li><p><strong>column</strong> – if not specified, then filters elements of the input
array, else filters the specific column only (or columns, just
like in <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>)</p></li>
<li><p><strong>catchErrors</strong> – whether to catch errors in the function or not (reject
elements that raise errors). Runs slower if enabled though</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.filt.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filt.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filt.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.filt.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filt.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filt.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Negate the condition</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.filt.split">
<span class="sig-name descname"><span class="pre">split</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filt.split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filt.split" title="Permalink to this definition"></a></dt>
<dd><p>Splits the input into positive and negative samples.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, 2, 4, 6, 8], [1, 3, 5, 7, 9]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># also returns [[0, 2, 4, 6, 8], [1, 3, 5, 7, 9]], exactly like above</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.filt.filter_">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">filter_</span></span><a class="headerlink" href="#k1lib.cli.filt.filter_" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.inSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">inSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.12)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#inSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.inSet" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.inSet.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.12)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#inSet.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.inSet.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Filters out lines that is not in the specified set.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [2, 3]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">inSet</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [0, 1, 4]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">inSet</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.inSet.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#inSet.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.inSet.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Negate the condition</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.contains">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">contains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#contains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.contains" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.contains.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#contains.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.contains.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Filters out lines that don’t contain the specified substring. Sort of similar
to <a class="reference internal" href="#k1lib.cli.grep.grep" title="k1lib.cli.grep.grep"><code class="xref py py-class docutils literal notranslate"><span class="pre">grep</span></code></a>, but this is simpler, and can be inverted.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;abcd&#39;, &#39;2bcr&#39;]</span>
<span class="p">[</span><span class="s2">&quot;abcd&quot;</span><span class="p">,</span> <span class="s2">&quot;0123&quot;</span><span class="p">,</span> <span class="s2">&quot;2bcr&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">contains</span><span class="p">(</span><span class="s2">&quot;bc&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.contains.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#contains.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.contains.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Negate the condition</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.empty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#empty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.empty" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.empty.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#empty.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.empty.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Filters out streams that is not empty. Almost always used inverted,
but “empty” is a short, sweet name that’s easy to remember. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, 2], [&#39;a&#39;]]</span>
<span class="p">[[],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="o">~</span><span class="n">empty</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reverse</strong> – not intended to be used by the end user. Do <code class="docutils literal notranslate"><span class="pre">~empty()</span></code> instead.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.empty.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#empty.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.empty.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.empty.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#empty.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.empty.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.filt.isNumeric">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">isNumeric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><span class="pre">filt</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#isNumeric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.isNumeric" title="Permalink to this definition"></a></dt>
<dd><p>Filters out a line if that column is not a number.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 2, &#39;3&#39;]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">isNumeric</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.filt.instanceOf">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">instanceOf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.12)"><span class="pre">type</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.12)"><span class="pre">type</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><span class="pre">filt</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#instanceOf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.instanceOf" title="Permalink to this definition"></a></dt>
<dd><p>Filters out lines that is not an instance of the given type.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [2]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">instanceOf</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [2, 2.3]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">instanceOf</span><span class="p">((</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.head">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#head"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.head" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.head.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#head.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.head.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Only outputs first <code class="docutils literal notranslate"><span class="pre">n</span></code> elements. You can also negate it (like
<code class="docutils literal notranslate"><span class="pre">~head(5)</span></code>), which then only outputs after first <code class="docutils literal notranslate"><span class="pre">n</span></code> lines. Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;abcde&quot;</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&quot;a&quot;, &quot;b&quot;]</span>
<span class="s2">&quot;abcde&quot;</span> <span class="o">|</span> <span class="o">~</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&quot;c&quot;, &quot;d&quot;, &quot;e&quot;]</span>
<span class="s2">&quot;0123456&quot;</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;]</span>
<span class="s2">&quot;0123456&quot;</span> <span class="o">|</span> <span class="o">~</span><span class="n">head</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&#39;4&#39;, &#39;5&#39;, &#39;6&#39;]</span>
<span class="s2">&quot;012&quot;</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;]</span>
<span class="s2">&quot;012&quot;</span> <span class="o">|</span> <span class="o">~</span><span class="n">head</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns []</span>
</pre></div>
</div>
<p>You can also pass in fractional head:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [0, 1, 2, 3, 4], or the first 25% of samples</span>
</pre></div>
</div>
<p>Also works well and fast with <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>, <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a>
and other sliceable types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns (10,)</span>
<span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.head.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#head.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.head.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.head.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#head.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.head.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.head.split">
<span class="sig-name descname"><span class="pre">split</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#head.split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.head.split" title="Permalink to this definition"></a></dt>
<dd><p>Splits the list up into a head and tail sections.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, 1, 2, 3], [4, 5, 6, 7, 8, 9]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This only splits it into 2 parts. If you want to split it up
into many more parts with specified checkpoints, check out
<a class="reference internal" href="#k1lib.cli.structural.splitC" title="k1lib.cli.structural.splitC"><code class="xref py py-class docutils literal notranslate"><span class="pre">splitC</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.tail">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">tail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#tail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.tail" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.tail.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#tail.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.tail.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Basically an inverted <a class="reference internal" href="#k1lib.cli.filt.head" title="k1lib.cli.filt.head"><code class="xref py py-class docutils literal notranslate"><span class="pre">head</span></code></a>.
Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [7, 8, 9]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.tail.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#tail.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.tail.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.cut">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">cut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#cut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.cut" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.cut.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#cut.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.cut.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Cuts out specific columns, sliceable. Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">,</span> <span class="s2">&quot;abcdefghij&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&#39;5&#39;, &#39;8&#39;], [&#39;f&#39;, &#39;i&#39;]]</span>
<span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">,</span> <span class="s2">&quot;abcdefghij&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&#39;8&#39;, &#39;5&#39;], [&#39;i&#39;, &#39;f&#39;]], demonstrating permutation-safe</span>
<span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&#39;5&#39;, &#39;8&#39;]]</span>
<span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&#39;8&#39;, &#39;5&#39;]], demonstrating permutation-safe</span>
<span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">,</span> <span class="s2">&quot;abcdefghij&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&#39;2&#39;, &#39;c&#39;], instead of [[&#39;2&#39;], [&#39;c&#39;]] as usual</span>
<span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&#39;2&#39;]</span>
<span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&#39;5&#39;, &#39;8&#39;]]</span>
<span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">cut</span><span class="p">()[:</span><span class="mi">7</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&#39;1&#39;, &#39;3&#39;, &#39;5&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;]]</span>
</pre></div>
</div>
<p>In the first example, you can imagine that we’re operating on this table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0123456789</span>
<span class="n">abcdefghij</span>
</pre></div>
</div>
<p>Then, we want to grab the 5th and 8th column (0-indexed), which forms this table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">58</span>
<span class="n">fi</span>
</pre></div>
</div>
<p>So, result of that is just <code class="docutils literal notranslate"><span class="pre">[['5',</span> <span class="pre">'8'],</span> <span class="pre">['f',</span> <span class="pre">'i']]</span></code></p>
<p>In the fourth example, if you’re only cutting out 1 column, then it
will just grab that column directly, instead of putting it in a list.</p>
<p>If you pass in <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> or <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a>, then it will
automatically use the C-accelerated versions, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># returns tensor of shape (4, 2, 6)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="c1"># returns tensor of shape (4, 6)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">cut</span><span class="p">()[</span><span class="mi">2</span><span class="p">:]</span> <span class="c1"># returns tensor of shape (4, 2, 6)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>TD;DR: inverted negative indexes are a bad thing when rows don’t have the same number of elements</p>
<p>Everything works fine when all of your rows have the same number of elements. But things might behave a
little strangely if they don’t. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;2&#39;, &#39;3&#39;, &#39;4&#39;], [&#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;]]. Different number of columns, works just fine</span>
<span class="p">[</span><span class="s2">&quot;0123456&quot;</span><span class="p">,</span> <span class="s2">&quot;0123456789&quot;</span><span class="p">]</span>    <span class="o">|</span>  <span class="n">cut</span><span class="p">()[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;0&#39;, &#39;1&#39;, &#39;8&#39;, &#39;9&#39;], [&#39;a&#39;, &#39;b&#39;, &#39;i&#39;, &#39;j&#39;]]. Same number of columns, works just fine</span>
<span class="p">[</span><span class="s2">&quot;0123456789&quot;</span><span class="p">,</span> <span class="s2">&quot;abcdefghij&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">cut</span><span class="p">()[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;0&#39;, &#39;1&#39;, &#39;5&#39;, &#39;6&#39;], [&#39;0&#39;, &#39;1&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;]]. Different number of columns, unsupported invert case</span>
<span class="p">[</span><span class="s2">&quot;0123456&quot;</span><span class="p">,</span> <span class="s2">&quot;0123456789&quot;</span><span class="p">]</span>    <span class="o">|</span> <span class="o">~</span><span class="n">cut</span><span class="p">()[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Why does this happen? It peeks at the first row, determines that ~[2:-2] is equivalent
to [:2] and [5:] combined and not [:2] and [-2:] combined. When applied to the second row,
[-2:] goes from 5-&gt;9, hence the result. Another edge case would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;5&#39;, &#39;6&#39;], [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;]]</span>
<span class="p">[</span><span class="s2">&quot;0123456&quot;</span><span class="p">,</span> <span class="s2">&quot;0123456789&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">cut</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Like before, it peeks the first row and translate ~(-3) into ~4, which is equivalent to [:4] and [5:].
But when applied to the second row, it now carries the meaning ~4, instead of ~(-3).</p>
<p>Why don’t I just fix these edge cases? Because the run time for it would be completely unacceptable,
as we’d have to figure out what’s the columns to include in the result for every row. This could
easily be O(n^3). Of course, with more time optimizing, this could be solved, but this is the only
extreme edge case and I don’t feel like putting in the effort to optimize it.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.cut.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#cut.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.cut.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.cut.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#cut.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.cut.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.rows">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#rows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.rows" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.rows.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#rows.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.rows.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Selects specific elements given an iterator of indexes.
Space complexity O(1) as a list is not constructed (unless you’re
slicing it in really weird way). Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="n">rows</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="c1"># returns [&quot;2&quot;]</span>
<span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="n">rows</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="c1"># returns [&quot;5&quot;, &quot;8&quot;]</span>
<span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="n">rows</span><span class="p">()[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="c1"># returns [&quot;2&quot;, &quot;3&quot;, &quot;4&quot;]</span>
<span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="o">~</span><span class="n">rows</span><span class="p">()[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="c1"># returns [&quot;0&quot;, &quot;1&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;]</span>
<span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="o">~</span><span class="n">rows</span><span class="p">()[:</span><span class="mi">7</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="c1"># returns [&#39;1&#39;, &#39;3&#39;, &#39;5&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;]</span>
<span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="n">rows</span><span class="p">()[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="c1"># returns [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;]</span>
<span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="o">~</span><span class="n">rows</span><span class="p">()[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="c1"># returns [&#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;]</span>
</pre></div>
</div>
<p>Why it’s called “rows” is because I couldn’t find a good name for
it. There was <a class="reference internal" href="#k1lib.cli.filt.cut" title="k1lib.cli.filt.cut"><code class="xref py py-class docutils literal notranslate"><span class="pre">cut</span></code></a>, which the name of an actual bash cli
that selects out columns given indicies. When I needed a way to
do what this cli does, it was in the context of selecting out rows,
so the name stuck.</p>
<p>If you want to just pick out the nth item from the iterator, instead of doing
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="o">|</span> <span class="n">rows</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="c1"># returns 3</span>
</pre></div>
</div>
<p>… you can use the shorthand <a class="reference internal" href="#k1lib.cli.utils.rItem" title="k1lib.cli.utils.rItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">rItem</span></code></a> instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="o">|</span> <span class="n">rItem</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># returns 3</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rows</strong> – ints for the row indices</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.rows.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#rows.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.rows.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.rows.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#rows.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.rows.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.intersection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">intersection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#intersection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.intersection" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.intersection.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#intersection.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.intersection.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Returns the intersection of multiple streams.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns set([2, 4, 5])</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="o">|</span> <span class="n">intersection</span><span class="p">()</span>
<span class="c1"># returns [&#39;2g&#39;, &#39;4h&#39;, &#39;5j&#39;]</span>
<span class="p">[[</span><span class="s2">&quot;1a&quot;</span><span class="p">,</span> <span class="s2">&quot;2b&quot;</span><span class="p">,</span> <span class="s2">&quot;3c&quot;</span><span class="p">,</span> <span class="s2">&quot;4d&quot;</span><span class="p">,</span> <span class="s2">&quot;5e&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;7f&quot;</span><span class="p">,</span> <span class="s2">&quot;2g&quot;</span><span class="p">,</span> <span class="s2">&quot;4h&quot;</span><span class="p">,</span> <span class="s2">&quot;6i&quot;</span><span class="p">,</span> <span class="s2">&quot;5j&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">intersection</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If you want the full distribution, meaning the intersection, as well
as what’s left of each stream, you can do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [{2, 4, 5}, [1, 3], [7, 6]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="o">|</span> <span class="n">intersection</span><span class="p">(</span><span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> – what column to apply the intersection
on. Defaulted to None</p></li>
<li><p><strong>full</strong> – if specified, return the full distribution, instead of the intersection alone</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.intersection.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">its</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.12)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#intersection.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.intersection.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.union">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">union</span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#union"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.union" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.union.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#union.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.union.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Returns the union of multiple streams.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns {0, 1, 2, 10, 11, 12, 13, 14}</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span> <span class="o">|</span> <span class="n">union</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.union.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">its</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.12)"><span class="pre">Set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#union.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.union.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.unique">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#unique"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.unique" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.unique.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#unique.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.unique.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Filters out non-unique row elements.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, &quot;a&quot;], [2, &quot;a&quot;]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">unique</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [0, 1, 2, 3, 4]</span>
<span class="p">[</span><span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span> <span class="o">|</span> <span class="n">unique</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>In the first example, because the 3rd element’s first column is
1, which has already appeared, so it will be filtered out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>column</strong> – the column to detect unique elements. Can be
None, which will behave like converting the input iterator
into a set, but this cli will maintain the order</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.unique.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#unique.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.unique.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.breakIf">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">breakIf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#breakIf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.breakIf" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.breakIf.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#breakIf.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.breakIf.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Breaks the input iterator if a condition is met.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 2, 3, 4, 5]</span>
<span class="p">[</span><span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">breakIf</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1, &#39;a&#39;], [2, &#39;b&#39;]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">breakIf</span><span class="p">(</span><span class="s2">&quot;x &gt; 2&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>col</strong> – column to apply the condition on</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.breakIf.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#breakIf.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.breakIf.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.mask">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.mask" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.mask.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#mask.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.mask.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Masks the input stream.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 3]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">mask</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [2, 4]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">mask</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns torch.tensor([0, 1, 3])</span>
<span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="o">|</span> <span class="n">mask</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.mask.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#mask.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.mask.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.mask.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#mask.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.mask.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.tryout">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">tryout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'result'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#tryout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.tryout" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.tryout.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'result'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#tryout.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.tryout.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Wraps every cli operation after this in a try-catch block, returning <code class="docutils literal notranslate"><span class="pre">result</span></code>
if the operation fails. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 9</span>
<span class="mi">3</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># returns &quot;failed&quot;, instead of raising an exception</span>
<span class="s2">&quot;3&quot;</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># special mode: returns &quot;unsupported operand type(s) for ** or pow(): &#39;str&#39; and &#39;int&#39;&quot;</span>
<span class="s2">&quot;3&quot;</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># special mode: returns entire trace stack (do `import traceback` first)</span>
<span class="s2">&quot;3&quot;</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;traceback&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># special mode: returns &quot;3&quot;, the input of the tryout() block</span>
<span class="s2">&quot;3&quot;</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, this <code class="docutils literal notranslate"><span class="pre">tryout()</span></code> object will gobble up all clis behind it and wrap
them inside a try-catch block. This might be undesirable, so you can stop it early:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns &quot;failed&quot;</span>
<span class="mi">3</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># raises an exception, because it errors out after the tryout()-captured operations</span>
<span class="mi">3</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
<p>In the first example, <a class="reference internal" href="#k1lib.cli.filt.tryout" title="k1lib.cli.filt.tryout"><code class="xref py py-class docutils literal notranslate"><span class="pre">tryout</span></code></a> will catch any errors happening within <code class="docutils literal notranslate"><span class="pre">op()</span></code>,
<code class="docutils literal notranslate"><span class="pre">aS(str)</span></code> or the second <code class="docutils literal notranslate"><span class="pre">op()**2</span></code>. In the second example, <a class="reference internal" href="#k1lib.cli.filt.tryout" title="k1lib.cli.filt.tryout"><code class="xref py py-class docutils literal notranslate"><span class="pre">tryout</span></code></a> will only
catch errors happening within the first <code class="docutils literal notranslate"><span class="pre">op()**2</span></code>.</p>
<div class="admonition-array-mode admonition">
<p class="admonition-title">Array mode</p>
<p>The above works well for atomic operations and not looping operations. Let’s
say we have this function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">counter</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">counter</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;random error: </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
<p>This code will throw an error if x is greater than 5 for the first and second
time (but runs smoothly after that. It’s a really nasty function I know).
Capturing like this will work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># line below returns [0, 1, 4, 9, 16, 25, &#39;failed&#39;, &#39;failed&#39;, 64, 81]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>But capturing like this won’t work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># line below throws an exception</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>The reason being, <a class="reference internal" href="#k1lib.cli.filt.tryout" title="k1lib.cli.filt.tryout"><code class="xref py py-class docutils literal notranslate"><span class="pre">tryout</span></code></a> will only capture errors when the data is passed
into <code class="docutils literal notranslate"><span class="pre">apply(f)</span></code>, and won’t capture it later on. However, when data is passed to
<code class="docutils literal notranslate"><span class="pre">apply(f)</span></code>, it hasn’t executed anything yet (remember these things are lazily
executed). So the exception actually happens when you’re trying to <code class="docutils literal notranslate"><span class="pre">deref()</span></code> it,
which lies outside of <a class="reference internal" href="#k1lib.cli.filt.tryout" title="k1lib.cli.filt.tryout"><code class="xref py py-class docutils literal notranslate"><span class="pre">tryout</span></code></a>’s reach. You can just put a tilde in front
to tell it to capture errors for individual elements in the iterator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># line belows returns [0, 1, 4, 9, 16, 25, &#39;failed&#39;, &#39;failed&#39;, 64, 81]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="o">~</span><span class="n">tryout</span><span class="p">(</span><span class="s2">&quot;failed&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This mode has a weird quirk that requires that there has to be a 1-to-1 correspondence
between the input and output for the block of code that it wraps around. Meaning this is okay:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">counter</span>
    <span class="k">if</span> <span class="mi">40</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">:</span>
        <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">counter</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;random error&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># returns 50, corrects errors as if it&#39;s not even there!</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="o">~</span><span class="n">tryout</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>This is okay because going in, there’re 50 elements, and it’s expected that 50 elements
goes out of <a class="reference internal" href="#k1lib.cli.filt.tryout" title="k1lib.cli.filt.tryout"><code class="xref py py-class docutils literal notranslate"><span class="pre">tryout</span></code></a>. The input can be of infinite length, but there has to be a
1-to-1 relationship between the input and output. While this is not okay:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># returns 75, data structure corrupted</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="o">~</span><span class="n">tryout</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>It’s not okay because it’s expected that 25 pairs of elements goes out of <a class="reference internal" href="#k1lib.cli.filt.tryout" title="k1lib.cli.filt.tryout"><code class="xref py py-class docutils literal notranslate"><span class="pre">tryout</span></code></a></p>
</div>
<div class="admonition-retrying admonition">
<p class="admonition-title">Retrying</p>
<p>There’s also the <code class="docutils literal notranslate"><span class="pre">retries</span></code> parameter, which specifies how many times should this
class retry the operation until actually returning the predefined result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># line below returns [0, 1, 4, 9, 16, 25, None, None, 64, 81]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="o">~</span><span class="n">tryout</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># line below returns [0, 1, 4, 9, 16, 25, None, 49, 64, 81]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="o">~</span><span class="n">tryout</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># line below returns [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="o">~</span><span class="n">tryout</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> – result to return if there is an exception</p></li>
<li><p><strong>mode</strong> – if “result” (default), returns the result if there’s an exception. If “str” then
returns the exception’s string. If “input” then returns the original input. If “traceback”
then returns the exception’s traceback</p></li>
<li><p><strong>retries</strong> – how many time to retry before giving up?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.tryout.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#tryout.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.tryout.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.tryout.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#tryout.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.tryout.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.filt.resume">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">resume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#resume"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.resume" title="Permalink to this definition"></a></dt>
<dd><p>Resumes a long-running operation. I usually have code that
looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">pass</span> <span class="c1"># long running, expensive calculation</span>
<span class="n">ls</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">dill</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;somefile.pth&quot;</span><span class="p">)</span> <span class="c1"># executing</span>
<span class="n">cat</span><span class="o">.</span><span class="n">pickle</span><span class="p">(</span><span class="s2">&quot;somefile.pth&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># getting all of the saved objects</span>
</pre></div>
</div>
<p>This will read all the files in the current directory, transforms
them using the long-running, expensive function, potentially doing
it in multiple processes. Then the results are serialized (turns into
bytes) and it will be appended to an output file.</p>
<p>What’s frustrating is that I do stupid things all the time, so the
process usually gets interrupted. But I don’t want to redo the
existing work, so that’s where this cli comes into play. Now it looks
like this instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">resume</span><span class="p">(</span><span class="s2">&quot;somefile.pth&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">dill</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;somefile.pth&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that we’re inserting a resume() AND changed the file write mode
to append, so that the file doesn’t get overriden. Internally, this is
just a shorthand for <code class="docutils literal notranslate"><span class="pre">~head(fn</span> <span class="pre">|</span> <span class="pre">(tryout(0)</span> <span class="pre">|</span> <span class="pre">aS(cat.pickle)</span> <span class="pre">|</span> <span class="pre">shape(0)))</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fn</strong> – file name</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.trigger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">trigger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#trigger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.trigger" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.trigger.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#trigger.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.trigger.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Yields elements whenever the requested column changes in value.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [1, 2, 3, 4, 2]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">trigger</span><span class="p">()</span> <span class="o">|</span> <span class="n">cli</span><span class="o">.</span><span class="n">deref</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="c1"># returns [[1, 0], [2, 1], [1, 3]]</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">trigger</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1, 0], [2, 2], [1, 4]], note how on a trigger boundary, this returns the previous (&quot;before&quot;) value, not the next value</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">trigger</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="c1"># returns [[1, 0], [2, 2], [1, 3], [1, 4]]</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">trigger</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This takes inspiration from electrical engineering, where a capacitor is
essentially a “trigger detector”. If the input voltage changes too rapidly,
the capacitor will make the output voltage spike up or down dramatically,
as if it’s taking the derivative of the input signal. Slightly related is
the Schmitt trigger.</p>
<p>Anyway, this cli will track whether a column changes in value, and if it
does, yields the change, else ignore it. This is useful when processing
time series data, to discard adjacent messages that are effectively identical
and carries no extra information.</p>
<p>The parameter .col can be one of these 3 types:</p>
<ul class="simple">
<li><p>None (default): This considers the whole element/row for value change signal</p></li>
<li><p>int: This considers a single column for value change signal</p></li>
<li><p>list[int]: This considers a tuple of the selected columns for value change signal</p></li>
</ul>
<p>Related, but not precisely the same operation include <a class="reference internal" href="#k1lib.cli.filt.unique" title="k1lib.cli.filt.unique"><code class="xref py py-class docutils literal notranslate"><span class="pre">unique</span></code></a>
and <code class="docutils literal notranslate"><span class="pre">aS(set)</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column to trigger</p></li>
<li><p><strong>before</strong> – whether to take the previous or the next value when it
changes. Defaulted to next value (False)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.trigger.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#trigger.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.trigger.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.filt.filtStd">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.filt.</span></span><span class="sig-name descname"><span class="pre">filtStd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filtStd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filtStd" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.filtStd.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filtStd.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filtStd.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Filters out values that is outside the specified standard deviation.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="p">]</span> <span class="o">|</span> <span class="n">randomize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">filtStd</span><span class="p">(</span><span class="n">std</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>   <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># likely returns around 104</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">filtStd</span><span class="p">(</span><span class="n">std</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># likely returns around 22</span>

<span class="c1"># column mode</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">])</span> <span class="o">|</span> <span class="n">filtStd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">std</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># likely returns around 104</span>

<span class="c1"># inverse mode. Will only take values that are outside the std range</span>
<span class="n">data</span> <span class="o">|</span> <span class="o">~</span><span class="n">filtStd</span><span class="p">(</span><span class="n">std</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># likely returns around 88</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column to extract the value out of</p></li>
<li><p><strong>std</strong> – how many standard deviations above and below to accept the values</p></li>
<li><p><strong>N</strong> – how many times to do this operation. <code class="docutils literal notranslate"><span class="pre">filtStd(std=1,</span> <span class="pre">N=2)</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">filtStd(std=1)</span> <span class="pre">|</span> <span class="pre">filtStd(std=1)</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.filtStd.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filtStd.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filtStd.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.filt.filtStd.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/filt.html#filtStd.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.filt.filtStd.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.gb">
<span id="gb-module"></span><h2>gb module<a class="headerlink" href="#module-k1lib.cli.gb" title="Permalink to this heading"></a></h2>
<p>All tools related to GenBank file format. Expected to use behind the
“gb” module name, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;abc.gb&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">gb</span><span class="o">.</span><span class="n">feats</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.gb.feats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.gb.</span></span><span class="sig-name descname"><span class="pre">feats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/gb.html#feats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.gb.feats" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Fetches features, each on a separate stream.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;a.gb&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">gb</span><span class="o">.</span><span class="n">feats</span><span class="p">()</span>
</pre></div>
</div>
<p>Output example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;     source          1..248956422&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /organism=&quot;Homo sapiens&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /mol_type=&quot;genomic DNA&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /db_xref=&quot;taxon:9606&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /chromosome=&quot;1&quot;&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;     gene            11874..14409&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /gene=&quot;DDX11L1&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /note=&quot;DEAD/H-box helicase 11 like 1 (pseudogene); Derived&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     by automated computational analysis using gene prediction&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     method: BestRefSeq.&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /pseudo&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /db_xref=&quot;GeneID:100287102&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /db_xref=&quot;HGNC:HGNC:37102&quot;&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.gb.feats.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/gb.html#feats.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.gb.feats.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.gb.feats.filt">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">filt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">terms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/gb.html#feats.filt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.gb.feats.filt" title="Permalink to this definition"></a></dt>
<dd><p>Filters for specific terms in all the features texts. If there
are multiple terms, then filters for first term, then second, then third,
so the term’s order might matter to you. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;     source          1..248956422&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /organism=&quot;Homo sapiens&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /mol_type=&quot;genomic DNA&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /db_xref=&quot;taxon:9606&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /chromosome=&quot;1&quot;&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;     gene            11874..14409&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /gene=&quot;DDX11L1&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /note=&quot;DEAD/H-box helicase 11 like 1 (pseudogene); Derived&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     by automated computational analysis using gene prediction&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     method: BestRefSeq.&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /pseudo&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /db_xref=&quot;GeneID:100287102&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /db_xref=&quot;HGNC:HGNC:37102&quot;&#39;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">gb</span><span class="o">.</span><span class="n">feats</span><span class="o">.</span><span class="n">filt</span><span class="p">(</span><span class="s2">&quot;mol_type&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;     source          1..248956422&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /organism=&quot;Homo sapiens&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /mol_type=&quot;genomic DNA&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /db_xref=&quot;taxon:9606&quot;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;                     /chromosome=&quot;1&quot;&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.gb.feats.root">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">root</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/gb.html#feats.root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.gb.feats.root" title="Permalink to this definition"></a></dt>
<dd><p>Gets root (top most unnamed tag) of a feature.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;     misc_RNA        complement(join(14362..14829,14970..15038,15796..15947,&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     16607..16765,16858..17055,17233..17368,17606..17742,&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     17915..18061,18268..18366,24738..24891,29321..29370))&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     /gene=&quot;WASH7P&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     /gene_synonym=&quot;FAM39F; WASH5P&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     /product=&quot;WASP family homolog 7, pseudogene&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     /note=&quot;Derived by automated computational analysis using&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     gene prediction method: BestRefSeq.&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     /pseudo&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     /transcript_id=&quot;NR_024540.1&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     /db_xref=&quot;GeneID:653635&quot;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;                     /db_xref=&quot;HGNC:HGNC:38034&quot;&#39;</span><span class="p">]</span> <span class="o">|</span> <span class="n">feats</span><span class="o">.</span><span class="n">root</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;misc_RNA&#39;</span><span class="p">,</span>
 <span class="p">[</span><span class="s1">&#39;complement(join(14362..14829,14970..15038,15796..15947,&#39;</span><span class="p">,</span>
  <span class="s1">&#39;16607..16765,16858..17055,17233..17368,17606..17742,&#39;</span><span class="p">,</span>
  <span class="s1">&#39;17915..18061,18268..18366,24738..24891,29321..29370))&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.gb.feats.tags">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">tags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/gb.html#feats.tags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.gb.feats.tags" title="Permalink to this definition"></a></dt>
<dd><p>Grabs a list of tags.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;     misc_RNA        complement(join(14362..14829,14970..15038,15796..15947,&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     16607..16765,16858..17055,17233..17368,17606..17742,&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     17915..18061,18268..18366,24738..24891,29321..29370))&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     /gene=&quot;WASH7P&quot;&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     /gene_synonym=&quot;FAM39F; WASH5P&quot;&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     /product=&quot;WASP family homolog 7, pseudogene&quot;&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     /note=&quot;Derived by automated computational analysis using&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     gene prediction method: BestRefSeq.&quot;&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     /pseudo&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     /transcript_id=&quot;NR_024540.1&quot;&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     /db_xref=&quot;GeneID:653635&quot;&#39;</span><span class="p">,</span>
     <span class="s1">&#39;                     /db_xref=&quot;HGNC:HGNC:38034&quot;&#39;</span><span class="p">]</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">feats</span><span class="o">.</span><span class="n">tags</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;gene&#39;</span><span class="p">,</span> <span class="s1">&#39;WASH7P&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;gene_synonym&#39;</span><span class="p">,</span> <span class="s1">&#39;FAM39F; WASH5P&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;WASP family homolog 7, pseudogene&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">,</span>
  <span class="s1">&#39;Derived by automated computational analysis using gene prediction method: BestRefSeq.&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;pseudo&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;transcript_id&#39;</span><span class="p">,</span> <span class="s1">&#39;NR_024540.1&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;db_xref&#39;</span><span class="p">,</span> <span class="s1">&#39;GeneID:653635&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;db_xref&#39;</span><span class="p">,</span> <span class="s1">&#39;HGNC:HGNC:38034&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>With filters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;gene&#39;, &#39;WASH7P&#39;], [&#39;db_xref&#39;, &#39;HGNC:HGNC:38034&#39;], [&#39;organism&#39;, &#39;&#39;]]</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">feats</span><span class="o">.</span><span class="n">tags</span><span class="p">(</span><span class="s2">&quot;gene&quot;</span><span class="p">,</span> <span class="s2">&quot;db_xref&quot;</span><span class="p">,</span> <span class="s2">&quot;organism&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.gb.origin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.gb.</span></span><span class="sig-name descname"><span class="pre">origin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/gb.html#origin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.gb.origin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Return the origin section of the genbank file.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns single fasta string</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;a.gb&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">gb</span><span class="o">.</span><span class="n">origin</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.gb.origin.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/gb.html#origin.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.gb.origin.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.grep">
<span id="grep-module"></span><h2>grep module<a class="headerlink" href="#module-k1lib.cli.grep" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.grep.grep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.grep.</span></span><span class="sig-name descname"><span class="pre">grep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/grep.html#grep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.grep.grep" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.grep.grep.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/grep.html#grep.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.grep.grep.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Find lines that has the specified pattern.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;d&#39;, &#39;d&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;c&#39;, &#39;d&#39;, &#39;2&#39;, &#39;d&#39;], 2 sections of [&#39;c&#39;, &#39;d&#39;] and [&#39;2&#39;, &#39;d&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;c&#39;, &#39;d&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;d&#39;, &#39;e&#39;, &#39;d&#39;, &#39;3&#39;, &#39;4&#39;], 2 sections of [&#39;d&#39;, &#39;e&#39;] and [&#39;d&#39;, &#39;3&#39;, &#39;4&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">till</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;0&#39;, &#39;1&#39;, &#39;2&#39;], [&#39;3&#39;, &#39;1&#39;, &#39;4&#39;]]</span>
<span class="s2">&quot;0123145&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also separate out the sections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;c&#39;, &#39;d&#39;], [&#39;2&#39;, &#39;d&#39;]]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;c&#39;, &#39;d&#39;]]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;1&#39;, &#39;2&#39;, &#39;3&#39;], [&#39;1&#39;, &#39;4&#39;, &#39;5&#39;]]</span>
<span class="s2">&quot;0123145&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">till</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also put in predicates instead of regex patterns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;d&#39;, &#39;d&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># also returns [&#39;d&#39;, &#39;d&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;d&#39;, &#39;e&#39;, &#39;d&#39;, &#39;3&#39;, &#39;4&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">till</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>The first scenario looks like a regular filter function, already implemented by <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a>,
but <a class="reference internal" href="#k1lib.cli.grep.grep" title="k1lib.cli.grep.grep"><code class="xref py py-class docutils literal notranslate"><span class="pre">grep</span></code></a> brings in more clustering features for the price of reduced
execution speed. So for simple scenarios it’s advised that you use <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a>.</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.structural.groupBy" title="k1lib.cli.structural.groupBy"><code class="xref py py-class docutils literal notranslate"><span class="pre">groupBy</span></code></a></p>
<p>Also, there’s a <a class="reference external" href="../tutorials/cli.html">whole tutorial</a> devoted to just this cli</p>
<p>Also also, if each element in the input iterator is not a string/bytes, and
you’re searching using regex, then it will get its representation and searches
in it.</p>
<div class="admonition-extract-mode admonition">
<p class="admonition-title">Extract mode</p>
<p>Sometimes, you want to extract a subsection of a matched string, like extracting
links in a html file, then you can do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;a.io&#39;, &#39;b.com&#39;, &#39;c.net&#39;]</span>
<span class="p">[</span><span class="s2">&quot;href=&#39;a.io&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;href=&#39;b.com&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;href=&#39;c.net&#39;&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;href=&#39;(?P&lt;g&gt;.*)&#39;&quot;</span><span class="p">,</span> <span class="n">extract</span><span class="o">=</span><span class="s2">&quot;g&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;a.io&#39;, 3], [&#39;b.com&#39;, 4], [&#39;c.net&#39;, 5]]</span>
<span class="p">[[</span><span class="s2">&quot;href=&#39;a.io&#39;&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;href=&#39;b.com&#39;&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;href=&#39;c.net&#39;&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;href=&#39;(?P&lt;g&gt;.*)&#39;&quot;</span><span class="p">,</span> <span class="n">extract</span><span class="o">=</span><span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Essentially, you’re defining the group with name “g” to be any string within a quote block
following “href”, and then it will just extract out the group that you want. Because the
purpose of this mode is to extract matched objects, a few of the arguments don’t really make
sense and thus are disabled, like “before”, “after”, “sep”, “N”</p>
</div>
<p>Regex quick cheatsheet:</p>
<ul class="simple">
<li><p><cite>d</cite>: digit (D for inverse)</p></li>
<li><p><cite>^</cite>: begin of string ($ for end of string)</p></li>
<li><p><cite>w</cite>: unicode word (W for inverse)</p></li>
<li><p><cite>(?!…)</cite>: matches if the inside does not match</p></li>
<li><p><cite>(?P&lt;name&gt;…)</cite>: matches as group “name”</p></li>
<li><p><cite>A|B</cite>: matches A or B</p></li>
<li><p><cite>[aml]</cite>: set of characters “a”, “m” and “k”</p></li>
<li><p><cite>a{3,5}</cite>: matches character “a” 3 to 5 times (“aaa”, “aaaa” and “aaaaa”)</p></li>
<li><p><cite>a*</cite>: matches “a” 0 or more times (<cite>a*?</cite> matches “a” 0 or more times non-greedy)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> – regex pattern to search for in a line</p></li>
<li><p><strong>before</strong> – lines before the hit. Outputs independent lines</p></li>
<li><p><strong>after</strong> – lines after the hit. Outputs independent lines</p></li>
<li><p><strong>N</strong> – max sections to output</p></li>
<li><p><strong>sep</strong> – whether to separate out the sections as lists</p></li>
<li><p><strong>col</strong> – searches for pattern in a specific column</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.grep.grep.till">
<span class="sig-name descname"><span class="pre">till</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/grep.html#grep.till"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.grep.grep.till" title="Permalink to this definition"></a></dt>
<dd><p>Greps until some other pattern appear. Inclusive, so you might want to
trim the last line. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;], includes last item</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;5&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">till</span><span class="p">(</span><span class="s2">&quot;8&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;d&#39;, &#39;e&#39;, &#39;d&#39;, &#39;3&#39;, &#39;4&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">till</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;d&#39;, &#39;e&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">till</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If initial pattern and till pattern are the same, then you don’t have use this method at
all. Instead, do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]</span>
<span class="s2">&quot;0123145&quot;</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="mf">1e9</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.grep.grep.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/grep.html#grep.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.grep.grep.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.grep.grep.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/grep.html#grep.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.grep.grep.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Flips the pattern, just like how <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a>
works. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;e&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;]</span>
<span class="s2">&quot;abcde12d34&quot;</span> <span class="o">|</span> <span class="o">~</span><span class="n">grep</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.grep.grepTemplate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.grep.</span></span><span class="sig-name descname"><span class="pre">grepTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/grep.html#grepTemplate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.grep.grepTemplate" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.grep.grepTemplate.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/grep.html#grepTemplate.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.grep.grepTemplate.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Searches over all lines, pick out the match, and expands
it to the templateand yields</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.grep.grepTemplate.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/grep.html#grepTemplate.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.grep.grepTemplate.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="init-module">
<h2>init module<a class="headerlink" href="#init-module" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.init.</span></span><span class="sig-name descname"><span class="pre">BaseCli</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A base class for all the cli stuff. You can definitely create new cli tools that
have the same feel without extending from this class, but advanced stream operations
(like <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">.all()</span></code>, <code class="docutils literal notranslate"><span class="pre">|</span></code>) won’t work.</p>
<p>At the moment, you don’t have to call super().__init__() and super().__ror__(),
as __init__’s only job right now is to solidify any <a class="reference internal" href="#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">op</span></code></a>
passed to it, and __ror__ does nothing.</p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Not expected to be instantiated by the end user.</p>
<p><strong>fs param</strong></p>
<p>Expected to use it like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">BaseCli</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="n">fs</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">];</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">fs</span><span class="p">);</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">f</span></code> is some (potentially exotic) function. This will replace f with a “normal”
function that’s executable. See source code of <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a> for an
example of why this is useful. Currently, it will:</p>
<ul class="simple">
<li><p>Replace with last recorded <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">in</span> <span class="pre">op()</span></code>, if <code class="docutils literal notranslate"><span class="pre">f</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, because Python does
not allow returning complex objects from __contains__ method</p></li>
<li><p>Solidifies every <a class="reference internal" href="#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">op</span></code></a>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>capture</strong> – whether to capture all clis to the right of it and make it accessible under capturedClis and capturedSerial properties</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.capturedClis">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capturedClis</span></span><a class="headerlink" href="#k1lib.cli.init.BaseCli.capturedClis" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.capturedSerial">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capturedSerial</span></span><a class="headerlink" href="#k1lib.cli.init.BaseCli.capturedSerial" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.hint">
<span class="sig-name descname"><span class="pre">hint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><span class="pre">tBase</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.hint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.hint" title="Permalink to this definition"></a></dt>
<dd><p>Specifies output type hint.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.hasHint">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hasHint</span></span><a class="headerlink" href="#k1lib.cli.init.BaseCli.hasHint" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.__and__">
<span class="sig-name descname"><span class="pre">__and__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cli</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.init.oneToMany" title="k1lib.cli.init.oneToMany"><span class="pre">oneToMany</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.__and__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.__and__" title="Permalink to this definition"></a></dt>
<dd><p>Duplicates input stream to multiple joined clis.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[5], [0, 1, 2, 3, 4]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">shape</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">iden</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Kinda like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>. There’re just multiple ways of doing
this. This I think, is more intuitive, and <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a> is more
for lambdas and columns mode. Performances are pretty much identical.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.__add__">
<span class="sig-name descname"><span class="pre">__add__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cli</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.init.mtmS" title="k1lib.cli.init.mtmS"><span class="pre">mtmS</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.__add__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.__add__" title="Permalink to this definition"></a></dt>
<dd><p>Parallel pass multiple streams to multiple clis.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [8, 15]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="p">((</span><span class="n">op</span><span class="p">()</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">*</span> <span class="mi">5</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.all">
<span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.all" title="Permalink to this definition"></a></dt>
<dd><p>Applies this cli to all incoming streams.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns (3,)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">toMean</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (3, 4)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">toMean</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – how many times should I chain <code class="docutils literal notranslate"><span class="pre">.all()</span></code>?</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.__or__">
<span class="sig-name descname"><span class="pre">__or__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cli_</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.__or__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.__or__" title="Permalink to this definition"></a></dt>
<dd><p>Joins clis end-to-end.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [0, 1, 4, 9, 16]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">c</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.f">
<span class="sig-name descname"><span class="pre">f</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.f"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.f" title="Permalink to this definition"></a></dt>
<dd><p>Creates a normal function <span class="math notranslate nohighlight">\(f(x)\)</span> which is equivalent to
<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">|</span> <span class="pre">self</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.__lt__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.__lt__" title="Permalink to this definition"></a></dt>
<dd><p>Backup pipe symbol <cite>&gt;</cite>, purely for style, so that you can do something like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;a.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.BaseCli.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#BaseCli.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.BaseCli.__call__" title="Permalink to this definition"></a></dt>
<dd><p>Another way to do <code class="docutils literal notranslate"><span class="pre">it</span> <span class="pre">|</span> <span class="pre">cli</span></code>. If multiple arguments are fed, then the
argument list is passed to cli instead of just the first element. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@applyS</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">it</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">it</span>
<span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># returns 2</span>
<span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># returns [2, 3]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<span class="target" id="module-k1lib.cli.init"></span><dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.init.yieldT">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.init.</span></span><span class="sig-name descname"><span class="pre">yieldT</span></span><a class="headerlink" href="#k1lib.cli.init.yieldT" title="Permalink to this definition"></a></dt>
<dd><p>Object often used as a sentinel, or an identifying token in lots of clis,
including
that can be yielded in a stream to ignore this stream for the moment in
<a class="reference internal" href="#k1lib.cli.structural.joinStreamsRandom" title="k1lib.cli.structural.joinStreamsRandom"><code class="xref py py-class docutils literal notranslate"><span class="pre">joinStreamsRandom</span></code></a>, <a class="reference internal" href="#k1lib.cli.utils.deref" title="k1lib.cli.utils.deref"><code class="xref py py-class docutils literal notranslate"><span class="pre">deref</span></code></a>,
<a class="reference internal" href="#k1lib.cli.typehint.tCheck" title="k1lib.cli.typehint.tCheck"><code class="xref py py-class docutils literal notranslate"><span class="pre">tCheck</span></code></a> and <a class="reference internal" href="#k1lib.cli.typehint.tOpt" title="k1lib.cli.typehint.tOpt"><code class="xref py py-class docutils literal notranslate"><span class="pre">tOpt</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.init.fastF">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.init.</span></span><span class="sig-name descname"><span class="pre">fastF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#fastF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.fastF" title="Permalink to this definition"></a></dt>
<dd><p>Tries to figure out what’s going on, is it a normal function, or an applyS,
or a BaseCli, etc., and return a really fast function for execution. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># both returns 16, fastF returns &quot;lambda x: x**2&quot;, so it&#39;s really fast</span>
<span class="n">fastF</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">fastF</span><span class="p">(</span><span class="n">applyS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">))(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>At the moment, parameter <code class="docutils literal notranslate"><span class="pre">x</span></code> does nothing, but potentially in the future, you can
pass in an example input to the cli, so that this returns an optimized, C compiled
version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> – sample data for the cli</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.init.serial">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.init.</span></span><span class="sig-name descname"><span class="pre">serial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">clis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#serial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.serial" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.serial.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">clis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#serial.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.serial.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Merges clis into 1, feeding end to end. Used in chaining clis
together without a prime iterator. Meaning, without this, stuff like this
fails to run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">a</span><span class="p">()</span> <span class="o">|</span> <span class="n">b</span><span class="p">()</span> <span class="c1"># runs</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="p">()</span> <span class="o">|</span> <span class="n">b</span><span class="p">();</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">c</span> <span class="c1"># doesn&#39;t run if this class doesn&#39;t exist</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.serial.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/init.html#serial.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.serial.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.serial.repeat">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repeat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#serial.repeat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.serial.repeat" title="Permalink to this definition"></a></dt>
<dd><p>Executes this function over and over again for n times.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 6561, or ((3^2)^2)^2</span>
<span class="mi">3</span> <span class="o">|</span> <span class="n">serial</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Of course, you can also do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">|</span> <span class="n">serial</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>And it would achieve the same result, but using this method, you can
vary n if you were to transpile it to JS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – function to execute</p></li>
<li><p><strong>n</strong> – how many times to execute this function serially</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.init.oneToMany">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.init.</span></span><span class="sig-name descname"><span class="pre">oneToMany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">clis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#oneToMany"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.oneToMany" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.oneToMany.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">clis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#oneToMany.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.oneToMany.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Duplicates 1 stream into multiple streams, each for a cli in the
list. Used in the “a &amp; b” joining operator. See also: <a class="reference internal" href="#k1lib.cli.init.BaseCli.__and__" title="k1lib.cli.init.BaseCli.__and__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCli.__and__()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.oneToMany.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/init.html#oneToMany.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.oneToMany.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.init.mtmS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.init.</span></span><span class="sig-name descname"><span class="pre">mtmS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">clis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#mtmS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.mtmS" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.mtmS.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">clis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#mtmS.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.mtmS.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Applies multiple streams to multiple clis independently. Used in
the “a + b” joining operator. See also: <a class="reference internal" href="#k1lib.cli.init.BaseCli.__add__" title="k1lib.cli.init.BaseCli.__add__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseCli.__add__()</span></code></a>.</p>
<p>Weird name is actually a shorthand for “many to many specific”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.mtmS.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">its</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/init.html#mtmS.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.mtmS.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.init.mtmS.f">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">f</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#mtmS.f"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.mtmS.f" title="Permalink to this definition"></a></dt>
<dd><p>Convenience method, so
that this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mtmS</span><span class="p">(</span><span class="n">iden</span><span class="p">(),</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">iden</span><span class="p">(),</span> <span class="n">iden</span><span class="p">(),</span> <span class="n">iden</span><span class="p">())</span>
<span class="c1"># also the same as this btw:</span>
<span class="p">(</span><span class="n">iden</span><span class="p">()</span> <span class="o">+</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">iden</span><span class="p">()</span> <span class="o">+</span> <span class="n">iden</span><span class="p">()</span> <span class="o">+</span> <span class="n">iden</span><span class="p">())</span>
</pre></div>
</div>
<p>is the same as this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mtmS</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [5, 36, 7, 8, 9]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">mtmS</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> – where should I put the function?</p></li>
<li><p><strong>n</strong> – how many clis in total? Defaulted to 100</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.init.patchDict">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.init.</span></span><span class="sig-name descname"><span class="pre">patchDict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#patchDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.patchDict" title="Permalink to this definition"></a></dt>
<dd><p>Patches dictionaries’s items and keys, so that piping
works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&quot;a&quot;, &quot;b&quot;]</span>
<span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&quot;a&quot;, 3], [&quot;b&quot;, 4]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.init.patchNumpy">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.init.</span></span><span class="sig-name descname"><span class="pre">patchNumpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/init.html#patchNumpy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.init.patchNumpy" title="Permalink to this definition"></a></dt>
<dd><p>Patches numpy arrays and data types, so that piping like
this work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (3,)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-k1lib.cli.inp">
<span id="inp-module"></span><h2>inp module<a class="headerlink" href="#module-k1lib.cli.inp" title="Permalink to this heading"></a></h2>
<p>This module for tools that will likely start the processing stream.</p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.cat.pickle">
<span class="sig-prename descclassname"><span class="pre">cat.</span></span><span class="sig-name descname"><span class="pre">pickle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pickleModule=&lt;module</span> <span class="pre">'dill'</span> <span class="pre">from</span> <span class="pre">'/home/kelvin/anaconda3/envs/torch/lib/python3.9/site-packages/dill/__init__.py'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#k1lib.cli.inp.cat.pickle" title="Permalink to this definition"></a></dt>
<dd><p>Reads a file as a series of pickled objects. See <a class="reference internal" href="#k1lib.cli.inp.catPickle" title="k1lib.cli.inp.catPickle"><code class="xref py py-class docutils literal notranslate"><span class="pre">catPickle</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.inp.cat">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">cat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sB</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eB</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#cat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.cat" title="Permalink to this definition"></a></dt>
<dd><p>Reads a file line by line.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># display first 10 lines of file</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;file.txt&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">headOut</span><span class="p">()</span>
<span class="c1"># piping in also works</span>
<span class="s2">&quot;file.txt&quot;</span> <span class="o">|</span> <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">headOut</span><span class="p">()</span>

<span class="c1"># read bytes from an image file and dumps it to another file</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;img.png&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;img2.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to read only specific sections of the file, you can specify the
start (<code class="docutils literal notranslate"><span class="pre">sB</span></code>) and end byte (<code class="docutils literal notranslate"><span class="pre">eB</span></code>) like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;123456</span><span class="se">\n</span><span class="s2">89&quot;</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/catTest.pth&quot;</span><span class="p">)</span>
<span class="c1"># returns [&#39;3456&#39;, &#39;8&#39;]</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;test/catTest.pth&quot;</span><span class="p">,</span> <span class="n">sB</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">eB</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="n">settings</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">chunkSize</span><span class="o">=</span><span class="mi">3</span> <span class="c1"># just for demonstration, don&#39;t do it normally</span>
<span class="c1"># returns [b&#39;123&#39;, b&#39;456&#39;, b&#39;\n8&#39;]</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;test/catTest.pth&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">eB</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition-remote-files admonition">
<p class="admonition-title">Remote files</p>
<p>You can also read from urls directly, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;https://k1lib.com/latest/&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>For remote files like this, there are extra settings at <a class="reference internal" href="../base.html#k1lib.settings" title="k1lib.settings"><code class="xref py py-data docutils literal notranslate"><span class="pre">settings</span></code></a>.cli.RemoteFile.
This will also read the file chunk by chunk if required. If the website doesn’t support
partial downloads, then all of it will be downloaded and stored into ram, which may not be
desireable. The available settings are:</p>
<ul class="simple">
<li><p>timeout: seconds before killing the existing request</p></li>
<li><p>retries: try to resend the request for this much before giving up</p></li>
</ul>
</div>
<p>If you are working with large files and would like to read 1 file from multiple
threads/processes, then you can use this cli in conjunction with <a class="reference internal" href="#k1lib.cli.inp.splitSeek" title="k1lib.cli.inp.splitSeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">splitSeek</span></code></a>.</p>
<p>If you are dumping multiple pickled objects into a single file, you can read all
of them using <a class="reference internal" href="#k1lib.cli.inp.cat.pickle" title="k1lib.cli.inp.cat.pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat.pickle()</span></code></a>, which uses <a class="reference internal" href="#k1lib.cli.inp.catPickle" title="k1lib.cli.inp.catPickle"><code class="xref py py-class docutils literal notranslate"><span class="pre">catPickle</span></code></a> underneath.</p>
<p>This cli has lots of settings at <a class="reference internal" href="../base.html#k1lib.settings" title="k1lib.settings"><code class="xref py py-data docutils literal notranslate"><span class="pre">settings</span></code></a>.cli.cat</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.inp.ls" title="k1lib.cli.inp.ls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ls()</span></code></a></p>
<div class="admonition-custom-datatype admonition">
<p class="admonition-title">Custom datatype</p>
<p>It is possible to build objects that can interoperate with this cli,
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">custom1</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_cat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">]</span>

<span class="n">custom1</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span>           <span class="c1"># returns [&quot;abc&quot;, &quot;def&quot;]</span>
<span class="n">custom1</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>  <span class="c1"># returns &quot;abc&quot;</span>
<span class="n">custom1</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">())</span> <span class="c1"># returns &quot;abc&quot;</span>
</pre></div>
</div>
<p>When called upon, <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a> will see that the input is not a simple string, which
will prompt it to look for <code class="docutils literal notranslate"><span class="pre">_cat()</span></code> method of the complex object and execute it.
By default, if the user specifies any non-default arguments like <code class="docutils literal notranslate"><span class="pre">text=False</span></code>,
it will errors out because <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a> does not know how to handle it. Here’s how
to do it right:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">custom2</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_cat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span> <span class="c1"># default kwargs if user doesn&#39;t specify anything else is `{&quot;text&quot;: True, &quot;chunks&quot;: None, &quot;sB&quot;: 0, &quot;eB&quot;: -1}`</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]:</span> <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="p">[</span><span class="sa">b</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;def&quot;</span><span class="p">]</span>

<span class="n">custom2</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span>                     <span class="c1"># returns [&quot;abc&quot;, &quot;def&quot;]</span>
<span class="n">custom2</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span>           <span class="o">|</span> <span class="n">item</span><span class="p">()</span>  <span class="c1"># returns &quot;abc&quot;</span>
<span class="n">custom2</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">cat</span><span class="p">()</span>           <span class="o">|</span> <span class="n">item</span><span class="p">())</span> <span class="c1"># returns &quot;abc&quot;</span>
<span class="n">custom2</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>           <span class="c1"># returns [b&quot;abc&quot;, b&quot;def&quot;]</span>
<span class="n">custom2</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>  <span class="c1"># returns b&quot;abc&quot;</span>
</pre></div>
</div>
<p>Here, you’re saying that your function can handle non-standard arguments, so
<a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a> will give you all the args. You may support only some arguments
and completely ignore others, it’s all up to you. Might still be worth it to
throw some errors warning users of arguments your custom datatype does not support.</p>
<p>You can also capture future clis like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">custom3</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_cat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ser</span><span class="p">):</span>            <span class="c1"># &quot;ser&quot; stands for &quot;serial&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">clis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">clis</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">item</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;123&quot;</span>            <span class="c1"># fancy optimization</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">ser</span> <span class="c1"># default &quot;slow&quot; base case</span>

<span class="n">custom3</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span>           <span class="c1"># returns [&quot;abc&quot;, &quot;def&quot;]</span>
<span class="n">custom3</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>  <span class="c1"># returns &quot;abc&quot;, because cat() did not capture any clis</span>
<span class="n">custom3</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">())</span> <span class="c1"># returns &quot;123&quot;, which might be desireable, up to you</span>
</pre></div>
</div>
<p>This feature is pretty advanced actually, in that you can actually do different
things based on future processing tasks. Let’s say that the captured cli looks like
<code class="docutils literal notranslate"><span class="pre">cut(3)</span> <span class="pre">|</span> <span class="pre">batched(10)</span> <span class="pre">|</span> <span class="pre">rItem(3)</span></code>. This essentially means “give me elements 30
through 39 from the 4th column”. With this information, you can query your custom
database for exactly those elements only, while fetching nothing else, which would be
great for performance.</p>
<p>You can also outright lie to the user like in the example, where if <a class="reference internal" href="#k1lib.cli.utils.item" title="k1lib.cli.utils.item"><code class="xref py py-class docutils literal notranslate"><span class="pre">item</span></code></a>
is detected, it will return a completely different version (“123”) while it should return
“abc” instead. The possibilities are endless. As you can probably feel, it’s super hard to
actually utilize this in the right way without breaking something, as you are completely
responsible for the captured clis. Let’s see another example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">custom4</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_cat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ser</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">]</span>

<span class="n">custom4</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span>           <span class="c1"># returns [&quot;abc&quot;, &quot;def&quot;]</span>
<span class="n">custom4</span><span class="p">()</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>  <span class="c1"># returns &quot;abc&quot;</span>
<span class="n">custom4</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">())</span> <span class="c1"># returns [&quot;abc&quot;, &quot;def&quot;]</span>
</pre></div>
</div>
<p>Same story as <code class="docutils literal notranslate"><span class="pre">custom3</span></code>, demonstrating that if you declare that you want to see and
manipulate <code class="docutils literal notranslate"><span class="pre">ser</span></code>, you’ll be completely responsible for it, and if you don’t handle it
correctly, it will create horrible bugs. You can, of course, have access to <code class="docutils literal notranslate"><span class="pre">ser</span></code> and
<code class="docutils literal notranslate"><span class="pre">kwargs</span></code> at the same time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">custom5</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_cat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ser</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span> <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">ser</span>
</pre></div>
</div>
<p>If your custom datatype feels like a block device, and you don’t want to rewrite all
the functionalities in <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a>, you can implement the method <code class="docutils literal notranslate"><span class="pre">_catHandle</span></code> that
yields the custom file handle instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">custom6</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_catHandle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">yield</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;abc</span><span class="se">\n</span><span class="s2">def</span><span class="se">\n</span><span class="s2">123&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">custom7</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_catHandle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">yield</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="s2">&quot;abc</span><span class="se">\n</span><span class="s2">def</span><span class="se">\n</span><span class="s2">123&quot;</span><span class="p">)</span>

<span class="n">custom6</span><span class="p">()</span> <span class="o">|</span> <span class="n">cat</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># returns b&#39;abc\ndef\n123&#39;</span>
<span class="n">custom7</span><span class="p">()</span> <span class="o">|</span> <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&#39;abc&#39;, &#39;def&#39;, &#39;123&#39;]</span>
</pre></div>
</div>
<p>Remember that you have to yield instead of returning the file handle. This is so that
you can use <code class="docutils literal notranslate"><span class="pre">with</span></code> statements, and if you return the file handle, the file might be
closed by the time <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a> decides to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> – if None, then return a <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a>
that accepts a file name and outputs Iterator[str]</p></li>
<li><p><strong>text</strong> – if True, read text file, else read binary file</p></li>
<li><p><strong>chunks</strong> – if True then reads the file chunk by chunk, else reads the
entire file. Defaults to True in text mode and False in binary mode</p></li>
<li><p><strong>profile</strong> – whether to profile the file reading rate or not. Can adjust
printing frequency using <cite>settings.cli.cat.every</cite></p></li>
<li><p><strong>sB</strong> – “start byte”. Specify this if you want to start reading from this byte</p></li>
<li><p><strong>eB</strong> – “end byte”, exclusive. Default -1 means end of file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.inp.catPickle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">catPickle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pickleModule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#catPickle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.catPickle" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.catPickle.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pickleModule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#catPickle.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.catPickle.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Reads a file as a series of pickled objects.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ab&quot;</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">dill</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/catTest.pth&quot;</span><span class="p">)</span>
<span class="s2">&quot;cd&quot;</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">dill</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/catTest.pth&quot;</span><span class="p">)</span> <span class="c1"># append to the file</span>
<span class="c1"># returns [&quot;ab&quot;, &quot;cd&quot;]</span>
<span class="n">cat</span><span class="o">.</span><span class="n">pickle</span><span class="p">(</span><span class="s2">&quot;test/catTest.pth&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># also returns [&quot;ab&quot;, &quot;cd&quot;], same style as :class:`cat`</span>
<span class="s2">&quot;test/catTest.pth&quot;</span> <span class="o">|</span> <span class="n">cat</span><span class="o">.</span><span class="n">pickle</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">cat.pickle</span></code> internally uses this class, so don’t worry about the discrepancy
in the examples. So this kinda relies on a trick that you can continuously dump pickled
objects to a single file and it would still work as usual:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">dill</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span> <span class="o">|</span>  <span class="n">file</span><span class="p">(</span><span class="s2">&quot;b.pth&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>    <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">dill</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;b.pth&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;b.pth&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">objs</span> <span class="o">=</span> <span class="p">[</span><span class="n">dill</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">dill</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)]</span>

<span class="k">assert</span> <span class="n">objs</span> <span class="o">==</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span>
</pre></div>
</div>
<div class="admonition-tail-optimization admonition">
<p class="admonition-title">tail() optimization</p>
<p>If you regularly append pickled objects to files, say you’re trying to save
complex time series data, and you want to grab the most recent data, you
might do it like <code class="docutils literal notranslate"><span class="pre">fn</span> <span class="pre">|</span> <span class="pre">cat.pickle()</span> <span class="pre">|</span> <span class="pre">tail(10)</span></code> to get the last 10 objects.
But normally, this means that you have to read through the entire file in order
to just read the last bit of it. You can’t exactly start close to the end as
you don’t know where the object boundaries are. Luckily, I got fed up with this
so much that now when you do this: <code class="docutils literal notranslate"><span class="pre">fn</span> <span class="pre">|</span> <span class="pre">(cat.pickle()</span> <span class="pre">|</span> <span class="pre">tail(10))</span></code> (note the
parenthesis!), it will only read the end of the file! This optimization is mostly
airtight, but not entirely.</p>
<p>How it works is that cat.pickle() tries to unpickle the first object in the file
and grab the object’s size in bytes. This info is used to make guesses as to where
it should start reading the file from, which is <code class="docutils literal notranslate"><span class="pre">endByte</span> <span class="pre">-</span> <span class="pre">tail.n</span> <span class="pre">*</span> <span class="pre">object_size</span> <span class="pre">*</span> <span class="pre">2</span></code></p>
<p>Also, this optimization has only been tested on <a class="reference external" href="https://dill.readthedocs.io/en/latest/index.html#module-dill" title="(in dill v0.3.9.dev0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dill</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/pickle.html#module-pickle" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a>.
<code class="xref py py-mod docutils literal notranslate"><span class="pre">cloudpickle</span></code> has been tested to not work (magic numbers are a little different).
I can potentially add in a mechanism for you to specify magic numbers for any pickler
you want, but it feels niche, so I’m going to skip that for now.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pickleModule</strong> – pickle module to use. Python’s default is “pickle”, but
I usually use <a class="reference external" href="https://dill.readthedocs.io/en/latest/index.html#module-dill" title="(in dill v0.3.9.dev0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dill</span></code></a> because it’s more robust</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.catPickle.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#catPickle.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.catPickle.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.inp.splitSeek">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">splitSeek</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b'\n'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#splitSeek"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.splitSeek" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.splitSeek.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b'\n'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#splitSeek.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.splitSeek.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Splits a file up into n fragments aligned to the closest character and return the seek points.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># preparing the large file</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">3</span><span class="si">}</span><span class="s2">_56789&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/largeFile.txt&quot;</span><span class="p">)</span>
<span class="c1"># returns [0, 30, 70, 110, 150, 190, 230, 270, 300, 340]</span>
<span class="s2">&quot;test/largeFile.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span>
<span class="c1"># returns 32</span>
<span class="s2">&quot;test/largeFile.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># returns 32, demonstrating you can also pipe file objects in, if that&#39;s what you want</span>
<span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test/largeFile.txt&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># returns [0, 0, 10, 10, 20, 30, 30, 40, 40, 50], notice some segments have zero length</span>
<span class="s2">&quot;test/largeFile.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span>
<span class="c1"># returns [0, 400, 1200], demonstrating that you can split a file up unevenly by weights</span>
<span class="s2">&quot;test/largeFile.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="n">ws</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>So, the generated file has 120 lines in total. Each line is 10 bytes (9 for
the string, and 1 for the new line character). Splitting the file into 31
fragments will result in 32 seek points (<span class="math notranslate nohighlight">\(p_i\quad i\in[1, n+1]\)</span>).</p>
<p>Also notice how the returned seek position is not the position of the character
themselves, but the character right after. So if we’re splitting by the new line
character, then it will return the next character after the new line. This is
by default because the majority of the time, I just want it to split by lines.
But you might have other ideas on how to use this in mind. Then just subtract 1
from all returned seek points.</p>
<p>You can then use these seek points to read the file in multiple threads/processes
using <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a>, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;  0_56789&#39;, &#39;  1_56789&#39;, &#39;  2_56789&#39;], [&#39;  3_56789&#39;, &#39;  4_56789&#39;, &#39;  5_56789&#39;, &#39;  6_56789&#39;]]</span>
<span class="s2">&quot;test/largeFile.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="o">|</span> <span class="n">window</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">sB</span><span class="p">,</span> <span class="n">eB</span><span class="p">:</span> <span class="n">cat</span><span class="p">(</span><span class="s2">&quot;test/largeFile.txt&quot;</span><span class="p">,</span> <span class="n">sB</span><span class="o">=</span><span class="n">sB</span><span class="p">,</span> <span class="n">eB</span><span class="o">=</span><span class="n">eB</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Because <span class="math notranslate nohighlight">\(120/31\approx4\)</span>, most of cat’s reads contain 4 lines, but some
has 3 lines. Also notice that the lines smoothly transitions between cat’s
reads (<code class="docutils literal notranslate"><span class="pre">2_56789</span></code> to <code class="docutils literal notranslate"><span class="pre">3_56789</span></code>), so that’s pretty nice. Just like with <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a>,
this also works with urls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;https://example.com&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You have to really test whether reading the same file from multiple processes is
going to be really faster or not. If your data is stored in a HDD (aka hard drive,
with spinning disks), then it will actually slow you down (10x-100x), because the
disk will have to context switch all the time, and each switch has a 10ms cost.</p>
<p>You also have to take into account collecting together the results of all processes,
which can bottleneck the cpu. Read more about concurrency pitfalls at <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>.</p>
</div>
<p>In some scenarios where you want to adjust the seek points even more, like when
you want to parse FASTA genome files, which has blocks of 2/4 lines each like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>@FP200005993L1C001R00100000061/2
TTTTAAACTTGCATTCTTTGGAGATTTGCTGAGTGTTGCTAGAGCTGGGAAACTTTTTTAATGAGATACGTGCATATTTTTCAAATTTACAGATCTTTTTTCACAAAAATAGAAAGTCATAAATGTGAAATGGAAACCTAAACAAGGCAA
+
GFEEEDEFGFFFFEFFFFFIFCEEEFFFGFFDFEGEDGFFFGDGFFGDGCE@GGGEEFDFGFGCFDFGGHCHFFFGFFFFFGEFDFFGHGFGEEHGFGEGFGFHFFEGFFFE;GEGEFGGHFFEI=GDAEDIFDDFGHFGEFGFEGGGGF
@FP200005993L1C001R00100000167/2
CTGGAATTTGGTATCTTATTGCCAAAGAATCTGTTTTGTGAAACTTGGGATCTCTATTTTAATGTTAATTCTGGTCAGTTGTGCCTAAACTCCATAAAGCAGGGACTATACTGAGGCGTATTCAATCTTCCTTCTTACCAAGGCCAGGAA
+
EEFECEDEFFCGFFFFFEEEGEGFEDECCEFEFDFEEFDFEDDFEFEEFDDFFEEFFEEFEFFHEEFEEFEFFDEFFFECF&gt;FFFEFEDFCFFFEGFEDEEGDDFEEFEFGEEBD@EG&gt;EEFFECEEGFEEEFFEDGEEEDE5EBDG:CC
</pre></div>
</div>
<p>Here, each 4 lines are (title, read, blank, quality). Because by default, this will
only split neatly along new lines, you will have to write extra functions to detect
if a particular seek point is desirable, and if not, either jump forward or backward
using <a class="reference internal" href="#k1lib.cli.inp.splitSeek.forward" title="k1lib.cli.inp.splitSeek.forward"><code class="xref py py-meth docutils literal notranslate"><span class="pre">splitSeek.forward()</span></code></a> and <a class="reference internal" href="#k1lib.cli.inp.splitSeek.backward" title="k1lib.cli.inp.splitSeek.backward"><code class="xref py py-meth docutils literal notranslate"><span class="pre">splitSeek.backward()</span></code></a>. To help with this,
<a class="reference internal" href="#k1lib.cli.inp.refineSeek" title="k1lib.cli.inp.refineSeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">refineSeek</span></code></a> has some useful methods that you might want to check out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – how many splits do you want?</p></li>
<li><p><strong>c</strong> – block-boundary character, usually just the new line character</p></li>
<li><p><strong>ws</strong> – weights. If given, the splits length ratios will roughly correspond to this</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.splitSeek.forward">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b'\n'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#splitSeek.forward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.splitSeek.forward" title="Permalink to this definition"></a></dt>
<dd><p>Returns char location after the search char, going forward.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;123</span><span class="se">\n</span><span class="s2">456</span><span class="se">\n</span><span class="s2">789</span><span class="se">\n</span><span class="s2">abc&quot;</span><span class="p">)</span>
<span class="n">f</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># returns [0, 4, 15]</span>
<span class="n">splitSeek</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># returns 4</span>
<span class="n">splitSeek</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># returns 4</span>
<span class="n">splitSeek</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="c1"># returns 8</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – file handle</p></li>
<li><p><strong>i</strong> – current seek point</p></li>
<li><p><strong>c</strong> – block-boundary character</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.splitSeek.backward">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">backward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b'\n'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#splitSeek.backward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.splitSeek.backward" title="Permalink to this definition"></a></dt>
<dd><p>Returns char location after the search char, going backward.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;123</span><span class="se">\n</span><span class="s2">456</span><span class="se">\n</span><span class="s2">789</span><span class="se">\n</span><span class="s2">abc&quot;</span><span class="p">)</span>
<span class="n">f</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># returns [0, 4, 15]</span>
<span class="n">splitSeek</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># returns 4</span>
<span class="n">splitSeek</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="c1"># returns 4</span>
<span class="n">splitSeek</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># returns 0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – file handle</p></li>
<li><p><strong>i</strong> – current seek point</p></li>
<li><p><strong>c</strong> – block-boundary character</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.splitSeek.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#splitSeek.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.splitSeek.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.inp.refineSeek">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">refineSeek</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#refineSeek"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.refineSeek" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.refineSeek.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#refineSeek.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.refineSeek.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Refines seek positions.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns list of integers for seek positions</span>
<span class="s2">&quot;abc.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="c1"># returns refined seek positions, such that the line starting at the seek positions starts with &quot;@&quot;</span>
<span class="s2">&quot;abc.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">|</span> <span class="n">refineSeek</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;@&quot;</span><span class="p">))</span>
<span class="c1"># same thing as above</span>
<span class="s2">&quot;abc.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">|</span> <span class="n">refineSeek</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;@&quot;</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c1"># returns refined seek positions, such that 0th line starts with &quot;@&quot; and 2nd line starts with &quot;+&quot;. This demonstrates `window` parameter</span>
<span class="s2">&quot;abc.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">|</span> <span class="n">refineSeek</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;@&quot;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;+&quot;</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1"># same thing as above, demonstrating some builtin refine seek functions</span>
<span class="s2">&quot;abc.txt&quot;</span> <span class="o">|</span> <span class="n">splitSeek</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">|</span> <span class="n">refineSeek</span><span class="o">.</span><span class="n">fastq</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – function that returns True if the current line/lines is a valid block boundary</p></li>
<li><p><strong>window</strong> – by default (1), will fetch 1 line and check boundary using <code class="docutils literal notranslate"><span class="pre">f(line)</span></code>.
If a value greater than 1 is passed (for example, 3), will fetch 3 lines and check
boundary using <code class="docutils literal notranslate"><span class="pre">f([line1,</span> <span class="pre">line2,</span> <span class="pre">line3])</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.refineSeek.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seeks</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#refineSeek.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.refineSeek.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.refineSeek.injectFn">
<span class="sig-name descname"><span class="pre">injectFn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#refineSeek.injectFn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.refineSeek.injectFn" title="Permalink to this definition"></a></dt>
<dd><p>Injects file name dependency, if this is not used right after <a class="reference internal" href="#k1lib.cli.inp.splitSeek" title="k1lib.cli.inp.splitSeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">splitSeek</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.refineSeek.fastq">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fastq</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#refineSeek.fastq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.refineSeek.fastq" title="Permalink to this definition"></a></dt>
<dd><p>Refine fastq file’s seek points</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.inp.wget">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">wget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#wget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.wget" title="Permalink to this definition"></a></dt>
<dd><p>Downloads a file. Also returns the file name, in case you want to pipe it
to something else.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The url of the file</p></li>
<li><p><strong>fileName</strong> – if None, then tries to infer it from the url</p></li>
<li><p><strong>mkdir</strong> – whether to make the directory leading up to the file or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.inp.ls">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">ls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#ls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.ls" title="Permalink to this definition"></a></dt>
<dd><p>List every file and folder inside the specified folder.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns List[str]</span>
<span class="n">ls</span><span class="p">(</span><span class="s2">&quot;/home&quot;</span><span class="p">)</span>
<span class="c1"># same as above</span>
<span class="s2">&quot;/home&quot;</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span>
<span class="c1"># only outputs files, not folders</span>
<span class="n">ls</span><span class="p">(</span><span class="s2">&quot;/home&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">)</span>
</pre></div>
</div>
<p>This can handle things that are not plain folders. For example,
it can handle zip file whereby it will list out all the files contained
within a particular .zip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;abc.zip&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, you can use <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a> as usual, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;abc.zip&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">cat</span><span class="p">()</span>
</pre></div>
</div>
<p>Pretty nice!</p>
<div class="admonition-custom-datatype admonition">
<p class="admonition-title">Custom datatype</p>
<p>It is possible to build objects that can interoperate with this cli,
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">sql</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_ls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;something&quot;</span><span class="p">,</span> <span class="s2">&quot;here&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>ls() will identify that what’s inputted is not a string, and will try
to execute the object’s “_ls()” method, so you can just simply implement
it in your classes</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.inp.cmd">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.cmd" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.cmd.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#cmd.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.cmd.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Runs a command, and returns the output line by line. Can pipe in some
inputs. If no inputs then have to pipe in <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># return detailed list of files</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls -la&quot;</span><span class="p">)</span>
<span class="c1"># return list of files that ends with &quot;ipynb&quot;</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls -la&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;grep ipynb$&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>It might be tiresome to pipe in <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> all the time. So, you can use “&gt;”
operator to yield values right away:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints out first 10 lines of list of files</span>
<span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls -la&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">headOut</span><span class="p">()</span>
</pre></div>
</div>
<p>If you’re using Jupyter notebook/lab, then if you were to display a <a class="reference internal" href="#k1lib.cli.inp.cmd" title="k1lib.cli.inp.cmd"><code class="xref py py-class docutils literal notranslate"><span class="pre">cmd</span></code></a>
object, it will print out the outputs. So, a single command <code class="docutils literal notranslate"><span class="pre">cmd(&quot;mkdir&quot;)</span></code>
displayed at the end of a cell is enough to trigger creating the directory.</p>
<p>Reminder that “&gt;” operator in here sort of has a different meaning to that of
<a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a>. So you kinda have to becareful about this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns a serial cli, cmd not executed</span>
<span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls -la&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># executes cmd with no input stream and pipes output to deref</span>
<span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls -la&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns a serial cli</span>
<span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls -la&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;txt&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">headOut</span><span class="p">()</span>
<span class="c1"># executes pipeline</span>
<span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls -la&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;txt&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">headOut</span><span class="p">()</span>
</pre></div>
</div>
<p>General advice is, right ater a <a class="reference internal" href="#k1lib.cli.inp.cmd" title="k1lib.cli.inp.cmd"><code class="xref py py-class docutils literal notranslate"><span class="pre">cmd</span></code></a>, use “&gt;”, and use “|” everywhere else.</p>
<p>Let’s see a few more exotic examples. File <code class="docutils literal notranslate"><span class="pre">a.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"> </span>sleep<span class="w"> </span><span class="m">0</span>.5
<span class="nb">echo</span><span class="w"> </span>This<span class="w"> </span>message<span class="w"> </span>goes<span class="w"> </span>to<span class="w"> </span>stderr<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="nb">echo</span><span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w"> </span>sleep<span class="w"> </span><span class="m">0</span>.5
<span class="nb">echo</span><span class="w"> </span><span class="k">$(</span>&lt;/dev/stdin<span class="k">)</span>
sleep<span class="w"> </span><span class="m">0</span>.5<span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">3</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [b&#39;1\n&#39;, b&#39;2\n&#39;, b&#39;45\n&#39;, b&#39;3\n&#39;] and prints out the error message</span>
<span class="s2">&quot;45&quot;</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;./a.sh&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [b&#39;This message goes to stderr\n&#39;]</span>
<span class="s2">&quot;45&quot;</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;./a.sh&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[b&#39;1\n&#39;, b&#39;2\n&#39;, b&#39;45\n&#39;, b&#39;3\n&#39;], [b&#39;This message goes to stderr\n&#39;]]</span>
<span class="s2">&quot;45&quot;</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;./a.sh&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Performance-wise, stdout and stderr will yield values right away as soon
as the process outputs it, so you get real time feedback. However, this will
convert the entire input into a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object, and not feed it bit by
bit lazily, so if you have a humongous input, it might slow you down a little.</p>
<p>Also, because stdout and stderr yield values right away, it means that if you
want the operation to be blocking until finished, you have to consume the output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;mkdir abc&quot;</span><span class="p">)</span>
<span class="c1"># might fail, because this might get executed before the previous line</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;echo a&gt;abc/rg.txt&quot;</span><span class="p">)</span>

<span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;mkdir abc&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
<span class="c1"># will succeed, because this will be guaranteed to execute after the previous line</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;echo a&gt;abc/rg.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Settings:
- cli.quiet: if True, won’t display errors in mode 1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> – if 0, returns <code class="docutils literal notranslate"><span class="pre">(stdout,</span> <span class="pre">stderr)</span></code>. If 1, returns <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and prints
<code class="docutils literal notranslate"><span class="pre">stderr</span></code> if there are any errors. If 2, returns <code class="docutils literal notranslate"><span class="pre">stderr</span></code>. If 3, daemonize
the process, returns nothing</p></li>
<li><p><strong>text</strong> – whether to decode the outputs into <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> or return raw <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a></p></li>
<li><p><strong>block</strong> – whether to wait for the task to finish before returning to Python or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.cmd.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#cmd.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.cmd.__ror__" title="Permalink to this definition"></a></dt>
<dd><p>Pipes in lines of input, or if there’s nothing to
pass, then pass None</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.inp.walk">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">walk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#walk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.walk" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.walk.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#walk.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.walk.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Recursively get all files inside a dictionary.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints out first 10 files</span>
<span class="s2">&quot;.&quot;</span> <span class="o">|</span> <span class="n">walk</span><span class="p">()</span> <span class="o">|</span> <span class="n">headOut</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.walk.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#walk.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.walk.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.inp.urlPath">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">urlPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#urlPath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.urlPath" title="Permalink to this definition"></a></dt>
<dd><p>Translates from a url to a file path.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">base</span> <span class="o">=</span> <span class="s2">&quot;~/ssd/some/other/path&quot;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://example.com/some/path/to/file.txt&quot;</span>
<span class="n">url</span> <span class="o">|</span> <span class="n">urlPath</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="c1"># returns &quot;~/ssd/some/other/path/example_com/some/path/to/file.txt&quot;</span>
<span class="n">url</span> <span class="o">|</span> <span class="n">urlPath</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="c1"># returns &quot;~/ssd/some/other/path/some/path/to/file.txt&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>base</strong> – base directory you want the files to be in</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.inp.kzip">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">kzip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#kzip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.kzip" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.kzip.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gz'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#kzip.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.kzip.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Incrementally compresses a stream of data using gzip or bzip2.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># list of bytes</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">kzip</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns list of bytes</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">|</span> <span class="n">kzip</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns list of bytes, demonstrating piping iterator of string works</span>
</pre></div>
</div>
<p>Quick reminder that if you pass in bytes iterator then it will be compressed as-is.
But if you pass in string iterator then it will append a new line character to each
string and then compress it. This is more intuitive, and it makes the style consistent
with <a class="reference internal" href="#k1lib.cli.output.file" title="k1lib.cli.output.file"><code class="xref py py-class docutils literal notranslate"><span class="pre">file</span></code></a>.</p>
<p>Passing in single string or byte is ok too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="n">kzip</span><span class="p">()</span>  <span class="c1"># returns gz bytes</span>
<span class="sa">b</span><span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="n">kzip</span><span class="p">()</span> <span class="c1"># returns gz bytes, exact same pattern as above</span>
</pre></div>
</div>
<p>Why “kzip” and not just “zip”? Because “zip” is a builtin python keyword.</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.inp.kunzip" title="k1lib.cli.inp.kunzip"><code class="xref py py-class docutils literal notranslate"><span class="pre">kunzip</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fmt</strong> – desired compressed format. Currently only supports “gz” or “bz2”</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.kzip.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#kzip.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.kzip.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.inp.kunzip">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">kunzip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#kunzip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.kunzip" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.kunzip.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#kunzip.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.kunzip.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Incrementally decompress a stream of data using gzip or bzip2.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns an iterator of bytes. cat() command can shorten to cat(&quot;someFile.gz&quot;, False, True)</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;someFile.gz&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span>
<span class="c1"># incrementally fetches remote file, then incrementally unzips it</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;https://example.com/someFile.gz&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># list of bytes</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">kzip</span><span class="p">()</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns original data in list of bytes. May split the bytes at different positions though</span>
</pre></div>
</div>
<p>How does it know which algorithm to pick to decompress? It looks at the
first few bytes of the file for its magic number. Also, if you’re expecting
a text file after decompression, you can do this to get the lines directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns iterator of strings</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;https://example.com/someFile.gz&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>One more thing. If you’re planning to use this to download whole files, you might
want to tune the chunk size in <a class="reference internal" href="../base.html#k1lib.settings" title="k1lib.settings"><code class="xref py py-data docutils literal notranslate"><span class="pre">settings</span></code></a>.cli.cat.chunkSize as
it might speed things up considerably to raise it. Or may be you should just
use wget instead =))</p>
<p>More examples of the different styles to use this cli:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">kzip</span><span class="p">()</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&quot;abc&quot;]</span>
 <span class="s2">&quot;abc&quot;</span>  <span class="o">|</span> <span class="n">kzip</span><span class="p">()</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>           <span class="c1"># returns  &quot;abc&quot;</span>
 <span class="s2">&quot;abc&quot;</span>  <span class="o">|</span> <span class="n">kzip</span><span class="p">()</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span>               <span class="c1"># returns b&quot;abc&quot;</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.inp.kzip" title="k1lib.cli.inp.kzip"><code class="xref py py-class docutils literal notranslate"><span class="pre">kzip</span></code></a>.</p>
<div class="admonition-reading-files-directly admonition">
<p class="admonition-title">Reading files directly</p>
<p>The original purpose of this cli is to incrementally decompress a byte stream.
But a lot of time, that byte stream is coming from a file, and typing out
<code class="docutils literal notranslate"><span class="pre">cat(fn,</span> <span class="pre">False,</span> <span class="pre">True)</span></code> to generate a byte stream to feed into this cli is
tedious, so instead, you can pipe in the file name and this will just unzips
it and return the string/byte stream to you:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;abc.gz&quot;</span>  <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span> <span class="c1"># returns string iterator</span>
<span class="s2">&quot;abc.bz2&quot;</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span> <span class="c1"># same</span>
<span class="s2">&quot;abc.zip&quot;</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span> <span class="c1"># returns string iterator from the first subfile only. All subsequent subfiles are ignored</span>
</pre></div>
</div>
</div>
<div class="admonition-zip-files admonition">
<p class="admonition-title">.zip files</p>
<p>This can also work with subfiles within .zip files, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;abc.zip&quot;</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span>                   <span class="c1"># unzips the first subfile</span>
<span class="s2">&quot;abc.zip&quot;</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span>                      <span class="c1"># lists out all subfiles</span>
<span class="s2">&quot;abc.zip&quot;</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span> <span class="o">|</span> <span class="n">rItem</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">unzip</span><span class="p">()</span> <span class="c1"># unzips the 3rd subfile</span>
</pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – whether to yield string lines or bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.inp.kunzip.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/inp.html#kunzip.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.inp.kunzip.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.inp.unzip">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.inp.</span></span><span class="sig-name descname"><span class="pre">unzip</span></span><a class="headerlink" href="#k1lib.cli.inp.unzip" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.inp.kunzip" title="k1lib.cli.inp.kunzip"><code class="xref py py-class docutils literal notranslate"><span class="pre">kunzip</span></code></a></p>
</dd></dl>

</section>
<section id="module-k1lib.cli.kapi">
<span id="kapi-module"></span><h2>kapi module<a class="headerlink" href="#module-k1lib.cli.kapi" title="Permalink to this heading"></a></h2>
<p>I have several machine learning tools running on my own cluster that’s hosted
on <a class="reference external" href="https://mlexps.com/#kapi">https://mlexps.com/#kapi</a>, and this module contains functions, classes and
clis that will contact that service. This is so that if I want to use a language
model in multiple notebooks, I’d have to load the model into my GPU for each
notebook, which would waste a lot of resources. I can’t run a lot of notebooks
at the same time as I’d just run out of VRAM. So, by having dedicated services/demos,
I can really focus on serving things well and make it performant. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;some text&quot;</span>           <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span>    <span class="c1"># returns embedding numpy array</span>
<span class="s2">&quot;What is Python? &quot;</span>    <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span> <span class="c1"># returns string, completes the sentence</span>
<span class="s2">&quot;image.png&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">ocr</span><span class="p">()</span>      <span class="c1"># returns `Ocr` object, with bounding boxes and text content of all possible texts</span>
<span class="s2">&quot;cute anime girl&quot;</span>     <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">txt2im</span><span class="p">()</span>   <span class="c1"># generates an image from some description</span>
<span class="s2">&quot;image.png&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">caption</span><span class="p">()</span>       <span class="c1"># generates a caption of an image</span>
</pre></div>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.kapi.status">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.status" title="Permalink to this definition"></a></dt>
<dd><p>Displays a table of whether the services are online and available or not</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.segment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#segment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.segment" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.segment.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#segment.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.segment.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Segments the input string by sentences, such that each segment’s length is lower than the specified limit.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;some. Really&#39;, &#39;Long. String&#39;, &#39;Just. Monika&#39;]</span>
<span class="s2">&quot;some. Really. Long. String. Just. Monika&quot;</span> <span class="o">|</span> <span class="n">segment</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>So, this will split the input string by “. “, then incrementally joins the strings together into segments.
This is useful in breaking up text so that it fits within language model’s context size</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.segment.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#segment.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.segment.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.demo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">demo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'demos_1-arith'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#demo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.demo" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.demo.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'demos_1-arith'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#demo.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.demo.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Sends a request to one of mlexps.com demos.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 21.0</span>
<span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">demo</span><span class="p">(</span><span class="s2">&quot;demos/1-arith&quot;</span><span class="p">)</span>
<span class="c1"># builds js interface that displays 21.0</span>
<span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">demo</span><span class="p">(</span><span class="s2">&quot;demos/1-arith&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;jsone&quot;</span><span class="p">)</span>
<span class="c1"># same as above, but the dictionary is formed in JS instead of Python</span>
<span class="mi">3</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="s2">&quot;{&#39;a&#39;: x}&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">demo</span><span class="p">(</span><span class="s2">&quot;demos/1-arith&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;jsone&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You don’t have to specify all params, just the ones you want to deviate from the defaults</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.demo.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#demo.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.demo.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.embed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">embed</span></span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#embed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.embed" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.embed.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#embed.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.embed.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Gets an embedding vector for every sentence piped into this using <cite>all-MiniLM-L6-v2</cite>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns (384,)</span>
<span class="s2">&quot;abc&quot;</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (2, 384)</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>VRAM: 440MB</p></li>
<li><p>Throughput: 512/s</p></li>
</ul>
<p>See also: <a class="reference internal" href="#k1lib.cli.models.embed" title="k1lib.cli.models.embed"><code class="xref py py-class docutils literal notranslate"><span class="pre">embed</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.embed.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#embed.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.embed.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.embeds">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">embeds</span></span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#embeds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.embeds" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.embeds.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#embeds.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.embeds.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Breaks up some text and grab the embedding vectors of each segment.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;sone long text&quot;</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">embeds</span><span class="p">()</span> <span class="c1"># returns list of (segment, numpy vector)</span>
</pre></div>
</div>
<p>This is just a convenience cli. Internally, this splits the text up using <a class="reference internal" href="#k1lib.cli.kapi.segment" title="k1lib.cli.kapi.segment"><code class="xref py py-class docutils literal notranslate"><span class="pre">segment</span></code></a>
and then embeds each segment using <a class="reference internal" href="#k1lib.cli.kapi.embed" title="k1lib.cli.kapi.embed"><code class="xref py py-class docutils literal notranslate"><span class="pre">embed</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.embeds.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#embeds.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.embeds.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.complete">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">complete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxTokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#complete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.complete" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.complete.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxTokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#complete.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.complete.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Generates text from predefined prompts using <cite>Llama 2</cite>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns string completion</span>
<span class="s2">&quot;What is Python?&quot;</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span>
<span class="c1"># returns list of string completions</span>
<span class="p">[</span><span class="s2">&quot;What is Python?&quot;</span><span class="p">,</span> <span class="s2">&quot;What is C++?&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">complete</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="c1"># returns list of string completions. The prompts sent to the server are [&quot;&lt;paragraph 1&gt;\n\n\nPlease summarize the above paragraph&quot;, ...]</span>
<span class="p">[</span><span class="s2">&quot;&lt;paragraph 1&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;paragraph 2&gt;&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">complete</span><span class="p">(</span><span class="s2">&quot;Please summarize the above paragraph&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>VRAM: 22GB</p></li>
<li><p>Throughput: 8/s</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max_tokens</strong> – maximum amount of tokens</p>
</dd>
</dl>
<p>See <a class="reference internal" href="#k1lib.cli.models.complete" title="k1lib.cli.models.complete"><code class="xref py py-class docutils literal notranslate"><span class="pre">complete</span></code></a>. That one is an older version using Google Flan T5 instead of llama 2</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.complete.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#complete.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.complete.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.ocr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">ocr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paragraph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#ocr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.ocr" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.ocr.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paragraph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#ocr.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.ocr.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Do OCR (optical character recognition) on some image.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="s2">&quot;some_image.png&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">ocr</span><span class="p">()</span> <span class="c1"># loads image and do OCR on them</span>
<span class="n">o</span>     <span class="c1"># run this in a separate notebook cell for an overview of where the boxes are</span>
<span class="n">o</span><span class="o">.</span><span class="n">res</span> <span class="c1"># see raw results received from the OCR service</span>
</pre></div>
</div>
<p>That returns something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[[</span><span class="mi">771</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">813</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span> <span class="s1">&#39;round&#39;</span><span class="p">,</span> <span class="mf">0.7996242908503107</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">58</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">34</span><span class="p">],</span> <span class="s1">&#39;150&#39;</span><span class="p">,</span> <span class="mf">0.883547306060791</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">166</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">234</span><span class="p">,</span> <span class="mi">34</span><span class="p">],</span> <span class="s1">&#39;51,340&#39;</span><span class="p">,</span> <span class="mf">0.9991665158446097</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">782</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">814</span><span class="p">,</span> <span class="mi">38</span><span class="p">],</span> <span class="s1">&#39;83&#39;</span><span class="p">,</span> <span class="mf">0.9999995785315409</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">879</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">963</span><span class="p">,</span> <span class="mi">33</span><span class="p">],</span> <span class="s1">&#39;UPGRADes&#39;</span><span class="p">,</span> <span class="mf">0.7625563055298393</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">881</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">963</span><span class="p">,</span> <span class="mi">69</span><span class="p">],</span> <span class="s1">&#39;Monkey Ace&#39;</span><span class="p">,</span> <span class="mf">0.9171751588707685</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">933</span><span class="p">,</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">971</span><span class="p">,</span> <span class="mi">149</span><span class="p">],</span> <span class="s1">&#39;5350&#39;</span><span class="p">,</span> <span class="mf">0.9001984000205994</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">873</span><span class="p">,</span> <span class="mi">203</span><span class="p">,</span> <span class="mi">911</span><span class="p">,</span> <span class="mi">219</span><span class="p">],</span> <span class="s1">&#39;5325&#39;</span><span class="p">,</span> <span class="mf">0.481669545173645</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">931</span><span class="p">,</span> <span class="mi">203</span><span class="p">,</span> <span class="mi">971</span><span class="p">,</span> <span class="mi">219</span><span class="p">],</span> <span class="s1">&#39;5500&#39;</span><span class="p">,</span> <span class="mf">0.7656491994857788</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">869</span><span class="p">,</span> <span class="mi">271</span><span class="p">,</span> <span class="mi">913</span><span class="p">,</span> <span class="mi">291</span><span class="p">],</span> <span class="s1">&#39;G800&#39;</span><span class="p">,</span> <span class="mf">0.31933730840682983</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">925</span><span class="p">,</span> <span class="mi">271</span><span class="p">,</span> <span class="mi">977</span><span class="p">,</span> <span class="mi">291</span><span class="p">],</span> <span class="s1">&#39;64600&#39;</span><span class="p">,</span> <span class="mf">0.14578145924474253</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">871</span><span class="p">,</span> <span class="mi">341</span><span class="p">,</span> <span class="mi">911</span><span class="p">,</span> <span class="mi">361</span><span class="p">],</span> <span class="s1">&#39;5750&#39;</span><span class="p">,</span> <span class="mf">0.5966295003890991</span><span class="p">],</span>
 <span class="p">[[</span><span class="mi">929</span><span class="p">,</span> <span class="mi">341</span><span class="p">,</span> <span class="mi">971</span><span class="p">,</span> <span class="mi">361</span><span class="p">],</span> <span class="s1">&#39;5850&#39;</span><span class="p">,</span> <span class="mf">0.9974847435951233</span><span class="p">]]</span>
</pre></div>
</div>
<p>First column is the bounding box (x1, y1, x2, y2), second column is the text,
and third column is the confidence, from 0 to 1.</p>
<p>Internally, this uses EasyOCR for the recognition. However, from my experience,
this doesn’t always get it right. It’s particularly bad at symbols like dollar
signs (it thinks it’s “S”, or “5” instead), periods or commads. So, you can refine
each of the bounding boxes like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ocr</span> <span class="o">=</span> <span class="n">someImg</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">ocr</span><span class="p">()</span>
<span class="n">ocr</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">tess</span><span class="p">()</span> <span class="c1"># returns string, uses tesseract OCR instead of EasyOCR for more accuracy for a less complex scene</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.kapi.Ocr" title="k1lib.cli.kapi.Ocr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ocr</span></code></a></p>
<ul class="simple">
<li><p>VRAM: 1GB</p></li>
<li><p>Throughput: depends heavily on image resolution, but for 1000x750 images, should be 3-4 images/s</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>paragraph</strong> – whether to try to combine boxes together or not</p></li>
<li><p><strong>resize</strong> – whether to resize the images to a reasonable size before sending it over or not. Runs faster if true</p></li>
<li><p><strong>bs</strong> – how many images should this group together and send to the server at once?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.ocr.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#ocr.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.ocr.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.Ocr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">Ocr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imgPara</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#Ocr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.Ocr" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.Ocr.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imgPara</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#Ocr.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.Ocr.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Ocr result object. Stores raw results from model in <code class="docutils literal notranslate"><span class="pre">.res</span></code> field and has many
more functionalities. Not intended to be instantiated by the end user. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ocr</span> <span class="o">=</span> <span class="n">someImg</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">ocr</span><span class="p">()</span> <span class="c1"># ocr is an object of type Ocr</span>
<span class="n">ocrBox</span> <span class="o">=</span> <span class="n">ocr</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># grabs the 3rd detected bounding box</span>

<span class="n">ocrBox</span><span class="o">.</span><span class="n">coords</span>     <span class="c1"># grabs coordinates</span>
<span class="n">ocrBox</span><span class="o">.</span><span class="n">text</span>       <span class="c1"># grabs recognized text</span>
<span class="n">ocrBox</span><span class="o">.</span><span class="n">confidence</span> <span class="c1"># grabs confidence</span>

<span class="n">ocrBox</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span>               <span class="c1"># grabs image cutout</span>
<span class="n">ocrBox</span> <span class="o">|</span> <span class="n">toNdArray</span><span class="p">()</span>           <span class="c1"># grabs numpy array cutout</span>
<span class="n">ocrBox</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">tess</span><span class="p">()</span> <span class="c1"># returns string, pass the image through tesseract OCR, to get more reliable results</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.kapi.OcrBox" title="k1lib.cli.kapi.OcrBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">OcrBox</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.Ocr.npImg">
<span class="sig-name descname"><span class="pre">npImg</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#Ocr.npImg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.Ocr.npImg" title="Permalink to this definition"></a></dt>
<dd><p>Grabs the numpy array of the image, shape (C, H, W)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.OcrBox">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">OcrBox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ocr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#OcrBox"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.OcrBox" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.OcrBox.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ocr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#OcrBox.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.OcrBox.__init__" title="Permalink to this definition"></a></dt>
<dd><p>1 bounding box of the ocr-ed image. Not intended to be instantiated by the end user.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ocr</span> <span class="o">=</span> <span class="n">someImg</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">ocr</span><span class="p">()</span>
<span class="n">ocrBox</span> <span class="o">=</span> <span class="n">ocr</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># grabs the 3rd detected bounding box</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.kapi.Ocr" title="k1lib.cli.kapi.Ocr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ocr</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.kapi.OcrBox.coords">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">coords</span></span><a class="headerlink" href="#k1lib.cli.kapi.OcrBox.coords" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.kapi.OcrBox.text">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">text</span></span><a class="headerlink" href="#k1lib.cli.kapi.OcrBox.text" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.kapi.OcrBox.confidence">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">confidence</span></span><a class="headerlink" href="#k1lib.cli.kapi.OcrBox.confidence" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.tess">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">tess</span></span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#tess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.tess" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.tess.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#tess.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.tess.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Do OCR using tesseract, instead of easyocr. This is meant for simple images only,
preferably sections cut off from <a class="reference internal" href="#k1lib.cli.kapi.ocr" title="k1lib.cli.kapi.ocr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocr</span></code></a>. For complex bounding box detection, still
use <a class="reference internal" href="#k1lib.cli.kapi.ocr" title="k1lib.cli.kapi.ocr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocr</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns &quot;some text&quot;</span>
<span class="n">image</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">tess</span><span class="p">()</span>
</pre></div>
</div>
<p>For small texts, can reach throughput up to 75/s</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.tess.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#tess.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.tess.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.txt2im">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">txt2im</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_inference_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#txt2im"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.txt2im" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.txt2im.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_inference_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#txt2im.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.txt2im.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Generates images from text descriptions, using stable diffusion v2.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;a bowl of apples&quot;</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">txt2im</span><span class="p">()</span> <span class="c1"># returns PIL image</span>
</pre></div>
</div>
<ul class="simple">
<li><p>VRAM: 5.42GB</p></li>
<li><p>Throughput: 1/s</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.txt2im.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#txt2im.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.txt2im.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.caption">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">caption</span></span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#caption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.caption" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.caption.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#caption.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.caption.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Captions images using model <cite>Salesforce/blip-image-captioning-large</cite>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">img</span> <span class="o">=</span> <span class="s2">&quot;some_image.png&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="c1"># loads PIL image</span>
<span class="n">img</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">caption</span><span class="p">()</span>                  <span class="c1"># returns string description</span>
</pre></div>
</div>
<ul class="simple">
<li><p>VRAM: 2.5GB</p></li>
<li><p>Throughput: 16/s</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.caption.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#caption.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.caption.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.speech">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">speech</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#speech"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.speech" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.speech.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#speech.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.speech.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts English speech to text using whisper-large-v2.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;audio.mp3&quot;</span> <span class="o">|</span> <span class="n">toAudio</span><span class="p">()</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">speech</span><span class="p">()</span> <span class="c1"># returns string transcript</span>
</pre></div>
</div>
<ul class="simple">
<li><p>VRAM: 4GB</p></li>
<li><p>Throughput: 20min video finish transcribing in ~25s, so around 60x faster than real time</p></li>
</ul>
<p>If the input audio is too long (&gt;25 minutes), then it will be broken up
into multiple smaller pieces around 20 min each and sent to the server,
so at the bounds, it might go wrong a little bit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sep</strong> – if True, separate transcripts of each segment (returns List[transcript]),
if False (default), joins segment’s transcripts together into a single string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.speech.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.cli.conv.Audio" title="k1lib.cli.conv.Audio"><span class="pre">conv.Audio</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#speech.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.speech.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.summarize">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">summarize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#summarize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.summarize" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.summarize.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#summarize.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.summarize.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Summarizes text in multiple stages until it’s shorter than <code class="docutils literal notranslate"><span class="pre">length</span></code> in
characters or until further compression is not possible. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://www.youtube.com/watch?v=NfmSjGbnEWk&quot;</span>
<span class="n">audio</span> <span class="o">=</span> <span class="n">url</span>   <span class="o">|</span> <span class="n">toAudio</span><span class="p">()</span>     <span class="c1"># downloads audio from youtube</span>
<span class="n">text</span>  <span class="o">=</span> <span class="n">audio</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">speech</span><span class="p">()</span> <span class="c1"># does speech recognition</span>
<span class="n">text</span> <span class="o">|</span> <span class="n">summarize</span><span class="p">()</span>            <span class="c1"># summarize the text. For a 23 minute video/22k characters text, it should take around 23s to summarize everything</span>
</pre></div>
</div>
<p>This will return an array of strings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="s2">&quot;shortened text final stage&quot;</span><span class="p">,</span>
    <span class="s2">&quot;shortened text stage 2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;shortened text stage 1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;original text&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>So in each stage, the original text is split up into multiple pieces, then
each piece is summarized using <a class="reference internal" href="#k1lib.cli.kapi.complete" title="k1lib.cli.kapi.complete"><code class="xref py py-class docutils literal notranslate"><span class="pre">complete</span></code></a> and then all summary will
be joined together, creating the “shortened text stage 1”. This continues
until it the text’s length does not decrease any further, or it’s shorter
than the desired length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>length</strong> – desired summary string length</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.summarize.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#summarize.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.summarize.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kapi.post">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kapi.</span></span><span class="sig-name descname"><span class="pre">post</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#post"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.post" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.post.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#post.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.post.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Creates a post request from a URL that can be read using <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns str of the results</span>
<span class="p">{</span><span class="s2">&quot;some&quot;</span><span class="p">:</span> <span class="s2">&quot;json data&quot;</span><span class="p">}</span> <span class="o">|</span> <span class="n">kapi</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;https://some.url/some/path&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice how there isn’t a get request counterpart, because you can always just cat() them
directly, as get requests don’t have a body:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;https://some.url/some/path&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kapi.post.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kapi.html#post.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kapi.post.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.kcv">
<span id="kcv-module"></span><h2>kcv module<a class="headerlink" href="#module-k1lib.cli.kcv" title="Permalink to this heading"></a></h2>
<p>This includes helper clis that make it quick to graph graphviz plots.</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kcv.markers">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kcv.</span></span><span class="sig-name descname"><span class="pre">markers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kcv.html#markers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kcv.markers" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kcv.markers.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kcv.html#markers.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kcv.markers.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Detect aruco markers. Returns <a class="reference internal" href="#k1lib.cli.kcv.Markers" title="k1lib.cli.kcv.Markers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Markers</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">im</span> <span class="o">=</span> <span class="s2">&quot;some/image.jpg&quot;</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span>
<span class="n">markers</span> <span class="o">=</span> <span class="n">im</span> <span class="o">|</span> <span class="n">kcv</span><span class="o">.</span><span class="n">markers</span><span class="p">()</span>

<span class="n">markers</span> <span class="c1"># run this in a notebook cell to quickly view where the bounding boxes are</span>
<span class="n">markers</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="c1"># grab first detection, a tuple (aruco dictionary, coords (with shape (4,2)), number)</span>
<span class="n">markers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># same as above</span>
<span class="n">markers</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># dereference into just lists, instead of kcv.Markers object</span>
</pre></div>
</div>
<p>For a moderately complex scene with 20 markers of size (1000, 800), this should take ~15ms to run. The same
scene of size (4000, 3000) should take ~170ms to run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> – aruco dictionary string, like ‘DICT_7X7_1000’. If specified, then will only look in
those dictionaries. If not specified will look in all dictionaries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kcv.markers.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kcv.html#markers.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kcv.markers.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kcv.Markers">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kcv.</span></span><span class="sig-name descname"><span class="pre">Markers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kcv.html#Markers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kcv.Markers" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kcv.Markers.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kcv.html#Markers.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kcv.Markers.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Resulting Markers object, obtained from <a class="reference internal" href="#k1lib.cli.kcv.markers" title="k1lib.cli.kcv.markers"><code class="xref py py-class docutils literal notranslate"><span class="pre">markers</span></code></a> cli, not
intended to be instantiated by the end user.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.kcv.map3d">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.kcv.</span></span><span class="sig-name descname"><span class="pre">map3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ws</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kcv.html#map3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kcv.map3d" title="Permalink to this definition"></a></dt>
<dd><p>Creates 2 functions that maps from world points (ws) to camera points (cs).
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">cs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">ws</span><span class="p">);</span> <span class="n">cs</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">cs</span><span class="p">[:,</span><span class="mi">1</span><span class="p">];</span> <span class="n">cs</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">cs</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span>

<span class="n">f1</span><span class="p">,</span> <span class="n">f2</span> <span class="o">=</span> <span class="n">kcv</span><span class="o">.</span><span class="n">map3d</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">cs</span><span class="p">)</span>

<span class="n">f1</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span> <span class="c1"># returns matrix similar to cs</span>
<span class="n">f2</span><span class="p">(</span><span class="n">cs</span><span class="p">)</span> <span class="c1"># returns matrix similar to ws</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-k1lib.cli.kgv">
<span id="kgv-module"></span><h2>kgv module<a class="headerlink" href="#module-k1lib.cli.kgv" title="Permalink to this heading"></a></h2>
<p>This includes helper clis that make it quick to graph graphviz plots.</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kgv.sketch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kgv.</span></span><span class="sig-name descname"><span class="pre">sketch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#sketch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.sketch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.kgv.sketch.ctxIdx">
<span class="sig-name descname"><span class="pre">ctxIdx</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#k1lib.cli.kgv.sketch.ctxIdx" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kgv.sketch.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#sketch.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.sketch.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Similar to <a class="reference internal" href="#k1lib.cli.utils.sketch" title="k1lib.cli.utils.sketch"><code class="xref py py-class docutils literal notranslate"><span class="pre">sketch</span></code></a>, which makes it easier to plot multiple graphs quickly,
this makes it easier to plot node graphs a lot quicker than I have before. This cli
configures the graph in general, but doesn’t dive too much into the specifics. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;bc&quot;</span><span class="p">,</span> <span class="s2">&quot;ca&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">kgv</span><span class="o">.</span><span class="n">sketch</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="s2">&quot;sfdp&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">())</span>
<span class="p">[[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;bc&quot;</span><span class="p">,</span> <span class="s2">&quot;ca&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="p">(</span><span class="n">kgv</span><span class="o">.</span><span class="n">sketch</span><span class="p">()</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span> <span class="o">+</span> <span class="n">kgv</span><span class="o">.</span><span class="n">nodes</span><span class="p">())</span>
</pre></div>
</div>
<p>Most of the complexities are in <a class="reference internal" href="#k1lib.cli.kgv.edges" title="k1lib.cli.kgv.edges"><code class="xref py py-class docutils literal notranslate"><span class="pre">edges</span></code></a>, so check that class out for more comprehensive examples</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – keyword arguments passed into <a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#graphviz.Digraph" title="(in graphviz)"><code class="xref py py-class docutils literal notranslate"><span class="pre">graphviz.Digraph</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kgv.sketch.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#sketch.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.sketch.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kgv.nodes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kgv.</span></span><span class="sig-name descname"><span class="pre">nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">postProcessF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.nodes" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kgv.nodes.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">postProcessF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#nodes.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.nodes.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Plots out nodes of the graph.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>             <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span> <span class="c1"># creates nodes with labels &quot;a&quot; and &quot;b&quot;</span>
<span class="p">[[</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]]</span>           <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span> <span class="c1"># creates node  with label &quot;a&quot; in subgraph with title &quot;s&quot;</span>
<span class="p">[[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span> <span class="c1"># creates nodes with labels &quot;a&quot; and &quot;b&quot;, like the first line</span>
<span class="c1"># displays popup window when user hovers over the node &quot;a&quot;</span>
<span class="p">[[</span><span class="s2">&quot;&quot;</span><span class="p">,</span>  <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;popup&quot;</span><span class="p">:</span> <span class="s2">&quot;Some &lt;b&gt;html&lt;/b&gt; content&quot;</span><span class="p">}]]</span>                      <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span>
<span class="c1"># executes function when user clicks on the node &quot;a&quot;. &quot;nodeId&quot; is a string that looks like &quot;_idx_23&quot; that uniquely identifies the node. &quot;context&quot; is a dict with various objects from the generated js code. Mess around with it to see what&#39;s inside</span>
<span class="p">[[</span><span class="s2">&quot;&quot;</span><span class="p">,</span>  <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;onclick&quot;</span><span class="p">:</span> <span class="s2">&quot;(nodeId, context) =&gt; console.log(&#39;clicked&#39;)&quot;</span><span class="p">}]]</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span>
</pre></div>
</div>
<p>Each row can be multiple different lengths, but only these configurations are allowed:</p>
<ul class="simple">
<li><p>[name]</p></li>
<li><p>[group, name]</p></li>
<li><p>[group, name, kwargs]</p></li>
<li><p>[group, name, kwargs, extraData]</p></li>
</ul>
<p>See also: <a class="reference internal" href="#k1lib.cli.kgv.edges" title="k1lib.cli.kgv.edges"><code class="xref py py-class docutils literal notranslate"><span class="pre">edges</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>postProcessF</strong> – optional function that will be executed over the whole table (N, 4)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kgv.nodes.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_it</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">``5-column</span> <span class="pre">input``</span></span></span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#nodes.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.nodes.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kgv.edges">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kgv.</span></span><span class="sig-name descname"><span class="pre">edges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">postProcessF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#edges"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.edges" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.kgv.edges.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Plots</span> <span class="pre">out</span> <span class="pre">edges</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">graph'</span></em><a class="headerlink" href="#k1lib.cli.kgv.edges.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kgv.edges.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">postProcessF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#edges.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.edges.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Plots out edges of the graph.
Example 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;bc&quot;</span><span class="p">,</span> <span class="s2">&quot;ca&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span>
</pre></div>
</div>
<p>Result:</p>
<img alt="../_images/kgv_edges_1.png" src="../_images/kgv_edges_1.png" />
<p>If you need to customize the graph on initialization, then you can use <a class="reference internal" href="#k1lib.cli.kgv.sketch" title="k1lib.cli.kgv.sketch"><code class="xref py py-class docutils literal notranslate"><span class="pre">sketch</span></code></a> to
capture related operations (like <a class="reference internal" href="#k1lib.cli.kgv.edges" title="k1lib.cli.kgv.edges"><code class="xref py py-class docutils literal notranslate"><span class="pre">edges</span></code></a>), and inject your params in <a class="reference internal" href="#k1lib.cli.kgv.sketch" title="k1lib.cli.kgv.sketch"><code class="xref py py-class docutils literal notranslate"><span class="pre">sketch</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;bc&quot;</span><span class="p">,</span> <span class="s2">&quot;ca&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">kgv</span><span class="o">.</span><span class="n">sketch</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="s2">&quot;sfdp&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">())</span>
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;3%&quot;</span><span class="p">}],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}],</span> <span class="s2">&quot;ac&quot;</span><span class="p">,</span> <span class="s2">&quot;cb&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span>
</pre></div>
</div>
<p>Result:</p>
<img alt="../_images/kgv_edges_2.png" src="../_images/kgv_edges_2.png" />
<p>Example 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s2">&quot;group1&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;group1&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;3%&quot;</span><span class="p">}],</span>
 <span class="s2">&quot;ec&quot;</span><span class="p">,</span>
 <span class="p">[</span><span class="s2">&quot;group1&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}],</span>
 <span class="p">[</span><span class="s2">&quot;group1&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;group1&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span>
 <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;group2&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">}]</span>
<span class="p">]</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span>
</pre></div>
</div>
<p>Result:</p>
<img alt="../_images/kgv_edges_3.png" src="../_images/kgv_edges_3.png" />
<p>So the idea is, each row describes a single edge on the graph. Each row
can be multiple different lengths, but only these configurations are allowed:</p>
<ul class="simple">
<li><p>[name1, name2]</p></li>
<li><p>[name1, name2, kwargs]</p></li>
<li><p>[group1, name1, group2, name2]</p></li>
<li><p>[group1, name1, group2, name2, kwargs]</p></li>
<li><p>[group1, name1, group2, name2, kwargs, extraData]</p></li>
</ul>
<p>So if you don’t need the complexity and just want to plot something out, you
can just use the one at the top, but if you do want fancy features, then you
can add those in the kwargs. The “extraData” is not used to graph at all, but
is there so that you can put any random data there, potentially to be used to
tweak the edges downstream by the postProcessF function. If there are multiple
post process functions defined by multiple calls to <a class="reference internal" href="#k1lib.cli.kgv.edges" title="k1lib.cli.kgv.edges"><code class="xref py py-class docutils literal notranslate"><span class="pre">edges</span></code></a>, then they
will all be executed one after another, serially.</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.kgv.nodes" title="k1lib.cli.kgv.nodes"><code class="xref py py-class docutils literal notranslate"><span class="pre">nodes</span></code></a>, <a class="reference internal" href="#k1lib.cli.kgv.sketch" title="k1lib.cli.kgv.sketch"><code class="xref py py-class docutils literal notranslate"><span class="pre">sketch</span></code></a>.</p>
<p>Check out a gallery of more examples at <a class="reference external" href="https://mlexps.com/kapi/10-graphviz/">kapi/10-graphviz</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>postProcessF</strong> – optional function that will be executed over the whole table (N, 6)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kgv.edges.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_it</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">``5-column</span> <span class="pre">input``</span></span></span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#edges.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.edges.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kgv.Graph">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kgv.</span></span><span class="sig-name descname"><span class="pre">Graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name2Idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx2Popup</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx2Onclick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sketchKw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#Graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.Graph" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kgv.Graph.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name2Idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx2Popup</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx2Onclick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sketchKw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#Graph.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.Graph.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Wrapper around a <a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#graphviz.Graph" title="(in graphviz)"><code class="xref py py-class docutils literal notranslate"><span class="pre">graphviz.Graph</span></code></a> or <a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#graphviz.Digraph" title="(in graphviz)"><code class="xref py py-class docutils literal notranslate"><span class="pre">graphviz.Digraph</span></code></a>. Internal graph
object is available at <code class="docutils literal notranslate"><span class="pre">self.g</span></code>. Not instantiated by end user, instead, this is
returned by <a class="reference internal" href="#k1lib.cli.kgv.sketch" title="k1lib.cli.kgv.sketch"><code class="xref py py-class docutils literal notranslate"><span class="pre">sketch</span></code></a>.</p>
<p>This class’s whole purpose is to implement a popup window for the nodes that require it. It
analyzes the svg output of graphviz and compiles it to a form that is slightly interactive.
This is the feedstock for more complex Graphs</p>
<p>Also, “nodes” and “edges” contain all necessary information to reconstruct everything else like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span>
<span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">edges</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">nodes</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">kgv</span><span class="o">.</span><span class="n">sketch</span><span class="p">()</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span> <span class="o">+</span> <span class="n">kgv</span><span class="o">.</span><span class="n">nodes</span><span class="p">())</span> <span class="c1"># regenerated graph</span>
</pre></div>
</div>
<p>You can do some extra filtering by adding a post process function to <a class="reference internal" href="#k1lib.cli.kgv.edges" title="k1lib.cli.kgv.edges"><code class="xref py py-class docutils literal notranslate"><span class="pre">edges</span></code></a> and <a class="reference internal" href="#k1lib.cli.kgv.nodes" title="k1lib.cli.kgv.nodes"><code class="xref py py-class docutils literal notranslate"><span class="pre">nodes</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name2Idx</strong> – looks like {‘’: {‘c’: ‘_idx_233’, ‘e’: ‘_idx_234’}}</p></li>
<li><p><strong>idx2Popup</strong> – looks like {‘_idx_113’: ‘some content’}. The content can be any complex html</p></li>
<li><p><strong>idx2Onclick</strong> – looks like {‘_idx_113’: ‘(nodeId) =&gt; console.log(“something”)’}. The string will be eval-ed when the node is clicked</p></li>
<li><p><strong>nodes</strong> – List[nodes, postProcessF], (cut(0) | joinSt()) is a bunch of edges, can be piped into nodes() again</p></li>
<li><p><strong>edges</strong> – List[edges, postProcessF], (cut(0) | joinSt()) is a bunch of edges, can be piped into edges() again</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kgv.Graph.focus">
<span class="sig-name descname"><span class="pre">focus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.kgv.InteractiveGraph" title="k1lib.cli.kgv.InteractiveGraph"><span class="pre">InteractiveGraph</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#Graph.focus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.Graph.focus" title="Permalink to this definition"></a></dt>
<dd><p>Creates a complex interactive graph that users can click on a node to zoom in to its
surroundings. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;bc&quot;</span><span class="p">,</span> <span class="s2">&quot;ca&quot;</span><span class="p">,</span> <span class="s2">&quot;cd&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">kgv</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span>
<span class="n">g</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – name of the node, like “a” or “subgraph1ue002b”. The second example is just the subgraph
name and node name joined together by “ue002”</p></li>
<li><p><strong>depth</strong> – all nodes &lt;= depth away from the selected node will be displayed</p></li>
<li><p><strong>nodeF</strong> – function to run on all nodes after filtering out-of-focus nodes</p></li>
<li><p><strong>edgeF</strong> – function to run on all edges after filtering out-of-focus nodes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kgv.InteractiveGraph">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kgv.</span></span><span class="sig-name descname"><span class="pre">InteractiveGraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sketchKw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edgeF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kgv.html#InteractiveGraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kgv.InteractiveGraph" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

</section>
<section id="module-k1lib.cli.kjs">
<span id="kjs-module"></span><h2>kjs module<a class="headerlink" href="#module-k1lib.cli.kjs" title="Permalink to this heading"></a></h2>
<p>This is for support for transpilation of clis to JS</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kjs.JsFunc">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kjs.</span></span><span class="sig-name descname"><span class="pre">JsFunc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fIdx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_async</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kjs.html#JsFunc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kjs.JsFunc" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kjs.JsFunc.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">fIdx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_async</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kjs.html#JsFunc.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kjs.JsFunc.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Represents a generated function from <a class="reference internal" href="#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a> .
More docs are available at that class.</p>
<p>This is not supposed to be instantiated by the end user. Please
use <a class="reference internal" href="#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a> instead. It’s here for documentation purposes only</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kjs.JsFunc.interface">
<span class="sig-name descname"><span class="pre">interface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'html'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debounce</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.03</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kjs.html#JsFunc.interface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kjs.JsFunc.interface" title="Permalink to this definition"></a></dt>
<dd><p>Creates an interface.</p>
<p>Different output modes:</p>
<ul class="simple">
<li><p>html: expected the js function to return html and will display it as-is</p></li>
<li><p>pre: wraps the function result inside a “pre” tag, which makes html honor white spaces and whatnot</p></li>
<li><p>json: json formats the function result in a compact way on 1 line</p></li>
<li><p>jsone: “json expanded”, same as above, but in an expanded way on multiple lines</p></li>
<li><p>table: expects function result to be a table, then displays the table nicely</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> – see above</p></li>
<li><p><strong>debounce</strong> – if specified, will wait for that many seconds until the user hasn’t modified the input UIs.
If function is not async (meaning it should executes quite fast), then this param will be ignored</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kjs.toJsFunc">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kjs.</span></span><span class="sig-name descname"><span class="pre">toJsFunc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kjs.html#toJsFunc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kjs.toJsFunc" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kjs.toJsFunc.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kjs.html#toJsFunc.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kjs.toJsFunc.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Capture cli operations and transpiles all of them to JS, to quickly
build functionalities in JS. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># creates an instance of class JsFunc that contains the transpiled js code</span>
<span class="n">jsf</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">(</span><span class="s2">&quot;term&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="n">kjs</span><span class="o">.</span><span class="n">v</span><span class="p">(</span><span class="s2">&quot;term&quot;</span><span class="p">))</span> <span class="o">&amp;</span> <span class="n">head</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
<span class="c1"># displays a search interface to jupyter notebook</span>
<span class="n">jsf</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>So a little more background on how this works. With clis, it can “capture” other
clis to the right of it if it desires. So, <code class="docutils literal notranslate"><span class="pre">toJsFunc</span></code> will capture the 2 <a href="#id1"><span class="problematic" id="id2">``</span></a>head``s
and transpile them to js. So Python data never really gets passed through those later
heads. Read more about this at <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a> and on the main
cli page at <a class="reference external" href="https://k1lib.com/latest/cli/index.html">https://k1lib.com/latest/cli/index.html</a></p>
<p>The arguments passed in, namely “term” here, specifies what arguments should the JS
function have. Then you can reference those JS arguments downstream inside any cli,
like <code class="docutils literal notranslate"><span class="pre">head(kjs.v(&quot;term&quot;))</span></code>.</p>
<p>The input <code class="docutils literal notranslate"><span class="pre">range(10)</span> <span class="pre">|</span> <span class="pre">deref()</span></code> actually gets converted into json and injected as
data directly within the function, so it’s pretty sweet. It does require the input
to be comprised of relatively simple data structures, with no arbitrary objects.</p>
<p>This is a relatively experimental/novel feature. The transpilation mechanism can
do a lot, but if it sees that something is too complicated, then it will raise an
error and complain, instead of failing silently.</p>
<p>When creating an interface, you can supply them with multiple different types of
UI:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">arg1</span> <span class="o">=</span> <span class="s2">&quot;extraText&quot;</span>
<span class="n">arg2</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;on&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span>
<span class="n">arg3</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;someNum&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="n">arg4</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">arg5</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;character&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;reimu&quot;</span><span class="p">,</span> <span class="s2">&quot;marisa&quot;</span><span class="p">,</span> <span class="s2">&quot;cirno&quot;</span><span class="p">])</span>
<span class="n">jsF</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">arg3</span><span class="p">,</span> <span class="n">arg4</span><span class="p">,</span> <span class="n">arg5</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">head</span><span class="p">(</span><span class="s2">&quot;on*10&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="s2">&quot;[*x, character, someNum**2, len(extraText)*2]&quot;</span><span class="p">))</span>
<span class="n">jsF</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Result</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_986_1709898278_7_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'><div>extraText</div><div><input type='text' value='' placeholder='extraText' id='_jsD_270_1709898278_219' style='padding: 4px 4px'></div><div>on</div><div><input type='checkbox' checked id='_jsD_270_1709898278_220' style='padding: 4px 4px'></div><div>someNum</div><div><input type='number' value='1' placeholder='someNum' id='_jsD_270_1709898278_221' style='padding: 4px 4px'></div><div>n</div><div><div style='display: flex; flex-direction: row; align-items: center'><input type='range' id='_jsD_270_1709898278_222' min='0' max='10' value='5' step='2' /><span id='_jsD_270_1709898278_222_preview' style='margin-left: 8px'></span></div></div><div>character</div><div><select id='_jsD_270_1709898278_223'><option value='0' selected>reimu</option><option value='1' >marisa</option><option value='2' >cirno</option></select></div></div>
<pre id="_jsF_986_1709898278_7_error" style="color: red"></pre>
<div id="_jsF_986_1709898278_7_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_986_1709898278_7_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_986_1709898278_7_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_270_1709898278_233 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99];
async function _jsF_986_1709898278_6(extraText, on, someNum, n, character) {
    _jsF_986_1709898278_2 = (_jsD_270_1709898278_226) => _jsD_270_1709898278_226.head(n, false)
    _jsF_986_1709898278_3 = (_jsD_270_1709898278_228) => _jsD_270_1709898278_228.head(on*10, false)
    _jsF_986_1709898278_1 = (_jsD_270_1709898278_225) => [_jsF_986_1709898278_2(_jsD_270_1709898278_225), _jsF_986_1709898278_3(_jsD_270_1709898278_225)];
    
    _jsF_986_1709898278_5 = (x) => {
        return [...x, character, Math.pow(someNum, 2), (extraText.length*2)];
    }
    _jsF_986_1709898278_0 = (_jsD_270_1709898278_224) => { return _jsF_986_1709898278_5(_jsF_986_1709898278_1(_jsD_270_1709898278_224)); };
    return _jsF_986_1709898278_0(_jsD_270_1709898278_233);
}
        window._jsF_986_1709898278_6 = _jsF_986_1709898278_6;
        _jsF_986_1709898278_7_error = document.querySelector("#_jsF_986_1709898278_7_error");
        _jsF_986_1709898278_7_resultDiv = document.querySelector("#_jsF_986_1709898278_7_result");
        _jsF_986_1709898278_7_loadingDiv = document.querySelector("#_jsF_986_1709898278_7_loading");
        const runningCoreHandle = [null];
        const _jsF_986_1709898278_7_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_986_1709898278_7_error.innerHTML = "";
                _jsF_986_1709898278_7_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_986_1709898278_6(document.querySelector('#_jsD_270_1709898278_219').value, document.querySelector('#_jsD_270_1709898278_220').checked, parseInt(document.querySelector('#_jsD_270_1709898278_221').value || 0), parseInt(document.querySelector('#_jsD_270_1709898278_222').value), ["reimu", "marisa", "cirno"][document.querySelector('#_jsD_270_1709898278_223').value]);
                if (!handle.cancel) {
                    _jsF_986_1709898278_7_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_986_1709898278_7_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_986_1709898278_7_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_986_1709898278_7_reload_timeout = null;
        const _jsF_986_1709898278_7_reload = async (e) => {
            


document.querySelector('#_jsD_270_1709898278_222_preview').innerHTML = parseInt(document.querySelector('#_jsD_270_1709898278_222').value);

            if (0 <= 0) return _jsF_986_1709898278_7_reload_core();
            else {
                clearTimeout(_jsF_986_1709898278_7_reload_timeout);
                _jsF_986_1709898278_7_reload_timeout = setTimeout(_jsF_986_1709898278_7_reload_core, 0)
            }
        }
        document.querySelector('#_jsD_270_1709898278_219').oninput = _jsF_986_1709898278_7_reload;document.querySelector('#_jsD_270_1709898278_220').onclick = _jsF_986_1709898278_7_reload;document.querySelector('#_jsD_270_1709898278_221').oninput = _jsF_986_1709898278_7_reload;document.querySelector('#_jsD_270_1709898278_222').oninput = _jsF_986_1709898278_7_reload;document.querySelector('#_jsD_270_1709898278_223').oninput = _jsF_986_1709898278_7_reload;
        
        _jsF_986_1709898278_7_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_986_1709898278_7_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_986_1709898278_7_loadF();
        } catch (e) {}
    })();
</script></div></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kjs.toJsFunc.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.kjs.JsFunc" title="k1lib.cli.kjs.JsFunc"><span class="pre">JsFunc</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/kjs.html#toJsFunc.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kjs.toJsFunc.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.ktree">
<span id="ktree-module"></span><h2>ktree module<a class="headerlink" href="#module-k1lib.cli.ktree" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.ktree.create">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.create" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.create.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#create.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.create.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Creates a tree structure from a flat table.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flat</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">]]</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
</pre></div>
</div>
<p>That will return this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]</span>
</pre></div>
</div>
<p>Each element in the array is represented by a 5-tuple: <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">children,</span> <span class="pre">ends</span> <span class="pre">here?,</span> <span class="pre">depth,</span> <span class="pre">value)</span></code>:
- name: name of this element
- children: a list of elements with similar structure to this element
- ends here?: whether there is a row in the flat table that exists for this</p>
<blockquote>
<div><p>particular element. Most has it, like “a/b/2” and “a/b/3”, but some don’t,
like “a/c”, so “ends here?” of “c” is 0.</p>
</div></blockquote>
<ul class="simple">
<li><p>depth: depth of this element inside the tree</p></li>
<li><p>value: value associated with this element, explained more below</p></li>
</ul>
<p>In some datasets, you’re not just interested in the tree structure, but you also want to manipulate some data
structures associated with the element in the tree. You can specify how much value at the end you want to
capture by using the param <code class="docutils literal notranslate"><span class="pre">.n</span></code>. It’s a little hard to explain with words, so here’s an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flat1</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;$0&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;$1&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;$2&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;$3&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;$4&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="s2">&quot;$5&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;$6&quot;</span><span class="p">]]</span>
<span class="n">flat1</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>That will return this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;$2&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;$3&#39;</span><span class="p">]</span>
    <span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;$1&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;$4&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;$5&#39;</span><span class="p">]</span>
    <span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;$6&#39;</span><span class="p">]</span>
<span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;$0&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>This looks pretty much identical to the previous result, but with the None values replaced with
the last column of the flattened tree. You can specify the number of columns to take from the
end of the flattened tree. So this is possible:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flat2</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="o">*</span><span class="s2">&quot;$0&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="o">*</span><span class="s2">&quot;$1&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="o">*</span><span class="s2">&quot;$2&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="o">*</span><span class="s2">&quot;$3&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="o">*</span><span class="s2">&quot;$4&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="o">*</span><span class="s2">&quot;$5&quot;</span><span class="p">],</span>
         <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="o">*</span><span class="s2">&quot;$6&quot;</span><span class="p">]]</span>
<span class="n">flat2</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>That will return this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">)],</span>
        <span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">)]</span>
    <span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">)],</span>
        <span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">)]</span>
    <span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">)]</span>
<span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">)]]</span>
</pre></div>
</div>
<p>It’ll just bunch up the values into a tuple.</p>
<p>About performance, this implementation isn’t the best. If the depth is not too crazy (say, &lt;3)
then a throughput of 442k rows/s can be achieved. But if the depth is big (say ~20),
then it can be as slow as 6k rows/s.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Internally, this makes use of the special character “ue000”, configurable
at <code class="docutils literal notranslate"><span class="pre">settings.cli.ktree.tok</span></code> to create the tree. This is in Unicode’s private
use area, so it shouldn’t appear anywhere in normal text. However, if your
application uses this character, it’s best to change it to something else</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.create.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#create.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.create.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.ktree.apply">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.apply" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.apply.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#apply.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.apply.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Transforms the tree recursively.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="p">,</span><span class="n">ch</span><span class="p">,(</span><span class="n">s</span> <span class="o">|</span> <span class="p">(</span><span class="n">tryout</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">int</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="n">ch</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">())])</span>
</pre></div>
</div>
<p>That returns this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
  <span class="p">[[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">3</span><span class="p">]],</span> <span class="mi">5</span><span class="p">],</span>
   <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">5</span><span class="p">]],</span> <span class="mi">9</span><span class="p">],</span>
   <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">0</span><span class="p">]],</span>
  <span class="mi">14</span><span class="p">]]</span>
</pre></div>
</div>
<p>Extracting the final result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="c1"># returns 14</span>
</pre></div>
</div>
<p>Here, I’m trying to add up all elements that can be converted into an
integer, but do that at every node in the tree. The <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">|</span> <span class="pre">(tryout(0)</span> <span class="pre">|</span> <span class="pre">aS(int))</span></code>
part is trying to convert it into an integer, returning 0 if it can’t do it.
Then, the <code class="docutils literal notranslate"><span class="pre">ch</span> <span class="pre">|</span> <span class="pre">cut(2)</span> <span class="pre">|</span> <span class="pre">toSum()</span></code> tries to add up the result of all children
underneath it. The results naturally trickle upwards and you get the result “14”
at the top level, at which point it’s trivial to extract.</p>
<p>If you’re using a lot of cli tools inside the lambda function and the performance
is terrible, you can try to initialize the cli tools outside the lambda, and then
just use it inside, to eliminate cli initialization cost, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getVal</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span> <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
<span class="n">sumF</span> <span class="o">=</span> <span class="n">cut</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">()</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">d</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">getVal</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="n">sumF</span><span class="p">(</span><span class="n">ch</span><span class="p">)])</span>
</pre></div>
</div>
<p>This should give you enough performance for your purpose, but if you want even more
perf, don’t use cli tools inside the lambda at all.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.apply.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#apply.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.apply.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.ktree.filt">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">filt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#filt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.filt" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.filt.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#filt.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.filt.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Filters out elements that don’t pass a certain predicate.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;a&#39;, [[&#39;b&#39;, [], 1, 1], [&#39;c&#39;, [], 0, 1], [&#39;d&#39;, [], 1, 1]], 0, 0]]</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">filt</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Essentially, this filters out any elements that are of depth 2 or more.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.filt.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#filt.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.filt.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.ktree.select">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#select"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.select" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.select.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#select.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.select.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Selects for a single element at a particular depth.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;a&#39;, [[&#39;b&#39;, [[&#39;2&#39;, [], 1, 2], [&#39;3&#39;, [], 1, 2]], 1, 1]], 0, 0]]. It selects for &quot;/*/b&quot;</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># returns [[&#39;a&#39;, [[&#39;b&#39;, [], 1, 1], [&#39;c&#39;, [], 0, 1], [&#39;d&#39;, [], 1, 1]], 0, 0]]. It selects for &quot;/*/*/b&quot;, which does not exist. But it still returns all elements in depth 1, as depth 1 is not selected for</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># returns [[&#39;a&#39;, [[&#39;b&#39;, [[&#39;2&#39;, [], 1, 2], [&#39;3&#39;, [], 1, 2]], 1, 1]], 0, 0]]. It selects for &quot;/a/b&quot;</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># returns []. It selects for &quot;/c/b&quot;, which does not exist</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>term</strong> – term to select</p></li>
<li><p><strong>depth</strong> – depth at which to select term</p></li>
<li><p><strong>exact</strong> – if True, select for term exactly, else select for elements that contains term</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.select.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#select.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.select.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.ktree.flatten">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">flatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">joinF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#flatten"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.flatten" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.flatten.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">joinF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#flatten.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.flatten.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Flattens the tree.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;/a&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;/a/b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;/a/b/2&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;/a/b/3&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;/a/c&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;/a/c/4&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;/a/c/5&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;/a/d&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>joinF</strong> – a function that takes in 2 parameters: prefix (like “/a/b”) and element
name (like “2”), to form a new prefix (“/a/b/2”). Defaulted to <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">p,s:</span> <span class="pre">f&quot;{p}/{s}&quot;</span></code></p></li>
<li><p><strong>delim</strong> – if use the default joinF, this specifies the delimiter to use</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.flatten.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#flatten.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.flatten.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.ktree.pretty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">pretty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#pretty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.pretty" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.pretty.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#pretty.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.pretty.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts tree into a string iterator, indented
with the correct level of depth. See also: <a class="reference internal" href="#k1lib.cli.ktree.display" title="k1lib.cli.ktree.display"><code class="xref py py-class docutils literal notranslate"><span class="pre">display</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>depth</strong> – whether to display the depth at the start of each line or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.pretty.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#pretty.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.pretty.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.ktree.display">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">display</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#display"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.display" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.display.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#display.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.display.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Displays the tree.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="c1"># equivalent to the above</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">pretty</span><span class="p">()</span> <span class="o">|</span> <span class="n">stdout</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> – line limit. Put “None” to display all</p></li>
<li><p><strong>depth</strong> – whether to display the depth at the start of each line or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.ktree.display.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#display.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.display.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.ktree.search">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.search" title="Permalink to this definition"></a></dt>
<dd><p>Searches for a specific term in the name of all elements.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;a&#39;, [[&#39;b&#39;, [[&#39;2&#39;, [], 1, 2]], 1, 1]], 0, 0]]</span>
<span class="n">flat</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>term</strong> – term to search for</p></li>
<li><p><strong>exact</strong> – if True, searches for that exact term, else searches
for the term inside the string</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.ktree.walk">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.ktree.</span></span><span class="sig-name descname"><span class="pre">walk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/ktree.html#walk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.ktree.walk" title="Permalink to this definition"></a></dt>
<dd><p>Walks the file system and generates a tree of all files and folders.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;/home/ubuntu&quot;</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">walk</span><span class="p">()</span> <span class="c1"># returns a tree</span>
<span class="n">ktree</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s2">&quot;/home/ubundu&quot;</span><span class="p">)</span>    <span class="c1"># same as above</span>
<span class="n">ktree</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>               <span class="c1"># can also do relative paths</span>
<span class="s2">&quot;/home/ubuntu&quot;</span> <span class="o">|</span> <span class="n">ktree</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">f</span><span class="o">=~</span><span class="n">grep</span><span class="p">(</span><span class="s2">&quot;git&quot;</span><span class="p">))</span> <span class="c1"># returns a tree with no hidden git-related files</span>
<span class="n">ktree</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s2">&quot;/home/ubuntu&quot;</span><span class="p">,</span> <span class="o">~</span><span class="n">grep</span><span class="p">(</span><span class="s2">&quot;git&quot;</span><span class="p">))</span>    <span class="c1"># same as above</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> – folder name</p></li>
<li><p><strong>f</strong> – optional function if you want to filter out paths (Iterator[str])</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-k1lib.cli.kxml">
<span id="kxml-module"></span><h2>kxml module<a class="headerlink" href="#module-k1lib.cli.kxml" title="Permalink to this heading"></a></h2>
<p>All tools related to xml file format. Expected to use behind the “kxml”
module name, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;abc.xml&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kxml.node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kxml.</span></span><span class="sig-name descname"><span class="pre">node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><span class="pre">list</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.node" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Turns lines into a single
node. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;html&gt;</span>
<span class="s2">    &lt;head&gt;</span>
<span class="s2">        &lt;style&gt;&lt;/style&gt;</span>
<span class="s2">    &lt;/head&gt;</span>
<span class="s2">    &lt;body&gt;</span>
<span class="s2">        &lt;div&gt;&lt;/div&gt;</span>
<span class="s2">    &lt;/body&gt;</span>
<span class="s2">&lt;/html&gt;&quot;&quot;&quot;</span>
<span class="c1"># returns root node</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span>
<span class="c1"># same thing as above, demonstrating you can pipe in list of strings</span>
<span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.node.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="(in Python v3.12)"><span class="pre">Element</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#node.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.node.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kxml.maxDepth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kxml.</span></span><span class="sig-name descname"><span class="pre">maxDepth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#maxDepth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.maxDepth" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.maxDepth.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#maxDepth.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.maxDepth.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Filters out too deep nodes.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns root node, but prunes children deeper than the specified depth</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">maxDepth</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>depth</strong> – max depth to include in</p></li>
<li><p><strong>copy</strong> – whether to limit the nodes itself, or limit a copy</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.maxDepth.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="(in Python v3.12)"><span class="pre">Element</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="(in Python v3.12)"><span class="pre">Element</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#maxDepth.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.maxDepth.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kxml.tags">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kxml.</span></span><span class="sig-name descname"><span class="pre">tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">tags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#tags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.tags" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.tags.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">tags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#tags.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.tags.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Finds all tags that have a particular name.. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;EXPERIMENT_PACKAGE_SET&gt;</span>
<span class="s2">  &lt;EXPERIMENT_PACKAGE&gt;</span>
<span class="s2">    &lt;EXPERIMENT_PACKAGE/&gt;</span>
<span class="s2">    &lt;Pool/&gt;</span>
<span class="s2">    &lt;RUN_SET/&gt;</span>
<span class="s2">  &lt;/EXPERIMENT_PACKAGE&gt;</span>
<span class="s2">  &lt;EXPERIMENT_PACKAGE&gt;</span>
<span class="s2">    &lt;Pool/&gt;</span>
<span class="s2">    &lt;RUN_SET/&gt;</span>
<span class="s2">  &lt;/EXPERIMENT_PACKAGE&gt;</span>
<span class="s2">&lt;/EXPERIMENT_PACKAGE_SET&gt;&quot;&quot;&quot;</span>

<span class="c1"># returns a list of &quot;Pool&quot; tags (with 2 elements) that are 2 levels deep</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">tags</span><span class="p">(</span><span class="s2">&quot;Pool&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span>
<span class="c1"># returns list with 2 tags</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">tags</span><span class="p">(</span><span class="s2">&quot;EXPERIMENT_PACKAGE&quot;</span><span class="p">)</span>
<span class="c1"># returns list with 3 tags</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">tags</span><span class="p">(</span><span class="s2">&quot;EXPERIMENT_PACKAGE&quot;</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nested</strong> – whether to search for “div” tag inside of another “div” tag</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.tags.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="(in Python v3.12)"><span class="pre">Element</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="(in Python v3.12)"><span class="pre">Element</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#tags.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.tags.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kxml.pretty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kxml.</span></span><span class="sig-name descname"><span class="pre">pretty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#pretty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.pretty" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.pretty.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#pretty.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.pretty.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Converts the element into a list of xml strings, and make them pretty.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints out the element</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">pretty</span><span class="p">()</span> <span class="o">|</span> <span class="n">stdout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.pretty.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="(in Python v3.12)"><span class="pre">Element</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#pretty.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.pretty.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.kxml.display">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.kxml.</span></span><span class="sig-name descname"><span class="pre">display</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#display"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.display" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.display.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#display.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.display.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Convenience method for getting head, make it pretty and print it out.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints out the element</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">node</span><span class="p">()</span> <span class="o">|</span> <span class="n">kxml</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>depth</strong> – prune tags deeper than the specified depth. Put “None” to not prune at all</p></li>
<li><p><strong>lines</strong> – max number of lines to print out. Put “None” if you want to display everything</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.kxml.display.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="(in Python v3.12)"><span class="pre">Element</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/kxml.html#display.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.kxml.display.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.lsext">
<span id="lsext-module"></span><h2>lsext module<a class="headerlink" href="#module-k1lib.cli.lsext" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sql">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode=&lt;object</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sql"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sql" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sql.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode=&lt;object</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sql.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sql.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Creates a connection to a SQL database.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">sql</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span> <span class="c1"># creates a new sql object. Apparently, mysql and mysqldump on the command line bugs out if you put &quot;localhost&quot;. If you put localhost here, it should work fine, but `sql(...) | toBytes()` and other functions that use external programs can deny you access</span>
<span class="n">s</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>          <span class="c1"># refreshes connection any time you encounter strange bugs</span>

<span class="n">s</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span>                                                       <span class="c1"># returns List[sqldb], lists out all databases</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span>                                                  <span class="c1"># returns Iterator[str], dumps every databases. Yes, it&#39;s &quot;toBytes&quot;, but it has the feeling of serializing whatever the input is, so it&#39;s at least intuitive in that way</span>
<span class="s2">&quot;dump.sql&quot;</span> <span class="o">|</span> <span class="n">s</span>                                                 <span class="c1"># restores the database using the dump file</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;dump.sql&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">s</span>                                            <span class="c1"># restores the database using the dump file</span>
<span class="n">db1</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="s2">&quot;db1&quot;</span><span class="p">]</span>                                                 <span class="c1"># returns sqldb, gets database named &quot;db1&quot;</span>
<span class="n">db1</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span>                                                     <span class="c1"># returns List[sqltable], list out all tables within this database</span>
<span class="n">db1</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span>                                                <span class="c1"># returns Iterator[str], dumps the database</span>
<span class="n">users</span> <span class="o">=</span> <span class="n">db1</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">]</span>                                            <span class="c1"># gets table named &quot;user&quot;, short and simple</span>

<span class="n">db1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;select * from users&quot;</span><span class="p">)</span>                     <span class="c1"># queries the database using your custom query</span>
<span class="n">db1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;select * from users where user_id=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># queries with prepared statement</span>

<span class="n">users</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>                                               <span class="c1"># prints out the first 10 rows of the table and the table schema</span>
<span class="n">users</span><span class="o">.</span><span class="n">cols</span>                                                 <span class="c1"># returns table&#39;s columns as List[str]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>                                                 <span class="c1"># returns number of rows</span>
<span class="n">users</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>                                           <span class="c1"># can also do a custom query, just like with databases</span>
<span class="n">users</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>                                                   <span class="c1"># grabs user with id 1. Returns None if user doesn&#39;t exist</span>
<span class="n">users</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>                                                <span class="c1"># grabs users with id from 1 (inclusive) to 10 (exclusive)</span>
<span class="n">users</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">firstname</span> <span class="o">=</span> <span class="s2">&quot;Reimu&quot;</span>                               <span class="c1"># sets the first name of user with id 1 to &quot;Reimu&quot;</span>
<span class="n">users</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;firstname&quot;</span><span class="p">:</span> <span class="s2">&quot;Reimu&quot;</span><span class="p">,</span> <span class="s2">&quot;lastname&quot;</span><span class="p">:</span> <span class="s2">&quot;Hakurei&quot;</span><span class="p">}</span>   <span class="c1"># sets first name and last name of user with id 1</span>
<span class="n">users</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">firstname</span><span class="o">=</span><span class="s2">&quot;Yuyuko&quot;</span><span class="p">,</span> <span class="n">lastname</span><span class="o">=</span><span class="s2">&quot;Saigyouji&quot;</span><span class="p">)</span>     <span class="c1"># inserts a new row</span>
<span class="n">users</span><span class="o">.</span><span class="n">insertBulk</span><span class="p">(</span><span class="n">firstname</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Yuyuko&quot;</span><span class="p">,</span> <span class="s2">&quot;Marisa&quot;</span><span class="p">],</span> <span class="n">lastname</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Saigyouji&quot;</span><span class="p">,</span> <span class="s2">&quot;Kirisame&quot;</span><span class="p">])</span> <span class="c1"># inserts multiple rows at once</span>
<span class="n">users</span> <span class="o">|</span> <span class="n">toBytes</span><span class="p">()</span>                                          <span class="c1"># dumps this specific table, returns Iterator[str]</span>
<span class="n">users</span> <span class="o">|</span>  <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">display</span><span class="p">()</span>                                 <span class="c1"># reads entire table, gets first 10 rows and displays it out</span>
<span class="n">users</span> <span class="o">|</span> <span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span> <span class="o">|</span> <span class="n">display</span><span class="p">()</span>                     <span class="c1"># reads first 20 rows only, then displays the first 10 rows. Query sent is &quot;select * from user limit 20&quot;</span>
<span class="n">users</span> <span class="o">|</span> <span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;x == 4&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span> <span class="o">|</span> <span class="n">display</span><span class="p">()</span> <span class="c1"># grabs first 20 rows that has the 4th column equal to 4, then displays the first 10 rows. Query sent is &quot;select user_id, address, balance, age from user where age = 4&quot;, assuming the table only has those columns</span>
</pre></div>
</div>
<p>Philosophy for these methods is that they should be intuitive to look at and interact with, not for performance.
If performance is needed, just write raw queries or don’t use a database and use applyCl() instead.</p>
<p>If any of the params here are not specified, they will take on the values from
“settings.cred.sql”, which can be initialized from environment variables.
Execute and display/print “settings” in a new cell to see all of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> – host name, ip address, or file name (in case of sqlite)</p></li>
<li><p><strong>port</strong> – port at the host</p></li>
<li><p><strong>uesr</strong> – database user name. If not specified then fallback to environment variable <code class="docutils literal notranslate"><span class="pre">SQL_USER</span></code>, then <code class="docutils literal notranslate"><span class="pre">USER</span></code></p></li>
<li><p><strong>password</strong> – database password. If not specified then assume database doesn’t require one</p></li>
<li><p><strong>mode</strong> – currently supports 3 values: “my” (MySQL), “pg” (PostgreSQL) and “lite” (SQLite)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sql.refresh">
<span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sql.refresh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sql.refresh" title="Permalink to this definition"></a></dt>
<dd><p>Sometimes, the connection errors out for whatever reason, so this method is to
reestablish the connection. You don’t need to worry about this though, as on every query,
if it detects that the connection has dropped, it will automatically try to refresh</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sql.cursor">
<span class="sig-name descname"><span class="pre">cursor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sql.cursor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sql.cursor" title="Permalink to this definition"></a></dt>
<dd><p>Creates a new cursor, auto-refreshes if necessary</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sql.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sql.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sql.query" title="Permalink to this definition"></a></dt>
<dd><p>Executes a query. Returns the resulting table.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;insert into users (name, age) values (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="s2">&quot;Reimu&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sql.queryDesc">
<span class="sig-name descname"><span class="pre">queryDesc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sql.queryDesc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sql.queryDesc" title="Permalink to this definition"></a></dt>
<dd><p>Executes a query. Returns the resulting table and the description of the table (with column names and whatnot)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sql.queryMany">
<span class="sig-name descname"><span class="pre">queryMany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sql.queryMany"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sql.queryMany" title="Permalink to this definition"></a></dt>
<dd><p>Executes multiple queries at the same time.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">queryMany</span><span class="p">(</span><span class="s2">&quot;insert into users (name, age) values (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;Reimu&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Marisa&quot;</span><span class="p">,</span> <span class="mi">26</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sql.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sql.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sql.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqldb">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">sqldb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sql</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.cli.lsext.sql" title="k1lib.cli.lsext.sql"><span class="pre">sql</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqldb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqldb" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqldb.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sql</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.cli.lsext.sql" title="k1lib.cli.lsext.sql"><span class="pre">sql</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqldb.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqldb.__init__" title="Permalink to this definition"></a></dt>
<dd><p>A sql database representation. Not expected to be instatiated by you. See also: <a class="reference internal" href="#k1lib.cli.lsext.sql" title="k1lib.cli.lsext.sql"><code class="xref py py-class docutils literal notranslate"><span class="pre">sql</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqldb.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqldb.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqldb.query" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqldb.queryDesc">
<span class="sig-name descname"><span class="pre">queryDesc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqldb.queryDesc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqldb.queryDesc" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqldb.queryMany">
<span class="sig-name descname"><span class="pre">queryMany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqldb.queryMany"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqldb.queryMany" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqldb.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqldb.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqldb.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">sqltable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sql</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqldb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sql</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqldb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.__init__" title="Permalink to this definition"></a></dt>
<dd><p>A sql table representation. Not expected to be instantiated by you. See also: <a class="reference internal" href="#k1lib.cli.lsext.sql" title="k1lib.cli.lsext.sql"><code class="xref py py-class docutils literal notranslate"><span class="pre">sql</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.cols">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cols</span></span><a class="headerlink" href="#k1lib.cli.lsext.sqltable.cols" title="Permalink to this definition"></a></dt>
<dd><p>Get column names</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.insert" title="Permalink to this definition"></a></dt>
<dd><p>Inserts a row.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">firstname</span><span class="o">=</span><span class="s2">&quot;Yuyuko&quot;</span><span class="p">,</span> <span class="n">lastname</span><span class="o">=</span><span class="s2">&quot;Saigyouji&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.insertBulk">
<span class="sig-name descname"><span class="pre">insertBulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.insertBulk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.insertBulk" title="Permalink to this definition"></a></dt>
<dd><p>Inserts a row.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">table</span><span class="o">.</span><span class="n">insertBulk</span><span class="p">(</span><span class="n">firstname</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Yuyuko&quot;</span><span class="p">,</span> <span class="s2">&quot;Marisa&quot;</span><span class="p">],</span> <span class="n">lastname</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Saigyouji&quot;</span><span class="p">,</span> <span class="s2">&quot;Kirisame&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.info">
<span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.info" title="Permalink to this definition"></a></dt>
<dd><p>Preview table.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">table</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> – if True, returns a list of lines instead of printing them out</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.query" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.queryDesc">
<span class="sig-name descname"><span class="pre">queryDesc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.queryDesc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.queryDesc" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.queryMany">
<span class="sig-name descname"><span class="pre">queryMany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.queryMany"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.queryMany" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.select">
<span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.select"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.select" title="Permalink to this definition"></a></dt>
<dd><p>Pretty much identical to <a class="reference internal" href="#k1lib.cli.lsext.sqltable.query" title="k1lib.cli.lsext.sqltable.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></a>, but this postprocess the results
a little bit, and package them into <a class="reference internal" href="#k1lib.cli.lsext.sqlrow" title="k1lib.cli.lsext.sqlrow"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlrow</span></code></a> objects</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqltable.lookup">
<span class="sig-name descname"><span class="pre">lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqltable.lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqltable.lookup" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function to lookup 1 instance with the specified value.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">firstname</span><span class="o">=</span><span class="s2">&quot;Reimu&quot;</span><span class="p">)</span>
<span class="c1"># multiple columns work too</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">firstname</span><span class="o">=</span><span class="s2">&quot;Reimu&quot;</span><span class="p">,</span> <span class="n">lastname</span><span class="o">=</span><span class="s2">&quot;Hakurei&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.lsext.sqlrow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">sqlrow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sql</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqltable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#sqlrow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.sqlrow" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.lsext.minio">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">minio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">access_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secret_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.lsext.s3" title="k1lib.cli.lsext.s3"><span class="pre">s3</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#minio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.minio" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function that constructs a <a class="reference internal" href="#k1lib.cli.lsext.s3" title="k1lib.cli.lsext.s3"><code class="xref py py-class docutils literal notranslate"><span class="pre">s3</span></code></a> object but focused on minio.
If the params are not specified, then it takes on the values in the settings
“settings.cred.minio”. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">minio</span><span class="p">()</span> <span class="c1"># returns s3 instance</span>
<span class="n">s</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span>    <span class="c1"># list all buckets, all other normal operations</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> – looks like “<a class="reference external" href="http://localhost:9000">http://localhost:9000</a>”</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.lsext.s3">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">s3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#s3"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.s3" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.s3.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#s3.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.s3.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Represents an S3 client.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;s3&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>            <span class="c1"># put your credentials and details here</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">s3</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>                             <span class="c1"># creates an S3 manager</span>
<span class="n">db</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span>                                   <span class="c1"># lists all buckets accessible</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">db</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>                 <span class="c1"># grabs the first bucket, returns object of type s3bucket</span>
<span class="n">bucket</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="s2">&quot;bucket-name&quot;</span><span class="p">]</span>                  <span class="c1"># or you can instantiate the bucket directly</span>
<span class="n">bucket</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span>                               <span class="c1"># lists all objects within this bucket</span>
<span class="n">bucket</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span> <span class="o">|</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;\.so&quot;</span><span class="p">)</span>               <span class="c1"># grabs all .so files from the bucket</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">bucket</span> <span class="o">|</span> <span class="n">ls</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>                <span class="c1"># grabs the first object within this bucket, returns object of type s3obj</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">[</span><span class="s2">&quot;some_key&quot;</span><span class="p">]</span>                    <span class="c1"># or, grab a specific object</span>
<span class="n">obj</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">lastModified</span>         <span class="c1"># some fields directly accessible</span>

<span class="n">obj</span> <span class="o">=</span> <span class="s2">&quot;abc</span>
</pre></div>
</div>
<dl class="simple">
<dt>def” | bucket.upload(“somekey”) # uploads a file by piping the contents in, returns s3obj</dt><dd><p>obj = b”abc</p>
</dd>
</dl>
<p>def”| bucket.upload()          # same as above, but with an auto-generated key</p>
<p>This mostly offers interoperability with ls() and cat(), so that you can
write relatively intuitive code, but fundamentally provides no upsides</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client</strong> – boto3 client</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.lsext.s3bucket">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">s3bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#s3bucket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.s3bucket" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.s3bucket.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#s3bucket.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.s3bucket.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Represents an S3 bucket.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">s3</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">bucket</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="s2">&quot;bucket-name-here&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.lsext.s3" title="k1lib.cli.lsext.s3"><code class="xref py py-class docutils literal notranslate"><span class="pre">s3</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.s3bucket.upload">
<span class="sig-name descname"><span class="pre">upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#s3bucket.upload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.s3bucket.upload" title="Permalink to this definition"></a></dt>
<dd><p>Uploads some content to s3.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bucket</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">obj</span> <span class="o">=</span> <span class="s2">&quot;abc</span>
</pre></div>
</div>
<dl class="simple">
<dt>def”  | bucket.upload() # uploads some text</dt><dd><p>obj = b”abc</p>
</dd>
</dl>
<p>def” | bucket.upload() # uploads some bytes</p>
<p>This works with whatever you can pipe into <a class="reference internal" href="#k1lib.cli.output.file" title="k1lib.cli.output.file"><code class="xref py py-class docutils literal notranslate"><span class="pre">file</span></code></a>. After uploading,
you will receive a <a class="reference internal" href="#k1lib.cli.lsext.s3obj" title="k1lib.cli.lsext.s3obj"><code class="xref py py-class docutils literal notranslate"><span class="pre">s3obj</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – if not specified, will auto generate a key</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.lsext.s3obj">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">s3obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#s3obj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.s3obj" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.s3obj.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#s3obj.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.s3obj.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Represents an S3 object. Not intended to be instantiated directly.
See also: <a class="reference internal" href="#k1lib.cli.lsext.s3" title="k1lib.cli.lsext.s3"><code class="xref py py-class docutils literal notranslate"><span class="pre">s3</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.lsext.Redis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.lsext.</span></span><span class="sig-name descname"><span class="pre">Redis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#Redis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.Redis" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.lsext.Redis.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/lsext.html#Redis.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.lsext.Redis.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Connects to Redis server.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">Redis</span><span class="p">(</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="mi">6379</span><span class="p">)</span>
<span class="n">r</span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;some&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span> <span class="c1"># sets value</span>
<span class="n">r</span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">]</span>                                 <span class="c1"># reads value, returns python object</span>

<span class="n">key</span> <span class="o">=</span> <span class="n">r</span><span class="p">(</span><span class="s2">&quot;some message&quot;</span><span class="p">)</span>                  <span class="c1"># sets value with auto generated key, returns that key</span>
<span class="n">r</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>                                   <span class="c1"># reads that value, returns &quot;some message&quot;</span>
<span class="n">r</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>                               <span class="c1"># sets value with auto generated key, with expires amount, returns that key</span>
</pre></div>
</div>
<p>You can actually leave the constructors empty, as it will automatically pull the data from
“settings.cred.redis.host”, which pulls from the env variable “K1_REDIS_HOST”. So it can
be as short as this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">Redis</span><span class="p">()</span>
<span class="n">r</span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;some&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span> <span class="c1"># sets value</span>
</pre></div>
</div>
<p>Internally, all objects are pickled and unpickled, so you can transport pretty much
any Python object. Also, by default, each message will expire after 60s, You can
adjust this via “settings.cred.redis.expires” setting.</p>
<p>This is really only meant as a quick way for different servers to communicate
with each other. If your use case is different, don’t use this.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> – host name of the redis server</p></li>
<li><p><strong>port</strong> – port the redis server uses</p></li>
<li><p><strong>kwargs</strong> – extra kwargs sent to <a class="reference external" href="https://redis-py.readthedocs.io/en/stable/connections.html#redis.Redis" title="(in redis-py v99.99.99)"><code class="xref py py-class docutils literal notranslate"><span class="pre">redis.Redis</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.models">
<span id="models-module"></span><h2>models module<a class="headerlink" href="#module-k1lib.cli.models" title="Permalink to this heading"></a></h2>
<p>This is for advanced machine learning models or complex data structures and algorithms, presented in a digestible interface</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.models.embed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.models.</span></span><span class="sig-name descname"><span class="pre">embed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#embed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.embed" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.embed.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#embed.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.embed.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Gets an embedding vector for every sentence piped into this.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns (384,)</span>
<span class="s2">&quot;abc&quot;</span> <span class="o">|</span> <span class="n">embed</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (2, 384). Don&#39;t worry that this is less performant, as behind the scenes, it will automatically batch all lines together and pass through the model only once</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">embed</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
<p>There are several settings you can set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">embed</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;msmarco-distilbert-base-v4&quot;</span> <span class="c1"># specifies model used in this function</span>
<span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">cuda</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># tells the system to only use the CPU to run the models</span>
</pre></div>
</div>
<p>I’d suggest picking “all-MiniLM-L6-v2” for general purpose tasks, and “msmarco-distilbert-base-v4”
for document-lookup style applications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>norm</strong> – whether to normalize the output embeddings or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.embed.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#embed.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.embed.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.models.complete">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.models.</span></span><span class="sig-name descname"><span class="pre">complete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#complete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.complete" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.complete.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#complete.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.complete.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Uses a LLM to autocomplete something.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns &quot;4&quot;. In case you&#39;re living in a cage, these LLMs are not entirely math savants. They sure understand English though</span>
<span class="s2">&quot;What is 2 + 6?&quot;</span> <span class="o">|</span> <span class="n">complete</span><span class="p">()</span>
<span class="c1"># returns [&quot;4&quot;, &quot;4&quot;]</span>
<span class="p">[</span><span class="s2">&quot;What is 2 + 6?&quot;</span><span class="p">,</span> <span class="s2">&quot;What is 8 + 2?&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">complete</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Can change model type by doing <code class="docutils literal notranslate"><span class="pre">settings.cli.models.generic.model</span> <span class="pre">=</span> <span class="pre">&quot;google/flan-t5-xl&quot;</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prompt</strong> – if specified, will inject this bit of text after all of the inputs.
Can be something like “Please translate the above paragraph to German”</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.complete.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#complete.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.complete.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.models.kmeans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.models.</span></span><span class="sig-name descname"><span class="pre">kmeans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#kmeans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.kmeans" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.kmeans.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#kmeans.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.kmeans.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Do k-means clustering, returning the cluster centers.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">features</span><span class="p">,</span> <span class="n">true_labels</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">make_blobs</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">1_000</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">cluster_std</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">centers</span> <span class="o">=</span> <span class="n">features</span> <span class="o">|</span> <span class="n">kmeans</span><span class="p">();</span>
<span class="n">centers</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># likely return (5, 2)</span>

<span class="c1"># plotting things out</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">features</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">centers</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>  <span class="s2">&quot;.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/kmeans.png" src="../_images/kmeans.png" />
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k</strong> – if specified, will use this k value. Else tries to guess what the best value is</p></li>
<li><p><strong>mode</strong> – mode 0 (returns [cluster centers, labels]), mode 1 (returns cluster centers only), mode 2 (returns labels only)</p></li>
<li><p><strong>timeout</strong> – internally will try kmeans for up to this number of seconds only.
Will kill the job if it’s taking longer</p></li>
<li><p><strong>kwargs</strong> – keyword arguments will be passed into sklearn.cluster.KMeans directly.
Some interesting parameters include <code class="docutils literal notranslate"><span class="pre">init</span></code>, <code class="docutils literal notranslate"><span class="pre">n_init</span></code>, <code class="docutils literal notranslate"><span class="pre">max_iter</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.kmeans.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#kmeans.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.kmeans.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.models.tsne">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.models.</span></span><span class="sig-name descname"><span class="pre">tsne</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#tsne"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.tsne" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.tsne.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#tsne.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.tsne.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Transforms feature vectors of shape (N, F) down to (N, 2) for easy plotting.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">make_blobs</span>
<span class="n">features</span><span class="p">,</span> <span class="n">true_labels</span> <span class="o">=</span> <span class="n">make_blobs</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">1_000</span><span class="p">,</span> <span class="n">n_features</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">cluster_std</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="n">features</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>          <span class="c1"># returns (1000, 5)</span>
<span class="n">features</span> <span class="o">|</span> <span class="n">tsne</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span> <span class="c1"># returns (1000, 2)</span>
<span class="c1"># plotting things out that has nice colors and whatnot</span>
<span class="n">features</span> <span class="o">|</span> <span class="n">tsne</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">kmeans</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">xy</span><span class="p">,</span><span class="n">c</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="n">xy</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">))</span>
</pre></div>
</div>
<img alt="../_images/tsne.png" src="../_images/tsne.png" />
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – number of output components (aka size of feature vector)</p></li>
<li><p><strong>kwargs</strong> – other keyword arguments passed into <code class="docutils literal notranslate"><span class="pre">sklearn.manifold.TSNE</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.tsne.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#tsne.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.tsne.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.models.bloom">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.models.</span></span><span class="sig-name descname"><span class="pre">bloom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overflow</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#bloom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.bloom" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.bloom.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overflow</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#bloom.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.bloom.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Creates a bloom filter.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bf</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;raptor&quot;</span><span class="p">,</span> <span class="s2">&quot;skylake&quot;</span><span class="p">,</span> <span class="s2">&quot;merlin&quot;</span><span class="p">,</span> <span class="s2">&quot;twinscan nxt&quot;</span><span class="p">,</span> <span class="s2">&quot;sapphire rapids&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">bloom</span><span class="p">()</span>
<span class="s2">&quot;raptor&quot;</span>       <span class="ow">in</span> <span class="n">bf</span> <span class="c1"># returns True</span>
<span class="s2">&quot;twinscan nxt&quot;</span> <span class="ow">in</span> <span class="n">bf</span> <span class="c1"># returns True</span>
<span class="s2">&quot;twin&quot;</span>         <span class="ow">in</span> <span class="n">bf</span> <span class="c1"># most likely returns False, small chance returns True</span>
</pre></div>
</div>
<p>This also allows distributed computing quite easily:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bf</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">cat</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file-</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">bloom</span><span class="p">())</span> <span class="o">|</span> <span class="n">bloom</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
<p>This code assumes that you have 10 files filled with text with file names “file-1.txt” and
you want to check whether a string exists or not in all of those files. It is expected that</p>
<div class="admonition-scalable-bloom-filter admonition">
<p class="admonition-title">Scalable bloom filter</p>
<p>It’s possible to leave the filter’s capacity empty, which will create an initial filter
with capacity 1000. When that capacity is reached, it will expand the filter to a capacity
of 4000. Then 16000, and so on. This can be tweaked in the settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">bloom</span><span class="o">.</span><span class="n">scalable</span><span class="o">.</span><span class="n">capacity</span> <span class="o">=</span> <span class="mi">2000</span> <span class="c1"># sets filter&#39;s default initial capacity</span>
<span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">bloom</span><span class="o">.</span><span class="n">scalable</span><span class="o">.</span><span class="n">growth</span> <span class="o">=</span> <span class="mi">2</span>      <span class="c1"># sets filter&#39;s growth factor when it runs out of space</span>
</pre></div>
</div>
<p>Because fundamentally, bloom filters can’t grow, internally, this will create multiple bloom
filters with increasing capacity, and whenever you search for a term, it will have to search
through multiple filters to get the answer. So even though you can leave the capacity empty,
it will degrade performance a little bit, which might be undesirable.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – number of elements to be stored, aka filter’s capacity</p></li>
<li><p><strong>p</strong> – false positive probability (put 0.1 for 10% false positive, 0.01 for 1%)</p></li>
<li><p><strong>overflow</strong> – if True, allows append more elements than the capacity of the filter, else (default) don’t allow it</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.bloom.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#bloom.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.bloom.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.models.bloom.join">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/models.html#bloom.join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.models.bloom.join" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.modifier">
<span id="modifier-module"></span><h2>modifier module<a class="headerlink" href="#module-k1lib.cli.modifier" title="Permalink to this heading"></a></h2>
<p>This is for quick modifiers, think of them as changing formats, or modifying an
array in place</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">applyS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyS" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyS.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Applies</span> <span class="pre">a</span> <span class="pre">function</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">input</span> <span class="pre">in</span> <span class="pre">pipe</span> <span class="pre">style'</span></em><a class="headerlink" href="#k1lib.cli.modifier.applyS.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyS.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyS.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyS.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>, but much simpler, just operating on the entire input
object, essentially. The “S” stands for “single”. There’s
also an alias shorthand for this called <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 5</span>
<span class="mi">3</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>, you can also use this as a decorator like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@aS</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span><span class="n">n</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">2</span>
<span class="c1"># returns 5</span>
<span class="mi">3</span> <span class="o">|</span> <span class="n">f</span>
</pre></div>
</div>
<p>This also decorates the returned object so that it has same qualname, docstring
and whatnot.</p>
<div class="admonition-shorthands admonition">
<p class="admonition-title">Shorthands</p>
<p>Writing out “lambda x:” all the time is annoying, and there are ways
to quickly say <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">x+2</span></code> like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">+</span><span class="mi">2</span> <span class="c1"># returns 5</span>
<span class="mi">3</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="s2">&quot;x+2&quot;</span><span class="p">)</span> <span class="c1"># returns 5. Behind the scenes, it compiles and execute `lambda x: x+2`</span>
</pre></div>
</div>
<p>The first way is to use <a class="reference internal" href="#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">op</span></code></a>, that will absorb all operations done on it,
like “+”, and returns a function that essentially replays all the operations.</p>
<p>In the second way, you only have to pass in the string containing code that you want
done on the variable “x”. Then internally, it will compile to regular Python code.</p>
<p>In fact, you can pass in <code class="docutils literal notranslate"><span class="pre">op()</span></code> or just a string to any cli that accepts any kind
of function, like <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a> or <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="s2">&quot;x-2&quot;</span><span class="p">)</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;x%2&quot;</span><span class="p">)</span>   <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – the function to be executed</p></li>
<li><p><strong>kwargs</strong> – other keyword arguments to pass to the function, together with <code class="docutils literal notranslate"><span class="pre">args</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyS.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyS.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyS.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyS.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyS.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyS.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Configures it so that it expand the arguments out.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 5</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">a</span>
<span class="c1"># returns 10</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="c1"># returns 11</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.aS">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">aS</span></span><a class="headerlink" href="#k1lib.cli.modifier.aS" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.modifier.applyS" title="k1lib.cli.modifier.applyS"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyS</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.iterDelay">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">iterDelay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#iterDelay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.iterDelay" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.iterDelay.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#iterDelay.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.iterDelay.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Iterates through the array, but make sure that there’s a bit of a delay.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 2, 3, 4, 5, 6, 7, 8. 9]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">iterDelay</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>At first glance, it’s not obvious what’s going on. Internally, <a class="reference internal" href="#k1lib.cli.modifier.iterDelay" title="k1lib.cli.modifier.iterDelay"><code class="xref py py-class docutils literal notranslate"><span class="pre">iterDelay</span></code></a>
will fetch 5 items from the input iterator right away and stores them in an
internal deque (double-ended queue). Then on the 6th fetch, it will start yielding
elements from the deque, hence introducing a delay while iterating through the input.</p>
<p>I’d admit that this is pretty niche. I normally would not need such a cli when doing
normal analysis, but some clis internally need this, like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a> when it detects
that there’s an _all_opt() optimization. Another use case is that prefetch feature
of <a class="reference internal" href="#k1lib.cli.modifier.applyTh" title="k1lib.cli.modifier.applyTh"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyTh</span></code></a>, <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>, <a class="reference internal" href="#k1lib.cli.modifier.applyCl" title="k1lib.cli.modifier.applyCl"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyCl</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.iterDelay.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#iterDelay.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.iterDelay.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.apply">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.apply" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.apply.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Applies</span> <span class="pre">a</span> <span class="pre">function</span> <span class="pre">to</span> <span class="pre">all</span> <span class="pre">input</span> <span class="pre">elements'</span></em><a class="headerlink" href="#k1lib.cli.modifier.apply.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.apply.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#apply.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.apply.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Applies a function f to every element in the incoming list/iterator.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 4, 9, 16]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[3.0, 1.0, 1.0], [3.0, 1.0, 1.0]], running the function on the 0th column</span>
<span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, -1, 2, 3, -4], [2, -3, 4, 5, -6], [0, -1, 4, 9, -16]], running the function on the 1st (0-index btw) and 4th columns</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also use this as a decorator, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@apply</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
<span class="c1"># returns [0, 1, 4, 9, 16]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">f</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also add a cache, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calc</span><span class="p">(</span><span class="n">i</span><span class="p">):</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span> <span class="k">return</span> <span class="n">i</span><span class="o">**</span><span class="mi">2</span>
<span class="c1"># takes 2.5s</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">repeatFrom</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">calc</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># takes 5s</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">repeatFrom</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">calc</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>You can add custom keyword arguments into the function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
<span class="c1"># returns [15, 17, 19, 21, 23]</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Slight reminder that you can’t pass in extra positional args like in <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a>, just extra keyword arguments.</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a>, <a class="reference internal" href="#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a></p>
<div class="admonition-js-transpiler-notes admonition">
<p class="admonition-title">JS transpiler notes</p>
<p>So, because JS don’t have the concept of keyword arguments, <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> will have its values
extracted, then injected as positional arguments in the transpiled JS function.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> – if not None, then applies the function to that column or columns only</p></li>
<li><p><strong>cache</strong> – if specified, then caches this much number of values</p></li>
<li><p><strong>kwargs</strong> – extra keyword arguments to pass in the function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.apply.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#apply.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.apply.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.apply.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#apply.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.apply.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Same mechanism as in <a class="reference internal" href="#k1lib.cli.modifier.applyS" title="k1lib.cli.modifier.applyS"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyS</span></code></a>, it expands the
arguments out. Just for convenience really. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [10, 12, 14, 16, 18]</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">applyMp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utilization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newPoolEvery</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyMp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyMp" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Applies</span> <span class="pre">a</span> <span class="pre">function</span> <span class="pre">to</span> <span class="pre">all</span> <span class="pre">input</span> <span class="pre">elements</span> <span class="pre">across</span> <span class="pre">multiple</span> <span class="pre">processes'</span></em><a class="headerlink" href="#k1lib.cli.modifier.applyMp.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utilization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newPoolEvery</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyMp.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyMp.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>, but execute a function over the input iterator
in multiple processes. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [3, 2]</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;de&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [5, 6, 9]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">bias</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">bias</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># returns [[1, 2, 3], [1, 2, 3]], demonstrating outside vars work</span>
<span class="n">someList</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;de&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">someList</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Internally, this will continuously spawn new jobs up until 80% of all CPU
cores are utilized. On posix systems, the default multiprocessing start method is
<code class="docutils literal notranslate"><span class="pre">fork()</span></code>. This sort of means that all the variables in memory will be copied
over. On windows and macos, the default start method is <code class="docutils literal notranslate"><span class="pre">spawn</span></code>, meaning each
child process is a completely new interpreter, so you have to pass in all required
variables and reimport every dependencies. Read more at <a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods">https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods</a></p>
<p>If you don’t wish to schedule all jobs at once, you can specify a <code class="docutils literal notranslate"><span class="pre">prefetch</span></code>
amount, and it will only schedule that much jobs ahead of time. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>    <span class="o">|</span> <span class="n">head</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># 700ms</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># 300ms</span>

<span class="c1"># demonstrating there&#39;re no huge penalties even if we want all results at the same time</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>    <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># 900ms</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># 1000ms</span>
</pre></div>
</div>
<p>The first line will schedule all jobs at once, and thus will require more RAM and
compute power, even though we discard most of the results anyway (the
<a class="reference internal" href="#k1lib.cli.filt.head" title="k1lib.cli.filt.head"><code class="xref py py-class docutils literal notranslate"><span class="pre">head</span></code></a> cli). The second line only schedules 5 jobs ahead of
time, and thus will be extremely more efficient if you don’t need all results right
away.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember that every <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a> is also a
function, meaning that you can do stuff like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;ab&#39;, &#39;ac&#39;]]</span>
<span class="p">[[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;cd&quot;</span><span class="p">,</span> <span class="s2">&quot;ac&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="n">filt</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Also remember that the return result of <code class="docutils literal notranslate"><span class="pre">f</span></code> should be serializable, meaning it
should not be a generator. That’s why in the example above, there’s a <code class="docutils literal notranslate"><span class="pre">deref()</span></code>
inside f. You should also convert PyTorch tensors into Numpy arrays</p>
</div>
<p>Most of the time, you would probably want to specify <code class="docutils literal notranslate"><span class="pre">bs</span></code> to something bigger than 1
(may be 32 or sth like that). This will executes <code class="docutils literal notranslate"><span class="pre">f</span></code> multiple times in a single job,
instead of executing <code class="docutils literal notranslate"><span class="pre">f</span></code> only once per job. Should reduce overhead of process
creation dramatically.</p>
<p>If you encounter strange errors not seen on <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>, you can try to clear all
pools (using <a class="reference internal" href="#k1lib.cli.modifier.applyMp.clearPools" title="k1lib.cli.modifier.applyMp.clearPools"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clearPools()</span></code></a>), to terminate all child processes and thus free
resources. On earlier versions, you have to do this manually before exiting, but now
<a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a> is much more robust.</p>
<p>Also, you should not immediately assume that <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a> will always be faster
than <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>. Remember that <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a> will create new processes,
serialize and transfer data to them, execute it, then transfer data back. If your code
transfers a lot of data back and forth (compared to the amount of computation done), or
the child processes don’t have a lot of stuff to do before returning, it may very well
be a lot slower than <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>.</p>
<p>There’s a potential loophole here that can make your code faster. Because the main
process is forked (at least on linux), every variable is still there, even the big
ones. So, you can potentially do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bigData</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># 1B items in the list</span>
<span class="c1"># summing up all items together. No input data transfers (because it&#39;s forked instead)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">1_000_000_000</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">bigData</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">())</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">()</span>
</pre></div>
</div>
<p>In fact, I use this loophole all the time, and thus has made the function <a class="reference internal" href="#k1lib.cli.modifier.applyMp.shared" title="k1lib.cli.modifier.applyMp.shared"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shared()</span></code></a>,
so check it out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefetch</strong> – if not specified, schedules all jobs at the same time. If
specified, schedules jobs so that there’ll only be a specified amount of
jobs, and will only schedule more if results are actually being used.</p></li>
<li><p><strong>timeout</strong> – seconds to wait for job before raising an error</p></li>
<li><p><strong>utilization</strong> – how many percent cores are we running? 0 for no cores, 1 for
all the cores. Defaulted to 0.8</p></li>
<li><p><strong>bs</strong> – if specified, groups <code class="docutils literal notranslate"><span class="pre">bs</span></code> number of transforms into 1 job to be more
efficient.</p></li>
<li><p><strong>kwargs</strong> – extra arguments to be passed to the function. <code class="docutils literal notranslate"><span class="pre">args</span></code> not
included as there’re a couple of options you can pass for this cli.</p></li>
<li><p><strong>newPoolEvery</strong> – creates a new processing pool for every specific amount of input
fed. 0 for not refreshing any pools at all. Turn this on in case your process consumes
lots of memory and you have to kill them eventually to free up some memory</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyMp.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyMp.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp.cat">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyMp.cat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyMp.cat" title="Permalink to this definition"></a></dt>
<dd><p>Like <a class="reference internal" href="#k1lib.cli.modifier.applyCl.cat" title="k1lib.cli.modifier.applyCl.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">applyCl.cat()</span></code></a>, this will split a file up into multiple
sections, execute <code class="docutils literal notranslate"><span class="pre">f</span></code> over all sections and return the results.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fn</span> <span class="o">=</span> <span class="s2">&quot;~/repos/labs/k1lib/k1lib/cli/test/applyMp.cat&quot;</span>
<span class="s2">&quot;0123456789</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">*</span><span class="mi">100</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="c1"># returns [6, 6, 6, 7, 6, 6, 6, 7, 6, 6, 6, 7, 6, 6, 6, 8]</span>
<span class="n">applyMp</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">16</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – function to execute on an iterator of lines</p></li>
<li><p><strong>n</strong> – how many chunks should it split the file into. Defaulted to the number of cpu cores available</p></li>
<li><p><strong>rS</strong> – <a class="reference internal" href="#k1lib.cli.inp.refineSeek" title="k1lib.cli.inp.refineSeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">refineSeek</span></code></a> instance, if you need more fine-grained
control over section boundaries so as to not make everything corrupted</p></li>
<li><p><strong>kwargs</strong> – extra keyword arguments for <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp.shared">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyMp.shared"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyMp.shared" title="Permalink to this definition"></a></dt>
<dd><p>Execution model where the input iterator is dereferenced and shared across
all processes, bypassing serialization. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1_000_000_000</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mf">1.5</span> <span class="o">-</span> <span class="mi">2000</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># giant data structure</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">50_000_000</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="n">toSum</span><span class="p">())</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">()</span> <span class="c1"># has to serialize and deserialize lists of numbers, which wastes lots of cpu cycles and memory</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">applyMp</span><span class="o">.</span><span class="n">shared</span><span class="p">(</span><span class="n">toSum</span><span class="p">())</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">()</span> <span class="c1"># giant data structure is forked, no serialization happens, no memory even gets copied, much faster</span>
</pre></div>
</div>
<p>In the 2nd line, most of the time is spent on serializing the data and transferring
it to other processes, while in the 3rd line, most of the time is spent on calculating
the sum instead, as the giant data structure is forked, and Linux doesn’t copy it internally.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyMp.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyMp.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Expands the arguments out, just like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [20, 20, 18, 14, 8, 0, -10, -22, -36, -52]</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">applyMp</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">-</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp.clearPools">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clearPools</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyMp.clearPools"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyMp.clearPools" title="Permalink to this definition"></a></dt>
<dd><p>Terminate all existing pools. Do this before restarting/quitting the
script/notebook to make sure all resources (like GPU) are freed. <strong>Update</strong>:
you probably won’t have to call this manually anymore since version 0.9, but
if you run into problems, try doing this.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyMp.pools">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pools</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyMp.pools"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyMp.pools" title="Permalink to this definition"></a></dt>
<dd><p>Get set of all pools. Meant for debugging purposes only.</p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.parallel">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">parallel</span></span><a class="headerlink" href="#k1lib.cli.modifier.parallel" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">applyCl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rss</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_cpus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_gpus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Applies</span> <span class="pre">a</span> <span class="pre">function</span> <span class="pre">to</span> <span class="pre">all</span> <span class="pre">input</span> <span class="pre">elements</span> <span class="pre">across</span> <span class="pre">a</span> <span class="pre">Ray</span> <span class="pre">cluster'</span></em><a class="headerlink" href="#k1lib.cli.modifier.applyCl.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rss</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_cpus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_gpus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>, but execute a function over the input iterator
in multiple processes on multiple nodes inside of a cluster (hence “cl”). So, just a more
powerful version of <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>, assuming you have a cluster to run it on.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [3, 2]</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;de&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [5, 6, 9]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">bias</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">bias</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># returns [[1, 2, 3], [1, 2, 3]], demonstrating outside vars work</span>
<span class="n">someList</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;de&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">someList</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="n">nIds</span> <span class="o">=</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">nodeIds</span><span class="p">()</span>
<span class="c1"># returns [[&lt;nodeId1&gt;, 0], [&lt;nodeId2&gt;, 1], ...], demonstrating preserve mode</span>
<span class="p">[</span><span class="n">nIds</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># executes the function, but stores the result on remote nodes, instead of copying result to this node</span>
<span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">resolve</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [0, 1, 4, 9, 16]</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Summary of all mode of operations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data types:</span>
<span class="c1"># - 1:   literal value, just a normal Python object</span>
<span class="c1"># - or1: ray.ObjectRef object - Ray&#39;s reference to a remote object living somewhere</span>
<span class="c1"># - h1:  Handle        object - k1lib&#39;s reference to a remote object, obtained if `resolve` is set to False. Use `h.get()` to</span>
<span class="c1"># - n1:  node id, string</span>

<span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="n">or1</span><span class="o">/</span><span class="n">h1</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="n">or2</span><span class="o">/</span><span class="n">h2</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>                                              <span class="c1"># returns [1, 2, 3]. &quot;1/or1/h1&quot; means that the input can be a list of literals, ObjectRef, or Handle</span>
<span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="n">or1</span><span class="o">/</span><span class="n">h1</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="n">or2</span><span class="o">/</span><span class="n">h2</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">resolve</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>                               <span class="c1"># returns [h1, h2, h3]</span>
<span class="p">[[</span><span class="n">n1</span><span class="o">/</span><span class="n">h1</span><span class="p">,</span>   <span class="mi">1</span><span class="o">/</span><span class="n">or1</span><span class="o">/</span><span class="n">h3</span><span class="p">],</span> <span class="p">[</span><span class="n">n2</span><span class="o">/</span><span class="n">h2</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="n">or2</span><span class="o">/</span><span class="n">h4</span><span class="p">]]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>                <span class="c1"># returns [[n1/h1, 1],  [n2/h2, 2]], executed on n1/h1, h3 is copied over</span>
<span class="p">[[</span><span class="n">n1</span><span class="o">/</span><span class="n">h1</span><span class="p">,</span>   <span class="mi">1</span><span class="o">/</span><span class="n">or1</span><span class="o">/</span><span class="n">h3</span><span class="p">],</span> <span class="p">[</span><span class="n">n2</span><span class="o">/</span><span class="n">h2</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="n">or2</span><span class="o">/</span><span class="n">h4</span><span class="p">]]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">resolve</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># returns [[n1/h1, h3], [n2/h2, h4]]</span>

<span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="o">...</span><span class="p">)</span>                <span class="c1"># returns [[n1, 1],  [n2, 2]]</span>
<span class="kc">None</span>     <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="o">...</span><span class="p">)</span>                <span class="c1"># returns [[n1, 1],  [n2, 2], ...], executes once on all nodes</span>
<span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span> <span class="n">resolve</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># returns [[n1, h1], [n2, h2]]</span>
</pre></div>
</div>
<p>Internally, this uses the library Ray (<a class="reference external" href="https://www.ray.io">https://www.ray.io</a>) to do the heavy
lifting. So, <a class="reference internal" href="#k1lib.cli.modifier.applyCl" title="k1lib.cli.modifier.applyCl"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyCl</span></code></a> can be thought of as a thin wrapper around that
library, but still has the same consistent interface as <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a> and
<a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>. From all of my tests so far, it seems that <a class="reference internal" href="#k1lib.cli.modifier.applyCl" title="k1lib.cli.modifier.applyCl"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyCl</span></code></a>
works quite well and is quite robust, so if you have access to a cluster, use
it over <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>.</p>
<p>The library will connect to a Ray cluster automatically when you import
everything using <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">k1lib.imports</span> <span class="pre">import</span> <span class="pre">*</span></code>. It will execute
<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">ray;</span> <span class="pre">ray.init()</span></code>, which is quite simple. If you have ray installed,
but does not want this default behavior, you can do this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">k1lib</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">startup</span><span class="o">.</span><span class="n">init_ray</span> <span class="o">=</span> <span class="kc">False</span>
<span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>As with <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>, there are pitfalls and weird quirks to multiprocessing,
on 1 or multiple nodes, so check out the docs over there to be aware of them,
as those translates well to here.</p>
<p>There’re more extensive documentation on these notebooks: <a class="reference external" href="https://mlexps.com/other/27-multi-node/">27-multi-node</a>,
<a class="reference external" href="https://mlexps.com/other/30-applyCl-benchmarks/">30-applyCl-benchmarks</a>, if you want to kinda get the feel of this
tool more.</p>
<div class="admonition-time-sharing-the-cluster admonition">
<p class="admonition-title">Time sharing the cluster</p>
<p>Let’s say that the cluster is located in a company, and that multiple users want to
access it, then you might have to think about it a little more. Say the cluster has
60 cores, and someone has launched a long-running job: 2160 tasks, 10 minutes/task,
1 core/task, totalling 6 hours. If you want to launch another job that has 20 tasks,
requiring 10 cores, 1 second/task, totalling 2 seconds on an idle cluster.</p>
<p>All modern schedulers (Ray, Slurm, Spark, etc) can’t schedule your 20 tasks immediately.
It has to wait for some running tasks to finish to schedule your task. This means you
have to wait on average for 5-10 minutes before all of your tasks finish. This might be
fine if you’ve used Slurm a lot, but extremely not okay for me and my patience. The whole
point of a cluster is to get results immediately, within a few seconds. So here’s a
workaround:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># long running task, on notebook 1</span>
<span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">applyCl</span><span class="o">.</span><span class="n">cpuLimit</span> <span class="o">=</span> <span class="mi">40</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">2160</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="mi">60</span><span class="p">))</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span> <span class="c1"># long running task</span>

<span class="c1"># short running task, on notebook 2</span>
<span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span> <span class="c1"># short running task, should finishes almost immediately</span>
</pre></div>
</div>
<p>Essentially, there’s that setting that you can adjust. Like with Ray’s <code class="docutils literal notranslate"><span class="pre">num_cpus</span></code>,
this is merely a suggestion to my library to not schedule jobs past that cpu limit,
but you can circumvent it in some strange edge cases that I’m too lazy to implement.
Likewise, when you schedule a Ray task, you can specify that it will only take 1 cpu,
but you can end up forking it into 5 different processes, which can cause congestion
and memory thrashing. If Ray doesn’t do it right (possibly impossible to do so anyway)
then do I really have to?</p>
</div>
<div class="admonition-advanced-use-case admonition">
<p class="admonition-title">Advanced use case</p>
<p>Not really advanced, but just a bit difficult to understand/follow. Let’s say
that you want to scan through the home directory of all nodes, grab all files,
read them, and get the number of bytes they have. You can do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls ~&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">|</span> <span class="n">ungroup</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">b</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="n">cat</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">c</span> <span class="o">|</span> <span class="n">groupBy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">item</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Noted, this is relatively complex. Let’s see what A, B, C and D looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># A</span>
<span class="p">[[</span><span class="s1">&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Miniconda3-latest-Linux-x86_64.sh&#39;</span><span class="p">,</span> <span class="s1">&#39;mintupgrade-2023-04-01T232950.log&#39;</span><span class="p">]],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;5a&#39;</span><span class="p">,</span> <span class="s1">&#39;abc.jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;a.txt&#39;</span><span class="p">]]]</span>
<span class="c1"># B</span>
<span class="p">[[</span><span class="s1">&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;</span><span class="p">,</span> <span class="s1">&#39;Miniconda3-latest-Linux-x86_64.sh&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;</span><span class="p">,</span> <span class="s1">&#39;mintupgrade-2023-04-01T232950.log&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="s1">&#39;5a&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="s1">&#39;abc.jpg&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="s1">&#39;a.txt&#39;</span><span class="p">]]</span>
<span class="c1"># C</span>
<span class="p">[[</span><span class="s1">&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;</span><span class="p">,</span> <span class="mi">74403966</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;</span><span class="p">,</span> <span class="mi">1065252</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="mi">2601</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="mi">16341</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="mi">10177</span><span class="p">]]</span>
<span class="c1"># D</span>
<span class="p">[[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="mi">92185432</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;</span><span class="p">,</span> <span class="mi">75469218</span><span class="p">]]</span>
</pre></div>
</div>
<p>The steps we’re concerned with is A and C. In step A, we’re running 2 processes, 1 for each
node, to get all the file names in the home directory. In step C, we’re running 5 processes
total, 2 on the first node and 3 on the second node. For each process, it’s going to read as
bytes and count up those bytes. Finally in step D, the results are grouped together and the
sizes summed.</p>
<p>So yeah, it’s pretty nice that we did all of that in a relatively short amount of code.
The data is distributed too (reading multiple files from multiple nodes), so we’re truly
not bottlenecked by anything.</p>
</div>
<div class="admonition-context-object-handle admonition">
<p class="admonition-title">Context object handle</p>
<p>Let’s say you have these unresolved handles:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># creates a bunch of infinite random number generators, one on each node</span>
<span class="n">its</span> <span class="o">=</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">repeatF</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">15</span><span class="p">)),</span> <span class="n">resolve</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># gets the next value of all generators, can return [4, 4, 9, 2] for a 4-node cluster</span>
<span class="n">its</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># gets the next value of all generators, add 0 to the 1st generator, 1 to the 2nd generator, etc, then return the resulting output that might look like [3, 16, 10, 7]</span>
<span class="p">[</span><span class="n">its</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">next</span><span class="p">(</span><span class="n">ctxHandle</span><span class="p">)</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>So, the special thing about this is that variable <cite>ctxHandle</cite> on the last line. That is a
special variable that is injected on the way. Why all this complexity?</p>
<p>The whole idea with unresolved object handles is that you have a distributed complex
data structure that can’t be serialized and juggle around easily. That’s the <cite>its</cite> handles
in the example. Then, you might want to feed in some (simple, serializable) input X,
change the complex data structure in its own process, then return some (simple, serializable)
output Y. In the example, X is range(4), while Y is the resulting number array.</p>
</div>
<div class="admonition-cython admonition">
<p class="admonition-title">Cython</p>
<p>Even with running everything distributedly like this, you might run into speed issues.
Then, you’ll essentially have 2 options. First is to write (pleasant) Cython code, or
second is to write (unpleasant) C/C++ Python extensions. If you were to choose the C/C++
option, then here’s the flow:</p>
<ul class="simple">
<li><p>Develop Python C extension, export everything as a shared library (a single .so file)</p></li>
<li><p>Execute <code class="docutils literal notranslate"><span class="pre">applyCl.installSo(&quot;library.so&quot;)</span></code> to install the library to all nodes</p></li>
<li><p>Use functions provided by your library normally, like <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">yourlibrary;</span> <span class="pre">range(10)</span> <span class="pre">|</span> <span class="pre">applyCl(yourlibrary.afunction)</span> <span class="pre">|</span> <span class="pre">deref()</span></code></p></li>
</ul>
<p>But applyCl can deal with cython functions directly in your notebook. Here’s the flow:</p>
<ul class="simple">
<li><p>Annotate a code cell with the magic “%%cython”, write Cython code as usual</p></li>
<li><p>Just use that function normally</p></li>
</ul>
<p>Let’s see an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------- code cell 1 ----------</span>
<span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>      <span class="c1"># cython ipython extension is automatically loaded</span>
<span class="c1"># ---------- code cell 2 ----------</span>
<span class="o">%%</span><span class="n">cython</span>
<span class="kn">from</span> <span class="nn">k1lib.cli</span> <span class="kn">import</span> <span class="n">ls</span>         <span class="c1"># demonstrating that you can use all of the existing tools and libraries as usual</span>
<span class="n">cdef</span> <span class="n">g</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span> <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> 123&quot;</span> <span class="c1"># demonstrating that you can refactor out to other functions</span>
<span class="k">def</span> <span class="nf">f</span> <span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span> <span class="k">return</span> <span class="p">[</span><span class="n">g</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">ls</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)]</span>
<span class="c1"># ---------- code cell 3 ----------</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>You only have to install Cython on the current node and not the other nodes. Also note
that currently, this only supports you passing in Cython-compiled functions directly into
<code class="docutils literal notranslate"><span class="pre">applyCl()</span></code> or <code class="docutils literal notranslate"><span class="pre">applyCl.aS()</span></code>. You can’t pass a normal Python function that uses a
Cython function like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------- code cell 1 ----------</span>
<span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c1"># ---------- code cell 2 ----------</span>
<span class="o">%%</span><span class="n">cython</span>
<span class="kn">from</span> <span class="nn">k1lib.cli</span> <span class="kn">import</span> <span class="n">ls</span>          <span class="c1"># note: have to reimport here because all the symbols inside this code block is independent from the rest of the notebook</span>
<span class="n">cpdef</span> <span class="n">g</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span> <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> 123&quot;</span>
<span class="c1"># ---------- code cell 3 ----------</span>
<span class="k">def</span> <span class="nf">f</span> <span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span> <span class="k">return</span> <span class="p">[</span><span class="n">g</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">ls</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># this throws an import error, as the compiled code won&#39;t be installed on the remote nodes</span>
</pre></div>
</div>
<p>This behavior can potentially be fixed in the future, but I’m lazy and it’s not a hard
thing to follow the rules. The dynamic library will be installed in the working directory.
You can delete them after a coding session to free up some space, but they’re likely to be
tiny, so you don’t really have to worry about it.</p>
<p>Also, like everything else in parallel programming, please benchmark absolutely everything
because it might even be slower using Cython if internally you’re allocating space for
large data structures constantly, compared to cli tool’s lazy execution model. For operations
that work on giant files, I actually find it very difficult to gain any appreciable speedups
using Cython, as cli tools are already pretty optimized, so best task for this is probably
long-running, complex mathematical modelling, and not generic text manipulation.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Just like with any other parallel processing model, there are some quirks that
can happen behind the scenes that aren’t quite what you expected, as this is
incredibly tricky. Dig into Ray’s serialization page (<a class="reference external" href="https://docs.ray.io/en/latest/ray-core/objects/serialization.html">https://docs.ray.io/en/latest/ray-core/objects/serialization.html</a>)
or their whitepapers (<a class="reference external" href="https://docs.ray.io/en/latest/ray-contribute/whitepaper.html">https://docs.ray.io/en/latest/ray-contribute/whitepaper.html</a>)
to get a feel for how it all works underneath. The notable quirks that you might need to think about is:</p>
<ul class="simple">
<li><p>A lot of the internal code assumes that you’re on a Unix system, preferably Linux,
so it might not work on other platforms like Windows. But honestly, screw Windows.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefetch</strong> – if not specified, schedules all jobs at the same time. If
specified, schedules jobs so that there’ll only be a specified amount of
jobs, and will only schedule more if results are actually being used.</p></li>
<li><p><strong>timeout</strong> – seconds to wait for job before raising an error</p></li>
<li><p><strong>bs</strong> – if specified, groups <code class="docutils literal notranslate"><span class="pre">bs</span></code> number of transforms into 1 job to be more
efficient.</p></li>
<li><p><strong>rss</strong> – resources required for the task. Can be {“custom_resource1”: 2} or “custom_resource1” as a shortcut</p></li>
<li><p><strong>pre</strong> – “preserve”, same convention as <a class="reference internal" href="#k1lib.cli.modifier.applyCl.aS" title="k1lib.cli.modifier.applyCl.aS"><code class="xref py py-meth docutils literal notranslate"><span class="pre">applyCl.aS()</span></code></a>. If True, then allow passing
through node ids as the first column to shedule jobs on those specific nodes only</p></li>
<li><p><strong>num_cpus</strong> – how many cpu does each task take?</p></li>
<li><p><strong>memory</strong> – how much memory to give to the task in bytes?</p></li>
<li><p><strong>resolve</strong> – whether to resolve the outputs or not. Set this to False to not move
memory to the requesting node and cache the big data structure on the remote node</p></li>
<li><p><strong>kwargs</strong> – extra arguments to be passed to the function. <code class="docutils literal notranslate"><span class="pre">args</span></code> not
included as there’re a couple of options you can pass for this cli.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.installSo">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">installSo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.installSo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.installSo" title="Permalink to this definition"></a></dt>
<dd><p>Installs dynamic library (.so file) to all nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> – file name of the shared library</p></li>
<li><p><strong>force</strong> – force reinstall even if the library is already on the remote node</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Expands the arguments out, just like <a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [20, 20, 18, 14, 8, 0, -10, -22, -36, -52]</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">applyCl</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">-</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.nodeIds">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nodeIds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">includeSelf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.nodeIds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.nodeIds" title="Permalink to this definition"></a></dt>
<dd><p>Returns a list of all node ids in the current cluster.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applyCl</span><span class="o">.</span><span class="n">nodeIds</span><span class="p">()</span> <span class="c1"># returns something like [&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;, &#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;]</span>
</pre></div>
</div>
<p>If you want to get nodes’ metadata, then just use ray’s builtin function <code class="docutils literal notranslate"><span class="pre">ray.nodes()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>includeSelf</strong> – whether to include node id of the current process or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.nodeId">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nodeId</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.nodeId"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.nodeId" title="Permalink to this definition"></a></dt>
<dd><p>Returns current node id</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.meta">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">meta</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><span class="pre">object</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.meta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.meta" title="Permalink to this definition"></a></dt>
<dd><p>Grabs the metadata object for the current node</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.cpu">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cpu</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.cpu"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.cpu" title="Permalink to this definition"></a></dt>
<dd><p>Grabs the number of cpus available on this node</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.aS">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.aS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.aS" title="Permalink to this definition"></a></dt>
<dd><p>Executes function f once for all node ids that are piped in.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;1051da...&#39;, [&#39;Desktop&#39;, &#39;Downloads&#39;]], [&#39;7bb387...&#39;, [&#39;Pictures&#39;, &#39;Music&#39;]]]</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">nodeIds</span><span class="p">()</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls ~&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># same as above, demonstrating passing in a list of nodeIds</span>
<span class="p">[</span><span class="s2">&quot;1051da...&quot;</span><span class="p">,</span> <span class="s2">&quot;7bb387...&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls ~&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># same as above, demonstrating passing in &quot;None&quot; for all nodeIds in the cluster</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls ~&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If you want to execute f for all nodes, you can pass in None instead.</p>
<p>As a reminder, this kinda follows the same logic as the popular cli <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a>, where
f is executed once, hence the name “apply Single”. Here, the meaning of “single” is
different. It just means execute once for each node ids. If you want to quickly execute
a function on a single node, without all the fuss, there’s this short form that you can follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;Desktop&#39;, &#39;Downloads&#39;], demonstrating that you can also pass in a single node id</span>
<span class="s2">&quot;1051da...&quot;</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;ls ~&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – main function to execute in each node. Not supposed to accept any arguments</p></li>
<li><p><strong>kwargs</strong> – keyword arguments for the main <a class="reference internal" href="#k1lib.cli.modifier.applyCl" title="k1lib.cli.modifier.applyCl"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyCl</span></code></a> function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.cmd">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sudo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeIds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.cmd" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function to execute shell command on all nodes.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applyCl</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;mkdir -p /some/folder&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>It returns [[nodeid1, output1], [nodeid2, output2]]. If you need more flexibility,
fall back to <a class="reference internal" href="#k1lib.cli.modifier.applyCl.aS" title="k1lib.cli.modifier.applyCl.aS"><code class="xref py py-meth docutils literal notranslate"><span class="pre">applyCl.aS()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> – shell command to execute</p></li>
<li><p><strong>sudo</strong> – if True, will execute the command with sudo privileges. Will ask for password
and then cache it internally for 5 minutes</p></li>
<li><p><strong>kwargs</strong> – keyword arguments to pass to <a class="reference internal" href="#k1lib.cli.modifier.applyCl" title="k1lib.cli.modifier.applyCl"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyCl</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.lookup">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lookup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.lookup" title="Permalink to this definition"></a></dt>
<dd><p>Tries to lookup a particular file to see on which node it’s at.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[nodeId, &quot;something.txt&quot;], [nodeId, &quot;abc.jpg&quot;]]</span>
<span class="p">[</span><span class="s2">&quot;something.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;abc.jpg&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">lookup</span><span class="p">()</span>
<span class="c1"># returns [nodeId, &quot;something.txt&quot;]</span>
<span class="s2">&quot;something.txt&quot;</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">lookup</span><span class="p">()</span>
</pre></div>
</div>
<p>Files that don’t exist won’t be included in the result, and files that
exist on multiple nodes will be returned multiple times. The output format
is such that I can pipe it into applyCl(…, pre=True) and have it execute
some function that I want. This is pretty much just a convenience function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.replicateFile">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">replicateFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeIds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.replicateFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.replicateFile" title="Permalink to this definition"></a></dt>
<dd><p>Replicates a specific file in the current node to all the other nodes.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applyCl</span><span class="o">.</span><span class="n">replicateFile</span><span class="p">(</span><span class="s2">&quot;~/cron.log&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Internally, this will read chunks of 100kB of the specified file and dump it
incrementally to all other nodes, which has implications on performance. To
increase or decrease it, check out <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-class docutils literal notranslate"><span class="pre">cat</span></code></a>. This also means
you can replicate arbitrarily large files around as long as you have the disk
space for it, while ram size doesn’t really matter</p>
<p>Please note that this operation is not symmetric. Unlike <a class="reference internal" href="#k1lib.cli.modifier.applyCl.balanceFile" title="k1lib.cli.modifier.applyCl.balanceFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">balanceFile()</span></code></a> and
<a class="reference internal" href="#k1lib.cli.modifier.applyCl.balanceFolder" title="k1lib.cli.modifier.applyCl.balanceFolder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">balanceFolder()</span></code></a>, in which they can be invoke on any node and it’ll roughly
do the same thing (rebalances everything out), this operation can do totally
different things depending on which node you run it on. Let’s say the file exists
on nodes A and B, but not on nodes C and D. If you run this function on either
node A or B, it will replicate the file to C and D. However, if you run this
function on node C or D, it will instead throw an error since the file doesn’t
exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fn</strong> – file name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.balanceFile">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">balanceFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">nAs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nBs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100000000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.balanceFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.balanceFile" title="Permalink to this definition"></a></dt>
<dd><p>Splits a specified file in node nAs and dumps other parts
to nodes nBs. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applyCl</span><span class="o">.</span><span class="n">balanceFile</span><span class="p">(</span><span class="s2">&quot;~/cron.log&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will split the big files up into multiple segments (1 for each node). Then
for each segment, it will read through it chunk by chunk into memory, and then
deposits it into the respective nodes. Finally, it truncates the original files
down to its segment boundary.</p>
<p>The main goal of this is so that you can analyze a single big (say 200GB) file
quickly. If that file is on a single node, then it will take forever, even with
<a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>. So splitting things up on multiple nodes will make analyzing
it a lot faster.</p>
<p>There’s also the function <a class="reference internal" href="#k1lib.cli.modifier.applyCl.balanceFolder" title="k1lib.cli.modifier.applyCl.balanceFolder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">balanceFolder()</span></code></a>, which has the opposite problem of
having lots of small (say 100MB) files. So it will try to move files around (keeping
them intact in the meantime) to different nodes so that the folder size ratio is
roughly proportional to the cpu count.</p>
<p>The exact split rule depends on the number of CPUs of each node. Best to see an
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Command</span><span class="p">:</span>         <span class="n">applyCl</span><span class="o">.</span><span class="n">balanceFile</span><span class="p">(</span><span class="s2">&quot;~/cron.log&quot;</span><span class="p">)</span>
<span class="n">Verbose</span> <span class="n">command</span><span class="p">:</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">balanceFile</span><span class="p">(</span><span class="s2">&quot;~/cron.log&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">])</span>
<span class="o">-----------</span> <span class="n">Before</span> <span class="o">-----------</span>
<span class="n">Node</span><span class="p">:</span>      <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span> <span class="mi">5</span>
<span class="n">Cpu</span><span class="p">:</span>       <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span> <span class="mi">8</span>
<span class="n">Size</span> <span class="p">(</span><span class="n">GB</span><span class="p">):</span> <span class="mi">52</span> <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span> <span class="mi">0</span>
<span class="o">-----------</span> <span class="n">After</span>  <span class="o">-----------</span>
<span class="n">Node</span><span class="p">:</span>      <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span> <span class="mi">5</span>
<span class="n">Cpu</span><span class="p">:</span>       <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span> <span class="mi">8</span>
<span class="n">Size</span> <span class="p">(</span><span class="n">GB</span><span class="p">):</span> <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span> <span class="mi">8</span>
</pre></div>
</div>
<p>This also works if you have files on existing nodes already, and are upgrading the
cluster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Command</span><span class="p">:</span>         <span class="n">applyCl</span><span class="o">.</span><span class="n">balanceFile</span><span class="p">(</span><span class="s2">&quot;~/cron.log&quot;</span><span class="p">)</span>
<span class="n">Verbose</span> <span class="n">command</span><span class="p">:</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">balanceFile</span><span class="p">(</span><span class="s2">&quot;~/cron.log&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">])</span>
<span class="o">-----------</span> <span class="n">Before</span> <span class="o">-----------</span>
<span class="n">Node</span><span class="p">:</span>      <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="n">Cpu</span><span class="p">:</span>       <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span>  <span class="mi">8</span>
<span class="n">Size</span> <span class="p">(</span><span class="n">GB</span><span class="p">):</span> <span class="mi">26</span> <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">26</span> <span class="mi">0</span>
<span class="o">-----------</span> <span class="n">After</span>  <span class="o">-----------</span>
<span class="n">Node</span><span class="p">:</span>      <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="n">Cpu</span><span class="p">:</span>       <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span>  <span class="mi">8</span>
<span class="n">Size</span> <span class="p">(</span><span class="n">GB</span><span class="p">):</span> <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span>  <span class="mi">8</span>
</pre></div>
</div>
<p>If you want to move files out of a node when decommissioning them, you can do
something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Command</span><span class="p">:</span>         <span class="n">applyCl</span><span class="o">.</span><span class="n">decommission</span><span class="p">(</span><span class="s2">&quot;~/cron.log&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">])</span>
<span class="n">Verbose</span> <span class="n">command</span><span class="p">:</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">balanceFile</span><span class="p">(</span><span class="s2">&quot;~/cron.log&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">])</span>
<span class="o">-----------</span> <span class="n">Before</span> <span class="o">-----------</span>
<span class="n">Node</span><span class="p">:</span>      <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span> <span class="mi">5</span>
<span class="n">Cpu</span><span class="p">:</span>       <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span> <span class="mi">8</span>
<span class="n">Size</span> <span class="p">(</span><span class="n">GB</span><span class="p">):</span> <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span> <span class="mi">8</span>
<span class="o">-----------</span> <span class="n">After</span>  <span class="o">-----------</span>
<span class="n">Node</span><span class="p">:</span>      <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span> <span class="mi">5</span>
<span class="n">Cpu</span><span class="p">:</span>       <span class="mi">8</span>  <span class="mi">12</span> <span class="mi">16</span> <span class="mi">8</span> <span class="mi">8</span>
<span class="n">Size</span> <span class="p">(</span><span class="n">GB</span><span class="p">):</span> <span class="mi">15</span> <span class="mi">22</span> <span class="mi">0</span>  <span class="mi">0</span> <span class="mi">15</span>
</pre></div>
</div>
<p>Remember that the node ids “1”, etc. is for illustrative purposes only. You should get
real node ids from <a class="reference internal" href="#k1lib.cli.modifier.applyCl.nodeIds" title="k1lib.cli.modifier.applyCl.nodeIds"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nodeIds()</span></code></a>.</p>
<p>Why is the file size proportional to the number of cores on each node? Well, if
you have more cores, you should be able to process more, so as to make everything
balanced, right?</p>
<p>Again, this means that you can split arbitrarily large files as long as you have
the disk space for it, ram size is not a concern. How does this perform? Not
the best in the world if you don’t have a lot of nodes. With sata 3 ssds, 750MB/s
ethernet, I got transfer speeds of roughly 100MB/s. This should increase as you
have more nodes based on the code structure, but I haven’t tested it yet. Can
it be faster? Definitely. Am I willing to spend time optimizing it? No.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> – file name</p></li>
<li><p><strong>nAs</strong> – node ids that currently stores the file. If not specified, try to detect
what nodes the file exists in</p></li>
<li><p><strong>nBs</strong> – node ids that will store the file after balancing everything out. If not
specified, will take all available nodes</p></li>
<li><p><strong>rS</strong> – <a class="reference internal" href="#k1lib.cli.inp.refineSeek" title="k1lib.cli.inp.refineSeek"><code class="xref py py-class docutils literal notranslate"><span class="pre">refineSeek</span></code></a> instance, if you need more fine-grained
control over section boundaries so as to not make everything corrupted</p></li>
<li><p><strong>chunkSize</strong> – see <a class="reference internal" href="#k1lib.cli.modifier.applyCl.balanceFolder" title="k1lib.cli.modifier.applyCl.balanceFolder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">balanceFolder()</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.decommissionFile">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">decommissionFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nAs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100000000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.decommissionFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.decommissionFile" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function for <a class="reference internal" href="#k1lib.cli.modifier.applyCl.balanceFile" title="k1lib.cli.modifier.applyCl.balanceFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">balanceFile()</span></code></a>. See docs over there.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.cat">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeIds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiplier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">includeId</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolve</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.cat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.cat" title="Permalink to this definition"></a></dt>
<dd><p>Reads a file distributedly, does some operation on them, collects and
returns all of the data together. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fn</span> <span class="o">=</span> <span class="s2">&quot;~/repos/labs/k1lib/k1lib/cli/test/applyCl.cat.data&quot;</span>
<span class="p">(</span><span class="s2">&quot;0123456789&quot;</span><span class="o">*</span><span class="mi">5</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">splitFile</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">keepNodeIds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>That returns something like this (for a 2-node cluster, with 2 (node A) and 4 (node B) cpus respectively):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;</span><span class="p">,</span> <span class="mi">167</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&#39;</span><span class="p">,</span> <span class="mi">167</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="mi">166</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="mi">167</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="mi">166</span><span class="p">],</span>
 <span class="p">[</span><span class="s1">&#39;1051dafd2b0dac13561c46fe052f561400592f0723df2cd746a41068&#39;</span><span class="p">,</span> <span class="mi">167</span><span class="p">]]</span>
</pre></div>
</div>
<p>Here, we’re creating an initial file with 1000 lines. Then we’ll split it up into
2 fragments: 334 lines and 667 lines and store them on the respective nodes. Then,
on node A, we’ll split the file up into 2 parts, each with 167 lines. On node B,
we’ll split the file up into 4 parts, each with around 166 lines. Then we’ll
schedule 6 processes total, each dealing with 166 lines. After all of that, results
are collected together and returned.</p>
<p>If you want to distinguish between different processes inside f, for example you
want to write results into different files, you can do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dir_</span> <span class="o">=</span> <span class="s2">&quot;~/repos/labs/k1lib/k1lib/cli/test&quot;</span>
<span class="n">fn</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dir_</span><span class="si">}</span><span class="s2">/applyCl.cat.data&quot;</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;rm -r </span><span class="si">{</span><span class="n">dir_</span><span class="si">}</span><span class="s2">/applyCl&quot;</span><span class="p">)</span>    <span class="c1"># clear out old folders</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mkdir -p </span><span class="si">{</span><span class="n">dir_</span><span class="si">}</span><span class="s2">/applyCl&quot;</span><span class="p">)</span> <span class="c1"># creating folders</span>
<span class="c1"># do processing on fn distributedly, then dump results into multiple files</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">idx</span><span class="p">,</span> <span class="n">lines</span><span class="p">:</span> <span class="n">lines</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">dill</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dir_</span><span class="si">}</span><span class="s2">/applyCl/</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">.pth&quot;</span><span class="p">)),</span> <span class="n">includeId</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># reading all files and summing them together</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">ls</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dir_</span><span class="si">}</span><span class="s2">/applyCl&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">ungroup</span><span class="p">()</span> <span class="o">|</span> <span class="n">applyCl</span><span class="p">(</span><span class="n">cat</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">dill</span><span class="o">.</span><span class="n">loads</span><span class="p">),</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">cut</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition-simple-mode admonition">
<p class="admonition-title">Simple mode</p>
<p>There’s also another mode that’s activated whenever f is not specified that feels
more like vanilla <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-class docutils literal notranslate"><span class="pre">cat</span></code></a>. Say you have a file on a specific node:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nodeId</span> <span class="o">=</span> <span class="s2">&quot;7bb387b2920694abe9f7d2a2ed939b6d31843faf91d174d0221e871d&quot;</span>
<span class="n">fn</span> <span class="o">=</span> <span class="s2">&quot;~/ssd2/randomFile.txt&quot;</span>

<span class="c1"># -------------- file is on current node --------------</span>
<span class="n">cat</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="c1"># returns iterator of lines inside the file</span>
<span class="n">fn</span> <span class="o">|</span> <span class="n">cat</span><span class="p">()</span> <span class="c1"># same thing as above</span>
<span class="c1"># -------------- file is on remote node --------------</span>
<span class="p">[</span><span class="n">nodeId</span><span class="p">,</span> <span class="n">fn</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">cat</span><span class="p">()</span> <span class="c1"># returns iterator of lines of the file</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">cat</span><span class="p">([</span><span class="n">nodeId</span><span class="p">,</span> <span class="n">fn</span><span class="p">])</span> <span class="c1"># same thing</span>
<span class="n">nodeId</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="c1"># also same thing</span>
</pre></div>
</div>
<p>So yeah, there’re lots of ways to just simply read a file on a remote node. Is
it too much? Probably, but good thing is that you can pick any that’s intuitive
for you. Note that this mode is just for convenience only, for when you want to do
exploratory analysis on a single remote file. To be efficient at bulk processing,
use the normal mode instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> – file name</p></li>
<li><p><strong>f</strong> – function to execute in every process</p></li>
<li><p><strong>nodeIds</strong> – only read file from these nodes</p></li>
<li><p><strong>timeout</strong> – kills the processes if it takes longer than this amount of seconds</p></li>
<li><p><strong>pre</strong> – “preserve” mode, just like in <a class="reference internal" href="#k1lib.cli.modifier.applyCl" title="k1lib.cli.modifier.applyCl"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyCl</span></code></a>. Whether to keep the node id column or not</p></li>
<li><p><strong>multiplier</strong> – by default, each node will spawn as many process as there
are cpus. Sometimes you want to spawn more process, change this to a higher number</p></li>
<li><p><strong>includeId</strong> – includes a unique id for this process (just normal integers from 0 to n)</p></li>
<li><p><strong>resolve</strong> – whether to resolve the remote objects or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.replicateFolder">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">replicateFolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeIds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.replicateFolder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.replicateFolder" title="Permalink to this definition"></a></dt>
<dd><p>Replicates a specific folder in the current node to all the other nodes.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applyCl</span><span class="o">.</span><span class="n">replicateFolder</span><span class="p">(</span><span class="s2">&quot;~/ssd2/data/owl&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This just list out all files recursively in the specified folder, then replicate each file using <a class="reference internal" href="#k1lib.cli.modifier.applyCl.replicateFile" title="k1lib.cli.modifier.applyCl.replicateFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">replicateFile()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.balanceFolder">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">balanceFolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100000000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.balanceFolder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.balanceFolder" title="Permalink to this definition"></a></dt>
<dd><p>Balances all files within a folder across all nodes.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># make the chunk size huge so that transfers become faster</span>
<span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">chunkSize</span> <span class="o">=</span> <span class="mi">100_000_000</span>
<span class="n">base</span> <span class="o">=</span> <span class="s2">&quot;~/repos/labs/k1lib/k1lib/cli/test/applyCl.balance&quot;</span>
<span class="c1"># deletes old structures and making test folder</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;rm -r </span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">);</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mkdir -p </span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># creates 20 files of different sizes and dump it in the base folder of the current node</span>
<span class="n">torch</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">1e4</span><span class="p">,</span> <span class="mf">1e5</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">int</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">|</span> <span class="n">insertIdColumn</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">idx</span><span class="p">,</span> <span class="n">contents</span><span class="p">:</span> <span class="n">contents</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">();</span>
<span class="c1"># transfers files between nodes such that the total folder size is proportional to the number of cpus across nodes</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">balanceFolder</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
<span class="c1"># get folder size of all nodes</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">ls</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">)</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># creates 20 additional files and dump it to the current node</span>
<span class="n">torch</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">1e4</span><span class="p">,</span> <span class="mf">1e5</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">int</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">|</span> <span class="n">insertIdColumn</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">idx</span><span class="p">,</span> <span class="n">contents</span><span class="p">:</span> <span class="n">contents</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">idx</span><span class="o">+</span><span class="mi">20</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">();</span>
<span class="c1"># balances the tree out again</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">balance</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
<span class="c1"># get folder size of all nodes</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">applyCl</span><span class="o">.</span><span class="n">aS</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">ls</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">)</span> <span class="o">|</span> <span class="n">toSum</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>So imagine that you just downloaded 1000 files to a single node on a specific folder,
but you need to analyze all of them in a distributed manner. What you can do is to
move some files to other nodes and then do your analysis. If you want to download
more files, just dump it to any node (or download distributed across all nodes),
then rebalance the folders and do your analysis.</p>
<p>Also, internally, it splits files into multiple chunks, transfer the chunks to other
nodes and append to the correct files. It uses <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a> to split up
the file, which has settings under <code class="docutils literal notranslate"><span class="pre">settings.cli.cat</span></code>. By default, the chunk size is
100k bytes, which I think is the sweet spot because <a class="reference internal" href="#k1lib.cli.inp.cat" title="k1lib.cli.inp.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cat()</span></code></a> also
supports remote file accessed from the internet and sometimes the library is used for
systems with very few memory. But for this use case where you already have the insane
hardware for this, 100kB is extremely small and will slow transfer rates to a crawl,
so in this function, it will be temporarily be set to the parameter <code class="docutils literal notranslate"><span class="pre">ChunkSize</span></code>, which
is 100MB by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> – folder to rebalance all of the files</p></li>
<li><p><strong>maxSteps</strong> – what’s the maximum number of file transfers? By default has no limit, so that files are transferred until</p></li>
<li><p><strong>audit</strong> – if True, don’t actually move files around and just return what files are going to be moved where</p></li>
<li><p><strong>bs</strong> – batch size for transporting this many files at once. Increase to make it faster, but with the
penalty of the progress bar not updating as frequently</p></li>
<li><p><strong>chunkSize</strong> – file chunk size to split up and send to other nodes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.decommissionFolder">
<span class="sig-name descname"><span class="pre">decommissionFolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nAs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100000000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.decommissionFolder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.decommissionFolder" title="Permalink to this definition"></a></dt>
<dd><p>Like <a class="reference internal" href="#k1lib.cli.modifier.applyCl.decommissionFile" title="k1lib.cli.modifier.applyCl.decommissionFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">decommissionFile()</span></code></a>, but works for distributed folders instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nAs</strong> – list of node ids to migrate files away from</p></li>
<li><p><strong>maxSteps</strong> – limits the total number of optimization steps. Normally don’t have to specify,
but just here in case it runs for too long trying to optimize the folder structure</p></li>
<li><p><strong>audit</strong> – if True, just returns the file movements it’s planning to do</p></li>
<li><p><strong>bs</strong> – batch size for transporting this many files at once. Increase to make it faster, but with the
penalty of the progress bar not updating as frequently</p></li>
<li><p><strong>chunkSize</strong> – see <a class="reference internal" href="#k1lib.cli.modifier.applyCl.balanceFolder" title="k1lib.cli.modifier.applyCl.balanceFolder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">balanceFolder()</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.pruneFolder">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pruneFolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.pruneFolder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.pruneFolder" title="Permalink to this definition"></a></dt>
<dd><p>Removes empty directories recursively from a root folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.diskScan">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">diskScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accurate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.diskScan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.diskScan" title="Permalink to this definition"></a></dt>
<dd><p>Scans for files and folders in the specified folder for potential
distributed files and folders. A distributed file is a file that exists on more
than 1 node. A distributed folder is a folder that that exists on more than 1
node and does not have any shared children. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applyCl</span><span class="o">.</span><span class="n">diskScan</span><span class="p">(</span><span class="s2">&quot;~/ssd2&quot;</span><span class="p">)</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">diskScan</span><span class="p">(</span><span class="s2">&quot;~/ssd2&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The first line does not return anything, but will print out something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>------------------------------------------------------------ Distributed folders ------------------------------------------------------------
Path                                                                                 Total size   Size on each node (node id and thread count)
                                                                                                  ae5f4, 8 thr   244f4, 16 thr   f776e, 8 thr
----------------------------------------                                             ----------   ------------   ------------    ------------
/home/kelvin/ssd2/data/genome/RegulationFeatureActivity                              16.19 GB     4.11 GB        7.91 GB         4.16 GB
/home/kelvin/ssd2/data/genome/go/release_geneontology_org                            8.35 GB      2.07 GB        4.17 GB         2.11 GB
/home/kelvin/ssd2/data/genome/RegulationFeatureActivity.backup                       1.72 GB      568.88 MB      552.89 MB       600.61 MB
/home/kelvin/ssd2/data/genome/00-common_all.idx                                      1.01 GB      341.74 MB      671.14 MB       0.0 B
/home/kelvin/ssd2/data/genome/genbank/ch1.dat.gz                                     50.71 MB     25.36 MB       0.0 B           25.36 MB
/home/kelvin/ssd2/test                                                               546.03 kB    136.15 kB      273.53 kB       136.35 kB
/home/kelvin/ssd2/data/genome/genbank/ch1                                            0.0 B        0.0 B          0.0 B           0.0 B

A distributed folder is a folder that has many files and folders inside, but their names
are all different from each other. It&#39;s managed by applyCl.balanceFolder()

------------------------------------------------------------ Replicated files ------------------------------------------------------------
Path                                                                                 Total size   Size on each node (node id and thread count)
                                                                                                  ae5f4, 8 thr   244f4, 16 thr   f776e, 8 thr
----------------------------------------                                             ----------   ------------   ------------    ------------
/home/kelvin/ssd2/data/genome/dummy.txt                                              3.3 kB       1.1 kB         1.1 kB          1.1 kB

A replicated file is a file that has been copied to multiple nodes. Size of all file
copies should be the same. It&#39;s managed by applyCl.replicateFile()

------------------------------------------------------------ Distributed files ------------------------------------------------------------
Path                                                                                 Total size   Size on each node (node id and thread count)
                                                                                                  ae5f4, 8 thr   244f4, 16 thr   f776e, 8 thr
----------------------------------------                                             ----------   ------------   ------------    ------------
/home/kelvin/ssd2/data/genome/00-All.vcf                                             130.95 GB    32.74 GB       65.48 GB        32.74 GB
/home/kelvin/ssd2/data/genome/MotifFeatures/homo_sapiens.GRCh38.motif_features.gff   55.86 GB     13.96 GB       27.93 GB        13.96 GB
/home/kelvin/ssd2/data/genome/00-common_all.vcf                                      9.42 GB      2.35 GB        4.71 GB         2.35 GB

A distributed file is a file that has been split into multiple pieces and sent to other
nodes. It&#39;s managed by applyCl.balanceFile()
</pre></div>
</div>
<p>While the second line will return a parseable data structure instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/RegulationFeatureActivity&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">4113489746</span><span class="p">,</span> <span class="mi">7912834090</span><span class="p">,</span> <span class="mi">4164314316</span><span class="p">]],</span>
  <span class="p">[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/go/release_geneontology_org&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2071645117</span><span class="p">,</span> <span class="mi">4172737915</span><span class="p">,</span> <span class="mi">2107005131</span><span class="p">]],</span>
  <span class="p">[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/RegulationFeatureActivity.backup&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">568878496</span><span class="p">,</span> <span class="mi">552888466</span><span class="p">,</span> <span class="mi">600610083</span><span class="p">]],</span>
  <span class="p">[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/00-common_all.idx&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">341738564</span><span class="p">,</span> <span class="mi">671136833</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
  <span class="p">[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/genbank/ch1.dat.gz&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">25356744</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">25356764</span><span class="p">]],</span>
  <span class="p">[</span><span class="s1">&#39;/home/kelvin/ssd2/test&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">136152</span><span class="p">,</span> <span class="mi">273530</span><span class="p">,</span> <span class="mi">136351</span><span class="p">]],</span>
  <span class="p">[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/genbank/ch1&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]],</span>
 <span class="p">[[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/dummy.txt&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1101</span><span class="p">,</span> <span class="mi">1101</span><span class="p">,</span> <span class="mi">1101</span><span class="p">]]],</span>
 <span class="p">[[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/00-All.vcf&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">32737509360</span><span class="p">,</span> <span class="mi">65475018903</span><span class="p">,</span> <span class="mi">32737509588</span><span class="p">]],</span>
  <span class="p">[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/MotifFeatures/homo_sapiens.GRCh38.motif_features.gff&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">13963854962</span><span class="p">,</span> <span class="mi">27927709895</span><span class="p">,</span> <span class="mi">13963854962</span><span class="p">]],</span>
  <span class="p">[</span><span class="s1">&#39;/home/kelvin/ssd2/data/genome/00-common_all.vcf&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2353901811</span><span class="p">,</span> <span class="mi">4707803470</span><span class="p">,</span> <span class="mi">2353901831</span><span class="p">]]]]</span>
</pre></div>
</div>
<p>Remember that since an operating system usually have lots of shared files
(like “~/.bashrc”, for example), these might be mistaken as a distributed file.
Make sure to only scan folders that you store data in, or else it’ll take a long time to return.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> – the folder to scan through</p></li>
<li><p><strong>raw</strong> – whether to return raw data or display it out nicely</p></li>
<li><p><strong>accurate</strong> – if True, returns size when you read all files into RAM. If False
returns size occupied by the entire file/folder (will be larger because files
are arranged into different blocks in the underlying disk)</p></li>
<li><p><strong>f</strong> – optional post process function applied after getting the raw results, if <code class="docutils literal notranslate"><span class="pre">raw=False</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.balancedNodeIds">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">balancedNodeIds</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.balancedNodeIds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.balancedNodeIds" title="Permalink to this definition"></a></dt>
<dd><p>Returns a stream of node ids that’s balanced based on cpu count/performance.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns list of 10 node ids: [&quot;abc...&quot;, &quot;def...&quot;, &quot;abc...&quot;, ...]</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">balancedNodeIds</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.balancedCpus">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">balancedCpus</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.balancedCpus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.balancedCpus" title="Permalink to this definition"></a></dt>
<dd><p>Returns Dict[nodeId (str) -&gt; #cpu (int))]. Could be useful to know
how much to split up files and folders according to your custom rules. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns {&quot;abc...&quot;: 8, &quot;def...&quot;: 19, &quot;ghi...&quot;: 88} for 7700 (4c8t), 10700k (8c16t) and 13900k (24c32t)</span>
<span class="n">applyCl</span><span class="o">.</span><span class="n">balancedCpus</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.loadTest">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">loadTest</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.loadTest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.loadTest" title="Permalink to this definition"></a></dt>
<dd><p>Performs a load test on the cluster.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applyCl</span><span class="o">.</span><span class="n">loadTest</span><span class="p">()</span>
</pre></div>
</div>
<p>What is a load test? It basically tries to perform some intensive and
long-running calculations on all processes on all nodes in the cluster
to know how good are each individual nodes. This is useful information
because whenever you try to split a file up to form a distributed file,
or move files in a folder around to form a distributed folder, the amount
of data each node gets is going to be proportional to this performance
information. More powerful nodes will have more data to process, so that
the total running time across all nodes is going to roughly be the same.</p>
<p>But isn’t cpu count good enough for this? No, not actually. The i7 7700
has 4 cores, 8 threads, and the i9 13900k has 8 performance cores and 16
efficiency cores, totalling to 32 threads. You would suspect that the
13900k to be 4x (32/8=4) or 6x (24/4=6) more powerful than the 7700, but
it’s actually 10x more powerful.</p>
<p>The test itself takes around 1-2 minutes, and the test results are going
to be saved locally in the folder “~/.k1lib/”, so that it can use that
info directly in future runs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.getFolderSize">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">getFolderSize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.getFolderSize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.getFolderSize" title="Permalink to this definition"></a></dt>
<dd><p>Shortcut function to get size of a folder on the current node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyCl.getFilesInFolder">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">getFilesInFolder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyCl.getFilesInFolder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyCl.getFilesInFolder" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyTh">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">applyTh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyTh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyTh" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyTh.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Applies</span> <span class="pre">a</span> <span class="pre">function</span> <span class="pre">to</span> <span class="pre">all</span> <span class="pre">input</span> <span class="pre">elements</span> <span class="pre">across</span> <span class="pre">multiple</span> <span class="pre">threads'</span></em><a class="headerlink" href="#k1lib.cli.modifier.applyTh.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyTh.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyTh.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyTh.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Kinda like the same as <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a>, but executes <code class="docutils literal notranslate"><span class="pre">f</span></code> on multiple
threads, instead of on multiple processes. Advantages:</p>
<ul class="simple">
<li><p>Relatively low overhead for thread creation</p></li>
<li><p>Fast, if <code class="docutils literal notranslate"><span class="pre">f</span></code> is io-bound</p></li>
<li><p>Does not have to serialize and deserialize the result, meaning iterators can be
exchanged</p></li>
</ul>
<p>Disadvantages:</p>
<ul class="simple">
<li><p>Still has thread creation overhead, so it’s still recommended to specify <code class="docutils literal notranslate"><span class="pre">bs</span></code></p></li>
<li><p>Is slow if <code class="docutils literal notranslate"><span class="pre">f</span></code> has to obtain the GIL to be able to do anything</p></li>
</ul>
<p>All examples from <a class="reference internal" href="#k1lib.cli.modifier.applyMp" title="k1lib.cli.modifier.applyMp"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyMp</span></code></a> should work perfectly here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefetch</strong> – how many results to execute ahead of time</p></li>
<li><p><strong>timeout</strong> – kills the thread if it takes longer than this amount</p></li>
<li><p><strong>bs</strong> – how much to bunch function calls together</p></li>
<li><p><strong>sync</strong> – if True, execute the functions, hang and wait for the result of each
operation, then return. Else schedules the thread but does not wait for the
result and yields None right away</p></li>
<li><p><strong>kwargs</strong> – keyword arguments to be fed to the function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyTh.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyTh.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyTh.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applyTh.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applyTh.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applyTh.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applySerial">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">applySerial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applySerial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applySerial" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applySerial.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Applies</span> <span class="pre">a</span> <span class="pre">function</span> <span class="pre">to</span> <span class="pre">an</span> <span class="pre">element</span> <span class="pre">repeatedly'</span></em><a class="headerlink" href="#k1lib.cli.modifier.applySerial.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applySerial.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applySerial.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applySerial.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Applies a function repeatedly. First yields input iterator <code class="docutils literal notranslate"><span class="pre">x</span></code>. Then
yields <code class="docutils literal notranslate"><span class="pre">f(x)</span></code>, then <code class="docutils literal notranslate"><span class="pre">f(f(x))</span></code>, then <code class="docutils literal notranslate"><span class="pre">f(f(f(x)))</span></code> and so on. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [2, 4, 8, 16, 32]</span>
<span class="mi">2</span> <span class="o">|</span> <span class="n">applySerial</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If the result of your operation is an iterator, you might want to
<a class="reference internal" href="#k1lib.cli.utils.deref" title="k1lib.cli.utils.deref"><code class="xref py py-class docutils literal notranslate"><span class="pre">deref</span></code></a> it, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rs</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span> <span class="o">|</span> <span class="n">applySerial</span><span class="p">(</span><span class="n">rows</span><span class="p">()[::</span><span class="mi">2</span><span class="p">])</span>
<span class="c1"># returns [0, 2, 4, 6]</span>
<span class="n">rs</span> <span class="o">|</span> <span class="n">rows</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns []. This is because all the elements are taken by the previous deref()</span>
<span class="n">rs</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[2, 8], [10, -6], [4, 16], [20, -12]]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">applySerial</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">))</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="n">rs</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span> <span class="o">|</span> <span class="n">applySerial</span><span class="p">(</span><span class="n">rows</span><span class="p">()[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>
<span class="c1"># returns [0, 2, 4, 6]</span>
<span class="n">rs</span> <span class="o">|</span> <span class="n">rows</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>
<span class="c1"># returns [0, 4]</span>
<span class="n">rs</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="c1"># or `next(rs)`</span>
<span class="c1"># returns [0]</span>
<span class="n">rs</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="c1"># or `next(rs)`</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>f</strong> – function to apply repeatedly</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applySerial.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applySerial.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applySerial.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.applySerial.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#applySerial.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.applySerial.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sort">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">sort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numeric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unsort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#sort"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.sort" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sort.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Sorts</span> <span class="pre">list/table</span> <span class="pre">based</span> <span class="pre">on</span> <span class="pre">an</span> <span class="pre">optional</span> <span class="pre">column'</span></em><a class="headerlink" href="#k1lib.cli.modifier.sort.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sort.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numeric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unsort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#sort.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.sort.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Sorts list/table based on a specific <cite>column</cite>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[5, &#39;a&#39;], [1, &#39;b&#39;]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="o">~</span><span class="n">sort</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[2, 3]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span> <span class="o">|</span> <span class="o">~</span><span class="n">sort</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># errors out, as you can&#39;t really compare str with int</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">sort</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [-1, 2, 3, 5, 8]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span> <span class="o">|</span> <span class="n">sort</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition-unsort admonition">
<p class="admonition-title">unsort</p>
<p>This is how it works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
<span class="c1"># returns np.array([1, 5, 9, 2, 6, 3, 7, 4, 8])</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">sort</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">unsort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># returns np.array([1, 2, 3, 4, 5, 6, 7, 8, 9]), normal sort</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">sort</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="c1"># returns np.array([-3.5,  0.5,  4.5, -2.5,  1.5, -1.5,  2.5, -0.5,  3.5]), sorts, do transformation, then unsort</span>
<span class="n">a</span> <span class="o">|</span> <span class="p">(</span><span class="n">sort</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">unsort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
<span class="c1"># returns np.array([12.25,  0.25, 20.25,  6.25,  2.25,  2.25,  6.25,  0.25, 12.25])</span>
<span class="n">a</span> <span class="o">|</span> <span class="p">(</span><span class="n">sort</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">unsort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>How this works is that it will sort everything as usual, then it’ll execute the captured
transformation and then it will unsort everything. This is for scenarios when an operation
needs to operate on sorted data, but you still want to keep the original ordering for some
reason.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> – if None, sort rows based on themselves and not an element</p></li>
<li><p><strong>numeric</strong> – whether to convert column to float</p></li>
<li><p><strong>reverse</strong> – False for smaller to bigger, True for bigger to smaller. Use
<a class="reference internal" href="#k1lib.cli.modifier.sort.__invert__" title="k1lib.cli.modifier.sort.__invert__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__invert__()</span></code></a> to quickly reverse the order instead of using this param</p></li>
<li><p><strong>unsort</strong> – whether to sort and then unsort the input or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sort.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#sort.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.sort.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sort.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#sort.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.sort.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Creates a clone that has the opposite sort order</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sortF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">sortF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#sortF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.sortF" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<p>Sorts list/table using a function</p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sortF.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#sortF.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.sortF.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Sorts list/table using a function.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;a&#39;, &#39;aa&#39;, &#39;aaa&#39;, &#39;aaaa&#39;, &#39;aaaaa&#39;]</span>
<span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;aaa&quot;</span><span class="p">,</span> <span class="s2">&quot;aaaaa&quot;</span><span class="p">,</span> <span class="s2">&quot;aa&quot;</span><span class="p">,</span> <span class="s2">&quot;aaaa&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">sortF</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;aaaaa&#39;, &#39;aaaa&#39;, &#39;aaa&#39;, &#39;aa&#39;, &#39;a&#39;]</span>
<span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;aaa&quot;</span><span class="p">,</span> <span class="s2">&quot;aaaaa&quot;</span><span class="p">,</span> <span class="s2">&quot;aa&quot;</span><span class="p">,</span> <span class="s2">&quot;aaaa&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">sortF</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sortF.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#sortF.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.sortF.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.sortF.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.modifier.sortF" title="k1lib.cli.modifier.sortF"><span class="pre">sortF</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#sortF.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.sortF.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.consume">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">consume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#consume"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.consume" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.consume.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Consumes</span> <span class="pre">the</span> <span class="pre">iterator</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">side</span> <span class="pre">stream</span> <span class="pre">and</span> <span class="pre">returns</span> <span class="pre">the</span> <span class="pre">iterator'</span></em><a class="headerlink" href="#k1lib.cli.modifier.consume.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.consume.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#consume.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.consume.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Consumes the iterator in a side stream and returns the iterator.
Kinda like the bash command <code class="docutils literal notranslate"><span class="pre">tee</span></code>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints &quot;0\n1\n2&quot; and returns [0, 1, 2]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">consume</span><span class="p">(</span><span class="n">headOut</span><span class="p">())</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span>
<span class="c1"># prints &quot;range(0, 3)&quot; and returns [0, 1, 2]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">consume</span><span class="p">(</span><span class="k">lambda</span> <span class="n">it</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">))</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span>
</pre></div>
</div>
<p>This is useful whenever you want to mutate something, but don’t want to
include the function result into the main stream.</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.output.tee" title="k1lib.cli.output.tee"><code class="xref py py-class docutils literal notranslate"><span class="pre">tee</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.consume.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#consume.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.consume.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.randomize">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#randomize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.randomize" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.randomize.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;Randomizes</span> <span class="pre">the</span> <span class="pre">input</span> <span class="pre">elements'</span> <span class="pre">order&quot;</span></em><a class="headerlink" href="#k1lib.cli.modifier.randomize.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.randomize.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#randomize.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.randomize.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Randomize input stream. In order to be efficient, this does not
convert the input iterator to a giant list and yield random values from that.
Instead, this fetches <code class="docutils literal notranslate"><span class="pre">bs</span></code> items at a time, randomizes them, returns and
fetch another <code class="docutils literal notranslate"><span class="pre">bs</span></code> items. If you want to do the giant list, then just pass
in <code class="docutils literal notranslate"><span class="pre">float(&quot;inf&quot;)</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 2, 3, 4], effectively no randomize at all</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">randomize</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns something like this: [1, 0, 2, 3, 5, 4, 6, 8, 7, 9]. You can clearly see the batches</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">randomize</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns something like this: [7, 0, 5, 2, 4, 9, 6, 3, 1, 8]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">randomize</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># same as above</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">randomize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns True, as the seed is the same</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">randomize</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">==</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">randomize</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that if <code class="docutils literal notranslate"><span class="pre">seed=True</span></code>, then it will randomize all input
iterators the same way and independently of each other. Meaning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">randomize</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">r</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1">#      returns [6, 9, 1, 2, 0, 8, 3, 5, 4, 7]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">r</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># also returns [6, 9, 1, 2, 0, 8, 3, 5, 4, 7]</span>
</pre></div>
</div>
<p>This may or may not be desireable, but I think it’s desirable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bs</strong> – batch size</p></li>
<li><p><strong>seed</strong> – if specified, will always randomize the input iterator in the same way</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.randomize.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#randomize.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.randomize.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.stagger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">stagger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">every</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#stagger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.stagger" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.stagger.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Staggers</span> <span class="pre">input</span> <span class="pre">stream</span> <span class="pre">into</span> <span class="pre">multiple</span> <span class="pre">stream</span> <span class="pre">&quot;windows&quot;</span> <span class="pre">placed</span> <span class="pre">serially'</span></em><a class="headerlink" href="#k1lib.cli.modifier.stagger.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.stagger.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">every</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#stagger.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.stagger.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Staggers input stream into multiple stream “windows” placed serially. Best
explained with an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">stagger</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [0, 1, 2], 1st &quot;window&quot;</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [3, 4, 5], 2nd &quot;window&quot;</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [6, 7, 8]</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [9]</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns []</span>
</pre></div>
</div>
<p>This might be useful when you’re constructing a data loader:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span>
<span class="n">dl</span> <span class="o">=</span> <span class="n">dataset</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">toTensor</span><span class="p">())</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">stagger</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">for</span> <span class="n">epoch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">xb</span><span class="p">,</span> <span class="n">yb</span> <span class="ow">in</span> <span class="n">dl</span><span class="p">:</span> <span class="c1"># looping over a window</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">epoch</span><span class="p">)</span>
        <span class="c1"># then something like: model(xb)</span>
</pre></div>
</div>
<p>The above code will print 6 lines. 4 of them is “0” (because we stagger every 4
batches), and xb’s shape’ will be (3,) (because we batched every 3 samples).</p>
<p>You should also keep in mind that this doesn’t really change the property of the
stream itself. Essentially, treat these pairs of statement as being the same thing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># both returns 11</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">stagger</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>

<span class="c1"># both returns [11, 12, ..., 20]</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">o</span> <span class="o">|</span> <span class="n">stagger</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Lastly, multiple iterators might be getting values from the same stream window,
meaning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">stagger</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">it1</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">o</span><span class="p">);</span> <span class="n">it2</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="nb">next</span><span class="p">(</span><span class="n">it1</span><span class="p">)</span> <span class="c1"># returns 11</span>
<span class="nb">next</span><span class="p">(</span><span class="n">it2</span><span class="p">)</span> <span class="c1"># returns 12</span>
</pre></div>
</div>
<p>This may or may not be desirable. Also this should be obvious, but I want to
mention this in case it’s not clear to you.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.stagger.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">StaggeredStream</span></span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#stagger.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.stagger.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.stagger.tv">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">every</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.8</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#stagger.tv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.stagger.tv" title="Permalink to this definition"></a></dt>
<dd><p>Convenience method to quickly stagger train and valid datasets.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[16], [4]]</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span><span class="o">*</span><span class="mi">2</span> <span class="o">|</span> <span class="n">stagger</span><span class="o">.</span><span class="n">tv</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.op">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">op</span></span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#op"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.op" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="../base.html#k1lib.Absorber" title="k1lib._baseClasses.Absorber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Absorber</span></code></a>, <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.op.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Shorthand</span> <span class="pre">for</span> <span class="pre">lambda</span> <span class="pre">functions'</span></em><a class="headerlink" href="#k1lib.cli.modifier.op.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.op.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#op.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.op.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Absorbs operations done on it and applies it on the stream. Based
on <a class="reference internal" href="../base.html#k1lib.Absorber" title="k1lib.Absorber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Absorber</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 16</span>
<span class="mi">4</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span>
<span class="c1"># returns 16, equivalent to the above</span>
<span class="mi">4</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># returns [0, 1, 4, 9, 16]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [0, 1, 4, 9, 16], equivalent to the above</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Main advantage is that you don’t have to waste keystrokes when you just want
to do a simple operation. How it works underneath is a little magical, so just
treat it as a blackbox. A more complex example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">]])</span>
<span class="c1"># returns [torch.tensor([[4., 5., 6., 7., 8., 9.]])]</span>
<span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Basically, you can treat <code class="docutils literal notranslate"><span class="pre">op()</span></code> as the input tensor. Tbh, you
can do the same thing with this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">|</span> <span class="n">applyS</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="n">t</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>But that’s kinda long and may not be obvious. This can be surprisingly resilient, as
you can still combine with other cli tools as usual, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [2, 3], demonstrating &quot;&amp;&quot; operator</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span> <span class="o">&amp;</span> <span class="n">iden</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]])</span>
<span class="c1"># returns torch.tensor([4, 5, 6]), demonstrating &quot;+&quot; operator for clis and not clis</span>
<span class="p">(</span><span class="n">a</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">iden</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">==</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="c1"># returns [[3], [3]], demonstrating .all() and &quot;|&quot; serial chaining</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>

<span class="c1"># returns [[8, 18], [9, 19]], demonstrating you can treat `op()` as a regular function</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># returns [3, 4, 5, 6, 7, 8, 9], demonstrating bounds comparison</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="mi">3</span> <span class="o">&lt;=</span> <span class="n">op</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This can only deal with simple operations only. For complex operations, resort
to the longer version <code class="docutils literal notranslate"><span class="pre">aS(lambda</span> <span class="pre">x:</span> <span class="pre">...)</span></code> instead!</p>
<p>There are also operations that are difficult to achieve, like
<code class="docutils literal notranslate"><span class="pre">len(op())</span></code>, as Python is expecting an integer output, so
<code class="docutils literal notranslate"><span class="pre">op()</span></code> can’t exactly take over. Instead, you have to use <a class="reference internal" href="#k1lib.cli.modifier.aS" title="k1lib.cli.modifier.aS"><code class="xref py py-class docutils literal notranslate"><span class="pre">aS</span></code></a>,
or do <code class="docutils literal notranslate"><span class="pre">op().ab_len()</span></code>. Get a list of all of these special operations
in the source of <a class="reference internal" href="../base.html#k1lib.Absorber" title="k1lib.Absorber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Absorber</span></code></a>.</p>
<p>Performance-wise, in most cases, there are no degradation, so don’t worry
about it. Everything is pretty much on par with native lambdas:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">10_000_000</span>
<span class="c1"># takes 1.48s</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span> <span class="n">i</span><span class="o">**</span><span class="mi">2</span>
<span class="c1"># takes 1.89s, 1.28x worse than for loop</span>
<span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
<span class="c1"># takes 1.86s, 1.26x worse than for loop</span>
<span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
<span class="c1"># takes 1.86s</span>
<span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
</pre></div>
</div>
<p>More complex operations still retains the same speeds, as there’s a JIT compiler embedded in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># takes 2.15s</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span> <span class="p">(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mf">0.1</span>
<span class="c1"># takes 2.53s, 1.18x worse than for loop</span>
<span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
<span class="c1"># takes 2.46s, 1.14x worse than for loop</span>
<span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">((</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
</pre></div>
</div>
<p>Reserved operations that are not absorbed are:</p>
<ul class="simple">
<li><p>all</p></li>
<li><p>__ror__ (__or__ still works!)</p></li>
<li><p>ab_solidify</p></li>
<li><p>op_hint</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.op.solidify">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">solidify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#op.solidify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.op.solidify" title="Permalink to this definition"></a></dt>
<dd><p>Static equivalent of <code class="docutils literal notranslate"><span class="pre">a.ab_solidify()</span></code>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">solidify</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">f</span></code> is not an <code class="docutils literal notranslate"><span class="pre">op</span></code>, then just return it without doing anything to it</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.op.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#op.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.op.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.op.op_hint">
<span class="sig-name descname"><span class="pre">op_hint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_hint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#op.op_hint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.op.op_hint" title="Permalink to this definition"></a></dt>
<dd><p>Specify output type hint</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.integrate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">integrate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#integrate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.integrate" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.integrate.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Calculates</span> <span class="pre">the</span> <span class="pre">cumulative</span> <span class="pre">sum</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">input'</span></em><a class="headerlink" href="#k1lib.cli.modifier.integrate.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.integrate.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#integrate.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.integrate.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Integrates the input.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 3, 6, 10, 15, 21, 28, 36, 45]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">integrate</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [0, 2, 6, 12, 20, 30, 42, 56, 72, 90]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">integrate</span><span class="p">(</span><span class="n">dt</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>


<span class="c1"># returns [[&#39;a&#39;, 0], [&#39;b&#39;, 1], [&#39;c&#39;, 4], [&#39;d&#39;, 10]]</span>
<span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span> <span class="o">|</span> <span class="n">integrate</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;a&#39;, 0], [&#39;b&#39;, 2], [&#39;c&#39;, 8], [&#39;d&#39;, 20]]</span>
<span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span> <span class="o">|</span> <span class="n">integrate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column to integrate over</p></li>
<li><p><strong>dt</strong> – optional step size, or delta time</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.integrate.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#integrate.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.integrate.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.roll">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">roll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#roll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.roll" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.roll.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Rolls</span> <span class="pre">the</span> <span class="pre">input</span> <span class="pre">by</span> <span class="pre">some</span> <span class="pre">amount</span> <span class="pre">of</span> <span class="pre">shift'</span></em><a class="headerlink" href="#k1lib.cli.modifier.roll.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.roll.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#roll.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.roll.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Rolls the input some amount of shift.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [7, 8, 9, 0, 1, 2, 3, 4, 5, 6]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">roll</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>shift</strong> – shift amount</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.roll.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#roll.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.roll.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.modifier.clamp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.modifier.</span></span><span class="sig-name descname"><span class="pre">clamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#clamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.clamp" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.modifier.clamp.blurb">
<span class="sig-name descname"><span class="pre">blurb</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Clamps</span> <span class="pre">input</span> <span class="pre">list/array</span> <span class="pre">between</span> <span class="pre">2</span> <span class="pre">values'</span></em><a class="headerlink" href="#k1lib.cli.modifier.clamp.blurb" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.clamp.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#clamp.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.clamp.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Clamps input list/array between 2 values.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [3, 3, 3, 3, 4, 5, 6, 7, 7, 7]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">clamp</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># clamps the 1st column (0-index!) between 0 and 2</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">clamp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>This cli has 2 modes. Absolute mode and std mode. Absolute mode will
clamp between .min and .max, and is activated when .std is left alone
(aka None).</p>
<p>Std mode is activated when you specify .std value. Then, it will calculate
the mean and std of the incoming data and will auto calculate the min and
max values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>col</strong> – column to clamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.modifier.clamp.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/modifier.html#clamp.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.modifier.clamp.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="applycl-module">
<h2>_applyCl module<a class="headerlink" href="#applycl-module" title="Permalink to this heading"></a></h2>
<p>These are helper functions for <a class="reference internal" href="#k1lib.cli.modifier.applyCl" title="k1lib.cli.modifier.applyCl"><code class="xref py py-class docutils literal notranslate"><span class="pre">applyCl</span></code></a> and are not
intended for the end user (aka you) to use. They’re just here so that you can read
the source code if interested.</p>
<span class="target" id="module-k1lib.cli._applyCl"></span><dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli._applyCl.dummy">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli._applyCl.</span></span><span class="sig-name descname"><span class="pre">dummy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/imports.html#dummy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli._applyCl.dummy" title="Permalink to this definition"></a></dt>
<dd><p>Does nothing. Only here so that you can read source code of this file
and see what’s up.</p>
</dd></dl>

</section>
<section id="module-k1lib.cli.nb">
<span id="nb-module"></span><h2>nb module<a class="headerlink" href="#module-k1lib.cli.nb" title="Permalink to this heading"></a></h2>
<p>This is for everything related to ipython notebooks. Expected to use behind the
“nb” module name, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">k1lib.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">nb</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;file.ipynb&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.nb.cells">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.nb.</span></span><span class="sig-name descname"><span class="pre">cells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#cells"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.cells" title="Permalink to this definition"></a></dt>
<dd><p>Gets simplified notebook cells from file source, including fields
<code class="docutils literal notranslate"><span class="pre">cell_type</span></code> and <code class="docutils literal notranslate"><span class="pre">source</span></code> only. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">(</span><span class="s2">&quot;file.ipynb&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.nb.grabTags">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.nb.</span></span><span class="sig-name descname"><span class="pre">grabTags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#grabTags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.grabTags" title="Permalink to this definition"></a></dt>
<dd><p>Gets the tags included in a cell.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nb</span><span class="o">.</span><span class="n">grabTags</span><span class="p">(</span><span class="s2">&quot;# serve(node=&#39;mint-6.l&#39;), abc&quot;</span><span class="p">)</span> <span class="c1"># returns [&quot;serve&quot;, &quot;abc&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.nb.executeTags">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.nb.</span></span><span class="sig-name descname"><span class="pre">executeTags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#executeTags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.executeTags" title="Permalink to this definition"></a></dt>
<dd><p>Executes the tags included in a cell.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">serve</span><span class="p">(</span><span class="n">node</span><span class="p">):</span> <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="n">nb</span><span class="o">.</span><span class="n">executeTags</span><span class="p">(</span><span class="s2">&quot;# serve(node=&#39;mint-6.l&#39;), abc&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;serve&quot;</span><span class="p">:</span> <span class="n">serve</span><span class="p">,</span> <span class="s2">&quot;abc&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">})</span>

<span class="n">d</span> <span class="c1"># now is [&quot;mint-6.l&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.nb.pretty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.nb.</span></span><span class="sig-name descname"><span class="pre">pretty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">magics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitelist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blacklist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#pretty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.pretty" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.nb.pretty.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">magics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitelist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blacklist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#pretty.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.pretty.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Makes the cells prettier.
Cell 1 in file.ipynb:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#notest, export</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Cell 2 in file.ipynb:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="mi">6</span>
</pre></div>
</div>
<p>Code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># only cell 2 gets chosen</span>
<span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">(</span><span class="s2">&quot;file.ipynb&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">nb</span><span class="o">.</span><span class="n">pretty</span><span class="p">(</span><span class="n">blacklist</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;notest&quot;</span><span class="p">])</span>
<span class="c1"># only cell 1 gets chosen</span>
<span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">(</span><span class="s2">&quot;file.ipynb&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">nb</span><span class="o">.</span><span class="n">pretty</span><span class="p">(</span><span class="n">whitelist</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;export&quot;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>magics</strong> – if False, then if detected magics (‘!’, ‘%%’ symbols), then remove that
line in cell’s source</p></li>
<li><p><strong>whitelist</strong> – every cell that doesn’t have any of these properties will be
filtered out</p></li>
<li><p><strong>blacklist</strong> – every cell that has any of these properties will be filtered out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.nb.pretty.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cells</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#pretty.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.pretty.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.nb.execute">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.nb.</span></span><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_globals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.execute" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.nb.execute.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_globals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#execute.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.execute.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Executes cells.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">(</span><span class="s2">&quot;file.ipynb&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">nb</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;nb.ipynb&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Most of the time, you’d want to pass cells through <a class="reference internal" href="#k1lib.cli.nb.pretty" title="k1lib.cli.nb.pretty"><code class="xref py py-class docutils literal notranslate"><span class="pre">pretty</span></code></a> first, to make sure
everything is nice and clean</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> – not actually used to read the file. If specified, then changes the
current working directory to that of the file</p></li>
<li><p><strong>_globals</strong> – optional dict of global variables</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.nb.execute.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cells</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#execute.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.execute.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.nb.execute.rightAway">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rightAway</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">_globals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'export'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/nb.html#execute.rightAway"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.nb.execute.rightAway" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function to execute a notebook right away.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fn</span> <span class="o">=</span> <span class="s2">&quot;some/file.ipynb&quot;</span>
<span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="o">|</span> <span class="n">nb</span><span class="o">.</span><span class="n">pretty</span><span class="p">(</span><span class="n">whitelist</span><span class="o">=</span><span class="p">[</span><span class="n">tag</span><span class="p">])</span> <span class="o">|</span> <span class="n">nb</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">nb</span><span class="p">,</span> <span class="nb">globals</span><span class="p">())</span>
<span class="n">nb</span><span class="o">.</span><span class="n">execute</span><span class="o">.</span><span class="n">rightAway</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="nb">globals</span><span class="p">(),</span> <span class="n">tag</span><span class="p">)</span>
</pre></div>
</div>
<p>Last 2 lines are pretty much the same.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.output">
<span id="output-module"></span><h2>output module<a class="headerlink" href="#module-k1lib.cli.output" title="Permalink to this heading"></a></h2>
<p>For operations that feel like the termination of operations</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.output.stdout">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">stdout</span></span><a class="reference internal" href="../_modules/k1lib/cli/output.html#stdout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.stdout" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.stdout.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#stdout.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.stdout.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Prints out all lines. If not iterable, then print out the input
raw. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints out &quot;0\n1\n2&quot;</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">stdout</span><span class="p">()</span>
<span class="c1"># same as above, but (maybe?) more familiar</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">stdout</span><span class="p">()</span>
</pre></div>
</div>
<p>This is rarely used alone. It’s more common to use <a class="reference internal" href="#k1lib.cli.output.headOut" title="k1lib.cli.output.headOut"><code class="xref py py-meth docutils literal notranslate"><span class="pre">headOut()</span></code></a>
for list of items, and <a class="reference internal" href="#k1lib.cli.output.display" title="k1lib.cli.output.display"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display()</span></code></a> for tables.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.stdout.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#stdout.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.stdout.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.output.tee">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">tee</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">every:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#tee"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.tee" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.tee.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">every:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#tee.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.tee.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Like the Linux <code class="docutils literal notranslate"><span class="pre">tee</span></code> command, this prints the elements to another
specified stream, while yielding the elements. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints &quot;0) 0\n1) 1\n2) 2\n3) 3\n4) 4\n&quot; and returns [0, 1, 4, 9, 16]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">tee</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.modifier.consume" title="k1lib.cli.modifier.consume"><code class="xref py py-class docutils literal notranslate"><span class="pre">consume</span></code></a></p>
<p>This cli is not exactly well-thoughout and is a little janky</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – element transform function. Defaults to just adding a new
line at the end</p></li>
<li><p><strong>s</strong> – stream to write to. Defaults to <code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.stdout</span></code></p></li>
<li><p><strong>every</strong> – only prints out 1 line in <code class="docutils literal notranslate"><span class="pre">every</span></code> lines, to limit print rate</p></li>
<li><p><strong>delay</strong> – if subsequent prints are less than this number of seconds apart then don’t print them</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.tee.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#tee.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.tee.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.tee.cr">
<span class="sig-name descname"><span class="pre">cr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#tee.cr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.tee.cr" title="Permalink to this definition"></a></dt>
<dd><p>Tee, but replaces the previous line. “cr” stands for carriage return.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints &quot;4&quot; and returns [0, 1, 4, 9, 16]. Does print all the numbers in the middle, but is overriden</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">tee</span><span class="p">()</span><span class="o">.</span><span class="n">cr</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.tee.crt">
<span class="sig-name descname"><span class="pre">crt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#tee.crt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.tee.crt" title="Permalink to this definition"></a></dt>
<dd><p>Like <a class="reference internal" href="#k1lib.cli.output.tee.cr" title="k1lib.cli.output.tee.cr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tee.cr()</span></code></a>, but includes an elapsed time text at the end.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">tee</span><span class="p">()</span><span class="o">.</span><span class="n">cr</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.tee.autoInc">
<span class="sig-name descname"><span class="pre">autoInc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#tee.autoInc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.tee.autoInc" title="Permalink to this definition"></a></dt>
<dd><p>Like <a class="reference internal" href="#k1lib.cli.output.tee.crt" title="k1lib.cli.output.tee.crt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tee.crt()</span></code></a>, but instead of printing the object, just print
the current index and time</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.output.file">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.file" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.file.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#file.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.file.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Opens a new file for writing. This will iterate through
the iterator fed to it and put each element on a separate line. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># writes &quot;0\n1\n2\n&quot; to file</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/f.txt&quot;</span><span class="p">)</span>
<span class="c1"># same as above, but (maybe?) more familiar</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;text/f.txt&quot;</span><span class="p">)</span>
<span class="c1"># returns [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;]</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;folder/f.txt&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If the input is a string, then it will just put the string into the
file and does not iterate through the string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># writes &quot;some text\n123&quot; to file, default iterator mode like above</span>
<span class="p">[</span><span class="s2">&quot;some text&quot;</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/f.txt&quot;</span><span class="p">)</span>
<span class="c1"># same as above, but this is a special case when it detects you&#39;re piping in a string</span>
<span class="s2">&quot;some text</span><span class="se">\n</span><span class="s2">123&quot;</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/f.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the input is a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object or an iterator of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, then it
will open the file in binary mode and dumps the bytes in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># writes bytes to file</span>
<span class="sa">b</span><span class="s1">&#39;5643&#39;</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/a.bin&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="sa">b</span><span class="s1">&#39;56&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;43&#39;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;test/a.bin&quot;</span><span class="p">)</span>
<span class="c1"># returns [&#39;56435643&#39;]</span>
<span class="n">cat</span><span class="p">(</span><span class="s2">&quot;test/a.bin&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If the input is a <a class="reference external" href="https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.Image" title="(in Pillow (PIL Fork) v10.2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">PIL.Image.Image</span></code></a> object, then it will just save the image in
the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># creates an random image and saves it to a file</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span> <span class="o">|</span> <span class="n">toImg</span><span class="p">()</span> <span class="o">|</span> <span class="n">file</span><span class="p">(</span><span class="s2">&quot;a.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Reminder that the image pixel range is expected to be from 0 to 255. You
can create temporary files on the fly by not specifying a file name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># creates temporary file</span>
<span class="n">url</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">file</span><span class="p">()</span>
<span class="c1"># returns [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;]</span>
<span class="n">cat</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This can be especially useful when integrating with shell scripts that wants to
read in a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seq1</span> <span class="o">=</span> <span class="s2">&quot;CCAAACCCCCCCTCCCCCGCTTC&quot;</span>
<span class="n">seq2</span> <span class="o">=</span> <span class="s2">&quot;CCAAACCCCCCCCTCCCCCCGCTTC&quot;</span>
<span class="c1"># use &quot;needle&quot; program to locally align 2 sequences</span>
<span class="kc">None</span> <span class="o">|</span> <span class="n">cmd</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;needle </span><span class="si">{</span><span class="n">seq1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">file</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">seq2</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">file</span><span class="p">()</span><span class="si">}</span><span class="s2"> -filter&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also append to file with the “&gt;&gt;” operator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">file</span><span class="p">()</span>
<span class="c1"># appended to file</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">file</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="c1"># returns [&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;10&#39;, &#39;11&#39;, &#39;12&#39;]</span>
<span class="n">cat</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> – if not specified, create new temporary file and returns the url
when pipes into it</p></li>
<li><p><strong>flush</strong> – whether to flush to file immediately after every iteration</p></li>
<li><p><strong>mkdir</strong> – whether to recursively make directories going to the file location or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.file.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/output.html#file.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.file.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.output.file.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#k1lib.cli.output.file.name" title="Permalink to this definition"></a></dt>
<dd><p>File name of this <a class="reference internal" href="#k1lib.cli.output.file" title="k1lib.cli.output.file"><code class="xref py py-class docutils literal notranslate"><span class="pre">file</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.output.pretty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">pretty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#pretty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.pretty" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.pretty.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#pretty.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.pretty.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Pretty-formats a table, or a list of tables.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># These 2 statements are pretty much the same</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">pretty</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">stdout</span><span class="p">()</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span> <span class="o">|</span> <span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<p>They both print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>    <span class="mi">1</span>    <span class="mi">2</span>    <span class="mi">3</span>    <span class="mi">4</span>    <span class="mi">5</span>    <span class="mi">6</span>    <span class="mi">7</span>    <span class="mi">8</span>    <span class="mi">9</span>
<span class="mi">10</span>   <span class="mi">11</span>   <span class="mi">12</span>   <span class="mi">13</span>   <span class="mi">14</span>   <span class="mi">15</span>   <span class="mi">16</span>   <span class="mi">17</span>   <span class="mi">18</span>   <span class="mi">19</span>
</pre></div>
</div>
<p>This can also pretty-formats multiple tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)],</span> <span class="p">[[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;defff&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;1234567&quot;</span><span class="p">]]]</span> <span class="o">|</span> <span class="o">~</span><span class="n">pretty</span><span class="p">()</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">stdout</span><span class="p">()</span>
</pre></div>
</div>
<p>This will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>     <span class="mi">1</span>         <span class="mi">2</span>    <span class="mi">3</span>    <span class="mi">4</span>    <span class="mi">5</span>    <span class="mi">6</span>    <span class="mi">7</span>    <span class="mi">8</span>    <span class="mi">9</span>
<span class="mi">10</span>    <span class="mi">11</span>        <span class="mi">12</span>   <span class="mi">13</span>   <span class="mi">14</span>   <span class="mi">15</span>   <span class="mi">16</span>   <span class="mi">17</span>   <span class="mi">18</span>   <span class="mi">19</span>
<span class="n">abc</span>   <span class="n">defff</span>
<span class="mi">1</span>     <span class="mi">1234567</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>delim</strong> – delimiter between elements within a row. You might want
to set it to “|” to create an artificial border or sth</p></li>
<li><p><strong>left</strong> – whether to left or right-align each element</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.pretty.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/output.html#pretty.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.pretty.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.pretty.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#pretty.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.pretty.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.output.unpretty">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">unpretty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ncols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#unpretty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.unpretty" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.unpretty.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ncols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#unpretty.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.unpretty.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Takes in a stream of strings, assumes it’s a table, and tries to
split every line into multiple columns. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;0   1   2   &#39;, &#39;3   4   5   &#39;, &#39;6   7   8   &#39;]</span>
<span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">pretty</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;0   &#39;, &#39;1   &#39;, &#39;2   &#39;], [&#39;3   &#39;, &#39;4   &#39;, &#39;5   &#39;], [&#39;6   &#39;, &#39;7   &#39;, &#39;8   &#39;]]</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">unpretty</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This cli will take the number of columns requested and try to split into a table by analyzing
at what character column does it transition from a space to a non-space (left align), or from
a non-space to a space (right align). Then the first <code class="docutils literal notranslate"><span class="pre">ncols</span></code> most popular transitions are
selected.</p>
<p>Sometimes this is not robust enough, may be some of your columns have lots of empty elements,
then the transition counts will be skewed, making it split up at strange places. In those cases,
you can specify the headers directly, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;a   b   c    &#39;, &#39;3   5   11   &#39;, &#39;4   6   7    &#39;]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">7</span><span class="p">]]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">pretty</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[&#39;a   &#39;, &#39;b   &#39;, &#39;c    &#39;], [&#39;3   &#39;, &#39;5   &#39;, &#39;11   &#39;], [&#39;4   &#39;, &#39;6   &#39;, &#39;7    &#39;]]</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">unpretty</span><span class="p">(</span><span class="n">headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ncols</strong> – number of columns</p></li>
<li><p><strong>left</strong> – whether the data is left or right aligned</p></li>
<li><p><strong>header</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.unpretty.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#unpretty.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.unpretty.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.output.display">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">display</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#display"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.display" title="Permalink to this definition"></a></dt>
<dd><p>Convenience method for displaying a table.
Pretty much equivalent to <code class="docutils literal notranslate"><span class="pre">head()</span> <span class="pre">|</span> <span class="pre">pretty()</span> <span class="pre">|</span> <span class="pre">stdout()</span></code>.</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.output.pretty" title="k1lib.cli.output.pretty"><code class="xref py py-class docutils literal notranslate"><span class="pre">pretty</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.output.headOut">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">headOut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#headOut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.headOut" title="Permalink to this definition"></a></dt>
<dd><p>Convenience method for head() | stdout()</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.output.intercept">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">intercept</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raiseError</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#intercept"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.intercept" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.intercept.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raiseError</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#intercept.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.intercept.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Intercept flow at a particular point, analyze the object piped in using the specified
function “f”, and raises error to stop flow. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="o">|</span> <span class="n">intercept</span><span class="p">()</span>
</pre></div>
</div>
<p>This is useful to diagnose what happens inside a mess of clis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">A</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">intercept</span><span class="p">())</span>                             <span class="o">|</span> <span class="o">...</span> <span class="c1"># intercepts flow by throwing an error. Prints shape of element</span>
<span class="o">...</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">A</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">intercept</span><span class="p">(</span><span class="n">deref</span><span class="p">()))</span>                      <span class="o">|</span> <span class="o">...</span> <span class="c1"># intercepts flow by throwing an error. Prints actual element</span>
<span class="o">...</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">A</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">intercept</span><span class="p">(</span><span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">)))</span> <span class="o">|</span> <span class="o">...</span> <span class="c1"># intercepts flow by throwing an error. Prints actual element, but pretty-formatted</span>
<span class="o">...</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">A</span> <span class="o">|</span> <span class="n">B</span> <span class="o">|</span> <span class="n">intercept</span><span class="p">(</span><span class="n">deref</span><span class="p">(),</span> <span class="n">delay</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>             <span class="o">|</span> <span class="o">...</span> <span class="c1"># intercepts flow by throwing an error. Prints actual element after intercept().__ror__ has been called 3 times</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – prints out the object transformed by this function. By default it’s <a class="reference internal" href="#k1lib.cli.utils.shape" title="k1lib.cli.utils.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a></p></li>
<li><p><strong>raiseError</strong> – whether to raise error when executed or not</p></li>
<li><p><strong>delay</strong> – won’t do anything after this has been called this number of times</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.intercept.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#intercept.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.intercept.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.output.plotImgs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.output.</span></span><span class="sig-name descname"><span class="pre">plotImgs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aspect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#plotImgs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.plotImgs" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.plotImgs.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aspect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#plotImgs.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.plotImgs.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Plots a bunch of images at the same time in a table.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># plots all images</span>
<span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span> <span class="o">|</span> <span class="n">plotImgs</span><span class="p">()</span>
<span class="c1"># plots all images with titles</span>
<span class="p">[[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="s2">&quot;img 1&quot;</span><span class="p">],</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;img 2&quot;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">plotImgs</span><span class="p">()</span>
</pre></div>
</div>
<p>If you have multiple rows with different number of images, you can
plot that with this too, just set <code class="docutils literal notranslate"><span class="pre">table=True</span></code> like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">)],</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]]</span> <span class="o">|</span> <span class="n">plotImgs</span><span class="p">(</span><span class="n">table</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>There’s another cli that kinda does what this does: <a class="reference internal" href="#k1lib.cli.utils.sketch" title="k1lib.cli.utils.sketch"><code class="xref py py-class docutils literal notranslate"><span class="pre">sketch</span></code></a>. You have
more control over there, and it does roughly what this cli does, but the typical usage is
different. This is more for plotting static, throwaway list of 2d arrays, like training set
images, where as <a class="reference internal" href="#k1lib.cli.utils.sketch" title="k1lib.cli.utils.sketch"><code class="xref py py-class docutils literal notranslate"><span class="pre">sketch</span></code></a> is more about plotting results of detailed
analyses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – number of columns in the table. If explicitly None, it will turn
into the number of images fed. Not available if <code class="docutils literal notranslate"><span class="pre">table=True</span></code></p></li>
<li><p><strong>aspect</strong> – aspect ratio of each images, or ratio between width and height</p></li>
<li><p><strong>fac</strong> – figsize factor. The higher, the more resolution</p></li>
<li><p><strong>axis</strong> – whether to display the axis or not</p></li>
<li><p><strong>table</strong> – whether to plot using table mode</p></li>
<li><p><strong>im</strong> – if True, returns an image</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.output.plotImgs.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imgs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/output.html#plotImgs.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.output.plotImgs.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.sam">
<span id="sam-module"></span><h2>sam module<a class="headerlink" href="#module-k1lib.cli.sam" title="Permalink to this heading"></a></h2>
<p>This is for functions that are .sam or .bam related</p>
<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.sam.cat">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.sam.</span></span><span class="sig-name descname"><span class="pre">cat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bamFile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/sam.html#cat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.sam.cat" title="Permalink to this definition"></a></dt>
<dd><p>Get sam file outputs from bam file.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sam</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;file.bam&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">display</span><span class="p">()</span>
<span class="s2">&quot;file.bam&quot;</span> <span class="o">|</span> <span class="n">sam</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>header</strong> – whether to include headers or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.sam.header">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.sam.</span></span><span class="sig-name descname"><span class="pre">header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">long</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/sam.html#header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.sam.header" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.sam.header.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">long</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/sam.html#header.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.sam.header.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Adds a header to the table.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sam</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;file.bam&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">sam</span><span class="o">.</span><span class="n">header</span><span class="p">()</span> <span class="o">|</span> <span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<p>You can change the header labels like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">sam</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">long</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Query template name&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>long</strong> – whether to use a long descriptive header, or a short one</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.sam.header.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/sam.html#header.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.sam.header.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.sam.flag">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.sam.</span></span><span class="sig-name descname"><span class="pre">flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/sam.html#flag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.sam.flag" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.utils.bindec" title="k1lib.cli.utils.bindec"><code class="xref py py-class docutils literal notranslate"><span class="pre">bindec</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.sam.flag.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/sam.html#flag.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.sam.flag.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Decodes flags attribute.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;PAIRED&#39;, &#39;UNMAP&#39;]</span>
<span class="mi">5</span> <span class="o">|</span> <span class="n">flag</span><span class="p">()</span>
<span class="c1"># returns &#39;PAIRED, UNMAP&#39;</span>
<span class="mi">5</span> <span class="o">|</span> <span class="n">flag</span><span class="p">(</span><span class="n">cli</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>You’ll mostly use this in this format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sam</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="s2">&quot;file.bam&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">sam</span><span class="o">.</span><span class="n">flag</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<p>You can change the flag labels like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">sam</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;paired&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>f</strong> – transform function fed into <a class="reference internal" href="#k1lib.cli.utils.bindec" title="k1lib.cli.utils.bindec"><code class="xref py py-class docutils literal notranslate"><span class="pre">bindec</span></code></a>, defaulted
to <cite>join(”, “)</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.structural">
<span id="structural-module"></span><h2>structural module<a class="headerlink" href="#module-k1lib.cli.structural" title="Permalink to this heading"></a></h2>
<p>This is for functions that sort of changes the table
structure in a dramatic way. They’re the core transformations</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.joinStreamsRandom">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">joinStreamsRandom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#joinStreamsRandom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.joinStreamsRandom" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.joinStreamsRandom.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#joinStreamsRandom.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.joinStreamsRandom.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Join multiple streams randomly. If any streams runs out, then quits. If
any stream yields <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-data docutils literal notranslate"><span class="pre">yieldT</span></code></a>, then just ignores that result and
continue. Could be useful in active learning. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># could return [0, 1, 10, 2, 11, 12, 13, ...], with max length 20, typical length 18</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span> <span class="o">|</span> <span class="n">joinStreamsRandom</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="n">stream2</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">yieldT</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">yieldT</span> <span class="o">|</span> <span class="n">repeat</span><span class="p">()]</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span>
<span class="c1"># could return [-5, -4, 0, -3, 1, 2, 3, 4, 5, 6], demonstrating yieldT</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span> <span class="n">stream2</span><span class="p">]</span> <span class="o">|</span> <span class="n">joinStreamsRandom</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>By default, all streams are treated equally, and are yielded with equal probabilities.
However, you can tweak these probabilities a little bit, to your liking. This is
controlled by the parameter <code class="docutils literal notranslate"><span class="pre">alpha</span></code>:</p>
<img alt="../_images/probScale.png" src="../_images/probScale.png" />
<p>If <code class="docutils literal notranslate"><span class="pre">alpha</span></code> is 0, then all probabilities will be the same. If <code class="docutils literal notranslate"><span class="pre">alpha</span></code> is 1,
then all probabilities are proportional to the length of the input stream. The
original intention was to vary <code class="docutils literal notranslate"><span class="pre">alpha</span></code> just from 0 to 1, but it can actually
be of any number:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)]</span> <span class="o">|</span> <span class="n">joinStreamsRandom</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># returns around 21, because it favors both streams equally</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)]</span> <span class="o">|</span> <span class="n">joinStreamsRandom</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># returns around 90, because it favors the second array 9x more</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)]</span> <span class="o">|</span> <span class="n">joinStreamsRandom</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># returns 90, because it highly favors the second array</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)]</span> <span class="o">|</span> <span class="n">joinStreamsRandom</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># returns 10, because it highly favors the first array</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alpha</strong> – if not zero, does a weighted joining, instead of totally uniform probability</p></li>
<li><p><strong>ps</strong> – if specified, use these probabilities, else try to determine from the lengths of the input streams</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.joinStreamsRandom.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#joinStreamsRandom.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.joinStreamsRandom.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.transpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">transpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dim1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#transpose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.transpose" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.transpose.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dim1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#transpose.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.transpose.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Join multiple columns and loop through all rows. Aka transpose.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, 4], [2, 5], [3, 6]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1, 4], [2, 5], [3, 6], [0, 7]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Multidimensional transpose works just like <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.transpose()</span></code> too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns (2, 7, 5, 3), but detected Tensor, so it will use builtin :meth:`torch.transpose`</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># also returns (2, 7, 5, 3), but actually does every required computation. Can be slow if shape is huge</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">(</span><span class="n">igT</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
<p>Can also work with numpy arrays:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns (5, 3, 2)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<p>Be careful with infinite streams, as transposing stream of shape (inf, 5) will
hang this operation! Either don’t do it, or temporarily limit all infinite streams like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="n">inf</span><span class="o">=</span><span class="mi">21</span><span class="p">):</span>
    <span class="c1"># returns (3, 21)</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">repeat</span><span class="p">()</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
<p>Also be careful with empty streams, as you might not get any results at all:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [], as the last stream has no elements</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[]]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1, 3, 0], [2, 4, 0]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[]]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This also has an alias of <code class="docutils literal notranslate"><span class="pre">T()</span></code>, so you can make it shorter, like <code class="docutils literal notranslate"><span class="pre">np.random.randn(2,</span> <span class="pre">3,</span> <span class="pre">5)</span> <span class="pre">|</span> <span class="pre">T()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fill</strong> – if not None, then will try to zip longest with this fill value</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.transpose.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#transpose.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.transpose.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.transpose.fill">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#transpose.fill"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.transpose.fill" title="Permalink to this definition"></a></dt>
<dd><p>Convenience method to fill in missing elements of a table.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, 2, 3], [4, 5, 0]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="o">|</span> <span class="n">transpose</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># also returns [[1, 2, 3], [4, 5, 0]], demonstrating how it works underneath</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.transpose.wrap">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#transpose.wrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.transpose.wrap" title="Permalink to this definition"></a></dt>
<dd><p>Wraps <code class="docutils literal notranslate"><span class="pre">f</span></code> around 2 <a class="reference internal" href="#k1lib.cli.structural.transpose" title="k1lib.cli.structural.transpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">transpose</span></code></a>, can be useful in combination with
<a class="reference internal" href="#k1lib.cli.init.mtmS" title="k1lib.cli.init.mtmS"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.cli.init.mtmS</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, 4, 3, 4], [8, 81, 10, 11]]</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">)]</span> <span class="o">|</span> <span class="n">transpose</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">mtmS</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># also returns [[1, 4, 3, 4], [8, 81, 10, 11]], demonstrating the typical way to do this</span>
<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">)]</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>The example given is sort of to demonstrate this only. Most of the time, just use
<a class="reference internal" href="#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a> with columns instead. But sometimes you need direct
access to a column, so this is how you can do it.</p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.structural.T">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">T</span></span><a class="headerlink" href="#k1lib.cli.structural.T" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.structural.transpose" title="k1lib.cli.structural.transpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">transpose</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.reshape">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">reshape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">dims</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#reshape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.reshape" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.reshape.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">dims</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#reshape.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.reshape.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Reshapes the input stream into the desired shape.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, 1, 2], [3, 4, 5]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1], [2, 3], [4, 5]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1], [2, 3], [4, 5]], stopped early</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1, 2], [3, 4, 5]], can leave out first dimension</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1, 2]], won&#39;t include 2nd element, as it ran out of elements</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># throws error, as it ran out of elements and can&#39;t fulfill the request</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Unlike <code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.reshape()</span></code>, the input piped into this has to be a simple iterator.
If you have a complex data structure with multiple dimensions, turn that into a simple
iterator with <a class="reference internal" href="#k1lib.cli.structural.joinStreams" title="k1lib.cli.structural.joinStreams"><code class="xref py py-class docutils literal notranslate"><span class="pre">joinStreams</span></code></a> first, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[[0, 1, 2]], [[3, 4, 5]]]</span>
<span class="p">[[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">]]]</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.reshape.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#reshape.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.reshape.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.insert">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insert" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.insert.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insert.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insert.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Join element into list.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [5, 2, 6, 8]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span> <span class="o">|</span> <span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [2, 6, 8, 5]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span> <span class="o">|</span> <span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">begin</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># returns [[3, 1], 2, 6, 8]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span> <span class="o">|</span> <span class="n">insert</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>element</strong> – the element to insert</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.insert.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insert.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insert.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.splitW">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">splitW</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">weights</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#splitW"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.splitW" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.splitW.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">weights</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#splitW.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.splitW.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Splits elements into multiple weighted lists. If no weights are provided,
then automatically defaults to [0.8, 0.2]. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, 1, 2, 3, 4, 5, 6, 7], [8, 9]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">splitW</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># same as the above</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">splitW</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This also works with array types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">splitW</span><span class="p">()</span> <span class="c1"># returns 2 tensors with shapes (80, 3) and (20, 3)</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.structural.splitC" title="k1lib.cli.structural.splitC"><code class="xref py py-class docutils literal notranslate"><span class="pre">splitC</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.splitW.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#splitW.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.splitW.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.splitC">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">splitC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">checkpoints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#splitC"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.splitC" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.splitC.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">checkpoints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#splitC.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.splitC.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Splits elements into multiple checkpoint-delimited lists.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, 1], [2, 3, 4], [5, 6, 7, 8, 9]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">splitC</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [&#39;01&#39;, &#39;234&#39;, &#39;56789&#39;]</span>
<span class="s2">&quot;0123456789&quot;</span> <span class="o">|</span> <span class="n">splitC</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Here, you’re specifying 2 checkpoints, 2 and 5, so it will split
the list up into 3 sections. First section is 0-2, second section
is 2-5, third section is 5-end. You can pass in fractional
checkpoints too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, 1], [2, 3, 4, 5], [6, 7, 8, 9]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">splitC</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This cli might be unintuitive to remember, so if you want to just
split it up into 2 parts, check out <a class="reference internal" href="#k1lib.cli.filt.head.split" title="k1lib.cli.filt.head.split"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split()</span></code></a>.</p>
<p>If you want to split things up by weighted length, check
out <a class="reference internal" href="#k1lib.cli.structural.splitW" title="k1lib.cli.structural.splitW"><code class="xref py py-class docutils literal notranslate"><span class="pre">splitW</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.splitC.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#splitC.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.splitC.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.joinStreams">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">joinStreams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#joinStreams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.joinStreams" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.joinStreams.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#joinStreams.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.joinStreams.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Joins multiple streams.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [1, 2, 3, 4, 5]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1], [2], [3, 4, 5], [6, 7, 8], [], [9, 10]]</span>
<span class="p">[[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]]]</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>
<span class="p">[[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]]]</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If you pass in <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> or <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a>, then it will
automatically use the C-accelerated version, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns Tensor with shape (6, 4)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span>
<span class="c1"># returns array with shape (6, 4)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span>
</pre></div>
</div>
<p>Sometimes, you may want to impose some dimensional structure after joining all streams
together, which <a class="reference internal" href="#k1lib.cli.structural.reshape" title="k1lib.cli.structural.reshape"><code class="xref py py-class docutils literal notranslate"><span class="pre">reshape</span></code></a> does.</p>
<p>If “joinStreams” is too unintuitive to remember, there’s also an alias called
<a class="reference internal" href="#k1lib.cli.structural.joinSt" title="k1lib.cli.structural.joinSt"><code class="xref py py-class docutils literal notranslate"><span class="pre">joinSt</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dims</strong> – how many <code class="docutils literal notranslate"><span class="pre">joinStreams()</span></code> do you want to do consecutively?</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.joinStreams.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#joinStreams.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.joinStreams.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.structural.joinSt">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">joinSt</span></span><a class="headerlink" href="#k1lib.cli.structural.joinSt" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.structural.joinStreams" title="k1lib.cli.structural.joinStreams"><code class="xref py py-class docutils literal notranslate"><span class="pre">joinStreams</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.activeSamples">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">activeSamples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.95</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#activeSamples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.activeSamples" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.activeSamples.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.95</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#activeSamples.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.activeSamples.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Yields active learning samples.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="n">activeSamples</span><span class="p">()</span>
<span class="n">ds</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># normal dataset</span>
<span class="n">ds</span> <span class="o">=</span> <span class="p">[</span><span class="n">o</span><span class="p">,</span> <span class="n">ds</span><span class="p">]</span> <span class="o">|</span> <span class="n">joinStreamsRandom</span><span class="p">()</span> <span class="c1"># dataset with active learning capability</span>
<span class="nb">next</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="c1"># returns 0</span>
<span class="nb">next</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="c1"># returns 1</span>
<span class="nb">next</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="c1"># returns 2</span>
<span class="n">o</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="nb">next</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="c1"># can return     3     or 20</span>
<span class="nb">next</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="c1"># can return (4 or 20) or 4</span>
</pre></div>
</div>
<p>So the point of this is to be a generator of samples. You can define your dataset
as a mix of active learning samples and standard samples. Whenever there’s a data
point that you want to focus on, you can add it to <code class="docutils literal notranslate"><span class="pre">o</span></code> and it will eventially yield
it.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It might not be a good idea to set param <code class="docutils literal notranslate"><span class="pre">limit</span></code> to higher numbers than
100. This is because, the network might still not understand a wrong sample
after being shown multiple times, and will keep adding that wrong sample
back in, distracting it from other samples, and reduce network’s accuracy
after removing active learning from it.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">limit</span></code> is low enough (from my testing, 30-100 should be fine), then
old wrong samples will be kicked out, allowing for a fresh stream of wrong
samples coming in, and preventing the problem above. If you found that
removing active learning makes the accuracy drops dramatically, then try
decreasing the limit.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>limit</strong> – max number of active samples. Discards samples if number of samples
is over this.</p></li>
<li><p><strong>p</strong> – probability of actually adding the samples in</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.activeSamples.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#activeSamples.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.activeSamples.append" title="Permalink to this definition"></a></dt>
<dd><p>Adds 1 sample.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.activeSamples.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#activeSamples.extend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.activeSamples.extend" title="Permalink to this definition"></a></dt>
<dd><p>Adds multiple samples.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.structural.table">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.table" title="Permalink to this definition"></a></dt>
<dd><p>Basically <code class="docutils literal notranslate"><span class="pre">op().split(delim).all()</span></code>. This exists because this is used
quite a lot in bioinformatics. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;a&#39;, &#39;bd&#39;], [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]]</span>
<span class="p">[</span><span class="s2">&quot;a|bd&quot;</span><span class="p">,</span> <span class="s2">&quot;1|2|3&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">table</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.batched">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">batched</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">includeLast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#batched"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.batched" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.batched.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">includeLast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#batched.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.batched.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Batches the input stream.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, 1, 2], [3, 4, 5], [6, 7, 8]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1, 2], [3, 4, 5], [6, 7, 8], [9, 10]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1, 2, 3, 4]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns []</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">),</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># returns [[0, 1, 2, 3], [3, 4, 5, 6], [6, 7, 8, 9]], includes the first element of the next batch!</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">incl</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1, 2, 3], [3, 4, 5, 6], [6, 7, 8, 9], [9, 10]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">incl</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Can work well and fast with <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> and <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># both returns torch.Tensor of shape (2, 3, 4, 5)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Also, if input is a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a>, then to save time, a bunch of other
ranges will be returned, instead of a bunch of lists, for performance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [range(0, 3), range(3, 6), range(6, 9)]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.structural.window" title="k1lib.cli.structural.window"><code class="xref py py-class docutils literal notranslate"><span class="pre">window</span></code></a>, <a class="reference internal" href="#k1lib.cli.structural.batchedTrigger" title="k1lib.cli.structural.batchedTrigger"><code class="xref py py-class docutils literal notranslate"><span class="pre">batchedTrigger</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bs</strong> – batch size</p></li>
<li><p><strong>includeLast</strong> – whether to include the last incomplete batch or not</p></li>
<li><p><strong>incl</strong> – whether to have inclusive bounds or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.batched.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#batched.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.batched.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.batchedTrigger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">batchedTrigger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#batchedTrigger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.batchedTrigger" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.batchedTrigger.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#batchedTrigger.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.batchedTrigger.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Like <a class="reference internal" href="#k1lib.cli.structural.batched" title="k1lib.cli.structural.batched"><code class="xref py py-class docutils literal notranslate"><span class="pre">batched</span></code></a>, will batch rows/elements up but based on
a trigger value instead. See <a class="reference internal" href="#k1lib.cli.filt.trigger" title="k1lib.cli.filt.trigger"><code class="xref py py-class docutils literal notranslate"><span class="pre">trigger</span></code></a> for more
discussion. Normal mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">]]</span>
<span class="c1"># returns [[1, 1], [2], [3, 3], [1]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="n">batchedTrigger</span><span class="p">()</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># throws error, does not make sense to invert search. Can only invert if .value is specified</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">batchedTrigger</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[[1, &#39;a&#39;], [1, &#39;b&#39;]], [[2, &#39;c&#39;]], [[3, &#39;d&#39;], [3, &#39;e&#39;]], [[1, &#39;f&#39;]]]</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">batchedTrigger</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>In this mode, elements of the specified column that have the same value consecutively
will be grouped together into a batch. Note the difference between this and <a class="reference internal" href="#k1lib.cli.structural.groupBy" title="k1lib.cli.structural.groupBy"><code class="xref py py-class docutils literal notranslate"><span class="pre">groupBy</span></code></a>.
Specific-value mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, 1], [1]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="n">batchedTrigger</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[2], [3, 3]], essentially only yield the batches that don&#39;t match the specified value</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="o">~</span><span class="n">batchedTrigger</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[[1, &#39;a&#39;], [1, &#39;b&#39;]], [[1, &#39;f&#39;]]]</span>
<span class="n">data</span> <span class="o">|</span> <span class="n">batchedTrigger</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This mode is pretty much the same as previously, but will only return
the batches whose specified columns match (or not match) a specific value.
Finally, the delta mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, 1.1, 1.2], [2], [3], [3.55, 3.8, 3.9, 4.1], [6], [10]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">3.55</span><span class="p">,</span> <span class="mf">3.8</span><span class="p">,</span> <span class="mf">3.9</span><span class="p">,</span> <span class="mf">4.1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span> <span class="o">|</span> <span class="n">batchedTrigger</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1, 1.1, 1.2], [2], [3], [3.55, 3.8, 3.9], [4.1], [6], [10]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">3.55</span><span class="p">,</span> <span class="mf">3.8</span><span class="p">,</span> <span class="mf">3.9</span><span class="p">,</span> <span class="mf">4.1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span> <span class="o">|</span> <span class="n">batchedTrigger</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">adj</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># .col also works here, but it&#39;s too long to fit here</span>
</pre></div>
</div>
<p>In contrast to the previous 2 modes, this does not rely on exact values. Instead,
2 consecutive elements are considered to be in the same batch if their difference
is less than the provided <code class="docutils literal notranslate"><span class="pre">delta</span></code> value. Within delta mode, there’s the parameter
.adj as well. If this is true, then it will measure the delta between the last (3.9)
and current element (4.1), while if .adj=False, then it will measure the delta between
the first element in the group (3.55) and the current element (4.1, which exceeds
delta, which splits into a new batched).</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.filt.trigger" title="k1lib.cli.filt.trigger"><code class="xref py py-class docutils literal notranslate"><span class="pre">trigger</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column of the trigger value. Can be None, int, or list[int]</p></li>
<li><p><strong>value</strong> – if trigger value equals to this, then yields the batch</p></li>
<li><p><strong>delta</strong> – if trigger value changes more than this, then yields the batch</p></li>
<li><p><strong>adj</strong> – “adjacent”, only makes sense if <code class="docutils literal notranslate"><span class="pre">delta</span> <span class="pre">!=</span> <span class="pre">None</span></code>. See example above</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.batchedTrigger.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#batchedTrigger.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.batchedTrigger.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.batchedTrigger.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#batchedTrigger.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.batchedTrigger.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.window">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newList=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad=&lt;object</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#window"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.window" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.window.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newList=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad=&lt;object</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#window.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.window.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Slides window of size n forward and yields the windows.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, 1, 2], [1, 2, 3], [2, 3, 4]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">window</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, 1, 2], [1, 2, 3], [2, 3, 4], [3, 4, None], [4, None, None]]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">window</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If you are doing strange transformations to the result, like
transposing it, then it might complain that the internal deque
(double-ended queue) mutated during iteration. In that case,
then set <code class="docutils literal notranslate"><span class="pre">newList</span></code> to True. It’s not True by default because
multiple lists will be created, all of which needs memory
allocation, which will be slower:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># takes 15ms</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span> <span class="o">|</span> <span class="n">window</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
<span class="c1"># takes 48ms, because of allocating lists</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span> <span class="o">|</span> <span class="n">window</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.cli.structural.batched" title="k1lib.cli.structural.batched"><code class="xref py py-class docutils literal notranslate"><span class="pre">batched</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – size of the window</p></li>
<li><p><strong>newList</strong> – whether to create a new list out of every window or
not. If False (default), less robust but faster. If True, more
robust but slower</p></li>
<li><p><strong>pad</strong> – whether to pad the output stream on the end, so that it
has the same number of elements as the input stream or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.window.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#window.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.window.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.groupBy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">groupBy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">separate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#groupBy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.groupBy" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.groupBy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">separate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">removeCol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#groupBy.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.groupBy.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Groups table by some column.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">2.3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
     <span class="p">[</span><span class="mf">3.4</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
     <span class="p">[</span><span class="mf">4.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
     <span class="p">[</span><span class="mf">5.6</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
     <span class="p">[</span><span class="mf">6.7</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">groupBy</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[[</span><span class="mf">6.7</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
 <span class="p">[[</span><span class="mf">3.4</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
 <span class="p">[[</span><span class="mf">2.3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mf">5.6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]]</span>
</pre></div>
</div>
<p>Should have O(n log(n)) time complexity. What if <code class="docutils literal notranslate"><span class="pre">separate</span></code> is True:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">|</span> <span class="n">groupBy</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[[</span><span class="mf">6.7</span><span class="p">]]],</span>
 <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[[</span><span class="mf">3.4</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.5</span><span class="p">]]],</span>
 <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[[</span><span class="mf">2.3</span><span class="p">],</span> <span class="p">[</span><span class="mf">5.6</span><span class="p">]]]]</span>
</pre></div>
</div>
<p>What if <code class="docutils literal notranslate"><span class="pre">removeCol</span></code> is False:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">|</span> <span class="n">groupBy</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[[</span><span class="mf">6.7</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]],</span>
 <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[[</span><span class="mf">3.4</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]],</span>
 <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[[</span><span class="mf">2.3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mf">5.6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]]]</span>
</pre></div>
</div>
<p>There’s another perspective and way to think about this operation. A lot of
libraries (like pandas) expect the uncompressed, “flat” version (the variable
<code class="docutils literal notranslate"><span class="pre">a</span></code> in the examples above). But throughout my time using cli, the grouped
version (separate=True) is usually much more useful and amenable to
transformations. It also occupies less memory too, as the columns with duplicated
elements are deleted.</p>
<p>So, you can sort of think <a class="reference internal" href="#k1lib.cli.structural.groupBy" title="k1lib.cli.structural.groupBy"><code class="xref py py-class docutils literal notranslate"><span class="pre">groupBy</span></code></a> is converting pandas dataframes
into a more easily digestible form. But because the prevalence of those libraries,
after doing all the transformations you want, sometimes it’s necessary to flatten
it again, which <a class="reference internal" href="#k1lib.cli.structural.ungroup" title="k1lib.cli.structural.ungroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ungroup</span></code></a> does.</p>
<p>If you want to group text lines by some pattern im them, <a class="reference internal" href="#k1lib.cli.grep.grep" title="k1lib.cli.grep.grep"><code class="xref py py-class docutils literal notranslate"><span class="pre">grep</span></code></a>
with <code class="docutils literal notranslate"><span class="pre">sep=True</span></code> might be better for you.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> – which column to group by</p></li>
<li><p><strong>separate</strong> – whether to separate out the column to sort of form a dict or not. See example</p></li>
<li><p><strong>removeCol</strong> – whether to remove the grouped-by column. Defaults to True if
<code class="docutils literal notranslate"><span class="pre">separate=True</span></code>, and False if <code class="docutils literal notranslate"><span class="pre">separate=False</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.groupBy.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#groupBy.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.groupBy.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.ungroup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">ungroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">single</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insertCol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#ungroup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.ungroup" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.ungroup.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">single</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insertCol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#ungroup.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.ungroup.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Ungroups things that were grouped using a specific mode of
<a class="reference internal" href="#k1lib.cli.structural.groupBy" title="k1lib.cli.structural.groupBy"><code class="xref py py-class docutils literal notranslate"><span class="pre">groupBy</span></code></a>. Particularly useful to transform some complex data
structure into a flat dataframe so that you can plug into pandas. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[3, 1.2], [3, 3.4], [5, 6], [5, 8], [5, 11]]</span>
<span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">]],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">]]]</span> <span class="o">|</span> <span class="n">ungroup</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[3, 1.2], [3, 3.4], [5, 6], [5, 8], [5, 11]]</span>
<span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[[</span><span class="mf">1.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.4</span><span class="p">]]],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[[</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">11</span><span class="p">]]]]</span> <span class="o">|</span> <span class="n">ungroup</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1.2, 3], [3.4, 3], [6, 5], [8, 5], [11, 5]]</span>
<span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">]],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">]]]</span> <span class="o">|</span> <span class="n">ungroup</span><span class="p">(</span><span class="n">begin</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>single</strong> – whether the table in each group has a single column or not</p></li>
<li><p><strong>begin</strong> – whether to insert the column at the beginning or at the end.
Only works if <code class="docutils literal notranslate"><span class="pre">insertCol</span></code> is True</p></li>
<li><p><strong>insertCol</strong> – whether to insert the column into the table or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.ungroup.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#ungroup.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.ungroup.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.insertColumn">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">insertColumn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insertColumn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insertColumn" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.insertColumn.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insertColumn.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insertColumn.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Inserts a column at beginning or end.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;a&#39;, 1, 2], [&#39;b&#39;, 3, 4]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span> <span class="o">|</span> <span class="n">insertColumn</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1, 2, &#39;a&#39;], [3, 4, &#39;b&#39;]]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span> <span class="o">|</span> <span class="n">insertColumn</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">begin</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.insertColumn.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insertColumn.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insertColumn.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.insertIdColumn">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">insertIdColumn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insertIdColumn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insertIdColumn" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.insertIdColumn.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insertIdColumn.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insertIdColumn.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Inserts an id column at the beginning (or end).
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, &#39;a&#39;, 2], [1, &#39;b&#39;, 4]]</span>
<span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span> <span class="o">|</span> <span class="n">insertIdColumn</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[0, &#39;a&#39;], [1, &#39;b&#39;]]</span>
<span class="s2">&quot;ab&quot;</span> <span class="o">|</span> <span class="n">insertIdColumn</span><span class="p">()</span>
</pre></div>
</div>
<p>This has a shorter alias called <a class="reference internal" href="#k1lib.cli.structural.insId" title="k1lib.cli.structural.insId"><code class="xref py py-class docutils literal notranslate"><span class="pre">insId</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>table</strong> – if False, then insert column to an Iterator[str], else treat
input as a full fledged table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.insertIdColumn.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#insertIdColumn.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.insertIdColumn.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.structural.insId">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">insId</span></span><a class="headerlink" href="#k1lib.cli.structural.insId" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.structural.insertIdColumn" title="k1lib.cli.structural.insertIdColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">insertIdColumn</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.structural.unsqueeze">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">unsqueeze</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#unsqueeze"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.unsqueeze" title="Permalink to this definition"></a></dt>
<dd><p>Unsqueeze input iterator.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="c1"># returns (3, 2)</span>
<span class="n">t</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (1, 3, 2)</span>
<span class="n">t</span> <span class="o">|</span> <span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (3, 1, 2)</span>
<span class="n">t</span> <span class="o">|</span> <span class="n">unsqueeze</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (3, 2, 1)</span>
<span class="n">t</span> <span class="o">|</span> <span class="n">unsqueeze</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
<p>Behind the scenes, it’s really just <code class="docutils literal notranslate"><span class="pre">wrapList().all(dim)</span></code>, but the “unsqueeze” name
is a lot more familiar. Also note that the inverse operation “squeeze” is sort of
<code class="docutils literal notranslate"><span class="pre">item().all(dim)</span></code>, if you’re sure that this is desirable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="c1"># returns (3, 2)</span>
<span class="n">t</span> <span class="o">|</span> <span class="n">unsqueeze</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.count">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.count" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.count.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#count.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.count.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Finds unique elements and returns a table with [frequency, value, percent]
columns. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, &#39;a&#39;, &#39;33%&#39;], [2, &#39;b&#39;, &#39;67%&#39;]]</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">|</span> <span class="n">count</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1, &#39;a&#39;, &#39;50%&#39;], [2, &#39;b&#39;, &#39;100%&#39;]]</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">|</span> <span class="n">count</span><span class="p">(</span><span class="nb">max</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max</strong> – if True, percentages are of the max value, else they’re of the sum</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.count.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#count.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.count.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.count.join">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#count.join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.count.join" title="Permalink to this definition"></a></dt>
<dd><p>Joins multiple counts together.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[2, &#39;a&#39;, &#39;33%&#39;], [4, &#39;b&#39;, &#39;67%&#39;]]</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">|</span> <span class="n">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="n">count</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span> <span class="o">|</span> <span class="n">count</span><span class="o">.</span><span class="n">join</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This is useful when you want to get the count of a really long list/iterator using multiple cores</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.hist">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">hist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropZero</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#hist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.hist" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.hist.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropZero</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#hist.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.hist.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Bins a long 1d array. Effectively creating a historgram, without
actually plotting it. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">|</span> <span class="n">hist</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>That returns something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.31449761</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.17406889</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03364017</span><span class="p">,</span>  <span class="mf">1.10678854</span><span class="p">,</span>  <span class="mf">2.24721726</span><span class="p">]),</span>
 <span class="n">array</span><span class="p">([</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">207</span><span class="p">,</span> <span class="mi">432</span><span class="p">,</span> <span class="mi">265</span><span class="p">,</span>  <span class="mi">55</span><span class="p">]),</span>
 <span class="mf">1.1404287156493986</span><span class="p">)</span>
</pre></div>
</div>
<p>This format goes with <code class="xref py py-meth docutils literal notranslate"><span class="pre">bar()</span></code> directly like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">|</span> <span class="n">hist</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span>
</pre></div>
</div>
<p>If you have tons of data that’s handled in multiple processes, but you want to
get an overall histogram, you can do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad solution, runs slow, accurate</span>
<span class="n">fileNames</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">toFloat</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">hist</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span>
<span class="c1"># good solution, runs fast, slightly inaccurate</span>
<span class="n">fileNames</span> <span class="o">|</span> <span class="n">applyMp</span><span class="p">(</span><span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">toFloat</span><span class="p">()</span> <span class="o">|</span> <span class="n">hist</span><span class="p">(</span><span class="mi">300</span><span class="p">))</span> <span class="o">|</span> <span class="n">hist</span><span class="o">.</span><span class="n">join</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s say in each process, you have 10M records, and that you have 1000 processes in total.
In the first solution, you transfer all records (10B records total) to a single process,
then calculate the histogram of them. The transfer overhead is going to be absolutely
enourmous, as well as the computation. This really defeats the purpose of doing
multiprocessing.</p>
<p>In the second solution, you “convert” 10M records into 600 numbers for each process,
which scales up to 600k numbers for all processes. Although big, but certainly
manageable with current hardware. So the data transfer cost is not a lot at all. The
histogram merging part also executes relatively fast, as it only creates an internal
array of 3M length. See over <a class="reference internal" href="#k1lib.cli.structural.hist.join" title="k1lib.cli.structural.hist.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">hist.join()</span></code></a> for param details</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bins</strong> – how many bins should the histogram has?</p></li>
<li><p><strong>dropZero</strong> – if True, will eliminate buckets that has no element in them</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.hist.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#hist.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.hist.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.hist.join">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlog</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#hist.join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.hist.join" title="Permalink to this definition"></a></dt>
<dd><p>Joins multiple histograms together.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">hist</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span> <span class="c1"># ---------------------------------- Ground truth</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">hist</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">hist</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">1e4</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span> <span class="c1"># ------------------ Log joining</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">hist</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">hist</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">1e4</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="c1"># -- Linear joining</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Ground truth&quot;</span><span class="p">,</span> <span class="s2">&quot;Log&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">]);</span> <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This results in this:</p>
<img alt="../_images/hist1.png" src="../_images/hist1.png" />
<p>As you can see, this process is only approximate, but is accurate enough in everyday
use. If you are a normal user, then this is probably enough. However, if you’re a
mathematician and really care about the accuracy of this, read on.</p>
<div class="admonition-performance-vs-accuracy admonition">
<p class="admonition-title">Performance vs accuracy</p>
<p>As mentioned in <a class="reference internal" href="#k1lib.cli.structural.hist" title="k1lib.cli.structural.hist"><code class="xref py py-class docutils literal notranslate"><span class="pre">hist</span></code></a>, joining histograms from across processes can really speed
things up big time. But the joining process is complicated, with multiple parameters
and different tradeoffs for each config. In this example, scale = 1e4, bins = 30,
OG bins = 300, log = True. “OG bins” is the number of bins coming into <a class="reference internal" href="#k1lib.cli.structural.hist.join" title="k1lib.cli.structural.hist.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">hist.join()</span></code></a></p>
<p>To get the best accuracy possible, you should set scale and OG bins high. If better
performance is desired, you should first lower scale, then lower OG bins, then finally lower
bins.</p>
</div>
<div class="admonition-log-scale admonition">
<p class="admonition-title">Log scale</p>
<p>Take a look at this piece of code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3000000</span><span class="p">)</span><span class="o">*</span><span class="mf">0.3</span><span class="o">+</span><span class="mi">3</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">joinStreams</span><span class="p">()</span> <span class="o">|</span> <span class="n">hist</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">hist</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">hist</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">1e4</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">hist</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">hist</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">1e4</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Ground truth&quot;</span><span class="p">,</span> <span class="s2">&quot;Log&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">]);</span> <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This results in:</p>
<img alt="../_images/hist2.png" src="../_images/hist2.png" />
<p>This shows how log mode is generally better than linear mode when the frequencies span
across multiple orders of magnitude. So why not delete linear mode directly? Well, I have
not formally proved that log scale case fully covers the linear case, although in practice
it seems so. So just to be cautious, let’s leave it in</p>
</div>
<div class="admonition-scale admonition">
<p class="admonition-title">Scale</p>
<p>The setup is just like in the “Log scale” section, but with scale = 1e3 instead of the default 1e4:</p>
<img alt="../_images/hist3.png" src="../_images/hist3.png" />
<p>Remember that the higher the scale, the more accurate, but also the longer it runs. If
the difference in high and low frequencies are bigger than scale, then the low
frequency values are dropped.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale</strong> – how big a range of frequencies do we want to capture?</p></li>
<li><p><strong>bins</strong> – output bins. If not specified automatically defaults to 1/10 the
original number of bins</p></li>
<li><p><strong>log</strong> – whether to transform everything to log scale internally on the y axis</p></li>
<li><p><strong>xlog</strong> – whether to transform everything to log scale internally on the x axis</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.permute">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">permute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">permutations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#permute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.permute" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.permute.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">permutations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#permute.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.permute.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Permutes the columns. Acts kinda like <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.Tensor.permute.html#torch.Tensor.permute" title="(in PyTorch v2.2)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">torch.Tensor.permute()</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[&#39;b&#39;, &#39;a&#39;], [&#39;d&#39;, &#39;c&#39;]]</span>
<span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;cd&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">permute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.permute.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#permute.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.permute.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.AA_">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">AA_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">idxs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wraps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#AA_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.AA_" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.AA_.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">idxs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wraps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#AA_.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.AA_.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Returns 2 streams, one that has the selected element, and the other
the rest. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [5, [1, 6, 3, 7]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="o">|</span> <span class="n">AA_</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># returns [[5, [1, 6, 3, 7]]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="o">|</span> <span class="n">AA_</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">wraps</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also put multiple indexes through:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, [5, 6]], [6, [1, 5]]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="o">|</span> <span class="n">AA_</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>If you don’t specify anything, then all indexes will be sliced:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, [5, 6]], [5, [1, 6]], [6, [1, 5]]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="o">|</span> <span class="n">AA_</span><span class="p">()</span>
</pre></div>
</div>
<p>As for why the strange name, think of this operation as “AĀ”. In statistics,
say you have a set “A”, then “not A” is commonly written as A with an overline
“Ā”. So “AA_” represents “AĀ”, and that it first returns the selection A.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>wraps</strong> – if True, then the first example will return [[5, [1, 6, 3, 7]]]
instead, so that A has the same signature as Ā</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.AA_.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#AA_.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.AA_.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.peek">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">peek</span></span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#peek"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.peek" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.peek.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#peek.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.peek.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Returns (firstRow, iterator). This sort of peaks at the first row,
to potentially gain some insights about the internal formats. The returned
iterator is not tampered. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span><span class="p">,</span> <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span> <span class="o">|</span> <span class="n">peek</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="c1"># prints &quot;[1, 2, 3]&quot;</span>
<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span> <span class="n">s</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c1"># prints &quot;5&quot;, or length of 2 lists</span>
</pre></div>
</div>
<p>You kinda have to be careful about handling the <code class="docutils literal notranslate"><span class="pre">firstRow</span></code>, because you might
inadvertently alter the iterator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span><span class="p">,</span> <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">([</span><span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span> <span class="o">|</span> <span class="n">peek</span><span class="p">()</span>
<span class="n">e</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="c1"># e is [0, 1, 2]</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">))</span> <span class="c1"># supposed to be the same as `e`, but is [] instead</span>
</pre></div>
</div>
<p>The example happens because you have already consumed all elements of the first
row, and thus there aren’t any left when you try to call <code class="docutils literal notranslate"><span class="pre">next(it)</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.peek.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#peek.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.peek.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.peekF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">peekF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#peekF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.peekF" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.peekF.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#peekF.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.peekF.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Similar to <a class="reference internal" href="#k1lib.cli.structural.peek" title="k1lib.cli.structural.peek"><code class="xref py py-class docutils literal notranslate"><span class="pre">peek</span></code></a>, but will execute <code class="docutils literal notranslate"><span class="pre">f(row)</span></code> and
return the input Iterator, which is not tampered. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="nb">iter</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="c1"># prints &quot;[1, 2, 3]&quot; and returns [[1, 2, 3], [1, 2]]</span>
<span class="n">it</span><span class="p">()</span> <span class="o">|</span> <span class="n">peekF</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># prints &quot;1\n2\n3&quot;</span>
<span class="n">it</span><span class="p">()</span> <span class="o">|</span> <span class="n">peekF</span><span class="p">(</span><span class="n">headOut</span><span class="p">())</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.peekF.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#peekF.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.peekF.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.repeat">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">repeat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#repeat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.repeat" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.repeat.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#repeat.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.repeat.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Yields a specified amount of the passed in object. If you intend
to pass in an iterator, then make a list out of it first, as second copy of
iterator probably won’t work as you will have used it the first time. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[1, 2, 3], [1, 2, 3], [1, 2, 3]]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">repeat</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">limit</span></code> is not specified, then this will repeat indefinitely, which may or may
not cause a problem downstream. It could be that some downstream operators want to
get the full view of all elements in the input iterator, but because it’s an infinite
iterator, it will never complete executing and get the full view that it wants:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">|</span>  <span class="n">repeat</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>  <span class="o">|</span> <span class="n">headOut</span><span class="p">()</span> <span class="c1"># will hang indefinitely, fill RAM up and crash after a while</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">repeat</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span> <span class="o">|</span> <span class="n">headOut</span><span class="p">()</span> <span class="c1"># will not hang, and actually print out the first 10 lines, each line is &quot;[1, 2]&quot;</span>
</pre></div>
</div>
<p>The solution is to just make a group that starts with <code class="docutils literal notranslate"><span class="pre">repeat()</span></code>. Then <code class="docutils literal notranslate"><span class="pre">repeat()</span></code>
can capture all downstream operations, and actually batch up the infinite iterator,
pass each batch into the downstream operations, and merge the results together. The
batch size can be controlled by <code class="docutils literal notranslate"><span class="pre">settings.cli.repeat.infBs</span> <span class="pre">=</span> <span class="pre">200</span></code> if you need it
for some reason.</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.structural.repeatF" title="k1lib.cli.structural.repeatF"><code class="xref py py-meth docutils literal notranslate"><span class="pre">repeatF()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>repeat</strong> – if None, then repeats indefinitely</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.repeat.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#repeat.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.repeat.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.structural.repeatF">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">repeatF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#repeatF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.repeatF" title="Permalink to this definition"></a></dt>
<dd><p>Yields a specified amount generated by a specified function.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repeatF</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>          <span class="c1"># returns [4, 4, 4]</span>
<span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">repeatF</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [4, 4, 4]</span>
<span class="n">repeatF</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># returns 10</span>

<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="mi">2</span>
<span class="n">repeatF</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>        <span class="c1"># returns [8, 8, 8]</span>
<span class="n">f</span> <span class="o">|</span> <span class="n">repeatF</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [8, 8, 8]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#k1lib.cli.structural.repeat" title="k1lib.cli.structural.repeat"><code class="xref py py-class docutils literal notranslate"><span class="pre">repeat</span></code></a> for a discussion on how to deal with infinite iterators.
If you want to do something like that, then you have to pipe in f instead of
specifying f in the params directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – function to repeat. If None, then you can pipe the function in</p></li>
<li><p><strong>limit</strong> – if None, then repeats indefinitely</p></li>
<li><p><strong>kwargs</strong> – extra keyword arguments that you can pass into the function</p></li>
</ul>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#k1lib.cli.structural.repeatFrom" title="k1lib.cli.structural.repeatFrom"><code class="xref py py-class docutils literal notranslate"><span class="pre">repeatFrom</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.repeatFrom">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">repeatFrom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#repeatFrom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.repeatFrom" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.repeatFrom.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#repeatFrom.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.repeatFrom.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Yields from a list. If runs out of elements, then do it again for
<code class="docutils literal notranslate"><span class="pre">limit</span></code> times. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [1, 2, 3, 1, 2]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">repeatFrom</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [1, 2, 3, 1, 2, 3]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">repeatFrom</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#k1lib.cli.structural.repeat" title="k1lib.cli.structural.repeat"><code class="xref py py-class docutils literal notranslate"><span class="pre">repeat</span></code></a> for a discussion on how to deal with infinite iterators</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For advanced users who wants to modify the resulting stream mid-way, read this section</p>
<p>Because this reuses elements inside the input iterator, it’s necessary
that the input feels like a list and not an iterator. So in order to make
this work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [1, 2, 3, 1, 2, 3]</span>
<span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">|</span> <span class="n">repeatFrom</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>It’s necessary to turn the input iterator into a list. However, sometimes you
may want to update the input iterator values, so as to make things extra
dynamic, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">def</span> <span class="nf">g</span><span class="p">():</span> <span class="k">yield from</span> <span class="n">l</span><span class="p">;</span> <span class="k">yield from</span> <span class="n">l</span>
<span class="k">def</span> <span class="nf">h</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">g</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># modifies the list mid-way</span>
        <span class="k">yield</span> <span class="n">e</span>

<span class="n">h</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [1, 2, 3, 1, 2, 3, 5]</span>
</pre></div>
</div>
<p>But if you do this, it wouldn’t work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">def</span> <span class="nf">h</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">|</span> <span class="n">repeatFrom</span><span class="p">(</span><span class="mi">2</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">e</span>
<span class="n">h</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [1, 2, 3, 1, 2, 3]</span>
</pre></div>
</div>
<p>This is because internally, <a class="reference internal" href="#k1lib.cli.structural.repeatFrom" title="k1lib.cli.structural.repeatFrom"><code class="xref py py-class docutils literal notranslate"><span class="pre">repeatFrom</span></code></a> turns the iterator into a
list, and continues yielding from that list, and thus won’t use the updated
values. To do it, you have to make the input feels like a list (can get length):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">def</span> <span class="nf">h</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">l</span> <span class="o">|</span> <span class="n">repeatFrom</span><span class="p">(</span><span class="mi">2</span><span class="p">)):</span> <span class="c1"># ---------------- changed section</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">e</span>
<span class="n">h</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [1, 2, 3, 1, 2, 3, 5]</span>
</pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>limit</strong> – if None, then repeats indefinitely</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.repeatFrom.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#repeatFrom.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.repeatFrom.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.oneHot">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">oneHot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#oneHot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.oneHot" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.oneHot.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#oneHot.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.oneHot.__init__" title="Permalink to this definition"></a></dt>
<dd><p>One-hot encode some column in a table.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span>
 <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">]]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span>
 <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">]]</span>
<span class="p">[</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">oneHot</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="p">[</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">oneHot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;abcd&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Last 2 statements both return this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
</pre></div>
</div>
<p>You can also separate the encoded column out like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">oneHot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Which returns this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
 <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
 <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
 <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
 <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
 <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]]</span>
</pre></div>
</div>
<p>The natural way to do this is to use with without <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">group</span></code> parameters.
But sometimes, your one hot encoding is spreaded across multiple datasets in
multiple dataloaders, and so the order and length of the encoding might not be
the same, which will mess up your training process.</p>
<p>That’s why, you can specify <code class="docutils literal notranslate"><span class="pre">group</span></code>, which will share encoding information
across all <a class="reference internal" href="#k1lib.cli.structural.oneHot" title="k1lib.cli.structural.oneHot"><code class="xref py py-class docutils literal notranslate"><span class="pre">oneHot</span></code></a> clis that have the same group name. If you choose to
do this then you have to also specify what’s the size of the encoding, because
the cli can’t really infer the size when it potentially has not seen all the data
right?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – which column one hot encode and expand into</p></li>
<li><p><strong>n</strong> – (optional) total number of different elements</p></li>
<li><p><strong>group</strong> – (optional) group name</p></li>
<li><p><strong>sep</strong> – (optional) whether to separate the variable out into its own list</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.oneHot.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#oneHot.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.oneHot.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.structural.latch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.structural.</span></span><span class="sig-name descname"><span class="pre">latch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endTok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#latch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.latch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.latch.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endTok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#latch.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.latch.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Latches 1 timeline (B) onto another timeline (A).
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;h&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">]]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">2.1</span><span class="p">,</span> <span class="s2">&quot;2.1&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.1</span><span class="p">,</span> <span class="s2">&quot;3.1&quot;</span><span class="p">]]</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">4.5</span><span class="p">,</span> <span class="s2">&quot;4.5&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">7.3</span><span class="p">,</span> <span class="s2">&quot;7.3&quot;</span><span class="p">]]</span>

<span class="n">a</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>        <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[1, &#39;a&#39;, None], [2, &#39;b&#39;, None], [3, &#39;c&#39;, &#39;2.1&#39;], [4, &#39;d&#39;, &#39;3.1&#39;], [5, &#39;e&#39;, &#39;3.1&#39;]]</span>
<span class="n">a</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[1, &#39;a&#39;, &#39;2.1&#39;], [2, &#39;b&#39;, &#39;2.1&#39;], [3, &#39;c&#39;, &#39;3.1&#39;], [4, &#39;d&#39;, None], [5, &#39;e&#39;, None]]</span>
<span class="n">b</span>     <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>        <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[2.1, &#39;2.1&#39;, &#39;b&#39;], [3.1, &#39;3.1&#39;, &#39;c&#39;]]</span>
<span class="n">b</span>     <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[2.1, &#39;2.1&#39;, &#39;c&#39;], [3.1, &#39;3.1&#39;, &#39;d&#39;]]</span>

<span class="c1"># latching timelines that don&#39;t overlap</span>
<span class="n">b</span> <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>        <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[2.1, &#39;2.1&#39;, None], [3.1, &#39;3.1&#39;, None]]</span>
<span class="n">b</span> <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[2.1, &#39;2.1&#39;, &#39;4.5&#39;], [3.1, &#39;3.1&#39;, &#39;4.5&#39;]]</span>
<span class="n">c</span> <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>        <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[4.5, &#39;4.5&#39;, &#39;3.1&#39;], [7.3, &#39;7.3&#39;, &#39;3.1&#39;]]</span>
<span class="n">c</span> <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[4.5, &#39;4.5&#39;, None], [7.3, &#39;7.3&#39;, None]]</span>

<span class="c1"># multiple latches also work fine</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">|</span> <span class="n">latch</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Final command returns this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;2.1&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;3.1&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;3.1&#39;</span><span class="p">,</span> <span class="s1">&#39;4.5&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;3.1&#39;</span><span class="p">,</span> <span class="s1">&#39;4.5&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;3.1&#39;</span><span class="p">,</span> <span class="s1">&#39;4.5&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;3.1&#39;</span><span class="p">,</span> <span class="s1">&#39;7.3&#39;</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;3.1&#39;</span><span class="p">,</span> <span class="s1">&#39;7.3&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>So essentially, there’re 2 timelines, “a” and “b”. “a” is usually more densely
packed than “b”. The goal is to merge these 2 timelines together, trying to insert
b’s data points at various points inside a. Try to figure out the pattern and
behavior from the example.</p>
<p>This cli makes several assumptions:</p>
<ul class="simple">
<li><p>All timelines inside the argument (if <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">|</span> <span class="pre">latch(b)</span></code>, then I’m talking about b) have only 2 columns: (time, data)</p></li>
<li><p>Timelines piped into (if <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">|</span> <span class="pre">latch(b)</span></code>, then I’m talking about a) can have multiple columns. First column has to be time</p></li>
<li><p>All timelines are sorted by time already, to avoid resorting</p></li>
</ul>
<p>See also: <a class="reference internal" href="#k1lib.cli.utils.syncStepper" title="k1lib.cli.utils.syncStepper"><code class="xref py py-class docutils literal notranslate"><span class="pre">syncStepper</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeline</strong> – sparser timeline</p></li>
<li><p><strong>before</strong> – whether to use the timeline B’s point before or after timeline A’s point</p></li>
<li><p><strong>startTok</strong> – token to use for A’s samples where B has not gone into the picture yet</p></li>
<li><p><strong>endTok</strong> – token to use for A’s samples where B has yielded all elements</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.structural.latch.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/structural.html#latch.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.structural.latch.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.trace">
<span id="trace-module"></span><h2>trace module<a class="headerlink" href="#module-k1lib.cli.trace" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.trace.trace">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.trace.</span></span><span class="sig-name descname"><span class="pre">trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f=&lt;k1lib.cli.utils.size</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxDepth=inf</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/trace.html#trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.trace.trace" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_trace</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.trace.trace.last">
<span class="sig-name descname"><span class="pre">last</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#k1lib.cli.trace.trace.last" title="Permalink to this definition"></a></dt>
<dd><p>Last instantiated trace object. Access this to view the previous (possibly nested) trace.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.trace.trace.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f=&lt;k1lib.cli.utils.size</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxDepth=inf</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/trace.html#trace.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.trace.trace.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Traces out how the data stream is transformed through complex cli tools.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [1, 4, 9, 16], normal command</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># traced command, will display how the shapes evolve through cli tools</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">trace</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>There’re a lot more instructions and code examples over the tutorial section. Go check it out!</p>
<p>This also works well with <a class="reference internal" href="#k1lib.cli.typehint.tOpt" title="k1lib.cli.typehint.tOpt"><code class="xref py py-class docutils literal notranslate"><span class="pre">tOpt</span></code></a>, and will actually display
inferred type data in the graph:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">tOpt</span><span class="p">()</span> <span class="o">|</span> <span class="n">trace</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>f</strong> – function to display the data stream. Defaulted to <a class="reference internal" href="#k1lib.cli.utils.shape" title="k1lib.cli.utils.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a>,
and to <a class="reference internal" href="#k1lib.cli.utils.iden" title="k1lib.cli.utils.iden"><code class="xref py py-class docutils literal notranslate"><span class="pre">iden</span></code></a> if is None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.utils">
<span id="utils-module"></span><h2>utils module<a class="headerlink" href="#module-k1lib.cli.utils" title="Permalink to this heading"></a></h2>
<p>This is for all short and random quality-of-life utilities.</p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.size">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.size" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.size.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#size.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.size.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Returns number of rows and columns in the input.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns (3, 2)</span>
<span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns 3</span>
<span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># returns 2</span>
<span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># returns (2, 0)</span>
<span class="p">[[],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (3,)</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns 3</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># returns (3, 2, 2)</span>
<span class="p">[[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]],</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (1, 3)</span>
<span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (1, 2, 3)</span>
<span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (2, 3, 5)</span>
<span class="n">shape</span><span class="p">()(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<p><a class="reference internal" href="#k1lib.cli.utils.shape" title="k1lib.cli.utils.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a> is an alias of this cli. Use whichever is more intuitive for you.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>idx</strong> – if not specified, returns a tuple of ints. If specified,
then returns the specific index of the tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.size.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#size.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.size.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.utils.shape">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#k1lib.cli.utils.shape" title="Permalink to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#k1lib.cli.utils.size" title="k1lib.cli.utils.size"><code class="xref py py-class docutils literal notranslate"><span class="pre">size</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.item">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">amt:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill=&lt;object</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.item" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.item.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">amt:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill=&lt;object</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#item.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.item.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Returns the first element of the input iterator.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 0</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span>
<span class="c1"># returns torch.Size([5])</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns 3</span>
<span class="p">[]</span> <span class="o">|</span> <span class="n">item</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>amt</strong> – how many times do you want to call item() back to back?</p></li>
<li><p><strong>fill</strong> – if iterator length is 0, return this</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.item.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#item.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.item.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.rItem">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">rItem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#rItem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.rItem" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.rItem.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#rItem.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.rItem.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Combines <code class="docutils literal notranslate"><span class="pre">rows(idx)</span> <span class="pre">|</span> <span class="pre">item()</span></code>, as this is a pretty common pattern.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="o">|</span> <span class="n">rItem</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># returns 4</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.rItem.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#rItem.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.rItem.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.iden">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">iden</span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#iden"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.iden" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.iden.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#iden.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.iden.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Yields whatever the input is. Useful for multiple streams.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns range(5)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">iden</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.iden.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#iden.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.iden.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.join">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.join" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.join.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#join.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.join.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Merges all strings into 1, with <cite>delim</cite> in the middle. Basically
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str.join" title="(in Python v3.12)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.join()</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns &#39;2\na&#39;</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.join.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#join.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.join.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.wrapList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">wrapList</span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#wrapList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.wrapList" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.wrapList.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#wrapList.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.wrapList.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Wraps inputs inside a list. There’s a more advanced cli tool
built from this, which is <a class="reference internal" href="#k1lib.cli.structural.unsqueeze" title="k1lib.cli.structural.unsqueeze"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unsqueeze()</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [5]</span>
<span class="mi">5</span> <span class="o">|</span> <span class="n">wrapList</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.wrapList.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#wrapList.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.wrapList.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.equals">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">equals</span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#equals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.equals" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.equals.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#equals.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.equals.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Checks if all incoming columns/streams are identical</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.equals.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#equals.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.equals.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.reverse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">reverse</span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#reverse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.reverse" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.reverse.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#reverse.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.reverse.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Reverses incoming list.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [3, 5, 2]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">reverse</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.reverse.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#reverse.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.reverse.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.ignore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">ignore</span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#ignore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.ignore" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.ignore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#ignore.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.ignore.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Just loops through everything, ignoring the output.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># will just return an iterator, and not print anything</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1"># will prints &quot;2\n3&quot;</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.ignore.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#ignore.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.ignore.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.rateLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">rateLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#rateLimit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.rateLimit" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.rateLimit.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#rateLimit.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.rateLimit.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Limits the execution flow rate upon a condition.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">semaphore</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">heavyAsyncOperation</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">semaphore</span><span class="p">,</span> <span class="n">s</span>
    <span class="n">semaphore</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">s</span> <span class="o">+=</span> <span class="n">i</span><span class="p">;</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">semaphore</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">return</span> <span class="n">i</span><span class="o">**</span><span class="mi">2</span>

<span class="c1"># returns (20,), takes 1s to run</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyTh</span><span class="p">(</span><span class="n">heavyAsyncOperation</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
<span class="c1"># returns (20,), takes 4s to run (20/5 = 4)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">rateLimit</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">semaphore</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">applyTh</span><span class="p">(</span><span class="n">heavyAsyncOperation</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">()</span>
</pre></div>
</div>
<p>The first test case is not rate-limited, so it will run all 20 threads at the
same time, and all of them will finish after 1 second.</p>
<p>The second test case is rate-limited, so that there can only be 5 concurrently
executing threads because of the semaphore count check. Therefore this takes
around 4 seconds to run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – checking function. Should return true if execution is allowed</p></li>
<li><p><strong>delay</strong> – delay in seconds between calling <code class="docutils literal notranslate"><span class="pre">f()</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.rateLimit.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#rateLimit.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.rateLimit.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.rateLimit.cpu">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cpu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxUtilization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">90</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#rateLimit.cpu"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.rateLimit.cpu" title="Permalink to this definition"></a></dt>
<dd><p>Limits flow rate when cpu utilization is more than a specified
percentage amount. Needs to install the package <code class="docutils literal notranslate"><span class="pre">psutil</span></code> to actually work.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [0, 1, 4, 9, 16]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">rateLimit</span><span class="o">.</span><span class="n">cpu</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.timeLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">timeLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#timeLimit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.timeLimit" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.timeLimit.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#timeLimit.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.timeLimit.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Caps the flow after a specified amount of time has
passed. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 20, or roughly close to that</span>
<span class="n">repeatF</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">))</span> <span class="o">|</span> <span class="n">timeLimit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.timeLimit.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#timeLimit.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.timeLimit.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.utils.tab">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">tab</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'</span>&#160;&#160;&#160; <span class="pre">'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#tab"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.tab" title="Permalink to this definition"></a></dt>
<dd><p>Indents incoming string iterator.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints out indented 0 to 9</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">tab</span><span class="p">()</span> <span class="o">|</span> <span class="n">headOut</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.utils.indent">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">indent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'</span>&#160;&#160;&#160; <span class="pre">'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#k1lib.cli.utils.indent" title="Permalink to this definition"></a></dt>
<dd><p>Indents incoming string iterator.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints out indented 0 to 9</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">tab</span><span class="p">()</span> <span class="o">|</span> <span class="n">headOut</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.clipboard">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">clipboard</span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#clipboard"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.clipboard" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.clipboard.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#clipboard.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.clipboard.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Saves the input to clipboard.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># copies &quot;abc&quot; into the clipboard. Just use Ctrl+V to paste as usual</span>
<span class="s2">&quot;abc&quot;</span> <span class="o">|</span> <span class="n">clipboard</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.clipboard.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#clipboard.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.clipboard.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.deref">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">deref</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxDepth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">igT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#deref"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.deref" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.deref.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxDepth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">igT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#deref.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.deref.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Recursively converts any iterator into a list.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>              <span class="c1"># returns something like &quot;&lt;range_iterator at 0x7fa8c52ca870&gt;&quot;</span>
<span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>    <span class="c1"># returns [0, 1, 2, 3, 4]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">yieldT</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [2, 3], yieldT stops things early</span>
</pre></div>
</div>
<p>You can also specify a <code class="docutils literal notranslate"><span class="pre">maxDepth</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">iter</span><span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># returns something like &quot;&lt;list_iterator at 0x7f810cf0fdc0&gt;&quot;</span>
<span class="nb">iter</span><span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># returns [range(3)]</span>
<span class="nb">iter</span><span class="p">([</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span> <span class="o">|</span> <span class="n">deref</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># returns [[0, 1, 2]]</span>
</pre></div>
</div>
<p>There are a few classes/types that are considered atomic, and <a class="reference internal" href="#k1lib.cli.utils.deref" title="k1lib.cli.utils.deref"><code class="xref py py-class docutils literal notranslate"><span class="pre">deref</span></code></a>
will never try to iterate over it. If you wish to change it, do something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">atomic</span><span class="o">.</span><span class="n">deref</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maxDepth</strong> – maximum depth to dereference. Starts at 0 for not doing anything
at all</p></li>
<li><p><strong>igT</strong> – short for “ignore tensor”. If True, then don’t loop over <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a>
and <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> internals</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.deref.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#deref.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.deref.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.deref.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a></span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#deref.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.deref.__invert__" title="Permalink to this definition"></a></dt>
<dd><p>Returns a <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a> that makes
everything an iterator. Not entirely sure when this comes in handy, but it’s
there.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.deref.js">
<span class="sig-name descname"><span class="pre">js</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#deref.js"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.deref.js" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.bindec">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">bindec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#bindec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.bindec" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.bindec.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#bindec.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.bindec.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Binary decodes the input.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [&#39;a&#39;, &#39;c&#39;]</span>
<span class="mi">5</span> <span class="o">|</span> <span class="n">bindec</span><span class="p">(</span><span class="s2">&quot;abcdef&quot;</span><span class="p">)</span>
<span class="c1"># returns &#39;a,c&#39;</span>
<span class="mi">5</span> <span class="o">|</span> <span class="n">bindec</span><span class="p">(</span><span class="s2">&quot;abcdef&quot;</span><span class="p">,</span> <span class="n">join</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cats</strong> – categories</p></li>
<li><p><strong>f</strong> – transformation function of the selected elements. Defaulted to <a class="reference internal" href="#k1lib.cli.conv.toList" title="k1lib.cli.conv.toList"><code class="xref py py-class docutils literal notranslate"><span class="pre">toList</span></code></a>, but others like <a class="reference internal" href="#k1lib.cli.utils.join" title="k1lib.cli.utils.join"><code class="xref py py-class docutils literal notranslate"><span class="pre">join</span></code></a> is useful too</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.bindec.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#bindec.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.bindec.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.smooth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">smooth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">consecutives</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">windowing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#smooth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.smooth" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.smooth.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">consecutives</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">windowing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#smooth.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.smooth.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Smoothes out the input stream.
Literally just a shortcut for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">batched</span><span class="p">(</span><span class="n">consecutives</span><span class="p">)</span> <span class="o">|</span> <span class="n">toMean</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [4.5, 14.5, 24.5]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">|</span> <span class="n">smooth</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Smoothing over <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> or <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> will
be much faster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns torch.Tensor with shape (2)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">smooth</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The default consecutive value is in <code class="docutils literal notranslate"><span class="pre">settings.cli.smooth</span></code>. This
is useful if you are smoothing over multiple lists at the same
time, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># can change a single smooth value temporarily here, and all sequences will be smoothed in the same way</span>
<span class="k">with</span> <span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="n">smooth</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span> <span class="o">|</span> <span class="n">smooth</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">(),</span> <span class="n">y</span> <span class="o">|</span> <span class="n">smooth</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>consecutives</strong> – if not defined, then used the value inside <code class="docutils literal notranslate"><span class="pre">settings.cli.smooth</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.smooth.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#smooth.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.smooth.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.utils.disassemble">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">disassemble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#disassemble"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.disassemble" title="Permalink to this definition"></a></dt>
<dd><p>Disassembles anything piped into it.
Normal usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">b</span>
<span class="c1"># both of these print out disassembled info</span>
<span class="n">f</span> <span class="o">|</span> <span class="n">disassemble</span><span class="p">()</span>
<span class="n">disassemble</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># you can pass in lambdas</span>
<span class="n">disassemble</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span>

<span class="c1"># or even raw code</span>
<span class="s2">&quot;lambda x: x + 3&quot;</span> <span class="o">|</span> <span class="n">disassemble</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.utils.tree">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">tree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fL=10,</span> <span class="pre">dL=10,</span> <span class="pre">depth=inf,</span> <span class="pre">ff:</span> <span class="pre">~typing.Callable[[str],</span> <span class="pre">bool]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;,</span> <span class="pre">df:</span> <span class="pre">~typing.Callable[[str],</span> <span class="pre">bool]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#tree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.tree" title="Permalink to this definition"></a></dt>
<dd><p>Recursively gets all files and folders. Output format might be a bit
strange, so this is mainly for visualization. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;.&quot;</span> <span class="o">|</span> <span class="n">tree</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This is way less powerful and structured than clis from the module <a class="reference internal" href="#module-k1lib.cli.ktree" title="k1lib.cli.ktree"><code class="xref py py-mod docutils literal notranslate"><span class="pre">k1lib.cli.ktree</span></code></a>.
Check that out. This cli is mainly for backwards compability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fL</strong> – max number of file per directory included in output</p></li>
<li><p><strong>dL</strong> – max number of child directories per directory included in output</p></li>
<li><p><strong>depth</strong> – explore depth</p></li>
<li><p><strong>ff</strong> – optional file filter function</p></li>
<li><p><strong>df</strong> – optional directory filter function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.lookup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'error'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.lookup" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.lookup.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'error'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#lookup.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.lookup.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Looks up items from a dictionary/object. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">52</span><span class="p">}</span>
<span class="s2">&quot;abcca&quot;</span> <span class="o">|</span> <span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [3, 5, 52, 52, 3]</span>

<span class="s2">&quot;abccad&quot;</span> <span class="o">|</span> <span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>                     <span class="c1"># raises Exception, as key &quot;d&quot; does not exist</span>
<span class="s2">&quot;abccad&quot;</span> <span class="o">|</span> <span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;(not found)&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [3, 5, 52, 52, 3, &#39;(not found)&#39;], mode automatically switched to &quot;fill&quot;</span>
<span class="s2">&quot;abccad&quot;</span> <span class="o">|</span> <span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;fill&quot;</span><span class="p">)</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>       <span class="c1"># returns [3, 5, 52, 52, 3, None]. Do this when you really want to return None</span>
<span class="s2">&quot;abccad&quot;</span> <span class="o">|</span> <span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>   <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>       <span class="c1"># returns [3, 5, 52, 52, 3, &#39;d&#39;], mode automatically switched to &quot;input&quot;</span>
<span class="s2">&quot;abccad&quot;</span> <span class="o">|</span> <span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>       <span class="c1"># returns [3, 5, 52, 52, 3, &#39;d&#39;], similar to above</span>
<span class="s2">&quot;abccad&quot;</span> <span class="o">|</span> <span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;rm&quot;</span><span class="p">)</span>    <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>       <span class="c1"># returns [3, 5, 52, 52, 3], removing the unknown element</span>

<span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="s2">&quot;abcca&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="n">lookup</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[0, 3], [1, 5], [2, 52], [3, 52], [4, 3]]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">mode</span></code> param needs a little explaning. It specifies what should happen when an element is not found
within the given dictionary. There are 3 modes total:
- error: if <code class="docutils literal notranslate"><span class="pre">.fill</span></code> is not None, then throws an error. If <code class="docutils literal notranslate"><span class="pre">.fill</span></code> is specified, then this acts like mode “fill” instead
- input: returns whatever the input element is
- rm: removes (aka ignore) the element
- fill: returns the arg <code class="docutils literal notranslate"><span class="pre">.fill</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – any object that can be sliced with the inputs</p></li>
<li><p><strong>col</strong> – if None, lookup on each row, else lookup a specific column only</p></li>
<li><p><strong>fill</strong> – fill value for elements that are not in the provided dictionary. Explained more above</p></li>
<li><p><strong>mode</strong> – “error”, “input”, “rm”, “fill”. Explained more above</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.lookup.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#lookup.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.lookup.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.lookupRange">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">lookupRange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ranges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sorted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'error'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#lookupRange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.lookupRange" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.lookupRange.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ranges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sorted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'error'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#lookupRange.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.lookupRange.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Looks up values within some range.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ranges</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]]</span>
<span class="n">vs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">5.5</span><span class="p">]</span>
<span class="n">vs</span> <span class="o">|</span> <span class="n">lookupRange</span><span class="p">(</span><span class="n">ranges</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># raises an exception cause it can&#39;t find &quot;1&quot; in any ranges</span>
<span class="n">vs</span> <span class="o">|</span> <span class="n">lookupRange</span><span class="p">(</span><span class="n">ranges</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;fill&quot;</span><span class="p">)</span>  <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [None, None, &#39;a&#39;, &#39;a&#39;, None, None, &#39;b&#39;, &#39;b&#39;, None, None]</span>
<span class="n">vs</span> <span class="o">|</span> <span class="n">lookupRange</span><span class="p">(</span><span class="n">ranges</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;rm&quot;</span><span class="p">)</span>    <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;]</span>
<span class="n">vs</span> <span class="o">|</span> <span class="n">lookupRange</span><span class="p">(</span><span class="n">ranges</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [1, 1.5, &#39;a&#39;, &#39;a&#39;, 3, 3.5, &#39;b&#39;, &#39;b&#39;, 5, 5.5]</span>

<span class="n">vs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">5.5</span><span class="p">],</span> <span class="s2">&quot;abcdefghij&quot;</span><span class="p">))</span>
<span class="n">vs</span> <span class="o">|</span> <span class="n">lookupRange</span><span class="p">(</span><span class="n">ranges</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;rm&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [[&#39;a&#39;, &#39;c&#39;], [&#39;a&#39;, &#39;d&#39;], [&#39;b&#39;, &#39;g&#39;], [&#39;b&#39;, &#39;h&#39;]]</span>
</pre></div>
</div>
<p>So, <code class="docutils literal notranslate"><span class="pre">ranges</span></code> should be a table with 3 columns: start, stop and value. This cli will search across all ranges,
and if the input iterator has values within a single range, it will yield that range’s value. The exact
comparison expression is “start &lt;= input &lt; stop”. Internally, there’re 2 implementations:</p>
<p>First implementation assumes the ranges are not overlapping, activated by “sorted=True”. This will
assume the ranges are sorted based on the start values, then it searches for the value using binary
search. Time complexity is O(n*log(m)), where n is the input size, m is the ranges’s length</p>
<p>Second implementation doesn’t assume the ranges are not overlapping, activated by “sorted=False”.
This won’t sort the ranges, and searches for the value using linear search, yielding the first
range that contains the value. Time complexity is O(n*m)</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.utils.lookup" title="k1lib.cli.utils.lookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">lookup</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ranges</strong> – table of size (N, 3), with each row (start, stop, value)</p></li>
<li><p><strong>col</strong> – column to act upon</p></li>
<li><p><strong>sorted</strong> – if True, use binary search, else use linear search. Explained more above</p></li>
<li><p><strong>fill</strong> – if specified, and if no ranges contain the value, then yield this value instead</p></li>
<li><p><strong>mode</strong> – explained above. See <a class="reference internal" href="#k1lib.cli.utils.lookup" title="k1lib.cli.utils.lookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">lookup</span></code></a> as well</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.lookupRange.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#lookupRange.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.lookupRange.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.getitems">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">getitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">fields</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#getitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.getitems" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.getitems.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">fields</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#getitems.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.getitems.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Basically [input[x] for x in fields].
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [3, 1, &#39;&#39;]</span>
<span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span> <span class="o">|</span> <span class="n">getitems</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.getitems.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#getitems.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.getitems.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.backup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">backup</span></span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#backup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.backup" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.backup.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#backup.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.backup.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Backs up a file/folder.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;some/folderOrFile&quot;</span> <span class="o">|</span> <span class="n">backup</span><span class="p">()</span>
<span class="s2">&quot;some/folderOrFile&quot;</span> <span class="o">|</span> <span class="n">backup</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>
</pre></div>
</div>
<p>Really straightforward. Uses bash internally to copy files recursively, so
not available on Windows.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.backup.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#backup.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.backup.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.backup.restore">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">restore</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#backup.restore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.backup.restore" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.sketch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">sketch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">titles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#sketch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.sketch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.sketch.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><span class="pre">Callable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">titles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#sketch.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.sketch.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Convenience tool to plot multiple matplotlib plots at the same
time, while still keeping everything short and in 1 line. For this example,
we’re trying to plot x^1, x^2, …, x^8 on 2 separate plots, one left one
right. The left will have x^1 till x^4, the right will have x^5 to x^8.</p>
<p>How you would do this normally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="n">exps</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="c1"># simplest solution</span>
<span class="n">plt</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">1</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">3</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">4</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;x axis&quot;</span><span class="p">)</span>
<span class="c1"># solution using a little bit of cli</span>
<span class="n">plt</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="n">a</span><span class="p">])</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">();</span>     <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]);</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;x axis&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>But this is long, and I’m incredibly lazy to write it all out. So here’s how
it’s going to work using this cli:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># plotting the first 4 lines only, in a single plot. Should be familiar and make sense to you before moving on</span>
<span class="n">exps</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="n">a</span><span class="p">])</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span> <span class="o">|</span> <span class="n">ignore</span><span class="p">()</span>

<span class="c1"># plotting 8 lines across 2 plots. Simplest example using sketch(). It kinda captures clis after it and use it to plot each plot</span>
<span class="n">exps</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="n">a</span><span class="p">])</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">sketch</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">))</span>

<span class="c1"># same as above, but adding a grid and x axis label to all plots. Transformation functions can be anything you would</span>
<span class="c1"># put inside a normal cli (`plt` will be passed as argument): string code, op()-capture, lambda functions, other cli tools</span>
<span class="n">transforms</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;x.grid(True)&quot;</span><span class="p">,</span> <span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;x axis&quot;</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;y axis&quot;</span><span class="p">)]</span>
<span class="n">exps</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="n">a</span><span class="p">])</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">sketch</span><span class="p">(</span><span class="n">transforms</span><span class="p">)</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">))</span>

<span class="c1"># same as above, but adding legends. [x, x**a] will eventually be directed to ~apply(plt.plot), while f&quot;x^{a}&quot; will be directed to aS(plt.legend)</span>
<span class="n">exps</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="n">a</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;x^</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">])</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">sketch</span><span class="p">()</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span> <span class="o">+</span> <span class="n">iden</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">rItem</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">))</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Last line will generate this plot:</p>
<img alt="../_images/probScale.png" src="../_images/probScale.png" />
<p>Is it worth the extra confusion? Afterall, it just saves you 2-3 lines of
code. To me, it is worth it, because you can quickly change styles (add
a grid, make y axis log)</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.output.plotImgs" title="k1lib.cli.output.plotImgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotImgs</span></code></a></p>
<p>Check out a gallery of more examples at <a class="reference external" href="https://mlexps.com/kapi/9-mpl/">kapi/9-mpl</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transforms</strong> – transform functions to be run when drawing every plot. <code class="docutils literal notranslate"><span class="pre">plt</span></code> (aka <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code>) will be passed in</p></li>
<li><p><strong>titles</strong> – if specified, use these titles for each plot. Kinda hacky I have to admit</p></li>
<li><p><strong>im</strong> – if True, returns a PIL image and closes the sketch, else return nothing but still have the sketch open</p></li>
<li><p><strong>ncols</strong> – if specified, will sketch with this number of columns</p></li>
<li><p><strong>n</strong> – if specified, use this number of sketch instead of figuring out automatically</p></li>
<li><p><strong>axes</strong> – if specified, forgo calculating #axes and initialization altogether and just use the provided axes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.sketch.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#sketch.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.sketch.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.syncStepper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">syncStepper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#syncStepper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.syncStepper" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.syncStepper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#syncStepper.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.syncStepper.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Steps forward all streams at a time, yielding same results from min to max.
That’s a bit vague, so let’s see an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">7</span> <span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>

<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span> <span class="o">|</span> <span class="n">syncStepper</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># sync-step by the 1st column</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span> <span class="o">|</span> <span class="n">syncStepper</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># sync-step by the 2nd column. Have to sort it explicitly</span>
</pre></div>
</div>
<p>The first line returns this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
 <span class="p">[[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">]],</span>
 <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span>
 <span class="p">[[</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span>
 <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span>
</pre></div>
</div>
<p>The second line returns this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">]],</span>
 <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
 <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span>
 <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[[</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">col</span></code> can be None, but it’s quite a strange use case:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">syncStepper</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>It returns this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]],</span>
 <span class="p">[[</span><span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span>
 <span class="p">[[</span><span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]],</span>
 <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]],</span>
 <span class="p">[[</span><span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]],</span>
 <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span>
</pre></div>
</div>
<p>As you can see, for each line, it kinda yields elements with the same column. If
that element doesn’t exist, it’ll just put None there. This expects the input
streams are sorted at the column of interest. If they are not, specify <code class="docutils literal notranslate"><span class="pre">sort=True</span></code>.</p>
<p>It has roughly the same vibe as <a class="reference internal" href="#k1lib.cli.structural.groupBy" title="k1lib.cli.structural.groupBy"><code class="xref py py-class docutils literal notranslate"><span class="pre">groupBy</span></code></a>, in that
it groups everything by a specific column. The main difference here is that you
can sync-step them line-by-line, loading very little into memory, so you can run
this on giant datasets and not have to worry about running out of memory.</p>
<p>With k streams each having n elements, you should expect memory complexity to be
O(k), and the time complexity to be O(n*k^2/2). That k^2 term is kinda worrying,
but in most use cases, k is small and so k^2 can be treated as a constant</p>
<p>See also: <a class="reference internal" href="#k1lib.cli.structural.latch" title="k1lib.cli.structural.latch"><code class="xref py py-class docutils literal notranslate"><span class="pre">latch</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column where it should compare values and merge them together. Can be None, but that would be quite a weird use case</p></li>
<li><p><strong>sort</strong> – whether to sort the streams or not. This cli requires it, but it’s
not turned on by default because it’s an intensive operation</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.syncStepper.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#syncStepper.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.syncStepper.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.zeroes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">zeroes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#zeroes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.zeroes" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.zeroes.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#zeroes.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.zeroes.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Shift the specified column so that the first element is zero
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>   <span class="o">|</span> <span class="n">zeroes</span><span class="p">()</span>         <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [0, 1, 2, 3, 4, 5, 6]</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>   <span class="o">|</span> <span class="n">zeroes</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [5, 6, 7, 8, 9, 10, 11]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="o">|</span> <span class="n">zeroes</span><span class="p">()</span>         <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [0, 1, -1, 2, 5]</span>
</pre></div>
</div>
<p>Assumes the first element is going to be transformed to zero, thus the last example.
This cli also has log mode, where the natural log of the values will be shifted to zero:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [1.0, 1.5, 0.5, 2.0, 3.5]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="o">|</span> <span class="n">zeroes</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>           <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [2.72, 4.08, 1.36, 5.44, 9.51]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="o">|</span> <span class="n">zeroes</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This is essentially the same as dividing everything by 2, so that the first element
turns into 1. Super neat. The 2nd example is equivalent to multiplying everything by e/2.</p>
<p>This cli can function in a table (.col != None):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [[0, &#39;a&#39;], [1, &#39;b&#39;], [2, &#39;c&#39;], [3, &#39;d&#39;], [4, &#39;e&#39;], [5, &#39;f&#39;], [6, &#39;g&#39;]]</span>
<span class="p">[[</span><span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">]]</span> <span class="o">|</span> <span class="n">zeroes</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This cli can also act across multiple list of numbers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
<span class="n">data2</span> <span class="o">=</span> <span class="p">[[[</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">]]]</span>

<span class="c1"># returns [[0, 1, -1, 2, 5], [5, 8, 7, 10, 13]]</span>
<span class="n">data</span> <span class="o">|</span> <span class="o">~</span><span class="n">zeroes</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1, 2, 0, 3, 6], [6, 9, 8, 11, 14]]</span>
<span class="n">data</span> <span class="o">|</span> <span class="o">~</span><span class="n">zeroes</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="c1"># returns [[1.0, 1.5, 0.5, 2.0, 3.5], [3.5, 14.0, 10.5, 21.0, 31.5]]</span>
<span class="n">data</span> <span class="o">|</span> <span class="o">~</span><span class="n">zeroes</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>

<span class="c1"># returns [[[0, &#39;b&#39;], [1, &#39;c&#39;], [-1, &#39;a&#39;], [2, &#39;d&#39;], [5, &#39;g&#39;]], [[5, &#39;a&#39;], [8, &#39;d&#39;], [7, &#39;c&#39;], [10, &#39;f&#39;], [13, &#39;i&#39;]]]</span>
<span class="n">data2</span> <span class="o">|</span> <span class="o">~</span><span class="n">zeroes</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>So as you can see, the offsets are adjusted so that the first element of each list
starts from the last element of the previous list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column to shift values</p></li>
<li><p><strong>offset</strong> – custom offset of the minimum value, defaulted to zero</p></li>
<li><p><strong>log</strong> – whether to zero it linearly or zero it logarithmically</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.zeroes.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#zeroes.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.zeroes.__invert__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.zeroes.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#zeroes.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.zeroes.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.normalize">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">normalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#normalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.normalize" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.normalize.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#normalize.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.normalize.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Normalize the data going in.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span><span class="mi">10</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">normalize</span><span class="p">()</span>       <span class="c1"># returns array with mean around 0</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">normalize</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># returns array with mean around 0.5, min 0, max 1</span>

<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="o">+</span><span class="mi">10</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">normalize</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>         <span class="c1"># returns array with 2nd (0-indexing!) column have mean around 0. Other columns not touched</span>
<span class="n">arr</span> <span class="o">|</span> <span class="n">normalize</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># returns array with 2nd (0-indexing!) column have mean around 0.5</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> – column to apply the normalization to</p></li>
<li><p><strong>mode</strong> – 0 for <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">-</span> <span class="pre">x.mean())/s.std()</span></code>, 1 for <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">-</span> <span class="pre">x.min())/(x.max()</span> <span class="pre">-</span> <span class="pre">x.min())</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.normalize.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#normalize.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.normalize.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.utils.branch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.utils.</span></span><span class="sig-name descname"><span class="pre">branch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#branch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.branch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.branch.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#branch.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.branch.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Works like an if statement, for when you don’t want to make a separate
function as it’s too time consuming.</p>
<blockquote>
<div><p>3 | branch(lambda x: x&gt;2, lambda x: x+4, lambda x: x+5) # returns 7
3 | branch(op()&gt;2, op()+4, op()+5)                      # returns 7
3 | branch(“x&gt;2”, “x+4”, “x+5”)                         # returns 7</p>
<p>3 | aS(lambda x: (x + 4) if (x &gt; 2) else (x + 5))       # returns 7</p>
</div></blockquote>
<p>So all of them kinda does the same thing as the 4th line. Is it worth it? Debatable, but I’ve
had so many times that I have to wrap things in parenthesis around expressions to make sure
it’s not doing anything weird and that takes long enough to disrupt my thought process
that I kinda have to make this</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>f</strong> – predicate function. If returns True, use the first function (f1), else use the second function (f2)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.utils.branch.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/utils.html#branch.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.utils.branch.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.typehint">
<span id="typehint-module"></span><h2>typehint module<a class="headerlink" href="#module-k1lib.cli.typehint" title="Permalink to this heading"></a></h2>
<p>Lots of type hint mechanisms to be used by the <a class="reference external" href="llvm.html">LLVM optimizer</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child=&lt;class</span> <span class="pre">'NoneType'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tBase" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tBase.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tBase.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tBase.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tBase.item">
<span class="sig-name descname"><span class="pre">item</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tBase.item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tBase.item" title="Permalink to this definition"></a></dt>
<dd><p>Gets the child type of this type. Basically what’s the type if
it were to go through <a class="reference internal" href="#k1lib.cli.utils.item" title="k1lib.cli.utils.item"><code class="xref py py-class docutils literal notranslate"><span class="pre">item</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tTensor(torch.float32, 2)</span>
<span class="n">tTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tBase.expand">
<span class="sig-name descname"><span class="pre">expand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><span class="pre">tBase</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tBase.expand"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tBase.expand" title="Permalink to this definition"></a></dt>
<dd><p>Expands the type to a list with <code class="docutils literal notranslate"><span class="pre">n</span></code> elements.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [int, int, int, int]</span>
<span class="n">tList</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># returns [int, float, float, str]</span>
<span class="n">tCollection</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">tExpand</span><span class="p">(</span><span class="nb">float</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tAny">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tAny</span></span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tAny"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tAny" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tAny.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tAny.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tAny.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tAny.item">
<span class="sig-name descname"><span class="pre">item</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tAny.item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tAny.item" title="Permalink to this definition"></a></dt>
<dd><p>Gets the child type of this type. Basically what’s the type if
it were to go through <a class="reference internal" href="#k1lib.cli.utils.item" title="k1lib.cli.utils.item"><code class="xref py py-class docutils literal notranslate"><span class="pre">item</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tTensor(torch.float32, 2)</span>
<span class="n">tTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child=&lt;class</span> <span class="pre">'NoneType'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tList" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tList.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tList.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tList.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tIter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tIter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child=&lt;class</span> <span class="pre">'NoneType'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tIter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tIter" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tIter.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tIter.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tIter.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child=&lt;class</span> <span class="pre">'NoneType'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tSet" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tSet.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tSet.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tSet.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCollection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tCollection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">children</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCollection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCollection" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCollection.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">children</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCollection.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCollection.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Fixed-length collection of things. Let’s say you want a tuple with
5 values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;3&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Then, this would be represented like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tCollection</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">tList</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
</pre></div>
</div>
<p>This also works in conjunction with <a class="reference internal" href="#k1lib.cli.typehint.tExpand" title="k1lib.cli.typehint.tExpand"><code class="xref py py-class docutils literal notranslate"><span class="pre">tExpand</span></code></a>, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span>
<span class="n">tCollection</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">tList</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tExpand</span><span class="p">(</span><span class="nb">float</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCollection.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCollection.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCollection.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCollection.reduce">
<span class="sig-name descname"><span class="pre">reduce</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCollection.reduce"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCollection.reduce" title="Permalink to this definition"></a></dt>
<dd><p>Tries to reduce <code class="docutils literal notranslate"><span class="pre">tCollection(int,</span> <span class="pre">int)</span></code> to <code class="docutils literal notranslate"><span class="pre">tIter(int)</span></code> if possible</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCollection.item">
<span class="sig-name descname"><span class="pre">item</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCollection.item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCollection.item" title="Permalink to this definition"></a></dt>
<dd><p>Gets the child type of this type. Basically what’s the type if
it were to go through <a class="reference internal" href="#k1lib.cli.utils.item" title="k1lib.cli.utils.item"><code class="xref py py-class docutils literal notranslate"><span class="pre">item</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tTensor(torch.float32, 2)</span>
<span class="n">tTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCollection.expand">
<span class="sig-name descname"><span class="pre">expand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><span class="pre">tBase</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCollection.expand"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCollection.expand" title="Permalink to this definition"></a></dt>
<dd><p>Expands out this collection so that it has a specified length</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tExpand">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tExpand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tExpand"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tExpand" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tExpand.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tExpand.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tExpand.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Supplement to <a class="reference internal" href="#k1lib.cli.typehint.tCollection" title="k1lib.cli.typehint.tCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">tCollection</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tExpand.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tExpand.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tExpand.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tNpArray">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tNpArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tNpArray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tNpArray" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tNpArray.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tNpArray.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tNpArray.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Numpy array type.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns np.array([2, 3])</span>
<span class="n">tNpArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>child</strong> – the dtype of the array</p></li>
<li><p><strong>rank</strong> – the rank/dimension of the array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tNpArray.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tNpArray.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tNpArray.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tNpArray.item">
<span class="sig-name descname"><span class="pre">item</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tNpArray.item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tNpArray.item" title="Permalink to this definition"></a></dt>
<dd><p>Gets the child type of this type. Basically what’s the type if
it were to go through <a class="reference internal" href="#k1lib.cli.utils.item" title="k1lib.cli.utils.item"><code class="xref py py-class docutils literal notranslate"><span class="pre">item</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tTensor(torch.float32, 2)</span>
<span class="n">tTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tNpArray.expand">
<span class="sig-name descname"><span class="pre">expand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tNpArray.expand"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tNpArray.expand" title="Permalink to this definition"></a></dt>
<dd><p>Expands the type to a list with <code class="docutils literal notranslate"><span class="pre">n</span></code> elements.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [int, int, int, int]</span>
<span class="n">tList</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># returns [int, float, float, str]</span>
<span class="n">tCollection</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">tExpand</span><span class="p">(</span><span class="nb">float</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tTensor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tTensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tTensor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tTensor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.typehint.tBase" title="k1lib.cli.typehint.tBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">tBase</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tTensor.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tTensor.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tTensor.__init__" title="Permalink to this definition"></a></dt>
<dd><p>PyTorch tensor type.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns torch.tensor([2.0, 3.0])</span>
<span class="n">tTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>child</strong> – the dtype of the array</p></li>
<li><p><strong>rank</strong> – the rank/dimension of the tensor</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tTensor.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tTensor.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tTensor.check" title="Permalink to this definition"></a></dt>
<dd><p>Checks whether a specific object adhears to this type hint or not.
Returns <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> if object does not adhere. If it does, then return the object.</p>
<p>Note that in the case that the object is actually an iterator, it will return
a new iterator containing all elements from the old iterator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tTensor.item">
<span class="sig-name descname"><span class="pre">item</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tTensor.item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tTensor.item" title="Permalink to this definition"></a></dt>
<dd><p>Gets the child type of this type. Basically what’s the type if
it were to go through <a class="reference internal" href="#k1lib.cli.utils.item" title="k1lib.cli.utils.item"><code class="xref py py-class docutils literal notranslate"><span class="pre">item</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tTensor(torch.float32, 2)</span>
<span class="n">tTensor</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tTensor.expand">
<span class="sig-name descname"><span class="pre">expand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tTensor.expand"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tTensor.expand" title="Permalink to this definition"></a></dt>
<dd><p>Expands the type to a list with <code class="docutils literal notranslate"><span class="pre">n</span></code> elements.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns [int, int, int, int]</span>
<span class="n">tList</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># returns [int, float, float, str]</span>
<span class="n">tCollection</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">tExpand</span><span class="p">(</span><span class="nb">float</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.typehint.inferType">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">inferType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#inferType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.inferType" title="Permalink to this definition"></a></dt>
<dd><p>Tries to infer the type of the input.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tList(int)</span>
<span class="n">inferType</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="c1"># returns tTensor(torch.float32, 2)</span>
<span class="n">inferType</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="k1lib.cli.typehint.TypeHintException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">TypeHintException</span></span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#TypeHintException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.TypeHintException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tLowest">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tLowest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">ts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tLowest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tLowest" title="Permalink to this definition"></a></dt>
<dd><p>Grabs the lowest possible shared type of all the example types.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tIter(float)</span>
<span class="n">tLowest</span><span class="p">(</span><span class="n">tIter</span><span class="p">(</span><span class="nb">float</span><span class="p">),</span> <span class="n">tList</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCheck">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tCheck</span></span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCheck"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCheck" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCheck.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCheck.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCheck.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Tool similar to <a class="reference internal" href="#k1lib.cli.trace.trace" title="k1lib.cli.trace.trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">trace</span></code></a> to check whether
all type hint outputs of all clis are good or not. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">tCheck</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Mainly used in cli unit tests. Return type of statement will be <a class="reference internal" href="#k1lib.cli.typehint.tCheck" title="k1lib.cli.typehint.tCheck"><code class="xref py py-class docutils literal notranslate"><span class="pre">tCheck</span></code></a>,
which might be undesirable, so you can pipe it to <a class="reference internal" href="#k1lib.cli.init.yieldT" title="k1lib.cli.init.yieldT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">yieldT</span></code></a> like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tCheck object</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">tCheck</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span>
<span class="c1"># returns number &quot;2&quot;</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">tCheck</span><span class="p">()</span> <span class="o">|</span> <span class="n">item</span><span class="p">()</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span> <span class="o">|</span> <span class="n">yieldT</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tCheck.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tCheck.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tCheck.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tOpt">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.cli.typehint.</span></span><span class="sig-name descname"><span class="pre">tOpt</span></span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tOpt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tOpt" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tOpt.n">
<span class="sig-name descname"><span class="pre">n</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#k1lib.cli.typehint.tOpt.n" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tOpt.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tOpt.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tOpt.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Optimizes clis. Let’s say you have something
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>For whatever reason you forgot that you’ve dereferenced everything
in the middle, although you’re only using 10 first elements, so the
code can’t be lazy anymore. You can apply optimizations to it like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">|</span> <span class="n">tOpt</span><span class="p">()</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>This will effectively turn it into this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">|</span> <span class="n">tOpt</span><span class="p">()</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Normally, you’d use it in this form instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns the optimized cli</span>
<span class="n">f</span> <span class="o">=</span> <span class="s2">&quot;file.txt&quot;</span> <span class="o">|</span> <span class="n">tOpt</span><span class="p">()</span> <span class="o">|</span> <span class="n">cat</span><span class="p">()</span> <span class="o">|</span> <span class="n">shape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">tOpt</span>
<span class="c1"># then you can do this to pass it through as usual</span>
<span class="s2">&quot;other file.txt&quot;</span> <span class="o">|</span> <span class="n">f</span>
</pre></div>
</div>
<p>Checkout the <cite>llvm optimizer tutorial &lt;llvm.html&gt;</cite> for a more in-depth explanation of this</p>
<p>More over, this combines nicely with <a class="reference internal" href="#k1lib.cli.trace.trace" title="k1lib.cli.trace.trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">trace</span></code></a> like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">tOpt</span><span class="p">()</span> <span class="o">|</span> <span class="n">trace</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tOpt.addPass">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">addPass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">klasses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><span class="pre">BaseCli</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abstractness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tOpt.addPass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tOpt.addPass" title="Permalink to this definition"></a></dt>
<dd><p>Adds an optimization pass that acts upon multiple clis in series.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cs: list of clis, ts: list of input type hints, 1 for each cli</span>
<span class="k">def</span> <span class="nf">o1</span><span class="p">(</span><span class="n">cs</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="n">BaseCli</span><span class="p">],</span> <span class="n">ts</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="n">tBase</span><span class="p">],</span> <span class="n">metadata</span><span class="o">=</span><span class="p">{}):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">cs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">cs</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="c1"># reorder the clis</span>
<span class="n">tOpt</span><span class="o">.</span><span class="n">addPass</span><span class="p">(</span><span class="n">o1</span><span class="p">,</span> <span class="p">[</span><span class="n">toList</span><span class="p">,</span> <span class="n">head</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, we’re declaring an optimization pass <code class="docutils literal notranslate"><span class="pre">o1</span></code>. You will be given a list of cli
objects, the cli’s input type hints and some extra metadata. If you can optimize
it, then you should return a list of new clis, else you should return None</p>
<p>Also, <code class="docutils literal notranslate"><span class="pre">abstractness</span></code> has varying number of legal values:
- 1-5: generic optimizations
- 6-10: analysis passes. Passes must not return anything</p>
<p>Higher abstraction optimizations will be called first, and then lower abstraction
optimizations will be called later. So, the idea is, just like LLVM, you can do
some analysis which will compute metadata that you can use in your optimization
passes, which will return optimized clis if it can.</p>
<p>Within optimization passes, you can prioritize optimizations that look at the global
picture first, before breaking the code up into tiny fragments with more detailed
optimizations, at which point it’s hard to look at the global picture.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p</strong> – the optimization pass</p></li>
<li><p><strong>klasses</strong> – list of cli classes in series that will trigger the pass</p></li>
<li><p><strong>abstractness</strong> – how abstract is this optimization</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tOpt.clearPasses">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clearPasses</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tOpt.clearPasses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tOpt.clearPasses" title="Permalink to this definition"></a></dt>
<dd><p>Clears all passes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tOpt.out">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">out</span></span><a class="headerlink" href="#k1lib.cli.typehint.tOpt.out" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tOpt.optCli">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">optCli</span></span><a class="headerlink" href="#k1lib.cli.typehint.tOpt.optCli" title="Permalink to this definition"></a></dt>
<dd><p>Grabs the optimized cli.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns optimized cli</span>
<span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">tOpt</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span><span class="o">.</span><span class="n">optCli</span>
<span class="c1"># you can also do it like this:</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">tOpt</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">tOpt</span><span class="o">.</span><span class="n">optCli</span>
<span class="c1"># or even shorter like this:</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">tOpt</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">tOpt</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cli.typehint.tOpt.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/typehint.html#tOpt.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.typehint.tOpt.__ror__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-k1lib.cli.optimizations">
<span id="optimizations-module"></span><h2>optimizations module<a class="headerlink" href="#module-k1lib.cli.optimizations" title="Permalink to this heading"></a></h2>
<p>This is for optimizing the hell out of cli tools. Optimizations
that focus around a specific cli should be included close to their
definitions, so this is for optimizations that unusually span multiple
clis, and serve as examples of how to create optimization passes.</p>
<p>See over the <a class="reference external" href="llvm.html">LLVM optimizer tutorial</a> for more background.</p>
<dl class="py function">
<dt class="sig sig-object py" id="k1lib.cli.optimizations.dummy">
<span class="sig-prename descclassname"><span class="pre">k1lib.cli.optimizations.</span></span><span class="sig-name descname"><span class="pre">dummy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/k1lib/cli/optimizations.html#dummy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cli.optimizations.dummy" title="Permalink to this definition"></a></dt>
<dd><p>Does nothing. Only here so that you can read the source code</p>
</dd></dl>

</section>
<section id="elsewhere-in-the-library">
<h2>Elsewhere in the library<a class="headerlink" href="#elsewhere-in-the-library" title="Permalink to this heading"></a></h2>
<p>There might still be more cli tools scattered around the library. These are pretty
rare, quite dynamic and most likely a cool extra feature, not a core functionality,
so not worth it/can’t mention it here. Anyway, execute this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cli</span><span class="o">.</span><span class="n">scatteredClis</span><span class="p">()</span>
</pre></div>
</div>
<p>to get a list of them.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../base.html" class="btn btn-neutral float-left" title="Base module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="js_transpiler.html" class="btn btn-neutral float-right" title="JS transpiler tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Quang Ho.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>