<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JS transpiler tutorial &mdash; k1lib  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LLVM optimizer tutorial" href="llvm.html" />
    <link rel="prev" title="k1lib.cli module" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> k1lib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../base.html">Base module</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">k1lib.cli module</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#intro">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#argument-expansion">Argument expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#inverting-conditions">Inverting conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#capturing-operators">Capturing operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cli-composition">Cli composition</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#js-transpiler">JS transpiler</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">JS transpiler tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-example">Basic example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clis-that-take-in-functions">Clis that take in functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lots-of-moving-parts">Lots of moving parts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-transpiler-logic">Custom transpiler logic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#philosophy">Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#where-to-start">Where to start?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#under-the-hood">Under the hood</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#creating-your-own-cli">Creating your own cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#accelerations">Accelerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.bio">bio module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.cif">cif module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.conv">conv module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.mgi">mgi module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.filt">filt module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.gb">gb module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.grep">grep module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#init-module">init module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.inp">inp module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kapi">kapi module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kgv">kgv module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kjs">kjs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.ktree">ktree module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kxml">kxml module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.lsext">lsext module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.models">models module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.modifier">modifier module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#applycl-module">_applyCl module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.nb">nb module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.output">output module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.sam">sam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.structural">structural module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.trace">trace module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.utils">utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.typehint">typehint module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.optimizations">optimizations module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#elsewhere-in-the-library">Elsewhere in the library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../callbacks/index.html">k1lib.callbacks module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../k1a.html">k1lib._k1a module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k1ui.html">k1lib.k1ui module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eqn.html">k1lib.eqn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fmt.html">k1lib.fmt module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graphEqn.html">k1lib.graphEqn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../imports.html">k1lib.imports module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mo.html">k1lib.mo module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knn.html">k1lib.knn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../p5.html">k1lib.p5 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html">k1lib.schedule module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../selector.html">k1lib.selector module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../selen.html">k1lib.selen module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serpent.html">k1lib.serpent module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serve.html">k1lib.serve module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../viz.html">k1lib.viz module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../monkey.html">Monkey patched classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelogs.html">Changelogs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">k1lib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">k1lib.cli module</a></li>
      <li class="breadcrumb-item active">JS transpiler tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cli/js_transpiler.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="js-transpiler-tutorial">
<h1>JS transpiler tutorial<a class="headerlink" href="#js-transpiler-tutorial" title="Permalink to this heading"></a></h1>
<p>Since version 1.5, k1lib has the ability to transpile clisfrom Python into JS
code, ready to be built into an interface. Here’re some examples:</p>
<section id="basic-example">
<h2>Basic example<a class="headerlink" href="#basic-example" title="Permalink to this heading"></a></h2>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">repeatF</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">jsFunc</span> <span class="o">=</span> <span class="n">data</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">((</span><span class="s2">&quot;term&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="s2">&quot;term&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_10&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_451</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">11</span><span class="p">,</span><span class="w"> </span><span class="mf">93</span><span class="p">,</span><span class="w"> </span><span class="mf">34</span><span class="p">,</span><span class="w"> </span><span class="mf">31</span><span class="p">,</span><span class="w"> </span><span class="mf">92</span><span class="p">,</span><span class="w"> </span><span class="mf">33</span><span class="p">,</span><span class="w"> </span><span class="mf">54</span><span class="p">,</span><span class="w"> </span><span class="mf">91</span><span class="p">,</span><span class="w"> </span><span class="mf">35</span><span class="p">,</span><span class="w"> </span><span class="mf">17</span><span class="p">,</span><span class="w"> </span><span class="mf">37</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="mf">90</span><span class="p">,</span><span class="w"> </span><span class="mf">22</span><span class="p">,</span><span class="w"> </span><span class="mf">94</span><span class="p">,</span><span class="w"> </span><span class="mf">14</span><span class="p">,</span><span class="w"> </span><span class="mf">77</span><span class="p">,</span><span class="w"> </span><span class="mf">18</span><span class="p">,</span><span class="w"> </span><span class="mf">80</span><span class="p">,</span><span class="w"> </span><span class="mf">12</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_10</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_449</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_449</span><span class="p">.</span><span class="nx">head</span><span class="p">(</span><span class="nx">term</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_448</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_9</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_448</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_8</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_451</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;jsone&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_11_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'><div>term</div><div><input type='number' value='5' placeholder='term' id='_jsD_488_1709896133_447' style='padding: 4px 4px'></div></div>
<pre id="_jsF_332_1709896133_11_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_11_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_11_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_11_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_451 = [11, 93, 34, 31, 92, 33, 54, 91, 35, 17, 37, 50, 90, 22, 94, 14, 77, 18, 80, 12];
async function _jsF_332_1709896133_10(term) {
    _jsF_332_1709896133_9 = (_jsD_488_1709896133_449) => _jsD_488_1709896133_449.head(term, false)
    _jsF_332_1709896133_8 = (_jsD_488_1709896133_448) => { return _jsF_332_1709896133_9(_jsD_488_1709896133_448); };
    return _jsF_332_1709896133_8(_jsD_488_1709896133_451);
}
        window._jsF_332_1709896133_10 = _jsF_332_1709896133_10;
        _jsF_332_1709896133_11_error = document.querySelector("#_jsF_332_1709896133_11_error");
        _jsF_332_1709896133_11_resultDiv = document.querySelector("#_jsF_332_1709896133_11_result");
        _jsF_332_1709896133_11_loadingDiv = document.querySelector("#_jsF_332_1709896133_11_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_11_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_11_error.innerHTML = "";
                _jsF_332_1709896133_11_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_10(parseInt(document.querySelector('#_jsD_488_1709896133_447').value || 0));
                if (!handle.cancel) {
                    _jsF_332_1709896133_11_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_11_resultDiv.innerHTML = `<pre>${JSON.stringify(val, null, 2)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_11_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_11_reload_timeout = null;
        const _jsF_332_1709896133_11_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_11_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_11_reload_timeout);
                _jsF_332_1709896133_11_reload_timeout = setTimeout(_jsF_332_1709896133_11_reload_core, 0)
            }
        }
        document.querySelector('#_jsD_488_1709896133_447').oninput = _jsF_332_1709896133_11_reload;
        
        _jsF_332_1709896133_11_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_11_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_11_loadF();
        } catch (e) {}
    })();
</script></div><p>In this example, <code class="docutils literal notranslate"><span class="pre">data</span></code> is a list of 20 random numbers. You can then pipe
it into a <a class="reference internal" href="index.html#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a>-captured block (review <a class="reference external" href="index.html#capturing-operators">capturing concept here</a>).
Every operation that’s captured will be transpiled into JS. and bundled into a
<a class="reference internal" href="index.html#k1lib.cli.kjs.JsFunc" title="k1lib.cli.kjs.JsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">JsFunc</span></code></a>. Then you can inject that function anywhere you
want in your application. A lot of times, you’d want to display a search interface
right away, so you can use the <a class="reference internal" href="index.html#k1lib.cli.kjs.JsFunc.interface" title="k1lib.cli.kjs.JsFunc.interface"><code class="xref py py-meth docutils literal notranslate"><span class="pre">JsFunc.interface()</span></code></a> function, which can
display the interface right within your notebook. If you want to inject into your
custom site, then the entire html can be accessed at <code class="docutils literal notranslate"><span class="pre">jsFunc._repr_html_()</span></code></p>
<p>The arguments of <a class="reference internal" href="index.html#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a> are the argument names for the JS function that
you can use anywhere within the Python clis. Try playing around with the search
box of the “Html output” section.</p>
</section>
<section id="clis-that-take-in-functions">
<h2>Clis that take in functions<a class="headerlink" href="#clis-that-take-in-functions" title="Permalink to this heading"></a></h2>
<p>This also works with clis that are expected to take in a function, like
<a class="reference internal" href="index.html#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a> or <a class="reference internal" href="index.html#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a>:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="s2">&quot;x**2&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_15&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_457</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_15</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_488_1709896133_454</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_453</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_453</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_455</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_14</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_455</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_454</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_452</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_13</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_452</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_12</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_457</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_16_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'></div>
<pre id="_jsF_332_1709896133_16_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_16_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_16_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_16_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_457 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
async function _jsF_332_1709896133_15() {
    
    _jsF_332_1709896133_14 = (x) => {
        return Math.pow(x, 2);
    }
    _jsD_488_1709896133_454 = {};
    _jsF_332_1709896133_13 = (_jsD_488_1709896133_453) => _jsD_488_1709896133_453.apply((_jsD_488_1709896133_455) => _jsF_332_1709896133_14(_jsD_488_1709896133_455), null, _jsD_488_1709896133_454, false)
    _jsF_332_1709896133_12 = (_jsD_488_1709896133_452) => { return _jsF_332_1709896133_13(_jsD_488_1709896133_452); };
    return _jsF_332_1709896133_12(_jsD_488_1709896133_457);
}
        window._jsF_332_1709896133_15 = _jsF_332_1709896133_15;
        _jsF_332_1709896133_16_error = document.querySelector("#_jsF_332_1709896133_16_error");
        _jsF_332_1709896133_16_resultDiv = document.querySelector("#_jsF_332_1709896133_16_result");
        _jsF_332_1709896133_16_loadingDiv = document.querySelector("#_jsF_332_1709896133_16_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_16_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_16_error.innerHTML = "";
                _jsF_332_1709896133_16_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_15();
                if (!handle.cancel) {
                    _jsF_332_1709896133_16_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_16_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_16_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_16_reload_timeout = null;
        const _jsF_332_1709896133_16_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_16_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_16_reload_timeout);
                _jsF_332_1709896133_16_reload_timeout = setTimeout(_jsF_332_1709896133_16_reload_core, 0)
            }
        }
        
        
        _jsF_332_1709896133_16_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_16_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_16_loadF();
        } catch (e) {}
    })();
</script></div><p>More example, this time taking in a js argument:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">((</span><span class="s2">&quot;divisor&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;x </span><span class="si">% d</span><span class="s2">ivisor == 1&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_20&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_463</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_20</span><span class="p">(</span><span class="nx">divisor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_19</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="nx">x</span><span class="o">%</span><span class="nx">divisor</span><span class="p">)</span><span class="o">===</span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_460</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_460</span><span class="p">.</span><span class="nx">filt</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_461</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsF_332_1709896133_19</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_461</span><span class="p">)),</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_459</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_18</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_459</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_17</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_463</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_21_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'><div>divisor</div><div><input type='number' value='3' placeholder='divisor' id='_jsD_488_1709896133_458' style='padding: 4px 4px'></div></div>
<pre id="_jsF_332_1709896133_21_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_21_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_21_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_21_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_463 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
async function _jsF_332_1709896133_20(divisor) {
    
    _jsF_332_1709896133_19 = (x) => {
        return ((x%divisor)===1);
    }
    _jsF_332_1709896133_18 = (_jsD_488_1709896133_460) => _jsD_488_1709896133_460.filt((_jsD_488_1709896133_461) => (_jsF_332_1709896133_19(_jsD_488_1709896133_461)), null)
    _jsF_332_1709896133_17 = (_jsD_488_1709896133_459) => { return _jsF_332_1709896133_18(_jsD_488_1709896133_459); };
    return _jsF_332_1709896133_17(_jsD_488_1709896133_463);
}
        window._jsF_332_1709896133_20 = _jsF_332_1709896133_20;
        _jsF_332_1709896133_21_error = document.querySelector("#_jsF_332_1709896133_21_error");
        _jsF_332_1709896133_21_resultDiv = document.querySelector("#_jsF_332_1709896133_21_result");
        _jsF_332_1709896133_21_loadingDiv = document.querySelector("#_jsF_332_1709896133_21_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_21_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_21_error.innerHTML = "";
                _jsF_332_1709896133_21_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_20(parseInt(document.querySelector('#_jsD_488_1709896133_458').value || 0));
                if (!handle.cancel) {
                    _jsF_332_1709896133_21_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_21_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_21_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_21_reload_timeout = null;
        const _jsF_332_1709896133_21_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_21_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_21_reload_timeout);
                _jsF_332_1709896133_21_reload_timeout = setTimeout(_jsF_332_1709896133_21_reload_core, 0)
            }
        }
        document.querySelector('#_jsD_488_1709896133_458').oninput = _jsF_332_1709896133_21_reload;
        
        _jsF_332_1709896133_21_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_21_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_21_loadF();
        } catch (e) {}
    })();
</script></div><p>It can be crazy complicated, yet still works:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">2</span>
<span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="s2">&quot;parseFloat((x//3 + c) ** 4)&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_25&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_469</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_25</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">12</span><span class="p">;</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_24</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="o">/</span><span class="mf">3</span><span class="p">)</span><span class="o">+</span><span class="nx">c</span><span class="p">),</span><span class="w"> </span><span class="mf">4</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_488_1709896133_466</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_23</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_465</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_465</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_467</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_24</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_467</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_466</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_22</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_464</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_23</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_464</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_22</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_469</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_26_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'></div>
<pre id="_jsF_332_1709896133_26_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_26_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_26_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_26_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_469 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
async function _jsF_332_1709896133_25() {
    c = 12;
    _jsF_332_1709896133_24 = (x) => {
        return parseFloat(Math.pow((Math.floor(x/3)+c), 4));
    }
    _jsD_488_1709896133_466 = {};
    _jsF_332_1709896133_23 = (_jsD_488_1709896133_465) => _jsD_488_1709896133_465.apply((_jsD_488_1709896133_467) => _jsF_332_1709896133_24(_jsD_488_1709896133_467), null, _jsD_488_1709896133_466, false)
    _jsF_332_1709896133_22 = (_jsD_488_1709896133_464) => { return _jsF_332_1709896133_23(_jsD_488_1709896133_464); };
    return _jsF_332_1709896133_22(_jsD_488_1709896133_469);
}
        window._jsF_332_1709896133_25 = _jsF_332_1709896133_25;
        _jsF_332_1709896133_26_error = document.querySelector("#_jsF_332_1709896133_26_error");
        _jsF_332_1709896133_26_resultDiv = document.querySelector("#_jsF_332_1709896133_26_result");
        _jsF_332_1709896133_26_loadingDiv = document.querySelector("#_jsF_332_1709896133_26_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_26_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_26_error.innerHTML = "";
                _jsF_332_1709896133_26_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_25();
                if (!handle.cancel) {
                    _jsF_332_1709896133_26_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_26_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_26_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_26_reload_timeout = null;
        const _jsF_332_1709896133_26_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_26_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_26_reload_timeout);
                _jsF_332_1709896133_26_reload_timeout = setTimeout(_jsF_332_1709896133_26_reload_core, 0)
            }
        }
        
        
        _jsF_332_1709896133_26_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_26_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_26_loadF();
        } catch (e) {}
    })();
</script></div><p>If you noticed, the transpiled JS code for <code class="docutils literal notranslate"><span class="pre">(x//3</span> <span class="pre">+</span> <span class="pre">6)</span> <span class="pre">**</span> <span class="pre">4</span></code> is actually
<code class="docutils literal notranslate"><span class="pre">Math.pow((Math.floor(x/3)+6),</span> <span class="pre">4)</span></code>. The transpiler understands your code
written in Python, and translates operations like <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">**</span> <span class="pre">b</span></code> into <code class="docutils literal notranslate"><span class="pre">Math.pow(a,</span> <span class="pre">b)</span></code>
automatically. How cool is that! And as demonstrated in the previous example,
you can also use JS variables too (<code class="docutils literal notranslate"><span class="pre">divisor</span></code>), instead of just Python variables.</p>
<p>Notice how it also figures out that <code class="docutils literal notranslate"><span class="pre">c</span></code> must be a Python variable, so the
transpiler will auto convert that to json and injects it into the JS code. Also
notice how you can freely mix JS and Python code a little bit. For basic operations,
use Python syntax, while for function calling, you can use JS functions.</p>
<p>Lambda functions with lots of variables and <a class="reference internal" href="index.html#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">op</span></code></a> works too:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">insertIdColumn</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="s2">&quot;lambda x,y: x*y&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_31&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_476</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_31</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_28</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_471</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_471</span><span class="p">.</span><span class="nx">insertIdColumn</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_30</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">y</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_488_1709896133_473</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_29</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_472</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_472</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_474</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_30</span><span class="p">(...</span><span class="nx">_jsD_488_1709896133_474</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_473</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_27</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_470</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_29</span><span class="p">(</span><span class="nx">_jsF_332_1709896133_28</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_470</span><span class="p">));</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_27</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_476</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_32_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'></div>
<pre id="_jsF_332_1709896133_32_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_32_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_32_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_32_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_476 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
async function _jsF_332_1709896133_31() {
    _jsF_332_1709896133_28 = (_jsD_488_1709896133_471) => _jsD_488_1709896133_471.insertIdColumn(false, true)
    
    _jsF_332_1709896133_30 = (x, y) => {
        return (x*y);
    }
    _jsD_488_1709896133_473 = {};
    _jsF_332_1709896133_29 = (_jsD_488_1709896133_472) => _jsD_488_1709896133_472.apply((_jsD_488_1709896133_474) => _jsF_332_1709896133_30(..._jsD_488_1709896133_474), null, _jsD_488_1709896133_473, false)
    _jsF_332_1709896133_27 = (_jsD_488_1709896133_470) => { return _jsF_332_1709896133_29(_jsF_332_1709896133_28(_jsD_488_1709896133_470)); };
    return _jsF_332_1709896133_27(_jsD_488_1709896133_476);
}
        window._jsF_332_1709896133_31 = _jsF_332_1709896133_31;
        _jsF_332_1709896133_32_error = document.querySelector("#_jsF_332_1709896133_32_error");
        _jsF_332_1709896133_32_resultDiv = document.querySelector("#_jsF_332_1709896133_32_result");
        _jsF_332_1709896133_32_loadingDiv = document.querySelector("#_jsF_332_1709896133_32_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_32_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_32_error.innerHTML = "";
                _jsF_332_1709896133_32_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_31();
                if (!handle.cancel) {
                    _jsF_332_1709896133_32_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_32_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_32_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_32_reload_timeout = null;
        const _jsF_332_1709896133_32_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_32_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_32_reload_timeout);
                _jsF_332_1709896133_32_reload_timeout = setTimeout(_jsF_332_1709896133_32_reload_core, 0)
            }
        }
        
        
        _jsF_332_1709896133_32_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_32_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_32_loadF();
        } catch (e) {}
    })();
</script></div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_36&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_484</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_36</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_35</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_482</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_482</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_488_1709896133_480</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_34</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_479</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_479</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_481</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_35</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_481</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_480</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_33</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_478</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_34</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_478</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_33</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_484</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_37_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'></div>
<pre id="_jsF_332_1709896133_37_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_37_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_37_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_37_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_484 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
async function _jsF_332_1709896133_36() {
    
    _jsF_332_1709896133_35 = (_jsD_488_1709896133_482) => {
        return Math.pow(_jsD_488_1709896133_482, 2);
    }
    _jsD_488_1709896133_480 = {};
    _jsF_332_1709896133_34 = (_jsD_488_1709896133_479) => _jsD_488_1709896133_479.apply((_jsD_488_1709896133_481) => _jsF_332_1709896133_35(_jsD_488_1709896133_481), null, _jsD_488_1709896133_480, false)
    _jsF_332_1709896133_33 = (_jsD_488_1709896133_478) => { return _jsF_332_1709896133_34(_jsD_488_1709896133_478); };
    return _jsF_332_1709896133_33(_jsD_488_1709896133_484);
}
        window._jsF_332_1709896133_36 = _jsF_332_1709896133_36;
        _jsF_332_1709896133_37_error = document.querySelector("#_jsF_332_1709896133_37_error");
        _jsF_332_1709896133_37_resultDiv = document.querySelector("#_jsF_332_1709896133_37_result");
        _jsF_332_1709896133_37_loadingDiv = document.querySelector("#_jsF_332_1709896133_37_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_37_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_37_error.innerHTML = "";
                _jsF_332_1709896133_37_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_36();
                if (!handle.cancel) {
                    _jsF_332_1709896133_37_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_37_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_37_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_37_reload_timeout = null;
        const _jsF_332_1709896133_37_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_37_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_37_reload_timeout);
                _jsF_332_1709896133_37_reload_timeout = setTimeout(_jsF_332_1709896133_37_reload_core, 0)
            }
        }
        
        
        _jsF_332_1709896133_37_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_37_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_37_loadF();
        } catch (e) {}
    })();
</script></div><p>Let’s see a more complex example:</p>
</section>
<section id="lots-of-moving-parts">
<h2>Lots of moving parts<a class="headerlink" href="#lots-of-moving-parts" title="Permalink to this heading"></a></h2>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">repeatF</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">9999</span><span class="p">),</span> <span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;$</span><span class="si">{term}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">pretty</span><span class="p">()</span> <span class="o">|</span> <span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">pre</span><span class="p">)</span>
<span class="n">jsFunc</span> <span class="o">=</span> <span class="n">data</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">(</span><span class="s2">&quot;term&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">f1</span> <span class="o">|</span> <span class="n">f2</span><span class="p">)</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_49&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_502</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">2819</span><span class="p">,</span><span class="w"> </span><span class="mf">8060</span><span class="p">,</span><span class="w"> </span><span class="mf">7729</span><span class="p">,</span><span class="w"> </span><span class="mf">5094</span><span class="p">,</span><span class="w"> </span><span class="mf">6230</span><span class="p">,</span><span class="w"> </span><span class="mf">9629</span><span class="p">,</span><span class="w"> </span><span class="mf">6724</span><span class="p">,</span><span class="w"> </span><span class="mf">6218</span><span class="p">,</span><span class="w"> </span><span class="mf">5868</span><span class="p">,</span><span class="w"> </span><span class="mf">9021</span><span class="p">,</span><span class="w"> </span><span class="mf">9581</span><span class="p">,</span><span class="w"> </span><span class="mf">4690</span><span class="p">,</span><span class="w"> </span><span class="mf">9706</span><span class="p">,</span><span class="w"> </span><span class="mf">4021</span><span class="p">,</span><span class="w"> </span><span class="mf">9706</span><span class="p">,</span><span class="w"> </span><span class="mf">6786</span><span class="p">,</span><span class="w"> </span><span class="mf">9357</span><span class="p">,</span><span class="w"> </span><span class="mf">3433</span><span class="p">,</span><span class="w"> </span><span class="mf">9732</span><span class="p">,</span><span class="w"> </span><span class="mf">5681</span><span class="p">,</span><span class="w"> </span><span class="mf">8527</span><span class="p">,</span><span class="w"> </span><span class="mf">3245</span><span class="p">,</span><span class="w"> </span><span class="mf">5424</span><span class="p">,</span><span class="w"> </span><span class="mf">2468</span><span class="p">,</span><span class="w"> </span><span class="mf">5075</span><span class="p">,</span><span class="w"> </span><span class="mf">3609</span><span class="p">,</span><span class="w"> </span><span class="mf">9371</span><span class="p">,</span><span class="w"> </span><span class="mf">9820</span><span class="p">,</span><span class="w"> </span><span class="mf">1733</span><span class="p">,</span><span class="w"> </span><span class="mf">9865</span><span class="p">,</span><span class="w"> </span><span class="mf">7288</span><span class="p">,</span><span class="w"> </span><span class="mf">7082</span><span class="p">,</span><span class="w"> </span><span class="mf">8872</span><span class="p">,</span><span class="w"> </span><span class="mf">8537</span><span class="p">,</span><span class="w"> </span><span class="mf">4137</span><span class="p">,</span><span class="w"> </span><span class="mf">4203</span><span class="p">,</span><span class="w"> </span><span class="mf">7172</span><span class="p">,</span><span class="w"> </span><span class="mf">4474</span><span class="p">,</span><span class="w"> </span><span class="mf">3811</span><span class="p">,</span><span class="w"> </span><span class="mf">3096</span><span class="p">,</span><span class="w"> </span><span class="mf">8124</span><span class="p">,</span><span class="w"> </span><span class="mf">3011</span><span class="p">,</span><span class="w"> </span><span class="mf">6521</span><span class="p">,</span><span class="w"> </span><span class="mf">4463</span><span class="p">,</span><span class="w"> </span><span class="mf">5214</span><span class="p">,</span><span class="w"> </span><span class="mf">4293</span><span class="p">,</span><span class="w"> </span><span class="mf">3720</span><span class="p">,</span><span class="w"> </span><span class="mf">1508</span><span class="p">,</span><span class="w"> </span><span class="mf">2079</span><span class="p">,</span><span class="w"> </span><span class="mf">1416</span><span class="p">,</span><span class="w"> </span><span class="mf">5721</span><span class="p">,</span><span class="w"> </span><span class="mf">8857</span><span class="p">,</span><span class="w"> </span><span class="mf">2436</span><span class="p">,</span><span class="w"> </span><span class="mf">8057</span><span class="p">,</span><span class="w"> </span><span class="mf">3911</span><span class="p">,</span><span class="w"> </span><span class="mf">6149</span><span class="p">,</span><span class="w"> </span><span class="mf">9110</span><span class="p">,</span><span class="w"> </span><span class="mf">8903</span><span class="p">,</span><span class="w"> </span><span class="mf">8169</span><span class="p">,</span><span class="w"> </span><span class="mf">7963</span><span class="p">,</span><span class="w"> </span><span class="mf">1736</span><span class="p">,</span><span class="w"> </span><span class="mf">3160</span><span class="p">,</span><span class="w"> </span><span class="mf">7623</span><span class="p">,</span><span class="w"> </span><span class="mf">1618</span><span class="p">,</span><span class="w"> </span><span class="mf">2344</span><span class="p">,</span><span class="w"> </span><span class="mf">3403</span><span class="p">,</span><span class="w"> </span><span class="mf">3186</span><span class="p">,</span><span class="w"> </span><span class="mf">8216</span><span class="p">,</span><span class="w"> </span><span class="mf">5831</span><span class="p">,</span><span class="w"> </span><span class="mf">4398</span><span class="p">,</span><span class="w"> </span><span class="mf">7311</span><span class="p">,</span><span class="w"> </span><span class="mf">7241</span><span class="p">,</span><span class="w"> </span><span class="mf">2311</span><span class="p">,</span><span class="w"> </span><span class="mf">8564</span><span class="p">,</span><span class="w"> </span><span class="mf">7647</span><span class="p">,</span><span class="w"> </span><span class="mf">7090</span><span class="p">,</span><span class="w"> </span><span class="mf">4498</span><span class="p">,</span><span class="w"> </span><span class="mf">7311</span><span class="p">,</span><span class="w"> </span><span class="mf">7414</span><span class="p">,</span><span class="w"> </span><span class="mf">9364</span><span class="p">,</span><span class="w"> </span><span class="mf">9572</span><span class="p">,</span><span class="w"> </span><span class="mf">4703</span><span class="p">,</span><span class="w"> </span><span class="mf">3491</span><span class="p">,</span><span class="w"> </span><span class="mf">7363</span><span class="p">,</span><span class="w"> </span><span class="mf">7058</span><span class="p">,</span><span class="w"> </span><span class="mf">5429</span><span class="p">,</span><span class="w"> </span><span class="mf">8852</span><span class="p">,</span><span class="w"> </span><span class="mf">8895</span><span class="p">,</span><span class="w"> </span><span class="mf">1282</span><span class="p">,</span><span class="w"> </span><span class="mf">4579</span><span class="p">,</span><span class="w"> </span><span class="mf">9147</span><span class="p">,</span><span class="w"> </span><span class="mf">6300</span><span class="p">,</span><span class="w"> </span><span class="mf">2556</span><span class="p">,</span><span class="w"> </span><span class="mf">2574</span><span class="p">,</span><span class="w"> </span><span class="mf">4503</span><span class="p">,</span><span class="w"> </span><span class="mf">1087</span><span class="p">,</span><span class="w"> </span><span class="mf">3354</span><span class="p">,</span><span class="w"> </span><span class="mf">1192</span><span class="p">,</span><span class="w"> </span><span class="mf">9333</span><span class="p">,</span><span class="w"> </span><span class="mf">7106</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_49</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_40</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_488</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_488</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">term</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">col</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">inv</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">})</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsD_488_1709896133_491</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_41</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_490</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_490</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_492</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_492</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_491</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_42</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_493</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_493</span><span class="p">.</span><span class="nx">batched</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_43</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_494</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_494</span><span class="p">.</span><span class="nx">head</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_39</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_487</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_43</span><span class="p">(</span><span class="nx">_jsF_332_1709896133_42</span><span class="p">(</span><span class="nx">_jsF_332_1709896133_41</span><span class="p">(</span><span class="nx">_jsF_332_1709896133_40</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_487</span><span class="p">))));</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_45</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_497</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_497</span><span class="p">.</span><span class="nx">pretty</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_46</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_498</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_498</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_48</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_501</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`&lt;pre style=&#39;font-family: monospace&#39;&gt;</span><span class="si">${</span><span class="nx">_jsD_488_1709896133_501</span><span class="si">}</span><span class="sb">&lt;/pre&gt;`</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_44</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_496</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_48</span><span class="p">(</span><span class="nx">_jsF_332_1709896133_46</span><span class="p">(</span><span class="nx">_jsF_332_1709896133_45</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_496</span><span class="p">)));</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_38</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_486</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_44</span><span class="p">(</span><span class="nx">_jsF_332_1709896133_39</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_486</span><span class="p">));</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_38</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_502</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_50_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'><div>term</div><div><input type='text' value='' placeholder='term' id='_jsD_488_1709896133_485' style='padding: 4px 4px'></div></div>
<pre id="_jsF_332_1709896133_50_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_50_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_50_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_50_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_502 = [2819, 8060, 7729, 5094, 6230, 9629, 6724, 6218, 5868, 9021, 9581, 4690, 9706, 4021, 9706, 6786, 9357, 3433, 9732, 5681, 8527, 3245, 5424, 2468, 5075, 3609, 9371, 9820, 1733, 9865, 7288, 7082, 8872, 8537, 4137, 4203, 7172, 4474, 3811, 3096, 8124, 3011, 6521, 4463, 5214, 4293, 3720, 1508, 2079, 1416, 5721, 8857, 2436, 8057, 3911, 6149, 9110, 8903, 8169, 7963, 1736, 3160, 7623, 1618, 2344, 3403, 3186, 8216, 5831, 4398, 7311, 7241, 2311, 8564, 7647, 7090, 4498, 7311, 7414, 9364, 9572, 4703, 3491, 7363, 7058, 5429, 8852, 8895, 1282, 4579, 9147, 6300, 2556, 2574, 4503, 1087, 3354, 1192, 9333, 7106];
async function _jsF_332_1709896133_49(term) {
    _jsF_332_1709896133_40 = (_jsD_488_1709896133_488) => _jsD_488_1709896133_488.grep(`${term}`, {col: null, inv: false})
    
    _jsD_488_1709896133_491 = {};
    _jsF_332_1709896133_41 = (_jsD_488_1709896133_490) => _jsD_488_1709896133_490.apply((_jsD_488_1709896133_492) => String(_jsD_488_1709896133_492), null, _jsD_488_1709896133_491, false)
    _jsF_332_1709896133_42 = (_jsD_488_1709896133_493) => _jsD_488_1709896133_493.batched(5, true)
    _jsF_332_1709896133_43 = (_jsD_488_1709896133_494) => _jsD_488_1709896133_494.head(10, false)
    _jsF_332_1709896133_39 = (_jsD_488_1709896133_487) => { return _jsF_332_1709896133_43(_jsF_332_1709896133_42(_jsF_332_1709896133_41(_jsF_332_1709896133_40(_jsD_488_1709896133_487)))); };
    _jsF_332_1709896133_45 = (_jsD_488_1709896133_497) => _jsD_488_1709896133_497.pretty("", false)
    _jsF_332_1709896133_46 = (_jsD_488_1709896133_498) => _jsD_488_1709896133_498.join("\n")
    _jsF_332_1709896133_48 = (_jsD_488_1709896133_501) => `<pre style='font-family: monospace'>${_jsD_488_1709896133_501}</pre>`
    _jsF_332_1709896133_44 = (_jsD_488_1709896133_496) => { return _jsF_332_1709896133_48(_jsF_332_1709896133_46(_jsF_332_1709896133_45(_jsD_488_1709896133_496))); };
    _jsF_332_1709896133_38 = (_jsD_488_1709896133_486) => { return _jsF_332_1709896133_44(_jsF_332_1709896133_39(_jsD_488_1709896133_486)); };
    return _jsF_332_1709896133_38(_jsD_488_1709896133_502);
}
        window._jsF_332_1709896133_49 = _jsF_332_1709896133_49;
        _jsF_332_1709896133_50_error = document.querySelector("#_jsF_332_1709896133_50_error");
        _jsF_332_1709896133_50_resultDiv = document.querySelector("#_jsF_332_1709896133_50_result");
        _jsF_332_1709896133_50_loadingDiv = document.querySelector("#_jsF_332_1709896133_50_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_50_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_50_error.innerHTML = "";
                _jsF_332_1709896133_50_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_49(document.querySelector('#_jsD_488_1709896133_485').value);
                if (!handle.cancel) {
                    _jsF_332_1709896133_50_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_50_resultDiv.innerHTML = val;
                    
containerDiv = document.createElement('div'); containerDiv.innerHTML = val;
for (const scriptElem of containerDiv.querySelectorAll('script')) eval(scriptElem.textContent);
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_50_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_50_reload_timeout = null;
        const _jsF_332_1709896133_50_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_50_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_50_reload_timeout);
                _jsF_332_1709896133_50_reload_timeout = setTimeout(_jsF_332_1709896133_50_reload_core, 0)
            }
        }
        document.querySelector('#_jsD_488_1709896133_485').oninput = _jsF_332_1709896133_50_reload;
        
        _jsF_332_1709896133_50_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_50_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_50_loadF();
        } catch (e) {}
    })();
</script></div><p>Just a reminder, you can specify <a class="reference internal" href="index.html#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a> at any point in
the pipeline. As long as the data you pipe into the <a class="reference internal" href="index.html#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a>-captured
block can be converted into json, you’re good.</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">jsFunc</span> <span class="o">=</span> <span class="n">data</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;x%3 == 0&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;x%2 == 0&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_57&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_511</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_57</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_54</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="nx">x</span><span class="o">%</span><span class="mf">3</span><span class="p">)</span><span class="o">===</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_53</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_505</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_505</span><span class="p">.</span><span class="nx">filt</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_506</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsF_332_1709896133_54</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_506</span><span class="p">)),</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_56</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="nx">x</span><span class="o">%</span><span class="mf">2</span><span class="p">)</span><span class="o">===</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_55</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_508</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_508</span><span class="p">.</span><span class="nx">filt</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_509</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsF_332_1709896133_56</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_509</span><span class="p">)),</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_52</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_504</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="nx">_jsF_332_1709896133_53</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_504</span><span class="p">),</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_55</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_504</span><span class="p">)];</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_51</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_503</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_52</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_503</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_51</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_511</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_58_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'></div>
<pre id="_jsF_332_1709896133_58_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_58_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_58_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_58_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_511 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
async function _jsF_332_1709896133_57() {
    
    _jsF_332_1709896133_54 = (x) => {
        return ((x%3)===0);
    }
    _jsF_332_1709896133_53 = (_jsD_488_1709896133_505) => _jsD_488_1709896133_505.filt((_jsD_488_1709896133_506) => (_jsF_332_1709896133_54(_jsD_488_1709896133_506)), null)
    
    _jsF_332_1709896133_56 = (x) => {
        return ((x%2)===0);
    }
    _jsF_332_1709896133_55 = (_jsD_488_1709896133_508) => _jsD_488_1709896133_508.filt((_jsD_488_1709896133_509) => (_jsF_332_1709896133_56(_jsD_488_1709896133_509)), null)
    _jsF_332_1709896133_52 = (_jsD_488_1709896133_504) => [_jsF_332_1709896133_53(_jsD_488_1709896133_504), _jsF_332_1709896133_55(_jsD_488_1709896133_504)];
    _jsF_332_1709896133_51 = (_jsD_488_1709896133_503) => { return _jsF_332_1709896133_52(_jsD_488_1709896133_503); };
    return _jsF_332_1709896133_51(_jsD_488_1709896133_511);
}
        window._jsF_332_1709896133_57 = _jsF_332_1709896133_57;
        _jsF_332_1709896133_58_error = document.querySelector("#_jsF_332_1709896133_58_error");
        _jsF_332_1709896133_58_resultDiv = document.querySelector("#_jsF_332_1709896133_58_result");
        _jsF_332_1709896133_58_loadingDiv = document.querySelector("#_jsF_332_1709896133_58_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_58_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_58_error.innerHTML = "";
                _jsF_332_1709896133_58_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_57();
                if (!handle.cancel) {
                    _jsF_332_1709896133_58_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_58_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_58_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_58_reload_timeout = null;
        const _jsF_332_1709896133_58_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_58_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_58_reload_timeout);
                _jsF_332_1709896133_58_reload_timeout = setTimeout(_jsF_332_1709896133_58_reload_core, 0)
            }
        }
        
        
        _jsF_332_1709896133_58_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_58_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_58_loadF();
        } catch (e) {}
    })();
</script></div></section>
<section id="custom-transpiler-logic">
<h2>Custom transpiler logic<a class="headerlink" href="#custom-transpiler-logic" title="Permalink to this heading"></a></h2>
<p>You can write transpiler logic for any custom class/functions that you desire!
Let’s imagine the use case to be writing a function that calculates the factorial
sequence, where an initial number is multiplied by increments of itself, and
getting the first n elements out of it. Let’s see an example using classes:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Factorio</span><span class="p">(</span><span class="n">BaseCli</span><span class="p">):</span> <span class="c1"># yes, the spelling is not the math func, but the game. But I love Factorio so</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
    <span class="k">def</span> <span class="fm">__ror__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">start</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">value</span>
            <span class="n">value</span> <span class="o">*=</span> <span class="n">start</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">def</span> <span class="nf">_jsF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meta</span><span class="p">):</span>
        <span class="n">fIdx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;f_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">vIdx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;f_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  const </span><span class="si">{</span><span class="n">fIdx</span><span class="si">}</span><span class="s2"> = (</span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2">) =&gt; </span><span class="se">{{</span>
<span class="s2">      const ans = []; let value = </span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">      for (let i = 0; i &lt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">; i++) </span><span class="se">{{</span>
<span class="s2">          ans.push(value);</span>
<span class="s2">          value = value * (</span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2"> + i + 1);</span>
<span class="s2">      </span><span class="se">}}</span>
<span class="s2">      return ans;</span>
<span class="s2">  </span><span class="se">}}</span><span class="s2">;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">,</span> <span class="n">fIdx</span>

<span class="mi">2</span> <span class="o">|</span> <span class="n">Factorio</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [2, 6, 24, 120, 720]</span>

<span class="n">jsFunc</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">((</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="o">|</span> <span class="n">Factorio</span><span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_60&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_514</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_60</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">f_550435_1709896145</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">f_619010_1709896145</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">ans</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">f_619010_1709896145</span><span class="p">;</span>
<span class="w">          </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">size</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">ans</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="w">              </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="nx">f_619010_1709896145</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="nx">ans</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">            </span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_513</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">f_550435_1709896145</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_513</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_59</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_514</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">()</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_61_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'><div>size</div><div><input type='number' value='3' placeholder='size' id='_jsD_488_1709896133_512' style='padding: 4px 4px'></div></div>
<pre id="_jsF_332_1709896133_61_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_61_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_61_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_61_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_514 = 2;
async function _jsF_332_1709896133_60(size) {
    
      const f_550435_1709896145 = (f_619010_1709896145) => {
          const ans = []; let value = f_619010_1709896145;
          for (let i = 0; i < size; i++) {
              ans.push(value);
              value = value * (f_619010_1709896145 + i + 1);
          }
          return ans;
      };
            
    _jsF_332_1709896133_59 = (_jsD_488_1709896133_513) => { return f_550435_1709896145(_jsD_488_1709896133_513); };
    return _jsF_332_1709896133_59(_jsD_488_1709896133_514);
}
        window._jsF_332_1709896133_60 = _jsF_332_1709896133_60;
        _jsF_332_1709896133_61_error = document.querySelector("#_jsF_332_1709896133_61_error");
        _jsF_332_1709896133_61_resultDiv = document.querySelector("#_jsF_332_1709896133_61_result");
        _jsF_332_1709896133_61_loadingDiv = document.querySelector("#_jsF_332_1709896133_61_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_61_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_61_error.innerHTML = "";
                _jsF_332_1709896133_61_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_60(parseInt(document.querySelector('#_jsD_488_1709896133_512').value || 0));
                if (!handle.cancel) {
                    _jsF_332_1709896133_61_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_61_resultDiv.innerHTML = val;
                    
containerDiv = document.createElement('div'); containerDiv.innerHTML = val;
for (const scriptElem of containerDiv.querySelectorAll('script')) eval(scriptElem.textContent);
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_61_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_61_reload_timeout = null;
        const _jsF_332_1709896133_61_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_61_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_61_reload_timeout);
                _jsF_332_1709896133_61_reload_timeout = setTimeout(_jsF_332_1709896133_61_reload_core, 0)
            }
        }
        document.querySelector('#_jsD_488_1709896133_512').oninput = _jsF_332_1709896133_61_reload;
        
        _jsF_332_1709896133_61_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_61_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_61_loadF();
        } catch (e) {}
    })();
</script></div><p>You can also write transpiler functions for any functions you want. Let’s write
one for the inverse square root function:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inv_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">numerator</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">numerator</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_jsF_inv_sqrt</span><span class="p">(</span><span class="n">meta</span><span class="p">,</span> <span class="n">numerator</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">fIdx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;f_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">vIdx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;f_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;const </span><span class="si">{</span><span class="n">fIdx</span><span class="si">}</span><span class="s2"> = (</span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2">) =&gt; </span><span class="se">{{</span><span class="s2"> return </span><span class="si">{</span><span class="n">numerator</span><span class="si">}</span><span class="s2">/Math.sqrt(</span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2">); </span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fIdx</span>
<span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">kjs</span><span class="o">.</span><span class="n">jsF</span><span class="p">[</span><span class="n">inv_sqrt</span><span class="p">]</span> <span class="o">=</span> <span class="n">_jsF_inv_sqrt</span>

<span class="n">inv_sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># returns number close to 0.5</span>

<span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">((</span><span class="s2">&quot;someNum&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">inv_sqrt</span><span class="p">,</span> <span class="n">numerator</span><span class="o">=</span><span class="s2">&quot;someNum&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_332_1709896133_66&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_488_1709896133_524</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">];</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_66</span><span class="p">(</span><span class="nx">someNum</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">f_90314_1709896145</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">f_736145_1709896145</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">someNum</span><span class="o">/</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">f_736145_1709896145</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_488_1709896133_518</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;numerator&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;someNum&quot;</span><span class="p">};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_517</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_517</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_519</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">f_90314_1709896145</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_519</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_518</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_523</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_523</span><span class="p">)</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="o">+</span><span class="nb">Number</span><span class="p">.</span><span class="nx">EPSILON</span><span class="p">)</span><span class="o">/</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsD_488_1709896133_521</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;ndigits&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">};</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_520</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_520</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_488_1709896133_522</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_65</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_522</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_488_1709896133_521</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_332_1709896133_62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_488_1709896133_516</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_64</span><span class="p">(</span><span class="nx">_jsF_332_1709896133_63</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_516</span><span class="p">));</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_332_1709896133_62</span><span class="p">(</span><span class="nx">_jsD_488_1709896133_524</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_67_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'><div>someNum</div><div><input type='number' value='1' placeholder='someNum' id='_jsD_488_1709896133_515' style='padding: 4px 4px'></div></div>
<pre id="_jsF_332_1709896133_67_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_67_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_67_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_67_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_524 = [1, 2, 3, 4, 5, 6, 7, 8, 9];
async function _jsF_332_1709896133_66(someNum) {
    const f_90314_1709896145 = (f_736145_1709896145) => { return someNum/Math.sqrt(f_736145_1709896145); }
    _jsD_488_1709896133_518 = {"numerator": "someNum"};
    _jsF_332_1709896133_63 = (_jsD_488_1709896133_517) => _jsD_488_1709896133_517.apply((_jsD_488_1709896133_519) => f_90314_1709896145(_jsD_488_1709896133_519), null, _jsD_488_1709896133_518, false)
    _jsF_332_1709896133_65 = (_jsD_488_1709896133_523) => Math.round((_jsD_488_1709896133_523)*Math.pow(10, 2)+Number.EPSILON)/Math.pow(10, 2)
    _jsD_488_1709896133_521 = {"ndigits": 2};
    _jsF_332_1709896133_64 = (_jsD_488_1709896133_520) => _jsD_488_1709896133_520.apply((_jsD_488_1709896133_522) => _jsF_332_1709896133_65(_jsD_488_1709896133_522), null, _jsD_488_1709896133_521, false)
    _jsF_332_1709896133_62 = (_jsD_488_1709896133_516) => { return _jsF_332_1709896133_64(_jsF_332_1709896133_63(_jsD_488_1709896133_516)); };
    return _jsF_332_1709896133_62(_jsD_488_1709896133_524);
}
        window._jsF_332_1709896133_66 = _jsF_332_1709896133_66;
        _jsF_332_1709896133_67_error = document.querySelector("#_jsF_332_1709896133_67_error");
        _jsF_332_1709896133_67_resultDiv = document.querySelector("#_jsF_332_1709896133_67_result");
        _jsF_332_1709896133_67_loadingDiv = document.querySelector("#_jsF_332_1709896133_67_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_67_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_67_error.innerHTML = "";
                _jsF_332_1709896133_67_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_66(parseInt(document.querySelector('#_jsD_488_1709896133_515').value || 0));
                if (!handle.cancel) {
                    _jsF_332_1709896133_67_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_67_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_67_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_67_reload_timeout = null;
        const _jsF_332_1709896133_67_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_67_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_67_reload_timeout);
                _jsF_332_1709896133_67_reload_timeout = setTimeout(_jsF_332_1709896133_67_reload_core, 0)
            }
        }
        document.querySelector('#_jsD_488_1709896133_515').oninput = _jsF_332_1709896133_67_reload;
        
        _jsF_332_1709896133_67_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_67_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_67_loadF();
        } catch (e) {}
    })();
</script></div><p>If your function is really simple and exists in JS natively, you can simplify it way down:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">kjs</span><span class="o">.</span><span class="n">jsF</span><span class="p">[</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">meta</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Math.sqrt&quot;</span><span class="p">)</span>

<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<style>
    ._jsF_332_1709896133_73_btn:hover {
    }
</style>
<div style='display: grid; grid-template-columns: 1fr 3fr; width: 400px'></div>
<pre id="_jsF_332_1709896133_73_error" style="color: red"></pre>
<div id="_jsF_332_1709896133_73_loading" style="margin-top: 4px">&nbsp;</div>
<div id="_jsF_332_1709896133_73_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script>
<script>
    _jsF_332_1709896133_73_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_488_1709896133_533 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
async function _jsF_332_1709896133_72() {
    
    _jsD_488_1709896133_527 = {};
    _jsF_332_1709896133_69 = (_jsD_488_1709896133_526) => _jsD_488_1709896133_526.apply((_jsD_488_1709896133_528) => Math.sqrt(_jsD_488_1709896133_528), null, _jsD_488_1709896133_527, false)
    _jsF_332_1709896133_71 = (_jsD_488_1709896133_532) => Math.round((_jsD_488_1709896133_532)*Math.pow(10, 2)+Number.EPSILON)/Math.pow(10, 2)
    _jsD_488_1709896133_530 = {"ndigits": 2};
    _jsF_332_1709896133_70 = (_jsD_488_1709896133_529) => _jsD_488_1709896133_529.apply((_jsD_488_1709896133_531) => _jsF_332_1709896133_71(_jsD_488_1709896133_531), null, _jsD_488_1709896133_530, false)
    _jsF_332_1709896133_68 = (_jsD_488_1709896133_525) => { return _jsF_332_1709896133_70(_jsF_332_1709896133_69(_jsD_488_1709896133_525)); };
    return _jsF_332_1709896133_68(_jsD_488_1709896133_533);
}
        window._jsF_332_1709896133_72 = _jsF_332_1709896133_72;
        _jsF_332_1709896133_73_error = document.querySelector("#_jsF_332_1709896133_73_error");
        _jsF_332_1709896133_73_resultDiv = document.querySelector("#_jsF_332_1709896133_73_result");
        _jsF_332_1709896133_73_loadingDiv = document.querySelector("#_jsF_332_1709896133_73_loading");
        const runningCoreHandle = [null];
        const _jsF_332_1709896133_73_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_332_1709896133_73_error.innerHTML = "";
                _jsF_332_1709896133_73_loadingDiv.innerHTML = "(loading...)";
                const val = await _jsF_332_1709896133_72();
                if (!handle.cancel) {
                    _jsF_332_1709896133_73_loadingDiv.innerHTML = "&nbsp;";
                    _jsF_332_1709896133_73_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;
                    
                }
            } catch (e) { if (!handle.cancel) _jsF_332_1709896133_73_error.innerHTML = e.stack; }
            runningCoreHandle[0] = null;
        };
        let _jsF_332_1709896133_73_reload_timeout = null;
        const _jsF_332_1709896133_73_reload = async (e) => {
            
            if (0 <= 0) return _jsF_332_1709896133_73_reload_core();
            else {
                clearTimeout(_jsF_332_1709896133_73_reload_timeout);
                _jsF_332_1709896133_73_reload_timeout = setTimeout(_jsF_332_1709896133_73_reload_core, 0)
            }
        }
        
        
        _jsF_332_1709896133_73_reload(null);
    };
    // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS
    (async () => {
        try {
            require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; _jsF_332_1709896133_73_loadF(); })(); });
        } catch (e) {}
    })();
    (async () => {
        try {
            const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text();
            eval(res); window.k1js = await k1js; _jsF_332_1709896133_73_loadF();
        } catch (e) {}
    })();
</script></div></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="k1lib.cli module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="llvm.html" class="btn btn-neutral float-right" title="LLVM optimizer tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Quang Ho.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>