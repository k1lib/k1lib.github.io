

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JS transpiler tutorial &mdash; k1lib  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LLVM optimizer tutorial" href="llvm.html" />
    <link rel="prev" title="k1lib.cli module" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            k1lib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../base.html">Base module</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">k1lib.cli module</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#intro">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#argument-expansion">Argument expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#inverting-conditions">Inverting conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#capturing-operators">Capturing operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cli-composition">Cli composition</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#js-transpiler">JS transpiler</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">JS transpiler tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-example">Basic example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clis-that-take-in-functions">Clis that take in functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lots-of-moving-parts">Lots of moving parts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-transpiler-logic">Custom transpiler logic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#philosophy">Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#where-to-start">Where to start?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#under-the-hood">Under the hood</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#creating-your-own-cli">Creating your own cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#accelerations">Accelerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.bio">bio module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.cif">cif module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.conv">conv module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.mgi">mgi module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.filt">filt module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.gb">gb module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.grep">grep module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#init-module">init module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.inp">inp module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kapi">kapi module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kcv">kcv module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kgv">kgv module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kjs">kjs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.ktree">ktree module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.kxml">kxml module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.lsext">lsext module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.models">models module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.modifier">modifier module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#applycl-module">_applyCl module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.nb">nb module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.output">output module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.sam">sam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.structural">structural module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.trace">trace module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.utils">utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.typehint">typehint module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-k1lib.cli.optimizations">optimizations module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#elsewhere-in-the-library">Elsewhere in the library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../callbacks/index.html">k1lib.callbacks module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../k1a.html">k1lib._k1a module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k1ui.html">k1lib.k1ui module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eqn.html">k1lib.eqn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fmt.html">k1lib.fmt module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graphEqn.html">k1lib.graphEqn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../imports.html">k1lib.imports module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mo.html">k1lib.mo module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kast.html">k1lib.kast module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kcom.html">k1lib.kcom module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knn.html">k1lib.knn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kop.html">k1lib.kop module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kws.html">k1lib.kws module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../p5.html">k1lib.p5 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html">k1lib.schedule module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../selector.html">k1lib.selector module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../selen.html">k1lib.selen module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serpent.html">k1lib.serpent module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serve.html">k1lib.serve module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../viz.html">k1lib.viz module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zircon.html">k1lib.zircon module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../monkey.html">Monkey patched classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelogs.html">Changelogs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">k1lib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">k1lib.cli module</a></li>
      <li class="breadcrumb-item active">JS transpiler tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cli/js_transpiler.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="js-transpiler-tutorial">
<h1>JS transpiler tutorial<a class="headerlink" href="#js-transpiler-tutorial" title="Link to this heading"></a></h1>
<p>Since version 1.5, k1lib has the ability to transpile clisfrom Python into JS
code, ready to be built into an interface. Here’re some examples:</p>
<section id="basic-example">
<h2>Basic example<a class="headerlink" href="#basic-example" title="Link to this heading"></a></h2>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">repeatF</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">jsFunc</span> <span class="o">=</span> <span class="n">data</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">((</span><span class="s2">&quot;term&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="s2">&quot;term&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_10&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_491</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">89</span><span class="p">,</span><span class="w"> </span><span class="mf">78</span><span class="p">,</span><span class="w"> </span><span class="mf">53</span><span class="p">,</span><span class="w"> </span><span class="mf">88</span><span class="p">,</span><span class="w"> </span><span class="mf">95</span><span class="p">,</span><span class="w"> </span><span class="mf">74</span><span class="p">,</span><span class="w"> </span><span class="mf">26</span><span class="p">,</span><span class="w"> </span><span class="mf">49</span><span class="p">,</span><span class="w"> </span><span class="mf">53</span><span class="p">,</span><span class="w"> </span><span class="mf">90</span><span class="p">,</span><span class="w"> </span><span class="mf">15</span><span class="p">,</span><span class="w"> </span><span class="mf">49</span><span class="p">,</span><span class="w"> </span><span class="mf">53</span><span class="p">,</span><span class="w"> </span><span class="mf">35</span><span class="p">,</span><span class="w"> </span><span class="mf">37</span><span class="p">,</span><span class="w"> </span><span class="mf">15</span><span class="p">,</span><span class="w"> </span><span class="mf">61</span><span class="p">,</span><span class="w"> </span><span class="mf">57</span><span class="p">,</span><span class="w"> </span><span class="mf">38</span><span class="p">,</span><span class="w"> </span><span class="mf">63</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_10</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_489</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_489</span><span class="p">.</span><span class="nx">head</span><span class="p">(</span><span class="nx">term</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_488</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_9</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_488</span><span class="p">);</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_8</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_491</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;jsone&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'><div>term</div><div><input type='number' value='5' placeholder='term' id='_jsD_714_1737789673_492' style='padding: 4px 4px;'></div></div><pre id="_jsF_896_1737789673_11_error" style="color: red"></pre><div id="_jsF_896_1737789673_11_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_11_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_11_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_491 = { inputData: [89, 78, 53, 88, 95, 74, 26, 49, 53, 90, 15, 49, 53, 35, 37, 15, 61, 57, 38, 63], reload: null };
async function _jsF_896_1737789673_10(term) {
    _jsF_896_1737789673_9 = (_jsD_714_1737789673_489) => _jsD_714_1737789673_489.head(term, false)
    _jsF_896_1737789673_8 = (_jsD_714_1737789673_488) => { return _jsF_896_1737789673_9(_jsD_714_1737789673_488); };; return _jsF_896_1737789673_8(_jsD_714_1737789673_491.inputData); }; window._jsF_896_1737789673_10 = _jsF_896_1737789673_10; _jsF_896_1737789673_11_error = document.querySelector("#_jsF_896_1737789673_11_error");
        _jsF_896_1737789673_11_resultDiv = document.querySelector("#_jsF_896_1737789673_11_result"); _jsF_896_1737789673_11_loadingDiv = document.querySelector("#_jsF_896_1737789673_11_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_11_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_11_error.innerHTML = ""; _jsF_896_1737789673_11_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_10(parseInt(document.querySelector('#_jsD_714_1737789673_492').value || 0));
                if (!handle.cancel) { _jsF_896_1737789673_11_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_11_resultDiv.innerHTML = `<pre>${JSON.stringify(val, null, 2)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_11_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_10', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_11_reload_timeout = null;
        const _jsF_896_1737789673_11_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_11_reload_core();
            else { clearTimeout(_jsF_896_1737789673_11_reload_timeout); _jsF_896_1737789673_11_reload_timeout = setTimeout(_jsF_896_1737789673_11_reload_core, 0); }
        }; document.querySelector('#_jsD_714_1737789673_492').oninput = _jsF_896_1737789673_11_reload;; ; _jsF_896_1737789673_11_reload(null); _jsD_714_1737789673_491.reload = _jsF_896_1737789673_11_reload;
        _jsD_714_1737789673_491.reload = () => _jsF_896_1737789673_11_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_11_reload(null); }, 0);
        _jsD_714_1737789673_491.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_11_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_11_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_11_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_11_loadF(); } catch (e) {} })();
    }</script></div><p>In this example, <code class="docutils literal notranslate"><span class="pre">data</span></code> is a list of 20 random numbers. You can then pipe
it into a <a class="reference internal" href="index.html#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a>-captured block (review <a class="reference external" href="index.html#capturing-operators">capturing concept here</a>).
Every operation that’s captured will be transpiled into JS. and bundled into a
<a class="reference internal" href="index.html#k1lib.cli.kjs.JsFunc" title="k1lib.cli.kjs.JsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">JsFunc</span></code></a>. Then you can inject that function anywhere you
want in your application. A lot of times, you’d want to display a search interface
right away, so you can use the <a class="reference internal" href="index.html#k1lib.cli.kjs.JsFunc.interface" title="k1lib.cli.kjs.JsFunc.interface"><code class="xref py py-meth docutils literal notranslate"><span class="pre">JsFunc.interface()</span></code></a> function, which can
display the interface right within your notebook. If you want to inject into your
custom site, then the entire html can be accessed at <code class="docutils literal notranslate"><span class="pre">jsFunc._repr_html_()</span></code></p>
<p>The arguments of <a class="reference internal" href="index.html#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a> are the argument names for the JS function that
you can use anywhere within the Python clis. Try playing around with the search
box of the “Html output” section.</p>
</section>
<section id="clis-that-take-in-functions">
<h2>Clis that take in functions<a class="headerlink" href="#clis-that-take-in-functions" title="Link to this heading"></a></h2>
<p>This also works with clis that are expected to take in a function, like
<a class="reference internal" href="index.html#k1lib.cli.modifier.apply" title="k1lib.cli.modifier.apply"><code class="xref py py-class docutils literal notranslate"><span class="pre">apply</span></code></a> or <a class="reference internal" href="index.html#k1lib.cli.filt.filt" title="k1lib.cli.filt.filt"><code class="xref py py-class docutils literal notranslate"><span class="pre">filt</span></code></a>:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="s2">&quot;x**2&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_15&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_498</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_15</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_714_1737789673_495</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_494</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_494</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_496</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_14</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_496</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_495</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_493</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_13</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_493</span><span class="p">);</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_12</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_498</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'></div><pre id="_jsF_896_1737789673_16_error" style="color: red"></pre><div id="_jsF_896_1737789673_16_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_16_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_16_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_498 = { inputData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], reload: null };
async function _jsF_896_1737789673_15() {
    
    _jsF_896_1737789673_14 = (x) => {
        return Math.pow(x, 2);
    }
    _jsD_714_1737789673_495 = {};
    _jsF_896_1737789673_13 = (_jsD_714_1737789673_494) => _jsD_714_1737789673_494.apply((_jsD_714_1737789673_496) => _jsF_896_1737789673_14(_jsD_714_1737789673_496), null, _jsD_714_1737789673_495, false)
    _jsF_896_1737789673_12 = (_jsD_714_1737789673_493) => { return _jsF_896_1737789673_13(_jsD_714_1737789673_493); };; return _jsF_896_1737789673_12(_jsD_714_1737789673_498.inputData); }; window._jsF_896_1737789673_15 = _jsF_896_1737789673_15; _jsF_896_1737789673_16_error = document.querySelector("#_jsF_896_1737789673_16_error");
        _jsF_896_1737789673_16_resultDiv = document.querySelector("#_jsF_896_1737789673_16_result"); _jsF_896_1737789673_16_loadingDiv = document.querySelector("#_jsF_896_1737789673_16_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_16_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_16_error.innerHTML = ""; _jsF_896_1737789673_16_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_15();
                if (!handle.cancel) { _jsF_896_1737789673_16_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_16_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_16_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_15', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_16_reload_timeout = null;
        const _jsF_896_1737789673_16_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_16_reload_core();
            else { clearTimeout(_jsF_896_1737789673_16_reload_timeout); _jsF_896_1737789673_16_reload_timeout = setTimeout(_jsF_896_1737789673_16_reload_core, 0); }
        }; ; ; _jsF_896_1737789673_16_reload(null); _jsD_714_1737789673_498.reload = _jsF_896_1737789673_16_reload;
        _jsD_714_1737789673_498.reload = () => _jsF_896_1737789673_16_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_16_reload(null); }, 0);
        _jsD_714_1737789673_498.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_16_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_16_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_16_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_16_loadF(); } catch (e) {} })();
    }</script></div><p>More example, this time taking in a js argument:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">((</span><span class="s2">&quot;divisor&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;x </span><span class="si">% d</span><span class="s2">ivisor == 1&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_20&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_504</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_20</span><span class="p">(</span><span class="nx">divisor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_19</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="nx">x</span><span class="o">%</span><span class="nx">divisor</span><span class="p">)</span><span class="o">===</span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_501</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_501</span><span class="p">.</span><span class="nx">filt</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_502</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsF_896_1737789673_19</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_502</span><span class="p">)),</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_500</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_18</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_500</span><span class="p">);</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_17</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_504</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'><div>divisor</div><div><input type='number' value='3' placeholder='divisor' id='_jsD_714_1737789673_505' style='padding: 4px 4px;'></div></div><pre id="_jsF_896_1737789673_21_error" style="color: red"></pre><div id="_jsF_896_1737789673_21_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_21_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_21_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_504 = { inputData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], reload: null };
async function _jsF_896_1737789673_20(divisor) {
    
    _jsF_896_1737789673_19 = (x) => {
        return ((x%divisor)===1);
    }
    _jsF_896_1737789673_18 = (_jsD_714_1737789673_501) => _jsD_714_1737789673_501.filt((_jsD_714_1737789673_502) => (_jsF_896_1737789673_19(_jsD_714_1737789673_502)), null)
    _jsF_896_1737789673_17 = (_jsD_714_1737789673_500) => { return _jsF_896_1737789673_18(_jsD_714_1737789673_500); };; return _jsF_896_1737789673_17(_jsD_714_1737789673_504.inputData); }; window._jsF_896_1737789673_20 = _jsF_896_1737789673_20; _jsF_896_1737789673_21_error = document.querySelector("#_jsF_896_1737789673_21_error");
        _jsF_896_1737789673_21_resultDiv = document.querySelector("#_jsF_896_1737789673_21_result"); _jsF_896_1737789673_21_loadingDiv = document.querySelector("#_jsF_896_1737789673_21_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_21_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_21_error.innerHTML = ""; _jsF_896_1737789673_21_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_20(parseInt(document.querySelector('#_jsD_714_1737789673_505').value || 0));
                if (!handle.cancel) { _jsF_896_1737789673_21_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_21_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_21_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_20', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_21_reload_timeout = null;
        const _jsF_896_1737789673_21_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_21_reload_core();
            else { clearTimeout(_jsF_896_1737789673_21_reload_timeout); _jsF_896_1737789673_21_reload_timeout = setTimeout(_jsF_896_1737789673_21_reload_core, 0); }
        }; document.querySelector('#_jsD_714_1737789673_505').oninput = _jsF_896_1737789673_21_reload;; ; _jsF_896_1737789673_21_reload(null); _jsD_714_1737789673_504.reload = _jsF_896_1737789673_21_reload;
        _jsD_714_1737789673_504.reload = () => _jsF_896_1737789673_21_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_21_reload(null); }, 0);
        _jsD_714_1737789673_504.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_21_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_21_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_21_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_21_loadF(); } catch (e) {} })();
    }</script></div><p>It can be crazy complicated, yet still works:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">2</span>
<span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="s2">&quot;parseFloat((x//3 + c) ** 4)&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_25&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_511</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_25</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">12</span><span class="p">;</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_24</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="o">/</span><span class="mf">3</span><span class="p">)</span><span class="o">+</span><span class="nx">c</span><span class="p">),</span><span class="w"> </span><span class="mf">4</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_714_1737789673_508</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_23</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_507</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_507</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_509</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_24</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_509</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_508</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_22</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_506</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_23</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_506</span><span class="p">);</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_22</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_511</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'></div><pre id="_jsF_896_1737789673_26_error" style="color: red"></pre><div id="_jsF_896_1737789673_26_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_26_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_26_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_511 = { inputData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], reload: null };
async function _jsF_896_1737789673_25() {
    c = 12;
    _jsF_896_1737789673_24 = (x) => {
        return parseFloat(Math.pow((Math.floor(x/3)+c), 4));
    }
    _jsD_714_1737789673_508 = {};
    _jsF_896_1737789673_23 = (_jsD_714_1737789673_507) => _jsD_714_1737789673_507.apply((_jsD_714_1737789673_509) => _jsF_896_1737789673_24(_jsD_714_1737789673_509), null, _jsD_714_1737789673_508, false)
    _jsF_896_1737789673_22 = (_jsD_714_1737789673_506) => { return _jsF_896_1737789673_23(_jsD_714_1737789673_506); };; return _jsF_896_1737789673_22(_jsD_714_1737789673_511.inputData); }; window._jsF_896_1737789673_25 = _jsF_896_1737789673_25; _jsF_896_1737789673_26_error = document.querySelector("#_jsF_896_1737789673_26_error");
        _jsF_896_1737789673_26_resultDiv = document.querySelector("#_jsF_896_1737789673_26_result"); _jsF_896_1737789673_26_loadingDiv = document.querySelector("#_jsF_896_1737789673_26_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_26_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_26_error.innerHTML = ""; _jsF_896_1737789673_26_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_25();
                if (!handle.cancel) { _jsF_896_1737789673_26_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_26_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_26_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_25', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_26_reload_timeout = null;
        const _jsF_896_1737789673_26_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_26_reload_core();
            else { clearTimeout(_jsF_896_1737789673_26_reload_timeout); _jsF_896_1737789673_26_reload_timeout = setTimeout(_jsF_896_1737789673_26_reload_core, 0); }
        }; ; ; _jsF_896_1737789673_26_reload(null); _jsD_714_1737789673_511.reload = _jsF_896_1737789673_26_reload;
        _jsD_714_1737789673_511.reload = () => _jsF_896_1737789673_26_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_26_reload(null); }, 0);
        _jsD_714_1737789673_511.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_26_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_26_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_26_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_26_loadF(); } catch (e) {} })();
    }</script></div><p>If you noticed, the transpiled JS code for <code class="docutils literal notranslate"><span class="pre">(x//3</span> <span class="pre">+</span> <span class="pre">6)</span> <span class="pre">**</span> <span class="pre">4</span></code> is actually
<code class="docutils literal notranslate"><span class="pre">Math.pow((Math.floor(x/3)+6),</span> <span class="pre">4)</span></code>. The transpiler understands your code
written in Python, and translates operations like <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">**</span> <span class="pre">b</span></code> into <code class="docutils literal notranslate"><span class="pre">Math.pow(a,</span> <span class="pre">b)</span></code>
automatically. How cool is that! And as demonstrated in the previous example,
you can also use JS variables too (<code class="docutils literal notranslate"><span class="pre">divisor</span></code>), instead of just Python variables.</p>
<p>Notice how it also figures out that <code class="docutils literal notranslate"><span class="pre">c</span></code> must be a Python variable, so the
transpiler will auto convert that to json and injects it into the JS code. Also
notice how you can freely mix JS and Python code a little bit. For basic operations,
use Python syntax, while for function calling, you can use JS functions.</p>
<p>Lambda functions with lots of variables and <a class="reference internal" href="index.html#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">op</span></code></a> works too:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">insertIdColumn</span><span class="p">()</span> <span class="o">|</span> <span class="o">~</span><span class="n">apply</span><span class="p">(</span><span class="s2">&quot;lambda x,y: x*y&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_31&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_518</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_31</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_28</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_513</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_513</span><span class="p">.</span><span class="nx">insertIdColumn</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_30</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">y</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_714_1737789673_515</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_29</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_514</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_514</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_516</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_30</span><span class="p">(...</span><span class="nx">_jsD_714_1737789673_516</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_515</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_27</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_512</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_29</span><span class="p">(</span><span class="nx">_jsF_896_1737789673_28</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_512</span><span class="p">));</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_27</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_518</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'></div><pre id="_jsF_896_1737789673_32_error" style="color: red"></pre><div id="_jsF_896_1737789673_32_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_32_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_32_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_518 = { inputData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], reload: null };
async function _jsF_896_1737789673_31() {
    _jsF_896_1737789673_28 = (_jsD_714_1737789673_513) => _jsD_714_1737789673_513.insertIdColumn(false, true)
    
    _jsF_896_1737789673_30 = (x, y) => {
        return (x*y);
    }
    _jsD_714_1737789673_515 = {};
    _jsF_896_1737789673_29 = (_jsD_714_1737789673_514) => _jsD_714_1737789673_514.apply((_jsD_714_1737789673_516) => _jsF_896_1737789673_30(..._jsD_714_1737789673_516), null, _jsD_714_1737789673_515, false)
    _jsF_896_1737789673_27 = (_jsD_714_1737789673_512) => { return _jsF_896_1737789673_29(_jsF_896_1737789673_28(_jsD_714_1737789673_512)); };; return _jsF_896_1737789673_27(_jsD_714_1737789673_518.inputData); }; window._jsF_896_1737789673_31 = _jsF_896_1737789673_31; _jsF_896_1737789673_32_error = document.querySelector("#_jsF_896_1737789673_32_error");
        _jsF_896_1737789673_32_resultDiv = document.querySelector("#_jsF_896_1737789673_32_result"); _jsF_896_1737789673_32_loadingDiv = document.querySelector("#_jsF_896_1737789673_32_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_32_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_32_error.innerHTML = ""; _jsF_896_1737789673_32_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_31();
                if (!handle.cancel) { _jsF_896_1737789673_32_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_32_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_32_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_31', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_32_reload_timeout = null;
        const _jsF_896_1737789673_32_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_32_reload_core();
            else { clearTimeout(_jsF_896_1737789673_32_reload_timeout); _jsF_896_1737789673_32_reload_timeout = setTimeout(_jsF_896_1737789673_32_reload_core, 0); }
        }; ; ; _jsF_896_1737789673_32_reload(null); _jsD_714_1737789673_518.reload = _jsF_896_1737789673_32_reload;
        _jsD_714_1737789673_518.reload = () => _jsF_896_1737789673_32_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_32_reload(null); }, 0);
        _jsD_714_1737789673_518.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_32_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_32_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_32_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_32_loadF(); } catch (e) {} })();
    }</script></div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_36&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_526</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_36</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_35</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_524</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_524</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_714_1737789673_522</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_34</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_521</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_521</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_523</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_35</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_523</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_522</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_33</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_520</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_34</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_520</span><span class="p">);</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_33</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_526</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'></div><pre id="_jsF_896_1737789673_37_error" style="color: red"></pre><div id="_jsF_896_1737789673_37_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_37_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_37_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_526 = { inputData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], reload: null };
async function _jsF_896_1737789673_36() {
    
    _jsF_896_1737789673_35 = (_jsD_714_1737789673_524) => {
        return Math.pow(_jsD_714_1737789673_524, 2);
    }
    _jsD_714_1737789673_522 = {};
    _jsF_896_1737789673_34 = (_jsD_714_1737789673_521) => _jsD_714_1737789673_521.apply((_jsD_714_1737789673_523) => _jsF_896_1737789673_35(_jsD_714_1737789673_523), null, _jsD_714_1737789673_522, false)
    _jsF_896_1737789673_33 = (_jsD_714_1737789673_520) => { return _jsF_896_1737789673_34(_jsD_714_1737789673_520); };; return _jsF_896_1737789673_33(_jsD_714_1737789673_526.inputData); }; window._jsF_896_1737789673_36 = _jsF_896_1737789673_36; _jsF_896_1737789673_37_error = document.querySelector("#_jsF_896_1737789673_37_error");
        _jsF_896_1737789673_37_resultDiv = document.querySelector("#_jsF_896_1737789673_37_result"); _jsF_896_1737789673_37_loadingDiv = document.querySelector("#_jsF_896_1737789673_37_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_37_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_37_error.innerHTML = ""; _jsF_896_1737789673_37_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_36();
                if (!handle.cancel) { _jsF_896_1737789673_37_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_37_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_37_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_36', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_37_reload_timeout = null;
        const _jsF_896_1737789673_37_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_37_reload_core();
            else { clearTimeout(_jsF_896_1737789673_37_reload_timeout); _jsF_896_1737789673_37_reload_timeout = setTimeout(_jsF_896_1737789673_37_reload_core, 0); }
        }; ; ; _jsF_896_1737789673_37_reload(null); _jsD_714_1737789673_526.reload = _jsF_896_1737789673_37_reload;
        _jsD_714_1737789673_526.reload = () => _jsF_896_1737789673_37_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_37_reload(null); }, 0);
        _jsD_714_1737789673_526.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_37_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_37_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_37_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_37_loadF(); } catch (e) {} })();
    }</script></div><p>Let’s see a more complex example:</p>
</section>
<section id="lots-of-moving-parts">
<h2>Lots of moving parts<a class="headerlink" href="#lots-of-moving-parts" title="Link to this heading"></a></h2>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">repeatF</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">9999</span><span class="p">),</span> <span class="mi">100</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">grep</span><span class="p">(</span><span class="s2">&quot;$</span><span class="si">{term}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">|</span> <span class="n">batched</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">pretty</span><span class="p">()</span> <span class="o">|</span> <span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">pre</span><span class="p">)</span>
<span class="n">jsFunc</span> <span class="o">=</span> <span class="n">data</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">(</span><span class="s2">&quot;term&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">f1</span> <span class="o">|</span> <span class="n">f2</span><span class="p">)</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_49&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_544</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">6423</span><span class="p">,</span><span class="w"> </span><span class="mf">5422</span><span class="p">,</span><span class="w"> </span><span class="mf">2463</span><span class="p">,</span><span class="w"> </span><span class="mf">7231</span><span class="p">,</span><span class="w"> </span><span class="mf">7847</span><span class="p">,</span><span class="w"> </span><span class="mf">7418</span><span class="p">,</span><span class="w"> </span><span class="mf">5693</span><span class="p">,</span><span class="w"> </span><span class="mf">1793</span><span class="p">,</span><span class="w"> </span><span class="mf">6372</span><span class="p">,</span><span class="w"> </span><span class="mf">5870</span><span class="p">,</span><span class="w"> </span><span class="mf">6647</span><span class="p">,</span><span class="w"> </span><span class="mf">5576</span><span class="p">,</span><span class="w"> </span><span class="mf">5025</span><span class="p">,</span><span class="w"> </span><span class="mf">2008</span><span class="p">,</span><span class="w"> </span><span class="mf">2041</span><span class="p">,</span><span class="w"> </span><span class="mf">1137</span><span class="p">,</span><span class="w"> </span><span class="mf">7530</span><span class="p">,</span><span class="w"> </span><span class="mf">7511</span><span class="p">,</span><span class="w"> </span><span class="mf">1455</span><span class="p">,</span><span class="w"> </span><span class="mf">4623</span><span class="p">,</span><span class="w"> </span><span class="mf">7465</span><span class="p">,</span><span class="w"> </span><span class="mf">4378</span><span class="p">,</span><span class="w"> </span><span class="mf">9343</span><span class="p">,</span><span class="w"> </span><span class="mf">8535</span><span class="p">,</span><span class="w"> </span><span class="mf">1552</span><span class="p">,</span><span class="w"> </span><span class="mf">9398</span><span class="p">,</span><span class="w"> </span><span class="mf">5231</span><span class="p">,</span><span class="w"> </span><span class="mf">8978</span><span class="p">,</span><span class="w"> </span><span class="mf">6224</span><span class="p">,</span><span class="w"> </span><span class="mf">2529</span><span class="p">,</span><span class="w"> </span><span class="mf">2111</span><span class="p">,</span><span class="w"> </span><span class="mf">4742</span><span class="p">,</span><span class="w"> </span><span class="mf">2849</span><span class="p">,</span><span class="w"> </span><span class="mf">9331</span><span class="p">,</span><span class="w"> </span><span class="mf">4371</span><span class="p">,</span><span class="w"> </span><span class="mf">4148</span><span class="p">,</span><span class="w"> </span><span class="mf">9873</span><span class="p">,</span><span class="w"> </span><span class="mf">4302</span><span class="p">,</span><span class="w"> </span><span class="mf">5599</span><span class="p">,</span><span class="w"> </span><span class="mf">5480</span><span class="p">,</span><span class="w"> </span><span class="mf">1864</span><span class="p">,</span><span class="w"> </span><span class="mf">4087</span><span class="p">,</span><span class="w"> </span><span class="mf">6218</span><span class="p">,</span><span class="w"> </span><span class="mf">4465</span><span class="p">,</span><span class="w"> </span><span class="mf">7746</span><span class="p">,</span><span class="w"> </span><span class="mf">8257</span><span class="p">,</span><span class="w"> </span><span class="mf">2000</span><span class="p">,</span><span class="w"> </span><span class="mf">5099</span><span class="p">,</span><span class="w"> </span><span class="mf">4754</span><span class="p">,</span><span class="w"> </span><span class="mf">2762</span><span class="p">,</span><span class="w"> </span><span class="mf">2378</span><span class="p">,</span><span class="w"> </span><span class="mf">8084</span><span class="p">,</span><span class="w"> </span><span class="mf">3238</span><span class="p">,</span><span class="w"> </span><span class="mf">6785</span><span class="p">,</span><span class="w"> </span><span class="mf">3227</span><span class="p">,</span><span class="w"> </span><span class="mf">6303</span><span class="p">,</span><span class="w"> </span><span class="mf">6845</span><span class="p">,</span><span class="w"> </span><span class="mf">5410</span><span class="p">,</span><span class="w"> </span><span class="mf">5680</span><span class="p">,</span><span class="w"> </span><span class="mf">9175</span><span class="p">,</span><span class="w"> </span><span class="mf">4605</span><span class="p">,</span><span class="w"> </span><span class="mf">1347</span><span class="p">,</span><span class="w"> </span><span class="mf">6313</span><span class="p">,</span><span class="w"> </span><span class="mf">7222</span><span class="p">,</span><span class="w"> </span><span class="mf">8060</span><span class="p">,</span><span class="w"> </span><span class="mf">7652</span><span class="p">,</span><span class="w"> </span><span class="mf">2091</span><span class="p">,</span><span class="w"> </span><span class="mf">2799</span><span class="p">,</span><span class="w"> </span><span class="mf">7245</span><span class="p">,</span><span class="w"> </span><span class="mf">8134</span><span class="p">,</span><span class="w"> </span><span class="mf">5383</span><span class="p">,</span><span class="w"> </span><span class="mf">7749</span><span class="p">,</span><span class="w"> </span><span class="mf">4204</span><span class="p">,</span><span class="w"> </span><span class="mf">3355</span><span class="p">,</span><span class="w"> </span><span class="mf">2924</span><span class="p">,</span><span class="w"> </span><span class="mf">3890</span><span class="p">,</span><span class="w"> </span><span class="mf">8008</span><span class="p">,</span><span class="w"> </span><span class="mf">6414</span><span class="p">,</span><span class="w"> </span><span class="mf">5631</span><span class="p">,</span><span class="w"> </span><span class="mf">6828</span><span class="p">,</span><span class="w"> </span><span class="mf">8078</span><span class="p">,</span><span class="w"> </span><span class="mf">8009</span><span class="p">,</span><span class="w"> </span><span class="mf">3159</span><span class="p">,</span><span class="w"> </span><span class="mf">6542</span><span class="p">,</span><span class="w"> </span><span class="mf">7595</span><span class="p">,</span><span class="w"> </span><span class="mf">7754</span><span class="p">,</span><span class="w"> </span><span class="mf">9595</span><span class="p">,</span><span class="w"> </span><span class="mf">2332</span><span class="p">,</span><span class="w"> </span><span class="mf">8018</span><span class="p">,</span><span class="w"> </span><span class="mf">9560</span><span class="p">,</span><span class="w"> </span><span class="mf">4657</span><span class="p">,</span><span class="w"> </span><span class="mf">2437</span><span class="p">,</span><span class="w"> </span><span class="mf">7240</span><span class="p">,</span><span class="w"> </span><span class="mf">5961</span><span class="p">,</span><span class="w"> </span><span class="mf">2427</span><span class="p">,</span><span class="w"> </span><span class="mf">8105</span><span class="p">,</span><span class="w"> </span><span class="mf">1078</span><span class="p">,</span><span class="w"> </span><span class="mf">9128</span><span class="p">,</span><span class="w"> </span><span class="mf">1245</span><span class="p">,</span><span class="w"> </span><span class="mf">1198</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_49</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_40</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_530</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_530</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">term</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">col</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">inv</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nx">lower</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">})</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsD_714_1737789673_533</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_41</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_532</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_532</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_534</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_534</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_533</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_42</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_535</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_535</span><span class="p">.</span><span class="nx">batched</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_43</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_536</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_536</span><span class="p">.</span><span class="nx">head</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_39</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_529</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_43</span><span class="p">(</span><span class="nx">_jsF_896_1737789673_42</span><span class="p">(</span><span class="nx">_jsF_896_1737789673_41</span><span class="p">(</span><span class="nx">_jsF_896_1737789673_40</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_529</span><span class="p">))));</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_45</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_539</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_539</span><span class="p">.</span><span class="nx">pretty</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_46</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_540</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_540</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_48</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_543</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`&lt;pre style=&#39;font-family: monospace&#39;&gt;</span><span class="si">${</span><span class="nx">_jsD_714_1737789673_543</span><span class="si">}</span><span class="sb">&lt;/pre&gt;`</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_44</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_538</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_48</span><span class="p">(</span><span class="nx">_jsF_896_1737789673_46</span><span class="p">(</span><span class="nx">_jsF_896_1737789673_45</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_538</span><span class="p">)));</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_38</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_528</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_44</span><span class="p">(</span><span class="nx">_jsF_896_1737789673_39</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_528</span><span class="p">));</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_38</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_544</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'><div>term</div><div><input type='text' value='' placeholder='term' id='_jsD_714_1737789673_545' style='padding: 4px 4px;'></div></div><pre id="_jsF_896_1737789673_50_error" style="color: red"></pre><div id="_jsF_896_1737789673_50_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_50_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_50_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_544 = { inputData: [6423, 5422, 2463, 7231, 7847, 7418, 5693, 1793, 6372, 5870, 6647, 5576, 5025, 2008, 2041, 1137, 7530, 7511, 1455, 4623, 7465, 4378, 9343, 8535, 1552, 9398, 5231, 8978, 6224, 2529, 2111, 4742, 2849, 9331, 4371, 4148, 9873, 4302, 5599, 5480, 1864, 4087, 6218, 4465, 7746, 8257, 2000, 5099, 4754, 2762, 2378, 8084, 3238, 6785, 3227, 6303, 6845, 5410, 5680, 9175, 4605, 1347, 6313, 7222, 8060, 7652, 2091, 2799, 7245, 8134, 5383, 7749, 4204, 3355, 2924, 3890, 8008, 6414, 5631, 6828, 8078, 8009, 3159, 6542, 7595, 7754, 9595, 2332, 8018, 9560, 4657, 2437, 7240, 5961, 2427, 8105, 1078, 9128, 1245, 1198], reload: null };
async function _jsF_896_1737789673_49(term) {
    _jsF_896_1737789673_40 = (_jsD_714_1737789673_530) => _jsD_714_1737789673_530.grep(`${term}`, {col: null, inv: false, lower: false})
    
    _jsD_714_1737789673_533 = {};
    _jsF_896_1737789673_41 = (_jsD_714_1737789673_532) => _jsD_714_1737789673_532.apply((_jsD_714_1737789673_534) => String(_jsD_714_1737789673_534), null, _jsD_714_1737789673_533, false)
    _jsF_896_1737789673_42 = (_jsD_714_1737789673_535) => _jsD_714_1737789673_535.batched(5, true)
    _jsF_896_1737789673_43 = (_jsD_714_1737789673_536) => _jsD_714_1737789673_536.head(10, false)
    _jsF_896_1737789673_39 = (_jsD_714_1737789673_529) => { return _jsF_896_1737789673_43(_jsF_896_1737789673_42(_jsF_896_1737789673_41(_jsF_896_1737789673_40(_jsD_714_1737789673_529)))); };
    _jsF_896_1737789673_45 = (_jsD_714_1737789673_539) => _jsD_714_1737789673_539.pretty("", false)
    _jsF_896_1737789673_46 = (_jsD_714_1737789673_540) => _jsD_714_1737789673_540.join("\n")
    _jsF_896_1737789673_48 = (_jsD_714_1737789673_543) => `<pre style='font-family: monospace'>${_jsD_714_1737789673_543}</pre>`
    _jsF_896_1737789673_44 = (_jsD_714_1737789673_538) => { return _jsF_896_1737789673_48(_jsF_896_1737789673_46(_jsF_896_1737789673_45(_jsD_714_1737789673_538))); };
    _jsF_896_1737789673_38 = (_jsD_714_1737789673_528) => { return _jsF_896_1737789673_44(_jsF_896_1737789673_39(_jsD_714_1737789673_528)); };; return _jsF_896_1737789673_38(_jsD_714_1737789673_544.inputData); }; window._jsF_896_1737789673_49 = _jsF_896_1737789673_49; _jsF_896_1737789673_50_error = document.querySelector("#_jsF_896_1737789673_50_error");
        _jsF_896_1737789673_50_resultDiv = document.querySelector("#_jsF_896_1737789673_50_result"); _jsF_896_1737789673_50_loadingDiv = document.querySelector("#_jsF_896_1737789673_50_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_50_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_50_error.innerHTML = ""; _jsF_896_1737789673_50_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_49(document.querySelector('#_jsD_714_1737789673_545').value);
                if (!handle.cancel) { _jsF_896_1737789673_50_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_50_resultDiv.innerHTML = val; 
containerDiv = document.createElement('div'); containerDiv.innerHTML = val;
for (const scriptElem of containerDiv.querySelectorAll('script')) eval(scriptElem.textContent); }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_50_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_49', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_50_reload_timeout = null;
        const _jsF_896_1737789673_50_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_50_reload_core();
            else { clearTimeout(_jsF_896_1737789673_50_reload_timeout); _jsF_896_1737789673_50_reload_timeout = setTimeout(_jsF_896_1737789673_50_reload_core, 0); }
        }; document.querySelector('#_jsD_714_1737789673_545').oninput = _jsF_896_1737789673_50_reload;; ; _jsF_896_1737789673_50_reload(null); _jsD_714_1737789673_544.reload = _jsF_896_1737789673_50_reload;
        _jsD_714_1737789673_544.reload = () => _jsF_896_1737789673_50_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_50_reload(null); }, 0);
        _jsD_714_1737789673_544.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_50_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_50_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_50_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_50_loadF(); } catch (e) {} })();
    }</script></div><p>Just a reminder, you can specify <a class="reference internal" href="index.html#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a> at any point in
the pipeline. As long as the data you pipe into the <a class="reference internal" href="index.html#k1lib.cli.kjs.toJsFunc" title="k1lib.cli.kjs.toJsFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">toJsFunc</span></code></a>-captured
block can be converted into json, you’re good.</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">jsFunc</span> <span class="o">=</span> <span class="n">data</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;x%3 == 0&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">filt</span><span class="p">(</span><span class="s2">&quot;x%2 == 0&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_57&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_554</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_57</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_54</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="nx">x</span><span class="o">%</span><span class="mf">3</span><span class="p">)</span><span class="o">===</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_53</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_548</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_548</span><span class="p">.</span><span class="nx">filt</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_549</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsF_896_1737789673_54</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_549</span><span class="p">)),</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">    </span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_56</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="nx">x</span><span class="o">%</span><span class="mf">2</span><span class="p">)</span><span class="o">===</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_55</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_551</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_551</span><span class="p">.</span><span class="nx">filt</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_552</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsF_896_1737789673_56</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_552</span><span class="p">)),</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_52</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_547</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="nx">_jsF_896_1737789673_53</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_547</span><span class="p">),</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_55</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_547</span><span class="p">)];</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_51</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_546</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_52</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_546</span><span class="p">);</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_51</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_554</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'></div><pre id="_jsF_896_1737789673_58_error" style="color: red"></pre><div id="_jsF_896_1737789673_58_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_58_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_58_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_554 = { inputData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], reload: null };
async function _jsF_896_1737789673_57() {
    
    _jsF_896_1737789673_54 = (x) => {
        return ((x%3)===0);
    }
    _jsF_896_1737789673_53 = (_jsD_714_1737789673_548) => _jsD_714_1737789673_548.filt((_jsD_714_1737789673_549) => (_jsF_896_1737789673_54(_jsD_714_1737789673_549)), null)
    
    _jsF_896_1737789673_56 = (x) => {
        return ((x%2)===0);
    }
    _jsF_896_1737789673_55 = (_jsD_714_1737789673_551) => _jsD_714_1737789673_551.filt((_jsD_714_1737789673_552) => (_jsF_896_1737789673_56(_jsD_714_1737789673_552)), null)
    _jsF_896_1737789673_52 = (_jsD_714_1737789673_547) => [_jsF_896_1737789673_53(_jsD_714_1737789673_547), _jsF_896_1737789673_55(_jsD_714_1737789673_547)];
    _jsF_896_1737789673_51 = (_jsD_714_1737789673_546) => { return _jsF_896_1737789673_52(_jsD_714_1737789673_546); };; return _jsF_896_1737789673_51(_jsD_714_1737789673_554.inputData); }; window._jsF_896_1737789673_57 = _jsF_896_1737789673_57; _jsF_896_1737789673_58_error = document.querySelector("#_jsF_896_1737789673_58_error");
        _jsF_896_1737789673_58_resultDiv = document.querySelector("#_jsF_896_1737789673_58_result"); _jsF_896_1737789673_58_loadingDiv = document.querySelector("#_jsF_896_1737789673_58_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_58_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_58_error.innerHTML = ""; _jsF_896_1737789673_58_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_57();
                if (!handle.cancel) { _jsF_896_1737789673_58_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_58_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_58_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_57', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_58_reload_timeout = null;
        const _jsF_896_1737789673_58_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_58_reload_core();
            else { clearTimeout(_jsF_896_1737789673_58_reload_timeout); _jsF_896_1737789673_58_reload_timeout = setTimeout(_jsF_896_1737789673_58_reload_core, 0); }
        }; ; ; _jsF_896_1737789673_58_reload(null); _jsD_714_1737789673_554.reload = _jsF_896_1737789673_58_reload;
        _jsD_714_1737789673_554.reload = () => _jsF_896_1737789673_58_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_58_reload(null); }, 0);
        _jsD_714_1737789673_554.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_58_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_58_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_58_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_58_loadF(); } catch (e) {} })();
    }</script></div></section>
<section id="custom-transpiler-logic">
<h2>Custom transpiler logic<a class="headerlink" href="#custom-transpiler-logic" title="Link to this heading"></a></h2>
<p>You can write transpiler logic for any custom class/functions that you desire!
Let’s imagine the use case to be writing a function that calculates the factorial
sequence, where an initial number is multiplied by increments of itself, and
getting the first n elements out of it. Let’s see an example using classes:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Factorio</span><span class="p">(</span><span class="n">BaseCli</span><span class="p">):</span> <span class="c1"># yes, the spelling is not the math func, but the game. But I love Factorio so</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
    <span class="k">def</span> <span class="fm">__ror__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">start</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">value</span>
            <span class="n">value</span> <span class="o">*=</span> <span class="n">start</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">def</span> <span class="nf">_jsF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meta</span><span class="p">):</span>
        <span class="n">fIdx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;f_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">vIdx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;f_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  const </span><span class="si">{</span><span class="n">fIdx</span><span class="si">}</span><span class="s2"> = (</span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2">) =&gt; </span><span class="se">{{</span>
<span class="s2">      const ans = []; let value = </span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">      for (let i = 0; i &lt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">; i++) </span><span class="se">{{</span>
<span class="s2">          ans.push(value);</span>
<span class="s2">          value = value * (</span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2"> + i + 1);</span>
<span class="s2">      </span><span class="se">}}</span>
<span class="s2">      return ans;</span>
<span class="s2">  </span><span class="se">}}</span><span class="s2">;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">,</span> <span class="n">fIdx</span>

<span class="mi">2</span> <span class="o">|</span> <span class="n">Factorio</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [2, 6, 24, 120, 720]</span>

<span class="n">jsFunc</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">((</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="o">|</span> <span class="n">Factorio</span><span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_60&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_557</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_60</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">f_335614_1737789739</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">f_194621_1737789739</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">ans</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">f_194621_1737789739</span><span class="p">;</span>
<span class="w">          </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">size</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">ans</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="w">              </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="nx">f_194621_1737789739</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="nx">ans</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">            </span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_556</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">f_335614_1737789739</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_556</span><span class="p">);</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_59</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_557</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">()</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'><div>size</div><div><input type='number' value='3' placeholder='size' id='_jsD_714_1737789673_558' style='padding: 4px 4px;'></div></div><pre id="_jsF_896_1737789673_61_error" style="color: red"></pre><div id="_jsF_896_1737789673_61_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_61_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_61_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_557 = { inputData: 2, reload: null };
async function _jsF_896_1737789673_60(size) {
    
      const f_335614_1737789739 = (f_194621_1737789739) => {
          const ans = []; let value = f_194621_1737789739;
          for (let i = 0; i < size; i++) {
              ans.push(value);
              value = value * (f_194621_1737789739 + i + 1);
          }
          return ans;
      };
            
    _jsF_896_1737789673_59 = (_jsD_714_1737789673_556) => { return f_335614_1737789739(_jsD_714_1737789673_556); };; return _jsF_896_1737789673_59(_jsD_714_1737789673_557.inputData); }; window._jsF_896_1737789673_60 = _jsF_896_1737789673_60; _jsF_896_1737789673_61_error = document.querySelector("#_jsF_896_1737789673_61_error");
        _jsF_896_1737789673_61_resultDiv = document.querySelector("#_jsF_896_1737789673_61_result"); _jsF_896_1737789673_61_loadingDiv = document.querySelector("#_jsF_896_1737789673_61_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_61_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_61_error.innerHTML = ""; _jsF_896_1737789673_61_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_60(parseInt(document.querySelector('#_jsD_714_1737789673_558').value || 0));
                if (!handle.cancel) { _jsF_896_1737789673_61_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_61_resultDiv.innerHTML = val; 
containerDiv = document.createElement('div'); containerDiv.innerHTML = val;
for (const scriptElem of containerDiv.querySelectorAll('script')) eval(scriptElem.textContent); }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_61_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_60', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_61_reload_timeout = null;
        const _jsF_896_1737789673_61_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_61_reload_core();
            else { clearTimeout(_jsF_896_1737789673_61_reload_timeout); _jsF_896_1737789673_61_reload_timeout = setTimeout(_jsF_896_1737789673_61_reload_core, 0); }
        }; document.querySelector('#_jsD_714_1737789673_558').oninput = _jsF_896_1737789673_61_reload;; ; _jsF_896_1737789673_61_reload(null); _jsD_714_1737789673_557.reload = _jsF_896_1737789673_61_reload;
        _jsD_714_1737789673_557.reload = () => _jsF_896_1737789673_61_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_61_reload(null); }, 0);
        _jsD_714_1737789673_557.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_61_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_61_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_61_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_61_loadF(); } catch (e) {} })();
    }</script></div><p>You can also write transpiler functions for any functions you want. Let’s write
one for the inverse square root function:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inv_sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">numerator</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">numerator</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_jsF_inv_sqrt</span><span class="p">(</span><span class="n">meta</span><span class="p">,</span> <span class="n">numerator</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">fIdx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;f_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">vIdx</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;f_</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;const </span><span class="si">{</span><span class="n">fIdx</span><span class="si">}</span><span class="s2"> = (</span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2">) =&gt; </span><span class="se">{{</span><span class="s2"> return </span><span class="si">{</span><span class="n">numerator</span><span class="si">}</span><span class="s2">/Math.sqrt(</span><span class="si">{</span><span class="n">vIdx</span><span class="si">}</span><span class="s2">); </span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fIdx</span>
<span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">kjs</span><span class="o">.</span><span class="n">jsF</span><span class="p">[</span><span class="n">inv_sqrt</span><span class="p">]</span> <span class="o">=</span> <span class="n">_jsF_inv_sqrt</span>

<span class="n">inv_sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># returns number close to 0.5</span>

<span class="n">jsFunc</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">((</span><span class="s2">&quot;someNum&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">inv_sqrt</span><span class="p">,</span> <span class="n">numerator</span><span class="o">=</span><span class="s2">&quot;someNum&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="n">jsFunc</span>
</pre></div>
<h4>Compiled JS function</h4>&lt;JsFunc _jsF_896_1737789673_66&gt;<br>Generated JS function:<br><br><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="c1">//k1_moveOutStart</span>

<span class="c1">//k1_moveOutEnd</span>

<span class="nx">_jsD_714_1737789673_568</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">inputData</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">],</span><span class="w"> </span><span class="nx">reload</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_66</span><span class="p">(</span><span class="nx">someNum</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">f_346227_1737789739</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">f_427605_1737789739</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">someNum</span><span class="o">/</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">f_427605_1737789739</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nx">_jsD_714_1737789673_562</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;numerator&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;someNum&quot;</span><span class="p">};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_561</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_561</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_563</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">f_346227_1737789739</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_563</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_562</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_567</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_567</span><span class="p">)</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="o">+</span><span class="nb">Number</span><span class="p">.</span><span class="nx">EPSILON</span><span class="p">)</span><span class="o">/</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsD_714_1737789673_565</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;ndigits&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">};</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_564</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_564</span><span class="p">.</span><span class="nx">apply</span><span class="p">((</span><span class="nx">_jsD_714_1737789673_566</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_65</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_566</span><span class="p">),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">_jsD_714_1737789673_565</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="nx">_jsF_896_1737789673_62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">_jsD_714_1737789673_560</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_64</span><span class="p">(</span><span class="nx">_jsF_896_1737789673_63</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_560</span><span class="p">));</span><span class="w"> </span><span class="p">};;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">_jsF_896_1737789673_62</span><span class="p">(</span><span class="nx">_jsD_714_1737789673_568</span><span class="p">.</span><span class="nx">inputData</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div><div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">jsFunc</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'><div>someNum</div><div><input type='number' value='1' placeholder='someNum' id='_jsD_714_1737789673_569' style='padding: 4px 4px;'></div></div><pre id="_jsF_896_1737789673_67_error" style="color: red"></pre><div id="_jsF_896_1737789673_67_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_67_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_67_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_568 = { inputData: [1, 2, 3, 4, 5, 6, 7, 8, 9], reload: null };
async function _jsF_896_1737789673_66(someNum) {
    const f_346227_1737789739 = (f_427605_1737789739) => { return someNum/Math.sqrt(f_427605_1737789739); }
    _jsD_714_1737789673_562 = {"numerator": "someNum"};
    _jsF_896_1737789673_63 = (_jsD_714_1737789673_561) => _jsD_714_1737789673_561.apply((_jsD_714_1737789673_563) => f_346227_1737789739(_jsD_714_1737789673_563), null, _jsD_714_1737789673_562, false)
    _jsF_896_1737789673_65 = (_jsD_714_1737789673_567) => Math.round((_jsD_714_1737789673_567)*Math.pow(10, 2)+Number.EPSILON)/Math.pow(10, 2)
    _jsD_714_1737789673_565 = {"ndigits": 2};
    _jsF_896_1737789673_64 = (_jsD_714_1737789673_564) => _jsD_714_1737789673_564.apply((_jsD_714_1737789673_566) => _jsF_896_1737789673_65(_jsD_714_1737789673_566), null, _jsD_714_1737789673_565, false)
    _jsF_896_1737789673_62 = (_jsD_714_1737789673_560) => { return _jsF_896_1737789673_64(_jsF_896_1737789673_63(_jsD_714_1737789673_560)); };; return _jsF_896_1737789673_62(_jsD_714_1737789673_568.inputData); }; window._jsF_896_1737789673_66 = _jsF_896_1737789673_66; _jsF_896_1737789673_67_error = document.querySelector("#_jsF_896_1737789673_67_error");
        _jsF_896_1737789673_67_resultDiv = document.querySelector("#_jsF_896_1737789673_67_result"); _jsF_896_1737789673_67_loadingDiv = document.querySelector("#_jsF_896_1737789673_67_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_67_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_67_error.innerHTML = ""; _jsF_896_1737789673_67_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_66(parseInt(document.querySelector('#_jsD_714_1737789673_569').value || 0));
                if (!handle.cancel) { _jsF_896_1737789673_67_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_67_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_67_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_66', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_67_reload_timeout = null;
        const _jsF_896_1737789673_67_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_67_reload_core();
            else { clearTimeout(_jsF_896_1737789673_67_reload_timeout); _jsF_896_1737789673_67_reload_timeout = setTimeout(_jsF_896_1737789673_67_reload_core, 0); }
        }; document.querySelector('#_jsD_714_1737789673_569').oninput = _jsF_896_1737789673_67_reload;; ; _jsF_896_1737789673_67_reload(null); _jsD_714_1737789673_568.reload = _jsF_896_1737789673_67_reload;
        _jsD_714_1737789673_568.reload = () => _jsF_896_1737789673_67_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_67_reload(null); }, 0);
        _jsD_714_1737789673_568.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_67_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_67_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_67_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_67_loadF(); } catch (e) {} })();
    }</script></div><p>If your function is really simple and exists in JS natively, you can simplify it way down:</p>
<div style='margin-left: 30px'><h4>Source code</h4><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">kjs</span><span class="o">.</span><span class="n">jsF</span><span class="p">[</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">meta</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Math.sqrt&quot;</span><span class="p">)</span>

<span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="p">(</span><span class="n">toJsFunc</span><span class="p">()</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">interface</span><span class="p">(</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
</pre></div>
<h4>Html output</h4><!-- k1lib.JsFuncInterface -->
<div style='display: grid; grid-template-columns: 1fr 3fr; column-gap: 12px; row-gap: 4px; width: 400px; align-items: center'></div><pre id="_jsF_896_1737789673_73_error" style="color: red"></pre><div id="_jsF_896_1737789673_73_loading" class="k1_jsFunc_loading" style="margin-top: 4px">&nbsp;</div><div id="_jsF_896_1737789673_73_result" class="k1_jsFunc_result"></div>
<script src="https://k1js.com/dist/amd/latest.js"></script><script>
    k1_loadScript = (src) => { return new Promise((resolve, reject) => { var script = document.createElement('script'); script.src = src; script.onload = resolve; document.head.appendChild(script); }); }
    _jsF_896_1737789673_73_loadF = () => {
        //k1_moveOutStart

//k1_moveOutEnd

_jsD_714_1737789673_578 = { inputData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], reload: null };
async function _jsF_896_1737789673_72() {
    
    _jsD_714_1737789673_572 = {};
    _jsF_896_1737789673_69 = (_jsD_714_1737789673_571) => _jsD_714_1737789673_571.apply((_jsD_714_1737789673_573) => Math.sqrt(_jsD_714_1737789673_573), null, _jsD_714_1737789673_572, false)
    _jsF_896_1737789673_71 = (_jsD_714_1737789673_577) => Math.round((_jsD_714_1737789673_577)*Math.pow(10, 2)+Number.EPSILON)/Math.pow(10, 2)
    _jsD_714_1737789673_575 = {"ndigits": 2};
    _jsF_896_1737789673_70 = (_jsD_714_1737789673_574) => _jsD_714_1737789673_574.apply((_jsD_714_1737789673_576) => _jsF_896_1737789673_71(_jsD_714_1737789673_576), null, _jsD_714_1737789673_575, false)
    _jsF_896_1737789673_68 = (_jsD_714_1737789673_570) => { return _jsF_896_1737789673_70(_jsF_896_1737789673_69(_jsD_714_1737789673_570)); };; return _jsF_896_1737789673_68(_jsD_714_1737789673_578.inputData); }; window._jsF_896_1737789673_72 = _jsF_896_1737789673_72; _jsF_896_1737789673_73_error = document.querySelector("#_jsF_896_1737789673_73_error");
        _jsF_896_1737789673_73_resultDiv = document.querySelector("#_jsF_896_1737789673_73_result"); _jsF_896_1737789673_73_loadingDiv = document.querySelector("#_jsF_896_1737789673_73_loading"); const runningCoreHandle = [null];
        const _jsF_896_1737789673_73_reload_core = async (e) => {
            if (runningCoreHandle[0]) { runningCoreHandle[0].cancel = true; }
            const handle = {"cancel": false}; runningCoreHandle[0] = handle;
            try {
                _jsF_896_1737789673_73_error.innerHTML = ""; _jsF_896_1737789673_73_loadingDiv.innerHTML = "(loading...)"; const val = await _jsF_896_1737789673_72();
                if (!handle.cancel) { _jsF_896_1737789673_73_loadingDiv.innerHTML = "&nbsp;"; _jsF_896_1737789673_73_resultDiv.innerHTML = `<pre>${JSON.stringify(val)}</pre>`;  }
            } catch (e) { if (!handle.cancel) _jsF_896_1737789673_73_error.innerHTML = e.stack; console.log('_jsF_896_1737789673_72', e, e.stack); } runningCoreHandle[0] = null;
        }; let _jsF_896_1737789673_73_reload_timeout = null;
        const _jsF_896_1737789673_73_reload = async (e) => {
            ; if (0 <= 0) return _jsF_896_1737789673_73_reload_core();
            else { clearTimeout(_jsF_896_1737789673_73_reload_timeout); _jsF_896_1737789673_73_reload_timeout = setTimeout(_jsF_896_1737789673_73_reload_core, 0); }
        }; ; ; _jsF_896_1737789673_73_reload(null); _jsD_714_1737789673_578.reload = _jsF_896_1737789673_73_reload;
        _jsD_714_1737789673_578.reload = () => _jsF_896_1737789673_73_reload(null); if (0) setInterval(() => { _jsF_896_1737789673_73_reload(null); }, 0);
        _jsD_714_1737789673_578.reloadOnDiff = (asyncF, periodS, oldValue=null) => { setInterval(async () => { const res = await asyncF(); if (oldValue !== res) { oldValue = res; _jsF_896_1737789673_73_reload(null); } }, periodS*1000); }
    }; if (window.k1lib_jsF_envLoaded) { (async () => { while (window.k1lib_jsF_envLoaded !== 2) await new Promise(r => setTimeout(r, 100)); /* waits for 100ms when the env is not ready yet */ _jsF_896_1737789673_73_loadF(); })();
    } else { window.k1lib_jsF_envLoaded = 1; // some initial env setups
        (async () => { await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn/8.11.3/acorn.js"); await k1_loadScript("https://cdnjs.cloudflare.com/ajax/libs/acorn-walk/8.3.2/walk.js")
        })(); // loading up acorn, a JS AST analyzer, just to know what variables to expose globally
        async function extractVariableNamesAtDepthOne(funcString) { // courtesy of chatgpt-4.5
            while (!window.acorn) await new Promise(r => setTimeout(r, 100)); // loops until acorn is sure to be loaded
            const ast = acorn.parse(funcString, { ecmaVersion: 'latest', sourceType: 'script' }); const declaredVariables = new Set(); let depth = 0;
            const customWalker = { ...acorn.walk.base,
                Function            (node, state, c) { if (depth === 1 && node.id)                         declaredVariables.add(node.id.name); depth++; acorn.walk.base.Function            (node, state, c); depth--; },
                VariableDeclarator  (node, state, c) { if (depth === 1)                                    declaredVariables.add(node.  id.name);        acorn.walk.base.VariableDeclarator  (node, state, c);          },
                AssignmentExpression(node, state, c) { if (depth === 1 && node.left.type === 'Identifier') declaredVariables.add(node.left.name);        acorn.walk.base.AssignmentExpression(node, state, c);          }
            }; acorn.walk.recursive(ast, null, customWalker); return Array.from(declaredVariables);
        }; window.k1lib_jsF_captureLocalVariables = extractVariableNamesAtDepthOne;
        // trying multiple loading schemes, because in a live jupyter nb, it's using umd, while in an exported jupyter nb, it's using amd. The madness of JS lol
        (async () => { try { require(['k1js'], function(k1js) { (async () => { window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_73_loadF(); })(); }); } catch (e) {} })();
        (async () => { try { const res = await (await fetch("https://k1js.com/dist/umd/latest.js")).text(); eval(res); window.k1js = await k1js; window.k1lib_jsF_envLoaded = 2; _jsF_896_1737789673_73_loadF(); } catch (e) {} })();
    }</script></div></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="k1lib.cli module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="llvm.html" class="btn btn-neutral float-right" title="LLVM optimizer tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Quang Ho.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>