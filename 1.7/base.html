

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Base module &mdash; k1lib  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="k1lib.cli module" href="cli/index.html" />
    <link rel="prev" title="k1lib library" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            k1lib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Base module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#k1lib.settings"><code class="docutils literal notranslate"><span class="pre">k1lib.settings</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Learner"><code class="docutils literal notranslate"><span class="pre">Learner</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.model"><code class="docutils literal notranslate"><span class="pre">Learner.model</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.data"><code class="docutils literal notranslate"><span class="pre">Learner.data</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.opt"><code class="docutils literal notranslate"><span class="pre">Learner.opt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.cbs"><code class="docutils literal notranslate"><span class="pre">Learner.cbs</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.css"><code class="docutils literal notranslate"><span class="pre">Learner.css</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.lossF"><code class="docutils literal notranslate"><span class="pre">Learner.lossF</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.evaluate"><code class="docutils literal notranslate"><span class="pre">Learner.evaluate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.__call__"><code class="docutils literal notranslate"><span class="pre">Learner.__call__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.load"><code class="docutils literal notranslate"><span class="pre">Learner.load()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.run"><code class="docutils literal notranslate"><span class="pre">Learner.run()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.sample"><code class="docutils literal notranslate"><span class="pre">Learner.sample()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Learner.save"><code class="docutils literal notranslate"><span class="pre">Learner.save()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Object"><code class="docutils literal notranslate"><span class="pre">Object</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Object.fromDict"><code class="docutils literal notranslate"><span class="pre">Object.fromDict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Object.state"><code class="docutils literal notranslate"><span class="pre">Object.state</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Object.withAutoDeclare"><code class="docutils literal notranslate"><span class="pre">Object.withAutoDeclare()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Object.withRepr"><code class="docutils literal notranslate"><span class="pre">Object.withRepr()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Range"><code class="docutils literal notranslate"><span class="pre">Range</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.__getitem__"><code class="docutils literal notranslate"><span class="pre">Range.__getitem__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.__init__"><code class="docutils literal notranslate"><span class="pre">Range.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.fixOrder"><code class="docutils literal notranslate"><span class="pre">Range.fixOrder()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.intIter"><code class="docutils literal notranslate"><span class="pre">Range.intIter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.toUnit"><code class="docutils literal notranslate"><span class="pre">Range.toUnit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.fromUnit"><code class="docutils literal notranslate"><span class="pre">Range.fromUnit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.toRange"><code class="docutils literal notranslate"><span class="pre">Range.toRange()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.fromRange"><code class="docutils literal notranslate"><span class="pre">Range.fromRange()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.range_"><code class="docutils literal notranslate"><span class="pre">Range.range_</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.slice_"><code class="docutils literal notranslate"><span class="pre">Range.slice_</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.proportionalSlice"><code class="docutils literal notranslate"><span class="pre">Range.proportionalSlice()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.bound"><code class="docutils literal notranslate"><span class="pre">Range.bound()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.copy"><code class="docutils literal notranslate"><span class="pre">Range.copy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Range.__invert__"><code class="docutils literal notranslate"><span class="pre">Range.__invert__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Domain"><code class="docutils literal notranslate"><span class="pre">Domain</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Domain.__init__"><code class="docutils literal notranslate"><span class="pre">Domain.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Domain.fromInts"><code class="docutils literal notranslate"><span class="pre">Domain.fromInts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Domain.copy"><code class="docutils literal notranslate"><span class="pre">Domain.copy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Domain.intIter"><code class="docutils literal notranslate"><span class="pre">Domain.intIter()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.AutoIncrement"><code class="docutils literal notranslate"><span class="pre">AutoIncrement</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.AutoIncrement.__init__"><code class="docutils literal notranslate"><span class="pre">AutoIncrement.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.AutoIncrement.random"><code class="docutils literal notranslate"><span class="pre">AutoIncrement.random()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.AutoIncrement.value"><code class="docutils literal notranslate"><span class="pre">AutoIncrement.value</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.AutoIncrement.__call__"><code class="docutils literal notranslate"><span class="pre">AutoIncrement.__call__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.AutoIncrement.unicode_pua"><code class="docutils literal notranslate"><span class="pre">AutoIncrement.unicode_pua()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.ConfinedAutoIncrement"><code class="docutils literal notranslate"><span class="pre">ConfinedAutoIncrement</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.ConfinedAutoIncrement.__init__"><code class="docutils literal notranslate"><span class="pre">ConfinedAutoIncrement.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.ConfinedAutoIncrement.__call__"><code class="docutils literal notranslate"><span class="pre">ConfinedAutoIncrement.__call__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.ConfinedAutoIncrement.remove"><code class="docutils literal notranslate"><span class="pre">ConfinedAutoIncrement.remove()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Wrapper"><code class="docutils literal notranslate"><span class="pre">Wrapper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Wrapper.__init__"><code class="docutils literal notranslate"><span class="pre">Wrapper.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Wrapper.value"><code class="docutils literal notranslate"><span class="pre">Wrapper.value</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Wrapper.__ror__"><code class="docutils literal notranslate"><span class="pre">Wrapper.__ror__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Every"><code class="docutils literal notranslate"><span class="pre">Every</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Every.__init__"><code class="docutils literal notranslate"><span class="pre">Every.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Every.__call__"><code class="docutils literal notranslate"><span class="pre">Every.__call__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Every.value"><code class="docutils literal notranslate"><span class="pre">Every.value</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.RunOnce"><code class="docutils literal notranslate"><span class="pre">RunOnce</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.RunOnce.__init__"><code class="docutils literal notranslate"><span class="pre">RunOnce.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.RunOnce.done"><code class="docutils literal notranslate"><span class="pre">RunOnce.done()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.RunOnce.revert"><code class="docutils literal notranslate"><span class="pre">RunOnce.revert()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.MaxDepth"><code class="docutils literal notranslate"><span class="pre">MaxDepth</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.MaxDepth.__init__"><code class="docutils literal notranslate"><span class="pre">MaxDepth.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.MaxDepth.enter"><code class="docutils literal notranslate"><span class="pre">MaxDepth.enter()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.MovingAvg"><code class="docutils literal notranslate"><span class="pre">MovingAvg</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.MovingAvg.__init__"><code class="docutils literal notranslate"><span class="pre">MovingAvg.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Absorber"><code class="docutils literal notranslate"><span class="pre">Absorber</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.__init__"><code class="docutils literal notranslate"><span class="pre">Absorber.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_solidify"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_solidify()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_operate"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_operate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_fastFS"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_fastFS()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_fastF"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_fastF()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.__ror__"><code class="docutils literal notranslate"><span class="pre">Absorber.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.__invert__"><code class="docutils literal notranslate"><span class="pre">Absorber.__invert__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_int"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_int()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_float"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_float()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_str"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_str()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_len"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_len()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Absorber.ab_contains"><code class="docutils literal notranslate"><span class="pre">Absorber.ab_contains()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Settings"><code class="docutils literal notranslate"><span class="pre">Settings</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Settings.__init__"><code class="docutils literal notranslate"><span class="pre">Settings.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Settings.context"><code class="docutils literal notranslate"><span class="pre">Settings.context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Settings.add"><code class="docutils literal notranslate"><span class="pre">Settings.add()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.UValue"><code class="docutils literal notranslate"><span class="pre">UValue</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.__init__"><code class="docutils literal notranslate"><span class="pre">UValue.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.sample"><code class="docutils literal notranslate"><span class="pre">UValue.sample()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.fromSeries"><code class="docutils literal notranslate"><span class="pre">UValue.fromSeries()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.fromBounds"><code class="docutils literal notranslate"><span class="pre">UValue.fromBounds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.exact"><code class="docutils literal notranslate"><span class="pre">UValue.exact</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.test"><code class="docutils literal notranslate"><span class="pre">UValue.test()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.f"><code class="docutils literal notranslate"><span class="pre">UValue.f()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.bounds"><code class="docutils literal notranslate"><span class="pre">UValue.bounds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.combine"><code class="docutils literal notranslate"><span class="pre">UValue.combine()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.UValue.plot"><code class="docutils literal notranslate"><span class="pre">UValue.plot()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.ConstantPad"><code class="docutils literal notranslate"><span class="pre">ConstantPad</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.ConstantPad.__init__"><code class="docutils literal notranslate"><span class="pre">ConstantPad.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.ConstantPad.__ror__"><code class="docutils literal notranslate"><span class="pre">ConstantPad.__ror__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.ConstantPad.multi"><code class="docutils literal notranslate"><span class="pre">ConstantPad.multi()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.AutoUpdateValue"><code class="docutils literal notranslate"><span class="pre">AutoUpdateValue</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.AutoUpdateValue.__init__"><code class="docutils literal notranslate"><span class="pre">AutoUpdateValue.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.AutoUpdateValue.calc"><code class="docutils literal notranslate"><span class="pre">AutoUpdateValue.calc()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Aggregate"><code class="docutils literal notranslate"><span class="pre">Aggregate</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Aggregate.__init__"><code class="docutils literal notranslate"><span class="pre">Aggregate.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Aggregate.append"><code class="docutils literal notranslate"><span class="pre">Aggregate.append()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.Perlin"><code class="docutils literal notranslate"><span class="pre">Perlin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.Perlin.__init__"><code class="docutils literal notranslate"><span class="pre">Perlin.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cron"><code class="docutils literal notranslate"><span class="pre">cron</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cron.stop"><code class="docutils literal notranslate"><span class="pre">cron.stop</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cron.__init__"><code class="docutils literal notranslate"><span class="pre">cron.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cron.allData"><code class="docutils literal notranslate"><span class="pre">cron.allData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cron.flask"><code class="docutils literal notranslate"><span class="pre">cron.flask()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.cache"><code class="docutils literal notranslate"><span class="pre">cache</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cache.__init__"><code class="docutils literal notranslate"><span class="pre">cache.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cache.allData"><code class="docutils literal notranslate"><span class="pre">cache.allData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.cache.flask"><code class="docutils literal notranslate"><span class="pre">cache.flask()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.preload"><code class="docutils literal notranslate"><span class="pre">preload</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.preload.__init__"><code class="docutils literal notranslate"><span class="pre">preload.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.TimeSeries"><code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.__init__"><code class="docutils literal notranslate"><span class="pre">TimeSeries.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.allData"><code class="docutils literal notranslate"><span class="pre">TimeSeries.allData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.allIData"><code class="docutils literal notranslate"><span class="pre">TimeSeries.allIData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.idxs"><code class="docutils literal notranslate"><span class="pre">TimeSeries.idxs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.append"><code class="docutils literal notranslate"><span class="pre">TimeSeries.append()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.appendIdx"><code class="docutils literal notranslate"><span class="pre">TimeSeries.appendIdx()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.getRaw"><code class="docutils literal notranslate"><span class="pre">TimeSeries.getRaw()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.getRate"><code class="docutils literal notranslate"><span class="pre">TimeSeries.getRate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.getPert"><code class="docutils literal notranslate"><span class="pre">TimeSeries.getPert()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.plotRaw"><code class="docutils literal notranslate"><span class="pre">TimeSeries.plotRaw()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.splotRaw"><code class="docutils literal notranslate"><span class="pre">TimeSeries.splotRaw()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.plotRate"><code class="docutils literal notranslate"><span class="pre">TimeSeries.plotRate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.splotRate"><code class="docutils literal notranslate"><span class="pre">TimeSeries.splotRate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.plotPert"><code class="docutils literal notranslate"><span class="pre">TimeSeries.plotPert()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.splotPert"><code class="docutils literal notranslate"><span class="pre">TimeSeries.splotPert()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.flask"><code class="docutils literal notranslate"><span class="pre">TimeSeries.flask()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.TimeSeries.dummyLoad"><code class="docutils literal notranslate"><span class="pre">TimeSeries.dummyLoad()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.speed"><code class="docutils literal notranslate"><span class="pre">speed</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.speed.__init__"><code class="docutils literal notranslate"><span class="pre">speed.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.speed.allData"><code class="docutils literal notranslate"><span class="pre">speed.allData()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.speed.flask"><code class="docutils literal notranslate"><span class="pre">speed.flask()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.wrapMod"><code class="docutils literal notranslate"><span class="pre">wrapMod</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#k1lib.wrapMod.__init__"><code class="docutils literal notranslate"><span class="pre">wrapMod.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#context-managers">Context managers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.captureStdout"><code class="docutils literal notranslate"><span class="pre">captureStdout</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.capturePlt"><code class="docutils literal notranslate"><span class="pre">capturePlt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.ignoreWarnings"><code class="docutils literal notranslate"><span class="pre">ignoreWarnings</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.timer"><code class="docutils literal notranslate"><span class="pre">timer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.attrContext"><code class="docutils literal notranslate"><span class="pre">attrContext</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.CancelRunException"><code class="docutils literal notranslate"><span class="pre">CancelRunException</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.CancelEpochException"><code class="docutils literal notranslate"><span class="pre">CancelEpochException</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.CancelBatchException"><code class="docutils literal notranslate"><span class="pre">CancelBatchException</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.isNumeric"><code class="docutils literal notranslate"><span class="pre">isNumeric()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.patch"><code class="docutils literal notranslate"><span class="pre">patch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.wraps"><code class="docutils literal notranslate"><span class="pre">wraps()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.squeeze"><code class="docutils literal notranslate"><span class="pre">squeeze()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.raiseEx"><code class="docutils literal notranslate"><span class="pre">raiseEx()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.numDigits"><code class="docutils literal notranslate"><span class="pre">numDigits()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.limitLines"><code class="docutils literal notranslate"><span class="pre">limitLines()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.limitChars"><code class="docutils literal notranslate"><span class="pre">limitChars()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.showLog"><code class="docutils literal notranslate"><span class="pre">showLog()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.beep"><code class="docutils literal notranslate"><span class="pre">beep()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.dontWrap"><code class="docutils literal notranslate"><span class="pre">dontWrap()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.debounce"><code class="docutils literal notranslate"><span class="pre">debounce()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.scaleSvg"><code class="docutils literal notranslate"><span class="pre">scaleSvg()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.pValue"><code class="docutils literal notranslate"><span class="pre">pValue()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.now"><code class="docutils literal notranslate"><span class="pre">now()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.pushNotification"><code class="docutils literal notranslate"><span class="pre">pushNotification()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.dep"><code class="docutils literal notranslate"><span class="pre">dep()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.ticks"><code class="docutils literal notranslate"><span class="pre">ticks()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.perlin3d"><code class="docutils literal notranslate"><span class="pre">perlin3d()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.graph"><code class="docutils literal notranslate"><span class="pre">graph()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.digraph"><code class="docutils literal notranslate"><span class="pre">digraph()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.tempObj"><code class="docutils literal notranslate"><span class="pre">tempObj()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.aes_encrypt"><code class="docutils literal notranslate"><span class="pre">aes_encrypt()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.aes_decrypt"><code class="docutils literal notranslate"><span class="pre">aes_decrypt()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.aes_encrypt_json"><code class="docutils literal notranslate"><span class="pre">aes_encrypt_json()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.aes_decrypt_json"><code class="docutils literal notranslate"><span class="pre">aes_decrypt_json()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.modbusCrc"><code class="docutils literal notranslate"><span class="pre">modbusCrc()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.parseTimeStr"><code class="docutils literal notranslate"><span class="pre">parseTimeStr()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.compileCExt"><code class="docutils literal notranslate"><span class="pre">compileCExt()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#higher-order-functions">Higher order functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.polyfit"><code class="docutils literal notranslate"><span class="pre">polyfit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.derivative"><code class="docutils literal notranslate"><span class="pre">derivative()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.optimize"><code class="docutils literal notranslate"><span class="pre">optimize()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.inverse"><code class="docutils literal notranslate"><span class="pre">inverse()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.integral"><code class="docutils literal notranslate"><span class="pre">integral()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k1lib.batchify"><code class="docutils literal notranslate"><span class="pre">batchify()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli/index.html">k1lib.cli module</a></li>
<li class="toctree-l1"><a class="reference internal" href="callbacks/index.html">k1lib.callbacks module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="k1a.html">k1lib._k1a module</a></li>
<li class="toctree-l1"><a class="reference internal" href="k1ui.html">k1lib.k1ui module</a></li>
<li class="toctree-l1"><a class="reference internal" href="eqn.html">k1lib.eqn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="fmt.html">k1lib.fmt module</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphEqn.html">k1lib.graphEqn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="imports.html">k1lib.imports module</a></li>
<li class="toctree-l1"><a class="reference internal" href="mo.html">k1lib.mo module</a></li>
<li class="toctree-l1"><a class="reference internal" href="kast.html">k1lib.kast module</a></li>
<li class="toctree-l1"><a class="reference internal" href="kcom.html">k1lib.kcom module</a></li>
<li class="toctree-l1"><a class="reference internal" href="knn.html">k1lib.knn module</a></li>
<li class="toctree-l1"><a class="reference internal" href="kop.html">k1lib.kop module</a></li>
<li class="toctree-l1"><a class="reference internal" href="kws.html">k1lib.kws module</a></li>
<li class="toctree-l1"><a class="reference internal" href="p5.html">k1lib.p5 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedule.html">k1lib.schedule module</a></li>
<li class="toctree-l1"><a class="reference internal" href="selector.html">k1lib.selector module</a></li>
<li class="toctree-l1"><a class="reference internal" href="selen.html">k1lib.selen module</a></li>
<li class="toctree-l1"><a class="reference internal" href="serpent.html">k1lib.serpent module</a></li>
<li class="toctree-l1"><a class="reference internal" href="serve.html">k1lib.serve module</a></li>
<li class="toctree-l1"><a class="reference internal" href="viz.html">k1lib.viz module</a></li>
<li class="toctree-l1"><a class="reference internal" href="zircon.html">k1lib.zircon module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="monkey.html">Monkey patched classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelogs.html">Changelogs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">k1lib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Base module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/base.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="base-module">
<h1>Base module<a class="headerlink" href="#base-module" title="Link to this heading"></a></h1>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.settings">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">settings</span></span><a class="headerlink" href="#k1lib.settings" title="Link to this definition"></a></dt>
<dd></dd></dl>

<p>This is actually an object of type <a class="reference internal" href="#k1lib.Settings" title="k1lib.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">Settings</span></code></a>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Settings:
- displayCutoff       = 50                                                    ​                                     ​cutoff length when displaying a Settings object
- svgScale            = 0.7                                                   ​                                     ​default svg scales for clis that displays graphviz graphs
- wd                  = /home/quang/k1lib/docs                                ​                                     ​default working directory, will get from `os.getcwd()`. Will update using `os.chdir()` automatically when changed
- cancelRun_newLine   = True                                                  ​                                     ​whether to add a new line character at the end of the cancel run/epoch/batch message
- pushNotificationKey = None                                                  ​                                     ​API key for `k1lib.pushNotification()`. See docs of that for more info
- tempObjLifetime     = 60                                                    ​                                     ​Default lifetime in seconds used in k1.tempObj()
- startup             = &lt;Settings&gt;                                            ​                                     ​these settings have to be applied like this: `import k1lib; k1lib.settings.startup.or_patch = False; from k1lib.imports import *` to ensure that the values are set
  - init_ray         = True                                                   ​                                     ​whether to connect to ray&#39;s cluster accessible locally automatically
  - import_optionals = True                                                   ​                                     ​whether to try to import optional dependencies automatically or not. Set this to False if you want a faster load time, but with reduced functionalities
  - or_patch         = &lt;Settings&gt;                                             ​                                     ​whether to patch __or__() method for several C-extension datatypes (numpy array, dict, etc). This would make cli operations with them a lot more pleasant, but might cause strange bugs. Haven&#39;t met them myself though
    - numpy = True                                                            ​                                     ​whether to patch numpy arrays
    - dict  = True                                                            ​                                     ​whether to patch Python dict keys and items
- cred                = &lt;Settings&gt;                                            ​                                     ​general default credentials for other places in the system
  - sql   = &lt;Settings&gt;                                                        ​                                     ​anything related to sql, used by k1lib.cli.lsext.sql. See docs for that class for more details
    - mode     = pg                                                           ​env: K1_SQL_MODE                     ​
    - host     = 127.0.0.1                                                    ​env: K1_SQL_HOST                     ​host name of db server, or db file name if mode=&#39;lite&#39;. Warning: mysql&#39;s mysqldump won&#39;t resolve domain names, so it&#39;s best to pass in ip addresses
    - port     = 3306                                                         ​env: K1_SQL_PORT                     ​
    - user     = &lt;redacted&gt;                                                   ​env: K1_SQL_USER                     ​
    - password = &lt;redacted&gt;                                                   ​env: K1_SQL_PASSWORD                 ​
    - verbose  = False                                                        ​                                     ​if True, will print out all executed queries
    - sanitize = False                                                        ​env: K1_SQL_SANITIZE                 ​if True, will sanitize all string columns with MarkupSafe
    - cache    = &lt;Settings&gt;                                                   ​                                     ​Cache settings for table accesses. I.e table[id]
      - size    = 3000                                                        ​env: K1_SQL_CACHE_SIZE               ​Size of the cache, 0 to disable it
      - timeout = 1                                                           ​env: K1_SQL_CACHE_TIMEOUT            ​After this number of seconds, the cached item will expire
  - minio = &lt;Settings&gt;                                                        ​                                     ​anything related to minio buckets, used by k1lib.cli.lsext.minio
    - host       = https://localhost:9000                                     ​env: K1_MINIO_HOST                   ​
    - access_key = &lt;redacted&gt;                                                 ​env: K1_MINIO_ACCESS_KEY             ​
    - secret_key = &lt;redacted&gt;                                                 ​env: K1_MINIO_SECRET_KEY             ​
  - redis = &lt;Settings&gt;                                                        ​                                     ​anything related to redis, used by k1lib.cli.lsext.Redis
    - host    = localhost                                                     ​env: K1_REDIS_HOST                   ​location of the redis server
    - port    = 6379                                                          ​env: K1_REDIS_PORT                   ​port the redis server use
    - expires = 120                                                           ​env: K1_REDIS_EXPIRES                ​seconds before the message deletes itself. Can be float(&#39;inf&#39;), or &#39;inf&#39; for the env variable
  - aes   = &lt;Settings&gt;                                                        ​                                     ​anything related to AES block cipher
    - key = &lt;redacted&gt;                                                        ​                                     ​16-byte aes key, used in aes_encrypt() and aes_decrypt()
- cli                 = &lt;Settings&gt;                                            ​                                     ​from k1lib.cli module
  - defaultDelim  =                                                           ​                                     ​default delimiter used in-between columns when creating tables. Defaulted to tab character.
  - defaultIndent =                                                           ​                                     ​default indent used for displaying nested structures
  - strict        = False                                                     ​                                     ​turning it on can help you debug stuff, but could also be a pain to work with
  - inf           = inf                                                       ​                                     ​infinity definition for many clis. Here because you might want to temporarily not loop things infinitely
  - quiet         = False                                                     ​                                     ​whether to mute extra outputs from clis or not
  - arrayTypes    = (&lt;class &#39;torch.Tensor&#39;&gt;, &lt;class &#39;numpy.ndarray&#39;&gt;)         ​                                     ​default array types used to accelerate clis
  - font          = None                                                      ​                                     ​default font file. Best to use .ttf files, used by toImg()
  - smooth        = 10                                                        ​                                     ​default smooth amount, used in utils.smooth
  - atomic        = &lt;Settings&gt;                                                ​                                     ​classes/types that are considered atomic and specified cli tools should never try to iterate over them
    - baseAnd  = (&lt;class &#39;numbers.Number&#39;&gt;, &lt;class &#39;numpy.number...           ​                                     ​used by BaseCli.__and__
    - typeHint = (&lt;class &#39;numbers.Number&#39;&gt;, &lt;class &#39;numpy.number...           ​                                     ​atomic types used for infering type of object for optimization passes
    - deref    = (&lt;class &#39;numbers.Number&#39;&gt;, &lt;class &#39;numpy.number...           ​                                     ​used by deref
  - llvm          = &lt;Settings&gt;                                                ​                                     ​settings related to LLVM-inspired optimizer `tOpt`. See more at module `k1lib.cli.typehint`
    - k1a = True                                                              ​                                     ​utilize the supplementary C-compiled library automatically for optimizations
  - kjs           = &lt;Settings&gt;                                                ​                                     ​cli.kjs settings
    - jsF   = {&lt;class &#39;str&#39;&gt;: &lt;function &lt;lambda&gt; at 0x7f3609f...              ​                                     ​All ._jsF() (cli to JS) transpile functions, looks like Dict[type -&gt; _jsF(meta, **kwargs) transpile func]
    - jsonF = {&lt;class &#39;range&#39;&gt;: &lt;function _jsonF_range at 0x7...              ​                                     ​All ._jsonF() JSON-serialization functions, looks like Dict[type -&gt; _jsonF(obj) func]. See utils.deref.json() docs
    - pyF   = {}                                                              ​                                     ​(future feature) All ._pyF()   (cli to Python) transpile functions, looks like Dict[type -&gt; _pyF  (meta, **kwargs) transpile func]
    - cppF  = {}                                                              ​                                     ​(future feature) All ._cppF()  (cli to C++)    transpile functions, looks like Dict[type -&gt; _cppF (meta, **kwargs) transpile func]
    - javaF = {}                                                              ​                                     ​(future feature) All ._javaF() (cli to Java)   transpile functions, looks like Dict[type -&gt; _javaF(meta, **kwargs) transpile func]
    - sqlF  = {}                                                              ​                                     ​(future feature) All ._sqlF()  (cli to SQL)    transpile functions, looks like Dict[type -&gt; _sqlF (meta, **kwargs) transpile func]
  - cat           = &lt;Settings&gt;                                                ​                                     ​inp.cat() settings
    - chunkSize = 100000                                                      ​                                     ​file reading chunk size for binary+chunk mode. Decrease it to avoid wasting memory and increase it to avoid disk latency
    - every     = &lt;Settings&gt;                                                  ​                                     ​profiler print frequency
      - text   = 1000                                                         ​                                     ​for text mode, will print every n lines
      - binary = 10                                                           ​                                     ​for binary mode, will print every n 100000-byte blocks
    - pickle    = &lt;Settings&gt;                                                  ​                                     ​inp.cat.pickle() settings

  - RemoteFile    = &lt;Settings&gt;                                                ​                                     ​inp.RemoteFile() settings, used in cat(), splitSeek() and the like
    - memoryLimit = 100000000                                                 ​                                     ​if the internal cache exceeds this limit (in bytes), and randomAccess is False, then old downloaded chunks will be deleted
    - timeout     = 10                                                        ​                                     ​seconds before terminating the remote request and retrying
    - retries     = 10                                                        ​                                     ​how many times to retry sending the request before giving up
  - applyCl       = &lt;Settings&gt;                                                ​                                     ​modifier.applyCl() settings
    - sudoTimeout = 300                                                       ​                                     ​seconds before deleting the stored password for sudo commands
    - cpuLimit    = None                                                      ​                                     ​if specified (int), will not schedule more jobs if the current number of assigned cpus exceeds this
  - repeat        = &lt;Settings&gt;                                                ​                                     ​settings related to repeat() and repeatFrom()
    - infBs = 100                                                             ​                                     ​if dealing with infinite lists, how many elements at a time should be processed?
  - chem          = &lt;Settings&gt;                                                ​                                     ​chemistry-related settings
    - imgSize = 200                                                           ​                                     ​default image size used in toImg() when drawing rdkit molecules
  - toCsv         = &lt;Settings&gt;                                                ​                                     ​conv.toCsv() settings
    - df = False                                                              ​                                     ​if False, use csv.reader (incrementally), else use pd.read_csv (all at once, might be huge!)
  - toLinks       = &lt;Settings&gt;                                                ​                                     ​conv.toLinks() settings
    - splitChars = [&#39;&lt;br&gt;&#39;, &#39;&lt;div &#39;, &#39;\n&#39;, &#39;\t&#39;, &#39;&lt;&#39;, &#39;&gt;&#39;, &#39; &#39;, &#39;,...         ​                                     ​characters/strings to split the lines by, so that each link has the opportunity to be on a separate line, so that the first instance in a line don&#39;t overshadow everything after it
    - protocols  = [&#39;http&#39;, &#39;https&#39;, &#39;ftp&#39;]                                   ​                                     ​list of recognized protocols to search for links, like &#39;http&#39; and so on
  - models        = &lt;Settings&gt;                                                ​                                     ​settings related to k1lib.cli.models
    - cuda    = None                                                          ​                                     ​whether to run the models on the GPU or not. True for GPU, False for CPU. None (default) for GPU if available, else CPU
    - embed   = &lt;Settings&gt;                                                    ​                                     ​
      - model = all-MiniLM-L6-v2                                              ​                                     ​what model to choose from `SentenceTransformer` library
      - bs    = 512                                                           ​                                     ​batch size to feed the model. For all-MiniLM-L6-v2, it seems to be able to deal with anything. I&#39;ve tried 10k batch and it&#39;s still doing good
    - generic = &lt;Settings&gt;                                                    ​                                     ​
      - model = google/flan-t5-xl                                             ​                                     ​what model to choose from `transformers` library
      - bs    = 16                                                            ​                                     ​batch size to feed the model. For flan-t5-xl, 16 seems to be the sweet spot for 24GB VRAM (RTX 3090/4090). Decrease it if you don&#39;t have as much VRAM
    - bloom   = &lt;Settings&gt;                                                    ​                                     ​bloom filter settings
      - scalable = &lt;Settings&gt;                                                 ​                                     ​settings for when you don&#39;t declare the bloom&#39;s capacity ahead of time
        - capacity = 1000                                                     ​                                     ​initial filter&#39;s capacity
        - growth   = 4                                                        ​                                     ​how fast does the filter&#39;s capacity grow over time when the capacity is reached
  - bio           = &lt;Settings&gt;                                                ​                                     ​from k1lib.cli.bio module
    - blast      = None                                                       ​                                     ​location of BLAST database
    - go         = None                                                       ​                                     ​location of gene ontology file (.obo)
    - so         = None                                                       ​                                     ​location of sequence ontology file
    - lookupImgs = True                                                       ​                                     ​sort of niche. Whether to auto looks up extra gene ontology relationship images
    - phred      = !&quot;#$%&amp;&#39;()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJ                 ​                                     ​Phred quality score
  - kapi          = &lt;Settings&gt;                                                ​                                     ​cli.kapi settings
    - local = False                                                           ​                                     ​whether to use local url instead of remote url. This only has relevance to me though, as the services are running on localhost
  - ktree         = &lt;Settings&gt;                                                ​                                     ​cli.ktree module settings
    - tok =                                                                  ​                                     ​Special token for internal processing
  - sam           = &lt;Settings&gt;                                                ​                                     ​from k1lib.cli.sam module
    - flags  = [&#39;PAIRED&#39;, &#39;PROPER_PAIR&#39;, &#39;UNMAP&#39;, &#39;MUNMAP&#39;, &#39;R...             ​                                     ​list of flags
    - header = &lt;Settings&gt;                                                     ​                                     ​sam headers
      - short = [&#39;qname&#39;, &#39;flag&#39;, &#39;rname&#39;, &#39;pos&#39;, &#39;mapq&#39;, &#39;ciga...            ​                                     ​
      - long  = [&#39;Query template name&#39;, &#39;Flags&#39;, &#39;Reference seq...            ​                                     ​
- monkey              = &lt;Settings&gt;                                            ​                                     ​monkey-patched settings

- fmt                 = &lt;Settings&gt;                                            ​                                     ​from k1lib.fmt module
  - separator = True                                                          ​                                     ​whether to have a space between the number and the unit
  - colors    = [&#39;#8dd3c7&#39;, &#39;#ffffb3&#39;, &#39;#bebada&#39;, &#39;#fb8072&#39;, &#39;#...            ​                                     ​List of colors to cycle through in fmt.colors()
- k1ui                = &lt;Settings&gt;                                            ​                                     ​docs related to k1ui java library
  - server = &lt;Settings&gt;                                                       ​                                     ​server urls
    - http = http://localhost:9511                                            ​                                     ​normal http server
    - ws   = ws://localhost:9512                                              ​                                     ​websocket server
  - draw   = &lt;Settings&gt;                                                       ​                                     ​drawing settings
    - trackHeight = 30                                                        ​                                     ​Track&#39;s height in Recording visualization
    - pad         = 10                                                        ​                                     ​Padding between tracks
- p5                  = &lt;Settings&gt;                                            ​                                     ​p5 module settings
  - funcs   = [&#39;arc&#39;, &#39;ellipse&#39;, &#39;circle&#39;, &#39;line&#39;, &#39;point&#39;, &#39;...              ​                                     ​p5 functions to syntactically replace in instance mode
  - symbols = [&#39;mouseX&#39;, &#39;mouseY&#39;]                                            ​                                     ​symbols to syntactically replace in instance mode
- kop                 = &lt;Settings&gt;                                            ​                                     ​from k1lib.kop module, for optics-related tools
  - colorD  = {&#39;rainbow&#39;: [400, 650], &#39;red&#39;: [620, 750], &#39;ora...              ​                                     ​color wavelength ranges to be used in constructing Rays
  - gps     = {&#39;BK7&#39;: (1.03961212, 0.231792344, 1.01046945, 0...              ​                                     ​All builtin glass parameters of the system. All have 6 floats, for B1,B2,B3,C1,C2,C3 parameters used in the sellmeier equation: https://en.wikipedia.org/wiki/Sellmeier_equation
  - display = &lt;Settings&gt;                                                      ​                                     ​display settings
    - drawable = &lt;Settings&gt;                                                   ​                                     ​generic draw settings
      - axes      = True                                                      ​                                     ​whether to add x and y axes to the sketch
      - maxWh     = 800                                                       ​                                     ​when drawing a sketch, it will be rescaled so that the maximum of width and height of the final image is this number. Increase to make the sketch bigger
      - grid      = True                                                      ​                                     ​whether to add grid lines to the sketch
      - gridColor = (255, 255, 255)                                           ​                                     ​
    - rays     = &lt;Settings&gt;                                                   ​                                     ​display settings of kop.Rays
      - showOrigin = True                                                     ​                                     ​whether to add a small red dot to the beginning of the mean (x,y) of a Rays or not
      - infLength  = 100                                                      ​                                     ​length in mm to display Rays if their length is infinite
    - surface  = &lt;Settings&gt;                                                   ​                                     ​display settings for kop.Surface class
      - showIndex = True                                                      ​                                     ​whether to show the index of the Surface in an OpticSystem or not
  - consts  = &lt;Settings&gt;                                                      ​                                     ​magic constants throughout the sim. By default works pretty well, but you can tweak these if you need unrealistic setups, like super big focal length, etc
    - inchForward = 1e-06                                                     ​                                     ​after new Rays have been built, inch forward the origin of the new Rays by a this tiny amount so that it &#39;clears&#39; the last Surface
- eqn                 = &lt;Settings&gt;                                            ​                                     ​from k1lib.eqn module
  - spaceBetweenValueSymbol = True                                            ​                                     ​
  - eqnPrintExtras          = True                                            ​                                     ​
- cExt                = &lt;Settings&gt;                                            ​                                     ​k1.compileCExt()-related settings
  - includes = [&#39;fstream&#39;, &#39;iostream&#39;, &#39;sstream&#39;, &#39;mutex&#39;, &#39;st...             ​                                     ​header files to include
- zircon              = &lt;Settings&gt;                                            ​                                     ​from k1lib.zircon module
  - http_server      = https://zircon.mlexps.com                              ​                                     ​
  - ws_server        = wss://ws.zircon.mlexps.com                             ​                                     ​
  - conflictDuration = 10                                                     ​                                     ​How many seconds does the Extensions need to not take orders from other Python clients before our Python clients can take over? If too high, there won&#39;t be any free Extensions left, and if too low, there will be interference with other ppl
- mo                  = &lt;Settings&gt;                                            ​                                     ​from k1lib.mo module
  - overOctet = False                                                         ​                                     ​whether to allow making bonds that exceeds the octet rule
</pre></div>
</div>
<p>Also, this is exposed automatically, so something like this works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">svgScale</span> <span class="o">=</span> <span class="mf">0.6</span>
</pre></div>
</div>
<section id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#k1lib.Learner" title="k1lib.Learner"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Learner</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Object" title="k1lib.Object"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Object</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Range" title="k1lib.Range"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Range</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Domain" title="k1lib.Domain"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Domain</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.AutoIncrement" title="k1lib.AutoIncrement"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.AutoIncrement</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.ConfinedAutoIncrement" title="k1lib.ConfinedAutoIncrement"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.ConfinedAutoIncrement</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Wrapper" title="k1lib.Wrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Wrapper</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Every" title="k1lib.Every"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Every</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.RunOnce" title="k1lib.RunOnce"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.RunOnce</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.MaxDepth" title="k1lib.MaxDepth"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.MaxDepth</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.MovingAvg" title="k1lib.MovingAvg"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.MovingAvg</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Absorber" title="k1lib.Absorber"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Absorber</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Settings" title="k1lib.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Settings</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.UValue" title="k1lib.UValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.UValue</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.ConstantPad" title="k1lib.ConstantPad"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.ConstantPad</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.AutoUpdateValue" title="k1lib.AutoUpdateValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.AutoUpdateValue</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Aggregate" title="k1lib.Aggregate"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Aggregate</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.Perlin" title="k1lib.Perlin"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.Perlin</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.cron" title="k1lib.cron"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.cron</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.cache" title="k1lib.cache"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.cache</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.preload" title="k1lib.preload"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.preload</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.TimeSeries" title="k1lib.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.TimeSeries</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.speed" title="k1lib.speed"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.speed</span></code></a></p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Learner">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Learner</span></span><a class="reference internal" href="_modules/k1lib/_learner.html#Learner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Learner" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Learner.model">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#k1lib.Learner.model" title="Link to this definition"></a></dt>
<dd><p>Set this to change the model to run</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Learner.data">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data</span></span><a class="headerlink" href="#k1lib.Learner.data" title="Link to this definition"></a></dt>
<dd><p>Set this to change the data (list of 2 dataloader) to run against.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Learner.opt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">opt</span></span><a class="headerlink" href="#k1lib.Learner.opt" title="Link to this definition"></a></dt>
<dd><p>Set this to change the optimizer. If you’re making your own
optimizers, beware to follow the PyTorch’s style guide as there are callbacks
that modifies optimizer internals while training like
<a class="reference internal" href="schedule.html#k1lib.schedule.ParamScheduler" title="k1lib.schedule.ParamScheduler"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.schedule.ParamScheduler</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Learner.cbs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cbs</span></span><a class="headerlink" href="#k1lib.Learner.cbs" title="Link to this definition"></a></dt>
<dd><p>The <a class="reference internal" href="callbacks/index.html#k1lib.callbacks.callbacks.Callbacks" title="k1lib.callbacks.callbacks.Callbacks"><code class="xref py py-class docutils literal notranslate"><span class="pre">Callbacks</span></code></a> object. Initialized to
include all the common callbacks. You can set a new one if you want to.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Learner.css">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">css</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#k1lib.Learner.css" title="Link to this definition"></a></dt>
<dd><p>The css selector string. Set this to select other parts of the network.
After setting, you can access the selector like this: <code class="code docutils literal notranslate"><span class="pre">l.selector</span></code></p>
<p>See also: <a class="reference internal" href="selector.html#k1lib.selector.ModuleSelector" title="k1lib.selector.ModuleSelector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleSelector</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Learner.lossF">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lossF</span></span><a class="headerlink" href="#k1lib.Learner.lossF" title="Link to this definition"></a></dt>
<dd><p>Set this to specify a loss function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Learner.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_learner.html#Learner.evaluate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Learner.evaluate" title="Link to this definition"></a></dt>
<dd><p>Function to visualize quickly how the network is doing. Undefined by default,
just placed here as a convention, so you have to do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Learner</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">xbs</span><span class="p">,</span> <span class="n">ybs</span><span class="p">,</span> <span class="n">ys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Recorder</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">xbs</span><span class="p">),</span> <span class="n">torch</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">ys</span><span class="p">))</span>
<span class="n">l</span><span class="o">.</span><span class="n">evaluate</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">evaluate</span><span class="p">(</span><span class="n">l</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Learner.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#k1lib.Learner.__call__" title="Link to this definition"></a></dt>
<dd><p>Executes just a small batch. Convenience method to query how the network is
doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xb</strong> – x batch</p></li>
<li><p><strong>yb</strong> – y batch. If specified, return (y, loss), else return y alone</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Learner.load">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#k1lib.Learner.load" title="Link to this definition"></a></dt>
<dd><p>Loads a <a class="reference internal" href="#k1lib.Learner" title="k1lib.Learner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Learner</span></code></a> from a file. See also: <a class="reference internal" href="#k1lib.Learner.save" title="k1lib.Learner.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># this will load up learner in file &quot;skip1_128bs.pth&quot;</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">Learner</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;skip1_128bs&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fileName</strong> – if empty, then will prompt for file name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Learner.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">epochs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">batches</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#k1lib.Learner.run" title="Link to this definition"></a></dt>
<dd><p>Main run function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>epochs</strong> – number of epochs to run. 1 epoch is the length of the dataset</p></li>
<li><p><strong>batches</strong> – if set, then cancels the epoch after reaching the specified batch</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Learner.sample">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sample</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.Learner" title="k1lib._learner.Learner"><span class="pre">Learner</span></a></span></span><a class="headerlink" href="#k1lib.Learner.sample" title="Link to this definition"></a></dt>
<dd><p>Creates an example learner, just for simple testing stuff anywhere. The
network tries to learn the function y=x. Only bare minimum callbacks are included.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Learner.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#k1lib.Learner.save" title="Link to this definition"></a></dt>
<dd><p>Saves this <a class="reference internal" href="#k1lib.Learner" title="k1lib.Learner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Learner</span></code></a> to file. See also: <a class="reference internal" href="#k1lib.Learner.load" title="k1lib.Learner.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code></a>. Does not
save the <code class="docutils literal notranslate"><span class="pre">data</span></code> object, because that’s potentially very big. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">Learner</span><span class="p">()</span>
<span class="c1"># saves learner to &quot;skip1_128bs.pth&quot; and model to &quot;skip1_128bs.model.pth&quot;</span>
<span class="n">l</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;skip1_128bs&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fileName</strong> – name to save file into</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Object">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Object</span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Object"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Object" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Convenience class that acts like <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.defaultdict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">defaultdict</span></code></a>. You
can use it like a normal object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p">)</span> <span class="c1"># outputs &quot;3&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">__repr__()</span></code> output is pretty nice too:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;__main__.Object&#39;&gt;, with attrs:
- b
</pre></div>
</div>
<p>You can instantiate it from a dict:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Object</span><span class="o">.</span><span class="n">fromDict</span><span class="p">({</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="c1"># outputs &quot;4&quot;</span>
</pre></div>
</div>
<p>And you can specify a default value, just like defaultdict:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span><span class="o">.</span><span class="n">withAutoDeclare</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[])</span>
<span class="n">a</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;factorio&quot;</span><span class="p">,</span> <span class="s2">&quot;world of warcraft&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">texts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># outputs &quot;factorio&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Default values only work with variables that don’t start with an
underscore “_”.</p>
</div>
<p>Treating it like defaultdict is okay too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Object</span><span class="p">()</span><span class="o">.</span><span class="n">withAutoDeclare</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[])</span>
<span class="n">a</span><span class="p">[</span><span class="s2">&quot;movies&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;dune&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">movies</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># outputs &quot;dune&quot; </span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Object.fromDict">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Object.fromDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Object.fromDict" title="Link to this definition"></a></dt>
<dd><p>Creates an object with attributes from a dictionary</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Object.state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a></em><a class="headerlink" href="#k1lib.Object.state" title="Link to this definition"></a></dt>
<dd><p>Essentially <code class="docutils literal notranslate"><span class="pre">__dict__</span></code>, but only outputs the fields you
defined. If your framework intentionally set some attributes, those
will be reported too, so beware</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Object.withAutoDeclare">
<span class="sig-name descname"><span class="pre">withAutoDeclare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">defaultValueGenerator</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Object.withAutoDeclare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Object.withAutoDeclare" title="Link to this definition"></a></dt>
<dd><p>Sets this Object up so that if a field doesn’t
exist, it will automatically create it with a
default value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Object.withRepr">
<span class="sig-name descname"><span class="pre">withRepr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_repr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Object.withRepr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Object.withRepr" title="Link to this definition"></a></dt>
<dd><p>Specify output of <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code>. Legacy code. You can just
monkey patch it instead.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Range">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A range of numbers. It’s just 2 numbers really: start and stop</p>
<p>This is essentially a convenience class to provide a nice, clean
abstraction and to eliminate errors. You can transform values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">toUnit</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="c1"># returns 0.3</span>
<span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">fromUnit</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span> <span class="c1"># returns 13</span>
<span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">toRange</span><span class="p">(</span><span class="n">Range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="mi">13</span><span class="p">)</span> <span class="c1"># returns 17</span>
</pre></div>
</div>
<p>You can also do random math operations on it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">Range</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">43</span><span class="p">)</span> <span class="c1"># returns True</span>
<span class="n">Range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">==</span> <span class="o">~</span><span class="n">Range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c1"># returns True</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.__getitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.__getitem__" title="Link to this definition"></a></dt>
<dd><p>0 for start, 1 for stop</p>
<p>You can also pass in a <a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slice</span></code></a> object, in which case, a range subset
will be returned. Code kinda looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">)[</span><span class="n">index</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.__init__" title="Link to this definition"></a></dt>
<dd><p>Creates a new Range.</p>
<p>There are different <code class="docutils literal notranslate"><span class="pre">__init__</span></code> functions for many situations:</p>
<ul class="simple">
<li><p>Range(2, 11.1): create range [2, 11.1]</p></li>
<li><p>Range(15.2): creates range [0, 15.2]</p></li>
<li><p>Range(Range(2, 3)): create range [2, 3]. This serves as sort of a catch-all</p></li>
<li><p>Range(slice(2, 5, 2)): creates range [2, 5]. Can also be a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a></p></li>
<li><p>Range(slice(2, -1), 10): creates range [2, 9]</p></li>
<li><p>Range([1, 2, 7, 5]): creates range [1, 5]. Can also be a tuple</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.fixOrder">
<span class="sig-name descname"><span class="pre">fixOrder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.Range" title="k1lib._baseClasses.Range"><span class="pre">Range</span></a></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.fixOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.fixOrder" title="Link to this definition"></a></dt>
<dd><p>If start greater than stop, switch the 2, else do nothing</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.intIter">
<span class="sig-name descname"><span class="pre">intIter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.intIter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.intIter" title="Link to this definition"></a></dt>
<dd><p>Returns integers within this Range</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.toUnit">
<span class="sig-name descname"><span class="pre">toUnit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.toUnit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.toUnit" title="Link to this definition"></a></dt>
<dd><p>Converts x from current range to [0, 1] range. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">toUnit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># will return 0.375, as that is (5-2)/(10-2)</span>
</pre></div>
</div>
<p>You can actually pass in a lot in place of x:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">toUnit</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span> <span class="c1"># will be [0.5, 0.3, 0.6]. Can also be a tuple</span>
<span class="n">r</span><span class="o">.</span><span class="n">toUnit</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span> <span class="c1"># will be slice(0.5, 0.6). Can also be a range, or Range</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the last case, if <code class="docutils literal notranslate"><span class="pre">start</span></code> is None, it gets defaulted to 0, and
if <code class="docutils literal notranslate"><span class="pre">end</span></code> is None, it gets defaulted to 1</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.fromUnit">
<span class="sig-name descname"><span class="pre">fromUnit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.fromUnit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.fromUnit" title="Link to this definition"></a></dt>
<dd><p>Converts x from [0, 1] range to this range. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">fromUnit</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span> <span class="c1"># will return 3</span>
</pre></div>
</div>
<p>x can be a lot of things, see <a class="reference internal" href="#k1lib.Range.toUnit" title="k1lib.Range.toUnit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toUnit()</span></code></a> for more</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.toRange">
<span class="sig-name descname"><span class="pre">toRange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.Range" title="k1lib._baseClasses.Range"><span class="pre">Range</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.toRange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.toRange" title="Link to this definition"></a></dt>
<dd><p>Converts x from current range to another range. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">toRange</span><span class="p">(</span><span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span> <span class="c1"># will return 60</span>
</pre></div>
</div>
<p>x can be a lot of things, see <a class="reference internal" href="#k1lib.Range.toUnit" title="k1lib.Range.toUnit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toUnit()</span></code></a> for more.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.fromRange">
<span class="sig-name descname"><span class="pre">fromRange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.Range" title="k1lib._baseClasses.Range"><span class="pre">Range</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.fromRange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.fromRange" title="Link to this definition"></a></dt>
<dd><p>Reverse of <a class="reference internal" href="#k1lib.Range.toRange" title="k1lib.Range.toRange"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toRange()</span></code></a>, effectively.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Range.range_">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">range_</span></span><a class="headerlink" href="#k1lib.Range.range_" title="Link to this definition"></a></dt>
<dd><p>Returns a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a> object with start and stop values
rounded off</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Range.slice_">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">slice_</span></span><a class="headerlink" href="#k1lib.Range.slice_" title="Link to this definition"></a></dt>
<dd><p>Returns a <a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slice</span></code></a> object with start and stop values
rounded off</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.proportionalSlice">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">proportionalSlice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r1Slice</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.13)"><span class="pre">slice</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.13)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.Range" title="k1lib._baseClasses.Range"><span class="pre">Range</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#k1lib.Range" title="k1lib._baseClasses.Range"><span class="pre">Range</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.proportionalSlice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.proportionalSlice" title="Link to this definition"></a></dt>
<dd><p>Slices r1 and r2 proportionally. Best to explain using an
example. Let’s say you have 2 arrays created from a time-dependent
procedure like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">t</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">t</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1"># returns (34, 20)</span>
</pre></div>
</div>
<p>a and b are of different lengths, but you want to plot both from 30%
mark to 50% mark (for a, it’s elements 10 -&gt; 17, for b it’s 6 -&gt; 10),
as they are time-dependent. As you can probably tell, to get the indicies
10, 17, 6, 10 is messy. So, you can do something like this instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">Range</span><span class="o">.</span><span class="n">proportionalSlice</span><span class="p">(</span><span class="n">Range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="n">Range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">17</span><span class="p">))</span>
</pre></div>
</div>
<p>This will return the Ranges [10, 17] and [5.88, 10]</p>
<p>Then, you can plot both of them side by side like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">r1</span><span class="o">.</span><span class="n">range_</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">r1</span><span class="o">.</span><span class="n">slice_</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">r2</span><span class="o">.</span><span class="n">range_</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">r2</span><span class="o">.</span><span class="n">slice_</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.bound">
<span class="sig-name descname"><span class="pre">bound</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.13)"><span class="pre">range</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.13)"><span class="pre">slice</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.13)"><span class="pre">range</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.13)"><span class="pre">slice</span></a></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.bound"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.bound" title="Link to this definition"></a></dt>
<dd><p>If input range|slice’s stop and start is missing, then use this
range’s start and stop instead.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.copy" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Range.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Range.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Range.__invert__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Domain">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Domain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">ranges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dontCheck</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Domain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Domain" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Domain.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">ranges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dontCheck</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Domain.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Domain.__init__" title="Link to this definition"></a></dt>
<dd><p>Creates a new domain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ranges</strong> – each element is a <a class="reference internal" href="#k1lib.Range" title="k1lib.Range"><code class="xref py py-class docutils literal notranslate"><span class="pre">Range</span></code></a>, although any format will be fine as this selects for that</p></li>
<li><p><strong>dontCheck</strong> – don’t sanitize inputs, intended to boost perf internally only</p></li>
</ul>
</dd>
</dl>
<p>A domain is just an array of <a class="reference internal" href="#k1lib.Range" title="k1lib.Range"><code class="xref py py-class docutils literal notranslate"><span class="pre">Range</span></code></a> that represents what intervals on
the real number line is chosen. Some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inf</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span> <span class="c1"># shorthand for infinity</span>
<span class="n">Domain</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mf">7.5</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># represents &quot;[2, 3) U [5, 7.5)&quot;</span>
<span class="n">Domain</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span> <span class="c1"># represents &quot;[2, 8)&quot; as overlaps are merged</span>
<span class="o">-</span><span class="n">Domain</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># represents &quot;(-inf, 2) U [3, inf)&quot;, so essentially R - d, with R being the set of real numbers</span>
<span class="o">-</span><span class="n">Domain</span><span class="p">([</span><span class="o">-</span><span class="n">inf</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># represents &quot;[3, inf)&quot;</span>
<span class="n">Domain</span><span class="o">.</span><span class="n">fromInts</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="c1"># represents &quot;[2, 4) U [6, 7)&quot;</span>
</pre></div>
</div>
<p>You can also do arithmetic on them, and check “in” oeprator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Domain</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="n">Domain</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="c1"># represents &quot;[2, 3) U [4, 5)&quot;</span>
<span class="n">Domain</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="n">Domain</span><span class="p">([</span><span class="mf">2.9</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="c1"># represents &quot;[2, 5)&quot;, also merges overlaps</span>
<span class="n">Domain</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">&amp;</span> <span class="n">Domain</span><span class="p">([</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="c1"># represents &quot;[2, 3) A [2.5, 5)&quot;, or &quot;[2.5, 3)&quot;</span>
<span class="mi">3</span> <span class="ow">in</span> <span class="n">Domain</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># returns False</span>
<span class="mi">2</span> <span class="ow">in</span> <span class="n">Domain</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># returns True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Domain.fromInts">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromInts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">ints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Domain.fromInts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Domain.fromInts" title="Link to this definition"></a></dt>
<dd><p>Returns a new <a class="reference internal" href="#k1lib.Domain" title="k1lib.Domain"><code class="xref py py-class docutils literal notranslate"><span class="pre">Domain</span></code></a> which has ranges [i, i+1] for each
int given.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Domain.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Domain.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Domain.copy" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Domain.intIter">
<span class="sig-name descname"><span class="pre">intIter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Domain.intIter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Domain.intIter" title="Link to this definition"></a></dt>
<dd><p>Yields ints in all ranges of this domain. If first range’s domain
is <span class="math notranslate nohighlight">\((-\inf, a)\)</span>, then starts at the specified integer</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.AutoIncrement">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">AutoIncrement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initialValue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#AutoIncrement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.AutoIncrement" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.AutoIncrement.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initialValue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#AutoIncrement.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.AutoIncrement.__init__" title="Link to this definition"></a></dt>
<dd><p>Creates a new AutoIncrement object. Every time the object is called
it gets incremented by 1 automatically. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">AutoIncrement</span><span class="p">()</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 0</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 1</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 2</span>
<span class="n">a</span><span class="o">.</span><span class="n">value</span> <span class="c1"># returns 2</span>
<span class="n">a</span><span class="o">.</span><span class="n">value</span> <span class="c1"># returns 2</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 3</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">AutoIncrement</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;cluster_&quot;</span><span class="p">)</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns &quot;cluster_0&quot;</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns &quot;cluster_1&quot;</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns &quot;cluster_2&quot;</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns &quot;cluster_0&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – if specified, then will wrap around to 0 when hit this number</p></li>
<li><p><strong>prefix</strong> – if specified, will yield strings with specified prefix</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.AutoIncrement.random">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">random</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.AutoIncrement" title="k1lib._baseClasses.AutoIncrement"><span class="pre">AutoIncrement</span></a></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#AutoIncrement.random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.AutoIncrement.random" title="Link to this definition"></a></dt>
<dd><p>Creates a new AutoIncrement object that has a random integer initial value</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.AutoIncrement.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#k1lib.AutoIncrement.value" title="Link to this definition"></a></dt>
<dd><p>Get the value as-is, without auto incrementing it</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.AutoIncrement.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#AutoIncrement.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.AutoIncrement.__call__" title="Link to this definition"></a></dt>
<dd><p>Increments internal counter, and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.AutoIncrement.unicode_pua">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unicode_pua</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#AutoIncrement.unicode_pua"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.AutoIncrement.unicode_pua" title="Link to this definition"></a></dt>
<dd><p>Returns a generator that generates unicode characters from within
unicode’s private use area (PUA). Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">AutoIncrement</span><span class="o">.</span><span class="n">unicode_pua</span><span class="p">()</span>
<span class="n">a</span> <span class="o">|</span> <span class="n">head</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="c1"># returns [&#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.ConfinedAutoIncrement">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">ConfinedAutoIncrement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxValue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#ConfinedAutoIncrement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ConfinedAutoIncrement" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.ConfinedAutoIncrement.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxValue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#ConfinedAutoIncrement.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ConfinedAutoIncrement.__init__" title="Link to this definition"></a></dt>
<dd><p>Similar to <a class="reference internal" href="#k1lib.AutoIncrement" title="k1lib.AutoIncrement"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoIncrement</span></code></a>, but this time the yielded numbers
become cyclical, and in [0, maxValue). The applications for this class is
rather niche, as I need it only for a hardware project that require strict id
generation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">ConfinedAutoIncrement</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 1</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 2</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 3</span>
<span class="n">a</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 0</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># returns 2</span>
<span class="n">a</span><span class="p">()</span> <span class="c1"># throws an error as it ran out of elements to yield</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>maxValue</strong> – max value that can be yielded</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.ConfinedAutoIncrement.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#ConfinedAutoIncrement.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ConfinedAutoIncrement.__call__" title="Link to this definition"></a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.ConfinedAutoIncrement.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#ConfinedAutoIncrement.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ConfinedAutoIncrement.remove" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Wrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Wrapper" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Wrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Wrapper.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Wrapper.__init__" title="Link to this definition"></a></dt>
<dd><p>Creates a wrapper for some value and get it by calling it.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">Wrapper</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e7</span><span class="p">))))</span>
<span class="c1"># returns [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
<span class="n">a</span><span class="p">()[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p>This exists just so that Jupyter Lab’s contextual help won’t automatically
display the (possibly humongous) value. Could be useful if you want to pass a
value by reference everywhere like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">Wrapper</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">f</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">o</span><span class="p">()</span> <span class="c1"># returns 3</span>
</pre></div>
</div>
<p>You can also pipe into it like this:</p>
<blockquote>
<div><p>o = 3 | k1.Wrapper()
o() # returns 3</p>
</div></blockquote>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.Wrapper.value">
<span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></em><a class="headerlink" href="#k1lib.Wrapper.value" title="Link to this definition"></a></dt>
<dd><p>Internal value of this <a class="reference internal" href="#k1lib.Wrapper" title="k1lib.Wrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wrapper</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Wrapper.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Wrapper.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Wrapper.__ror__" title="Link to this definition"></a></dt>
<dd><p>Return value|self.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Every">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Every</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Every"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Every" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Every.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Every.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Every.__init__" title="Link to this definition"></a></dt>
<dd><p>Returns True every interval.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Every</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">e</span><span class="p">()</span> <span class="c1"># returns True</span>
<span class="n">e</span><span class="p">()</span> <span class="c1"># returns False</span>
<span class="n">e</span><span class="p">()</span> <span class="c1"># returns False</span>
<span class="n">e</span><span class="p">()</span> <span class="c1"># returns False</span>
<span class="n">e</span><span class="p">()</span> <span class="c1"># returns True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Every.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Every.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Every.__call__" title="Link to this definition"></a></dt>
<dd><p>Returns True or False based on internal count.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.Every.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#k1lib.Every.value" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.RunOnce">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">RunOnce</span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#RunOnce"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.RunOnce" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.RunOnce.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#RunOnce.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.RunOnce.__init__" title="Link to this definition"></a></dt>
<dd><p>Returns False first time only.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">RunOnce</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># returns False</span>
<span class="n">r</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># returns True</span>
<span class="n">r</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># returns True</span>
<span class="n">r</span><span class="o">.</span><span class="n">revert</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># returns False</span>
<span class="n">r</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># returns True</span>
<span class="n">r</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># returns True</span>
</pre></div>
</div>
<p>May be useful in situations like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ro</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">RunOnce</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ro</span><span class="o">.</span><span class="n">done</span><span class="p">():</span> <span class="k">return</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">x</span>
        <span class="k">return</span> <span class="mi">5</span> <span class="o">+</span> <span class="n">x</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># returns 9</span>
<span class="n">a</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># returns 7</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.RunOnce.done">
<span class="sig-name descname"><span class="pre">done</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#RunOnce.done"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.RunOnce.done" title="Link to this definition"></a></dt>
<dd><p>Whether this has been called once before.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.RunOnce.revert">
<span class="sig-name descname"><span class="pre">revert</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#RunOnce.revert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.RunOnce.revert" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.MaxDepth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">MaxDepth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxDepth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#MaxDepth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.MaxDepth" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.MaxDepth.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxDepth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#MaxDepth.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.MaxDepth.__init__" title="Link to this definition"></a></dt>
<dd><p>Convenience utility to check for graph max depth.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">depth</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">d</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">enter</span><span class="p">())</span>
<span class="c1"># prints &quot;0\n1\n2\n3&quot;</span>
<span class="n">f</span><span class="p">(</span><span class="n">k1lib</span><span class="o">.</span><span class="n">MaxDepth</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>Of course, this might look unpleasant to the end user, so this is more
likely for internal tools.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.MaxDepth.enter">
<span class="sig-name descname"><span class="pre">enter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.MaxDepth" title="k1lib._baseClasses.MaxDepth"><span class="pre">MaxDepth</span></a></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#MaxDepth.enter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.MaxDepth.enter" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.MovingAvg">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">MovingAvg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#MovingAvg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.MovingAvg" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.MovingAvg.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initV</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#MovingAvg.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.MovingAvg.__init__" title="Link to this definition"></a></dt>
<dd><p>Smoothes out sequential data using momentum.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">MovingAvg</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">a</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">value</span> <span class="c1"># returns 4.8, because 0.9*5 + 0.1*3 = 4.8</span>
<span class="n">a</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">value</span> <span class="c1"># returns 4.62</span>
</pre></div>
</div>
<p>There’s also a cli at <a class="reference internal" href="cli/index.html#k1lib.cli.conv.toMovingAvg" title="k1lib.cli.conv.toMovingAvg"><code class="xref py py-class docutils literal notranslate"><span class="pre">toMovingAvg</span></code></a> that does the exact
same thing, but just more streamlined and cli-like. Both versions are kept as
sometimes I do want a separate object with internal state</p>
<p>Difference between normal and debias modes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span> <span class="n">y</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">|</span> <span class="n">op</span><span class="p">()</span><span class="o">.</span><span class="n">item</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">MovingAvg</span><span class="p">(</span><span class="n">debias</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">a</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">MovingAvg</span><span class="p">(</span><span class="n">debias</span><span class="o">=</span><span class="kc">True</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">a</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Signal&quot;</span><span class="p">,</span> <span class="s2">&quot;Normal&quot;</span><span class="p">,</span> <span class="s2">&quot;Debiased&quot;</span><span class="p">])</span>
</pre></div>
</div>
<img alt="_images/movingAvg.png" src="_images/movingAvg.png" />
<p>As you can see, normal mode still has the influence of the initial value at
0 and can’t rise up fast, whereas the debias mode will ignore the initial
value and immediately snaps to the first saved value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initV</strong> – initial value</p></li>
<li><p><strong>alpha</strong> – number in [0, 1]. Basically how much to keep old value?</p></li>
<li><p><strong>debias</strong> – whether to debias the initial value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Absorber">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Absorber</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initDict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Creates an object that absorbes every operation done on it. Could be
useful in some scenarios:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ab</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Absorber</span><span class="p">()</span>
<span class="c1"># absorbs all operations done on the object</span>
<span class="nb">abs</span><span class="p">(</span><span class="n">ab</span><span class="p">[::</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1"># returns transformed tensor of size [2, 3]</span>
<span class="n">ab</span><span class="o">.</span><span class="n">ab_operate</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
<p>Another:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ab</span> <span class="o">=</span> <span class="n">Absorber</span><span class="p">()</span>
<span class="n">ab</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">50</span>
<span class="c1"># returns [0, 1, -50, 3, 4]</span>
<span class="n">ab</span><span class="o">.</span><span class="n">ab_operate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
<p>Because this object absorbs every operation done on it, you have to be gentle with
it, as any unplanned disturbances might throw your code off. Best to create a new
one on the fly, and pass them immediately to functions, because if you’re in a
notebook environment like Jupyter, it might poke at variables.</p>
<p>For extended code example that utilizes this, check over <a class="reference internal" href="cli/index.html#k1lib.cli.modifier.op" title="k1lib.cli.modifier.op"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.cli.modifier.op</span></code></a>
source code.</p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initDict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.__init__" title="Link to this definition"></a></dt>
<dd><p>Creates a new Absorber.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>initDict</strong> – initial variables to set, as setattr operation is normally absorbed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_solidify">
<span class="sig-name descname"><span class="pre">ab_solidify</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_solidify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_solidify" title="Link to this definition"></a></dt>
<dd><p>Use this to not absorb <code class="docutils literal notranslate"><span class="pre">__call__</span></code> operations anymore and makes it
feel like a regular function (still absorbs other operations though):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">op</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span>
<span class="mi">3</span> <span class="o">|</span> <span class="n">f</span> <span class="c1"># returns 9, but may be you don&#39;t want to pipe it in</span>
<span class="n">f</span><span class="o">.</span><span class="n">op_solidify</span><span class="p">()</span>
<span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># returns 9</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_operate">
<span class="sig-name descname"><span class="pre">ab_operate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_operate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_operate" title="Link to this definition"></a></dt>
<dd><p>Special method to actually operate on an object and get the result. Not
absorbed. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 6</span>
<span class="p">(</span><span class="n">op</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">ab_operate</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_fastFS">
<span class="sig-name descname"><span class="pre">ab_fastFS</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_fastFS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_fastFS" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_fastF">
<span class="sig-name descname"><span class="pre">ab_fastF</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_fastF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_fastF" title="Link to this definition"></a></dt>
<dd><p>Returns a function that operates on the input (just like <a class="reference internal" href="#k1lib.Absorber.ab_operate" title="k1lib.Absorber.ab_operate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ab_operate()</span></code></a>),
but much faster, suitable for high performance tasks. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">k1lib</span><span class="o">.</span><span class="n">Absorber</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">ab_fastF</span><span class="p">()</span>
<span class="c1"># returns 6</span>
<span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.__ror__" title="Link to this definition"></a></dt>
<dd><p>Return value|self.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.__invert__">
<span class="sig-name descname"><span class="pre">__invert__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.__invert__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.__invert__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_int">
<span class="sig-name descname"><span class="pre">ab_int</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_int"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_int" title="Link to this definition"></a></dt>
<dd><p>Replacement for <code class="docutils literal notranslate"><span class="pre">int(ab)</span></code>, as that requires returning an actual <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_float">
<span class="sig-name descname"><span class="pre">ab_float</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_float"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_float" title="Link to this definition"></a></dt>
<dd><p>Replacement for <code class="docutils literal notranslate"><span class="pre">float(ab)</span></code>, as that requires returning an actual <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_str">
<span class="sig-name descname"><span class="pre">ab_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_str" title="Link to this definition"></a></dt>
<dd><p>Replacement for <code class="docutils literal notranslate"><span class="pre">str(ab)</span></code>, as that requires returning an actual <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_len">
<span class="sig-name descname"><span class="pre">ab_len</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_len"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_len" title="Link to this definition"></a></dt>
<dd><p>Replacement for <code class="docutils literal notranslate"><span class="pre">len(ab)</span></code>, as that requires returning an actual <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Absorber.ab_contains">
<span class="sig-name descname"><span class="pre">ab_contains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Absorber.ab_contains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Absorber.ab_contains" title="Link to this definition"></a></dt>
<dd><p>Replacement for <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">in</span> <span class="pre">ab</span></code>, as that requires returning an actual <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Settings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Settings" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Settings.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Settings.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Settings.__init__" title="Link to this definition"></a></dt>
<dd><p>Creates a new settings object. Basically fancy version of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Settings</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s2">&quot;42&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Settings</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">a</span> <span class="c1"># returns 3</span>
<span class="n">s</span><span class="o">.</span><span class="n">b</span> <span class="c1"># returns &quot;42&quot;</span>
<span class="n">s</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">d</span> <span class="c1"># returns 8</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c1"># prints nested settings nicely</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Settings.context">
<span class="sig-name descname"><span class="pre">context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Settings.context"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Settings.context" title="Link to this definition"></a></dt>
<dd><p>Context manager to temporarily modify some settings. Applies
to all sub-settings. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Settings</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s2">&quot;42&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">k1lib</span><span class="o">.</span><span class="n">Settings</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">8</span><span class="p">))</span>
<span class="k">with</span> <span class="n">s</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">s</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">s</span><span class="o">.</span><span class="n">a</span> <span class="c1"># returns 4</span>
    <span class="n">s</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">d</span> <span class="c1"># returns 20</span>
<span class="n">s</span><span class="o">.</span><span class="n">a</span> <span class="c1"># returns 3</span>
<span class="n">s</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">d</span> <span class="c1"># returns 8</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Settings.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#k1lib.Settings" title="k1lib._baseClasses.Settings"><span class="pre">Settings</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensitive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#k1lib.Settings" title="k1lib._baseClasses.Settings"><span class="pre">Settings</span></a></span></span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Settings.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Settings.add" title="Link to this definition"></a></dt>
<dd><p>Long way to add a variable. Advantage of this is that you can slip in extra
documentation for the variable. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Settings</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;some docs&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="c1"># displays the extra docs</span>
</pre></div>
</div>
<p>You can also specify that a variable should load from the environment variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Settings</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;/this/path/will:/be/overridden&quot;</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="s2">&quot;PATH&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">a</span> <span class="c1"># will returns a string that might look like &quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games&quot;</span>
</pre></div>
</div>
<p>You can specify a transform function if you want to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">Settings</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;/this/path/will&quot;</span><span class="p">,</span> <span class="s2">&quot;/be/overridden&quot;</span><span class="p">],</span> <span class="n">env</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;PATH&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)))</span>
<span class="n">s</span><span class="o">.</span><span class="n">a</span> <span class="c1"># returns a list that might look like [&#39;/usr/local/sbin&#39;, &#39;/usr/local/bin&#39;, &#39;/usr/sbin&#39;, &#39;/usr/bin&#39;, &#39;/sbin&#39;, &#39;/bin&#39;, &#39;/usr/games&#39;, &#39;/usr/local/games&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> – callback that takes in (settings, new value) if any property changes</p></li>
<li><p><strong>sensitive</strong> – if True, won’t display the value when displaying the whole Settings object</p></li>
<li><p><strong>env</strong> – if specified, will try to load up the value from environment variables if it’s available</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.UValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">UValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.__init__" title="Link to this definition"></a></dt>
<dd><p>Creates a new “uncertain value”, which has a mean and a standard
deviation. You can then do math operations on them as normal, and the
propagation errors will be automatically calculated for you. Make sure to
run the calculation multiple times as the mean and std values fluctuates by
a little run-by-run. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns UValue(mean=4.7117, std=3.4736) object</span>
<span class="nb">abs</span><span class="p">(</span><span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">()</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also instantiate from an existing list/numpy array/pytorch tensor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns UValue(mean=24.5, std=14.431) object</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="o">.</span><span class="n">fromSeries</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</pre></div>
</div>
<p>You can also do arbitrary complex math operations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns UValue(mean=0.5544, std=0.4871)</span>
<span class="p">(</span><span class="mi">20</span> <span class="o">+</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">())</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">)</span>
<span class="c1"># same as above, but takes longer to run!</span>
<span class="p">(</span><span class="mi">20</span> <span class="o">+</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">())</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">)</span>
</pre></div>
</div>
<p>I suggest you to make your arbitrary function out of numpy’s operations,
as those are a fair bit faster than regular Python.</p>
<p>If you have a list of <a class="reference internal" href="#k1lib.UValue" title="k1lib.UValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">UValue</span></code></a>, and want to plot them with error
bars, then you can do something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">)</span> <span class="o">|</span> <span class="n">toList</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">y</span> <span class="o">|</span> <span class="n">transpose</span><span class="p">()));</span>
</pre></div>
</div>
<p>There are several caveats however:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>First is the problem of theoretically vs actually sample a
distribution. Let’s see an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns theoretical value UValue(mean=8000.0, std=1200.0) -&gt; 8000.0 ± 1200.0</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">**</span> <span class="mi">3</span>
<span class="c1"># prints out actual mean and std value of (8064.1030, 1204.3529)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span> <span class="o">**</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">a</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
</pre></div>
</div>
<p>So far so good. However, let’s create some uncertainty in “3”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns theoretical value UValue(mean=8000.0, std=23996.0) -&gt; 10000.0 ± 20000.0</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">**</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># prints out actual mean and std value of (815302.8750, 27068828.), but is very unstable and changes a lot</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span> <span class="o">**</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">a</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
</pre></div>
</div>
<p>Woah, what happens here? The actual mean and std values are
completely different from the theoretical values. This is
mainly due to UValue(3) has some outlier values large enough
to boost the result up multiple times. Even removing 1% of
values on either end of the spectrum does not quite work. So,
becareful to interpret these uncertainty values, and in some
case the theoretical estimates from math are actually very
unstable and will not be observed in real life.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Then there’s the problem of each complex operation, say <code class="docutils literal notranslate"><span class="pre">(v*2+3)/5</span></code>
will be done step by step, meaning <code class="docutils literal notranslate"><span class="pre">a=v*2</span></code> mean and std will be
calculated first, then ignoring the calculated sample values and just
go with the mean and std, sample a bunch of values from there and calculate
<code class="docutils literal notranslate"><span class="pre">a+3</span></code> mean and std. Rinse and repeat. This means that these 2 statements
may differ by a lot:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># prints out (0.15867302766786406, 0.12413313456900205)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span> <span class="n">sq</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">sq</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">sq</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>

<span class="c1"># returns UValue(mean=0.081577, std=0.32757) -&gt; 0.1 ± 0.3</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="n">sq</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">sq</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="n">sq</span><span class="p">)</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">)</span>
</pre></div>
</div>
<p>Why this weird function? It converts from a single nice hump into multiple
complex humps. Anyway, this serves to demonstrate that the result from the
<code class="docutils literal notranslate"><span class="pre">calculate</span> <span class="pre">-&gt;</span> <span class="pre">get</span> <span class="pre">mean,</span> <span class="pre">std</span> <span class="pre">-&gt;</span> <span class="pre">sample</span> <span class="pre">from</span> <span class="pre">new</span> <span class="pre">distribution</span> <span class="pre">-&gt;</span> <span class="pre">calculate</span></code>
process might be different from just calculating from start to end and then
get the mean and std.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lastly, you might have problems when using the same UValue multiple times in
an expression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">UValue</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">a</span> <span class="o">*</span> <span class="mi">2</span> <span class="c1"># has mean 20, std 2</span>
<span class="n">a</span> <span class="o">+</span> <span class="n">a</span> <span class="c1"># has mean 20, std 1.4</span>
</pre></div>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>N</strong> – how many data points in this sample</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.sample">
<span class="sig-name descname"><span class="pre">sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.sample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.sample" title="Link to this definition"></a></dt>
<dd><p>Gets a sample <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> representative of this
uncertain value. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns tensor([-5.1095,  3.3117, -2.5759,  ..., -2.5810, -1.8131,  1.8339])</span>
<span class="p">(</span><span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">()</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.fromSeries">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromSeries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddof</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.fromSeries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.fromSeries" title="Link to this definition"></a></dt>
<dd><p>Creates a <a class="reference internal" href="#k1lib.UValue" title="k1lib.UValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">UValue</span></code></a> from a bunch of numbers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> – can be a list of numbers, numpy array or PyTorch tensor</p></li>
<li><p><strong>unbiased</strong> – if True, Bessel’s correction will be used</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.fromBounds">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromBounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.fromBounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.fromBounds" title="Link to this definition"></a></dt>
<dd><p>Creates a <a class="reference internal" href="#k1lib.UValue" title="k1lib.UValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">UValue</span></code></a> from min and max values.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns UValue(mean=2.5, std=0.5)</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="o">.</span><span class="n">fromBounds</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="k1lib.UValue.exact">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exact</span></span><a class="headerlink" href="#k1lib.UValue.exact" title="Link to this definition"></a></dt>
<dd><p>Whether this UValue is exact or not</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.test">
<span class="sig-name descname"><span class="pre">test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.test" title="Link to this definition"></a></dt>
<dd><p>Returns how many sigma a particular value is.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.f">
<span class="sig-name descname"><span class="pre">f</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.f"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.f" title="Link to this definition"></a></dt>
<dd><p>Covered in <a class="reference internal" href="#k1lib.UValue.__init__" title="k1lib.UValue.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code></a> docs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.bounds">
<span class="sig-name descname"><span class="pre">bounds</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.bounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.bounds" title="Link to this definition"></a></dt>
<dd><p>Returns (mean-std, mean+std)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.combine">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">combine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.combine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.combine" title="Link to this definition"></a></dt>
<dd><p>Combines multiple UValues into 1.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># both returns 6.0 ± 1.4</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">|</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">UValue</span><span class="o">.</span><span class="n">combine</span><span class="p">()</span>
</pre></div>
</div>
<p>This will sample each UValue by default 1000 times, put them into a
single series and get a UValue from that. Why not just take the
average instead? Because the standard deviation will be less, and
will not actually reflect the action of combining UValues together:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns 6.0 ± 0.7, which is narrower than expected</span>
<span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.UValue.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#UValue.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.UValue.plot" title="Link to this definition"></a></dt>
<dd><p>Quickly plots a histogram of the distribution.
Possible to plot multiple histograms in 1 plot.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.ConstantPad">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">ConstantPad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#ConstantPad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ConstantPad" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.ConstantPad.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#ConstantPad.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ConstantPad.__init__" title="Link to this definition"></a></dt>
<dd><p>Adds constant amount of padding to strings.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">ConstantPad</span><span class="p">()</span>
<span class="n">p</span><span class="p">(</span><span class="s2">&quot;123&quot;</span><span class="p">)</span>    <span class="c1"># returns &quot;123&quot;</span>
<span class="n">p</span><span class="p">(</span><span class="s2">&quot;23&quot;</span><span class="p">)</span>     <span class="c1"># returns &quot; 23&quot;</span>
<span class="s2">&quot;12345&quot;</span> <span class="o">|</span> <span class="n">p</span> <span class="c1"># returns &quot;12345&quot;, can pipe it in too, but is not strictly a cli tool</span>
<span class="n">p</span><span class="p">(</span><span class="s2">&quot;123&quot;</span><span class="p">)</span>    <span class="c1"># returns &quot;  123&quot;</span>
</pre></div>
</div>
<p>Basically, this is useful in situations when you’re printing a table or status bar and
needs relatively constant width but you don’t know what’s the desired width at the start.</p>
<p>As you normally use a bunch of these in groups, there’s a convenience function for
that too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">ConstantPad</span><span class="o">.</span><span class="n">multi</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>left</strong> – whether to align left or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.ConstantPad.__ror__">
<span class="sig-name descname"><span class="pre">__ror__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#ConstantPad.__ror__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ConstantPad.__ror__" title="Link to this definition"></a></dt>
<dd><p>Return value|self.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.ConstantPad.multi">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#ConstantPad.multi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ConstantPad.multi" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.AutoUpdateValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">AutoUpdateValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">genF</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">every</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#AutoUpdateValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.AutoUpdateValue" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.AutoUpdateValue.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">genF</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">every</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#AutoUpdateValue.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.AutoUpdateValue.__init__" title="Link to this definition"></a></dt>
<dd><p>Value that is auto updated every specified number of seconds.
This is to perform periodic calculations that are heavy, but packaged in a
nice and clean format. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">AutoUpdateValue</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">v</span><span class="o">.</span><span class="n">value</span>                      <span class="c1"># returns 3</span>

<span class="k">def</span> <span class="nf">trouble</span><span class="p">():</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Something went wrong&quot;</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">AutoUpdateValue</span><span class="p">(</span><span class="n">trouble</span><span class="p">)</span>
<span class="n">v</span><span class="o">.</span><span class="n">exc</span>                        <span class="c1"># returns &quot;&lt;class &#39;Exception&#39;&gt;\ue004Something went wrong&quot;</span>
<span class="n">v</span><span class="o">.</span><span class="n">tb</span>                         <span class="c1"># returns traceback as string</span>
</pre></div>
</div>
<p>See also: <code class="xref py py-class docutils literal notranslate"><span class="pre">k1.preload</span></code>. It’s a similar concept, but slightly different</p>
<p>Honestly this is kind of niche, as I’d normally use <code class="xref py py-class docutils literal notranslate"><span class="pre">k1.cron</span></code> instead, as it has a nice management plane in flask</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>genF</strong> – function to generate the value</p></li>
<li><p><strong>every</strong> – refresh period</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.AutoUpdateValue.calc">
<span class="sig-name descname"><span class="pre">calc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#AutoUpdateValue.calc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.AutoUpdateValue.calc" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Aggregate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Aggregate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">processF</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refreshPeriod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Aggregate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Aggregate" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Aggregate.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">processF</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refreshPeriod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Aggregate.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Aggregate.__init__" title="Link to this definition"></a></dt>
<dd><p>Aggregates a bunch of data together, then after a predetermined
period of time runs a processing function taking in all the saved data. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sums</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">processF</span><span class="p">(</span><span class="n">xs</span><span class="p">):</span> <span class="n">sums</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Aggregate</span><span class="p">(</span><span class="n">processF</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span> <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">);</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">sums</span>                <span class="c1"># returns [3, 12, 21]</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="n">sums</span> <span class="c1"># returns [3, 12, 21, 9]</span>
</pre></div>
</div>
<p>This is useful to batch together requests and send them to other places in one go.
You can also reject some elements if they’re not ready to be processed and it will
be placed right back in the queue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">processed</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">processF</span><span class="p">(</span><span class="n">xs</span><span class="p">):</span> <span class="n">processed</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">xs</span><span class="p">[</span><span class="mi">3</span><span class="p">:]);</span> <span class="k">return</span> <span class="n">xs</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Aggregate</span><span class="p">(</span><span class="n">processF</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span> <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">);</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">processed</span>                <span class="c1"># returns [3, 4, 5, 6, 7, 8]</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="n">processed</span> <span class="c1"># returns [3, 4, 5, 6, 7, 8, 9]</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.TimeSeries" title="k1lib.TimeSeries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TimeSeries()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Aggregate.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Aggregate.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Aggregate.append" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.Perlin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">Perlin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Perlin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Perlin" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.Perlin.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_baseClasses.html#Perlin.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.Perlin.__init__" title="Link to this definition"></a></dt>
<dd><p>Generates random-looking noise that might look like it
came from sensor data. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">k1</span><span class="o">.</span><span class="n">Perlin</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span> <span class="o">|</span> <span class="n">head</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span> <span class="o">|</span> <span class="n">aS</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span> <span class="c1"># generates list[float] of length 1000 and plots it out</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">Perlin</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">);</span> <span class="p">[</span><span class="n">a</span><span class="p">(),</span> <span class="n">a</span><span class="p">(),</span> <span class="n">a</span><span class="p">()]</span>                  <span class="c1"># samples it sequentially, returns list[float]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cron">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">cron</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">daemon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delayedStart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#cron"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cron" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="k1lib.cron.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'_k1.cron.stopSignal'</span></em><a class="headerlink" href="#k1lib.cron.stop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cron.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">daemon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delayedStart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#cron.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cron.__init__" title="Link to this definition"></a></dt>
<dd><p>Sets up a cron job in another thread, running the decorated
function in 2 modes:</p>
<p>Mode 1: whenever <code class="docutils literal notranslate"><span class="pre">f</span></code> goes from False to True. It’s activated when <code class="docutils literal notranslate"><span class="pre">delay</span></code> is not specified. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@k1</span><span class="o">.</span><span class="n">cron</span><span class="p">(</span><span class="k">lambda</span> <span class="n">minute</span><span class="p">:</span> <span class="n">minute</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">():</span> <span class="c1"># runs every hour</span>
    <span class="o">...</span> <span class="c1"># do some stuff</span>

<span class="nd">@k1</span><span class="o">.</span><span class="n">cron</span><span class="p">(</span><span class="k">lambda</span> <span class="n">second</span><span class="p">:</span> <span class="n">second</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f2</span><span class="p">():</span> <span class="c1"># runs every 5 seconds</span>
    <span class="o">...</span> <span class="c1"># do some stuff</span>
</pre></div>
</div>
<p>So, the first function will run every hour, and the second function will
run every 5 seconds. Pretty straightforward. The timing function <code class="docutils literal notranslate"><span class="pre">f</span></code> can
be as complicated as you want, but it can only accept the following parameters:</p>
<ul class="simple">
<li><p>year</p></li>
<li><p>month: 1-12</p></li>
<li><p>day: 1-31</p></li>
<li><p>weekday: 0-6, 0 for Monday</p></li>
<li><p>hour: 0-23</p></li>
<li><p>minute: 0-59</p></li>
<li><p>second: 0-59</p></li>
</ul>
<p>Mode 2: every <code class="docutils literal notranslate"><span class="pre">delay</span></code> seconds. It’s activated when <code class="docutils literal notranslate"><span class="pre">delay</span></code> is specified. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@k1</span><span class="o">.</span><span class="n">cron</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">():</span> <span class="c1"># runs every 10 seconds</span>
    <span class="o">...</span> <span class="c1"># do some stuff</span>
</pre></div>
</div>
<p>Theres a special sentinel <code class="docutils literal notranslate"><span class="pre">k1.cron.stop</span></code> that when returns, it terminates the cron
loop, for both modes. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@k1</span><span class="o">.</span><span class="n">cron</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">():</span> <span class="c1"># only prints out &quot;abc&quot; once</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">k1</span><span class="o">.</span><span class="n">cron</span><span class="o">.</span><span class="n">stop</span>
</pre></div>
</div>
<p>You can also get a python object describing past runs, stdout and errors by doing <code class="docutils literal notranslate"><span class="pre">k1.cron.allData</span></code></p>
<p>You can also quickly deploy a management plane to manage all cron jobs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">k1</span><span class="o">.</span><span class="n">cron</span><span class="o">.</span><span class="n">flask</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>See more about this at <a class="reference internal" href="#k1lib.cron.flask" title="k1lib.cron.flask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flask()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – function to trigger wrapped function when this transitions from False to True</p></li>
<li><p><strong>delay</strong> – if specified, just run the function repeatedly, delayed by this amount after running. Mutually exclusive with .f</p></li>
<li><p><strong>kw</strong> – extra keyword arguments to pass to the function</p></li>
<li><p><strong>name</strong> – optional name to show up in <a class="reference internal" href="#k1lib.cron.allData" title="k1lib.cron.allData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">allData()</span></code></a></p></li>
<li><p><strong>docs</strong> – optional documentation to show up in <a class="reference internal" href="#k1lib.cron.allData" title="k1lib.cron.allData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">allData()</span></code></a></p></li>
<li><p><strong>daemon</strong> – if True, makes the cron thread daemon</p></li>
<li><p><strong>delayedStart</strong> – if specified, delay the start of the first function execution to after this number of seconds</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cron.allData">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">allData</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#cron.allData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cron.allData" title="Link to this definition"></a></dt>
<dd><p>Grabs <code class="docutils literal notranslate"><span class="pre">Dict[name</span> <span class="pre">-&gt;</span> <span class="pre">{docs,</span> <span class="pre">delay,</span> <span class="pre">logs}]</span></code> for all delay crons</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cron.flask">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#cron.flask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cron.flask" title="Link to this definition"></a></dt>
<dd><p>Attaches a cron management plane to a flask app.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">k1</span><span class="o">.</span><span class="n">cron</span><span class="o">.</span><span class="n">flask</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, you can access the route “/k1/cron” to see an overview of all cron jobs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – flask app object</p></li>
<li><p><strong>kwargs</strong> – extra random kwargs that you want to add to <code class="docutils literal notranslate"><span class="pre">app.route()</span></code> function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.cache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cache" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cache.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#cache.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cache.__init__" title="Link to this definition"></a></dt>
<dd><p>Like functools.lru_cache, but with timeout period.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@k1</span><span class="o">.</span><span class="n">cache</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">slow_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>
</pre></div>
</div>
<p>You can also quickly deploy a management plane to manage all caches:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">k1</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">flask</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>See more about this at <a class="reference internal" href="#k1lib.cache.flask" title="k1lib.cache.flask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flask()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maxsize</strong> – max size of the cache</p></li>
<li><p><strong>timeout</strong> – timeout in seconds</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cache.allData">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">allData</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#cache.allData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cache.allData" title="Link to this definition"></a></dt>
<dd><p>Grabs <code class="docutils literal notranslate"><span class="pre">Dict[name</span> <span class="pre">-&gt;</span> <span class="pre">{docs,</span> <span class="pre">func,</span> <span class="pre">clearF}]</span></code> of all caches</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.cache.flask">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#cache.flask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.cache.flask" title="Link to this definition"></a></dt>
<dd><p>Attaches a cache management plane to a flask app.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">k1</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">flask</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, you can access the route “/k1/cache” to see an overview of all caches</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – flask app object</p></li>
<li><p><strong>kwargs</strong> – extra random kwargs that you want to add to <code class="docutils literal notranslate"><span class="pre">app.route()</span></code> function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.preload">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">preload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refreshTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inactiveTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#preload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.preload" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.preload.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refreshTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inactiveTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#preload.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.preload.__init__" title="Link to this definition"></a></dt>
<dd><p>Wraps a function and pre executes that function every once in a
while if the function is being used. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@k1</span><span class="o">.</span><span class="n">preload</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">slow_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">);</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>

<span class="n">slow_func</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>                 <span class="c1"># takes 100ms</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>  <span class="n">slow_func</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># takes 2us</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>  <span class="n">slow_func</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># takes 2us</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>  <span class="n">slow_func</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># takes 2us</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>  <span class="n">slow_func</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># takes 2us</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span> <span class="n">slow_func</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># takes 100ms</span>
</pre></div>
</div>
<p>Normally, you don’t have to use this, use <a class="reference internal" href="#k1lib.cache" title="k1lib.cache"><code class="xref py py-class docutils literal notranslate"><span class="pre">cache</span></code></a> instead. This is
for those scenarios where you can’t afford to have any delays, as <a class="reference internal" href="#k1lib.cache" title="k1lib.cache"><code class="xref py py-class docutils literal notranslate"><span class="pre">cache</span></code></a>
will sometime take quite a while to run, but most of the time it runs fast.</p>
<p>With this decorator, if you use the function frequent enough (less than <code class="docutils literal notranslate"><span class="pre">inactiveTime</span></code>),
then you will never experience any kind of delays, no matter how infrequent. This is good
for generating plots that don’t change for a long time, but requires fast server response
all the time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>refreshTime</strong> – how often to refresh the internal cache to make content fresh?</p></li>
<li><p><strong>inactiveTime</strong> – how long before a function’s argument considered inactive and will stop refreshing automatically</p></li>
<li><p><strong>maxsize</strong> – maximum size of the internal cache. See also <a class="reference internal" href="#k1lib.cache" title="k1lib.cache"><code class="xref py py-class docutils literal notranslate"><span class="pre">cache</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.TimeSeries">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">TimeSeries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storeRaw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retention</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">604800</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coldStore</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storeRaw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retention</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">604800</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coldStore</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.__init__" title="Link to this definition"></a></dt>
<dd><p>Manages time series data, compresses them, back them up on disk if necessary.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ts1</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">TimeSeries</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ts1&quot;</span><span class="p">)</span>
<span class="n">ts1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># do this anywhere you&#39;d like. This saves 1 data point containing 3 floats to the sqlite database</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">600</span><span class="p">):</span> <span class="c1"># deposits 600 samples over 1 minute time span</span>
    <span class="n">ts1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

<span class="n">ts1</span><span class="o">.</span><span class="n">getRaw</span><span class="p">()</span>  <span class="c1"># returns something like [[1737213223.4139452, (3, 4, 5)], ...]</span>
<span class="n">ts1</span><span class="o">.</span><span class="n">getRate</span><span class="p">()</span> <span class="c1"># returns something like [(1737213313.0752494, 10.066128035852211), ...]</span>
<span class="n">ts1</span><span class="o">.</span><span class="n">getPert</span><span class="p">()</span> <span class="c1"># returns something like [[1737213568.9260075, [(0.009, 0.07, 0.47, 0.89, 0.99), (0.001, 0.11, 0.56, 0.90, 0.99), (0.0006, 0.08, 0.46, 0.89, 0.99)]], ...]</span>
</pre></div>
</div>
<p>For <a class="reference internal" href="#k1lib.TimeSeries.getRate" title="k1lib.TimeSeries.getRate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getRate()</span></code></a>, first number is the timestamp, second is the number of data points/second.
For <a class="reference internal" href="#k1lib.TimeSeries.getPert" title="k1lib.TimeSeries.getPert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getPert()</span></code></a>, this will return the percentiles of the input data (0%, 10%, 50%, 90%, 100%) for each variable</p>
<p>Why does this functionality exists? Well, it’s because managing time series usually involves
a lot of pain. You need to setup a time series database like Prometheus, or Postgresql to be
extra simple. But setting up all that infrastructure takes a lot of effort, and again, if it’s
hard, you won’t do it, or will be incentivised not to do it. So this class is meant to be an
object that manages time series data. It manages it in such a way so that you can spam this
all over the place and get lots of functionalities right out of the box, without an external
server. All data is stored in several tables inside a sqlite file. Each time series gets its
own sqlite file. Some performance numbers to keep in mind:</p>
<ul class="simple">
<li><p>Data write speed: 100k data points/s</p></li>
<li><p>Data read speed:  400k data points/s</p></li>
<li><p>Disk space used: 50 bytes/data point for small amounts of variables (say ~3)</p></li>
</ul>
<p>Other features include the ability to auto delete old data so as not to accumulate over time.
When old data is deleted, there’s also an option to save the deleted data in a separate file
for cold storage, so that it’s more efficient storage-wise than sqlite, but harder to access.
Cold storage space used: 14 + nVars * 4. This is 5x smaller than sqlite for 3 variables</p>
<p>There will be scans every 10 seconds on another thread, that compresses the raw data into a
usable form. If there’s too few data points (&lt;20 data points), then it will skip that scan
cycle. Data (refined and raw) will be saved into a sqlite database, stored at the specified
file name <code class="docutils literal notranslate"><span class="pre">fn</span></code>. If no file name is specified, then this will create a temp file and turn
that into a sqlite database.</p>
<p>For every method, you can also specify an index number:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ts1</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">TimeSeries</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ts1&quot;</span><span class="p">)</span>
<span class="n">ts1</span><span class="o">.</span><span class="n">appendIdx</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># index 2 with 3 values (3, 4, 5)</span>

<span class="n">ts1</span><span class="o">.</span><span class="n">getRaw</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># returns all data points with idx=2, something like [[1737213223.4139452, (3, 4, 5)], ...]</span>
<span class="n">ts1</span><span class="o">.</span><span class="n">getPert</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># returns all percentiles with idx=2, something like [[1737213568.9260075, [(0.009, 0.07, 0.47, 0.89, 0.99), (0.001, 0.11, 0.56, 0.90, 0.99), (0.0006, 0.08, 0.46, 0.89, 0.99)]], ...]</span>
</pre></div>
</div>
<p>This is useful in situations like when you have lots of sensors for different devices. Then
each idx can be the device id, and so you can store lots of variables in 1 go for 1 specific
device. Then you can query the time series later on for 1 specific device only.</p>
<p>You can get all TimeSeries via <a class="reference internal" href="#k1lib.TimeSeries.allData" title="k1lib.TimeSeries.allData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">allData()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Performance details</p>
<p>This is a more detailed section going over what actually happens underneath in case you
care about performance. Everything is stored in sqlite. If file name is not given, then
it still uses sqlite, but in memory instead.</p>
<p>When a new .append() happens, no database interaction happens at all. It’s simply just
appended to a totally normal, internal list, so &lt;1us. Then there are 2 background
threads to help collate and store the data. One is fast (10s scan) and one is slow
(60s scan). The fast one distributes new data points to 3 internal stacks, “rawRaw”,
“rateRaw” and “pertD”. If rawRaw has any elements, it will be stored in sqlite. If
rateRaw has at least 10 elements, it will calculate the rate and store in sqlite. If
pertD (indexed by idx) has at least 100 elements, it will calculate percentiles and
store in sqlite.</p>
<p>This architecture has several ramifications:</p>
<ul class="simple">
<li><p>Time taken to execute .append() is very fast</p></li>
<li><p>If no .append() are called for a long time, no sqlite queries will be executed</p></li>
<li><p>If too little .append() are called, data might not show up in rate and percentile views at all</p></li>
<li><p>Might have to wait for at least 10 seconds before .getRaw() has the newest data</p></li>
<li><p>If python process exited, there may still be data stored in memory that’s not recorded on sqlite yet</p></li>
</ul>
<p>For the second loop, it grabs all rows from sqlite that was longer than <code class="docutils literal notranslate"><span class="pre">retention</span></code>
seconds ago, compresses them to an efficient binary format, then appends to the cold
storage file. My code is not as bulletproof as sqlite, but still works fine. Because
the loop is very slow, it shouldn’t affect performance much.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – just for cosmetic, to remind you what this does</p></li>
<li><p><strong>fn</strong> – sqlite file name to store this time series data. If not specified, then stores database in memory</p></li>
<li><p><strong>storeRaw</strong> – whether to store raw data points</p></li>
<li><p><strong>retention</strong> – seconds before deleting old data point permanently, default 1 week</p></li>
<li><p><strong>coldStore</strong> – if True, when data points past retention time, it will be
packed into a single binary file for cold storage</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.allData">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">allData</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.allData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.allData" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.allIData">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">allIData</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.allIData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.allIData" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.idxs">
<span class="sig-name descname"><span class="pre">idxs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.idxs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.idxs" title="Link to this definition"></a></dt>
<dd><p>Grabs all available idxs</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.append" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.appendIdx">
<span class="sig-name descname"><span class="pre">appendIdx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.appendIdx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.appendIdx" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.getRaw">
<span class="sig-name descname"><span class="pre">getRaw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">startTime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopTime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.getRaw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.getRaw" title="Link to this definition"></a></dt>
<dd><p>Grabs raw data of this time series. Returns something like <code class="docutils literal notranslate"><span class="pre">[[1737213223.4139452,</span> <span class="pre">(3,</span> <span class="pre">4,</span> <span class="pre">5)],</span> <span class="pre">...]</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.getRate">
<span class="sig-name descname"><span class="pre">getRate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">startTime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopTime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.getRate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.getRate" title="Link to this definition"></a></dt>
<dd><p>Grabs data ingest rate of this time series. Returns something like <code class="docutils literal notranslate"><span class="pre">[(1737213313.0752494,</span> <span class="pre">10.066128035852211),</span> <span class="pre">...]</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.getPert">
<span class="sig-name descname"><span class="pre">getPert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">startTime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopTime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.getPert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.getPert" title="Link to this definition"></a></dt>
<dd><p>Grabs data percentiles of this time series. Returns something like <code class="docutils literal notranslate"><span class="pre">[[1737213568.9260075,</span> <span class="pre">[(0.009,</span> <span class="pre">0.07,</span> <span class="pre">0.47,</span> <span class="pre">0.89,</span> <span class="pre">0.99),</span> <span class="pre">(0.001,</span> <span class="pre">0.11,</span> <span class="pre">0.56,</span> <span class="pre">0.90,</span> <span class="pre">0.99),</span> <span class="pre">(0.0006,</span> <span class="pre">0.08,</span> <span class="pre">0.46,</span> <span class="pre">0.89,</span> <span class="pre">0.99)]],</span> <span class="pre">...]</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.plotRaw">
<span class="sig-name descname"><span class="pre">plotRaw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">startTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dIdx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.plotRaw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.plotRaw" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.splotRaw">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">splotRaw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dIdx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.splotRaw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.splotRaw" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.plotRate">
<span class="sig-name descname"><span class="pre">plotRate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">startTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.plotRate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.plotRate" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.splotRate">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">splotRate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.splotRate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.splotRate" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.plotPert">
<span class="sig-name descname"><span class="pre">plotPert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">startTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dIdx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.plotPert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.plotPert" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.splotPert">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">splotPert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopTime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dIdx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.splotPert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.splotPert" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.flask">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.flask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.flask" title="Link to this definition"></a></dt>
<dd><p>Attaches a TimeSeries management plane to a flask app.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">k1</span><span class="o">.</span><span class="n">TimeSeries</span><span class="o">.</span><span class="n">flask</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, you can access the route “/k1/ts” to see an overview of all TimeSeries</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – flask app object</p></li>
<li><p><strong>kwargs</strong> – extra random kwargs that you want to add to <code class="docutils literal notranslate"><span class="pre">app.route()</span></code> function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.TimeSeries.dummyLoad">
<span class="sig-name descname"><span class="pre">dummyLoad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">niter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#TimeSeries.dummyLoad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.TimeSeries.dummyLoad" title="Link to this definition"></a></dt>
<dd><p>Simulates a dummy load on this time series. Read source of
this method to understand what it does.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>niter</strong> – number of iterations</p></li>
<li><p><strong>frac</strong> – fraction of new random numbers and extra time to wait. 0 for more deterministic, 1 for more chaotic</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.speed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">speed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coldStore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#speed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.speed" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="cli/index.html#k1lib.cli.init.BaseCli" title="k1lib.cli.init.BaseCli"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCli</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.speed.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coldStore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#speed.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.speed.__init__" title="Link to this definition"></a></dt>
<dd><p>Tracks and benchmarks certain functions, and monitor them through time
with reports in order to deploy them absolutely everywhere. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@k1</span><span class="o">.</span><span class="n">speed</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;some func description&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="mi">3</span>
</pre></div>
</div>
<p>You can get a list of all speed k1.TimeSeries objects via <code class="docutils literal notranslate"><span class="pre">k1.TimeSeries.allData</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – optional name to show up in <a class="reference internal" href="#k1lib.speed.allData" title="k1lib.speed.allData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">allData()</span></code></a></p></li>
<li><p><strong>fn</strong> – file name. If specified, will store speed data in sqlite database
at this path, else store in memory</p></li>
<li><p><strong>docs</strong> – optional docs to show up in <a class="reference internal" href="#k1lib.speed.allData" title="k1lib.speed.allData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">allData()</span></code></a></p></li>
<li><p><strong>coldStore</strong> – if True, stores old speed data in condensed binary file. See more at <a class="reference internal" href="#k1lib.TimeSeries" title="k1lib.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.speed.allData">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">allData</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#speed.allData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.speed.allData" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="k1lib.speed.flask">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">flask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#speed.flask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.speed.flask" title="Link to this definition"></a></dt>
<dd><p>Attaches a speed management plane to a flask app.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">k1</span><span class="o">.</span><span class="n">speed</span><span class="o">.</span><span class="n">flask</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, you can access the route “/k1/speed” to see an overview of all speed
benchmarks. However, doing <code class="docutils literal notranslate"><span class="pre">k1.TimeSeries.flask(app)</span></code> and access at “/k1/ts”
would be more beneficial, as that contains all the graphs and data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – flask app object</p></li>
<li><p><strong>kwargs</strong> – extra random kwargs that you want to add to <code class="docutils literal notranslate"><span class="pre">app.route()</span></code> function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.wrapMod">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">wrapMod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moduleName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#wrapMod"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.wrapMod" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="k1lib.wrapMod.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moduleName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#wrapMod.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.wrapMod.__init__" title="Link to this definition"></a></dt>
<dd><p>Wraps around a module, and only suggest symbols in __all__ list
defined inside the module. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">randomModule</span>
<span class="n">randomModule</span> <span class="o">=</span> <span class="n">wrapMod</span><span class="p">(</span><span class="n">randomModule</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>m</strong> – the imported module</p></li>
<li><p><strong>moduleName</strong> – optional new module name for elements (their __module__ attr)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="context-managers">
<h2>Context managers<a class="headerlink" href="#context-managers" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#k1lib.captureStdout" title="k1lib.captureStdout"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.captureStdout</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.capturePlt" title="k1lib.capturePlt"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.capturePlt</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.ignoreWarnings" title="k1lib.ignoreWarnings"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.ignoreWarnings</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.timer" title="k1lib.timer"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.timer</span></code></a></p></li>
<li><p><a class="reference internal" href="#k1lib.attrContext" title="k1lib.attrContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">k1lib.attrContext</span></code></a></p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="k1lib.captureStdout">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">captureStdout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_context.html#captureStdout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.captureStdout" title="Link to this definition"></a></dt>
<dd><p>Bases:</p>
<p>Captures every print() statement. Taken from <a class="reference external" href="https://stackoverflow.com/questions/16571150/how-to-capture-stdout-output-from-a-python-function-call">https://stackoverflow.com/questions/16571150/how-to-capture-stdout-output-from-a-python-function-call</a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">captureStdout</span><span class="p">()</span> <span class="k">as</span> <span class="n">outer</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">captureStdout</span><span class="p">()</span> <span class="k">as</span> <span class="n">inner</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;inside inner&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;else&quot;</span><span class="p">)</span>
<span class="c1"># prints &quot;[&#39;something&#39;, &#39;else&#39;]&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">outer</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># prints &quot;[&#39;inside inner&#39;]&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">inner</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that internally, this replaces <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.stdout" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> as <a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.StringIO</span></code></a>, so
might not work property if you have fancy <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> stuff going on. Also,
carriage return (<code class="docutils literal notranslate"><span class="pre">\r</span></code>) will erase the line, so multi-line overlaps might not
show up correctly.</p>
<p>If you wish to still print stuff out, you can do something
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">k1</span><span class="o">.</span><span class="n">captureStdout</span><span class="p">()</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)</span> <span class="c1"># gets captured</span>
    <span class="n">out</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;def&quot;</span><span class="p">)</span> <span class="c1"># not captured, will actually print out</span>
    <span class="c1"># you can also access the stream like this</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;something&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">out</span><span class="o">.</span><span class="n">old</span><span class="p">)</span>
</pre></div>
</div>
<p>Also, by default, this won’t work if you’re trying to capture C
library’s output, because they write to stdout directly, instead of
going through Python’s mechanism. You can capture it down at the C
level by doing this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">captureStdout</span><span class="p">()</span> <span class="k">as</span> <span class="n">out1</span><span class="p">,</span> <span class="n">captureStdout</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">out2</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;ls&quot;</span><span class="p">)</span> <span class="c1"># gets captured by out2, but not out1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)</span>    <span class="c1"># gets captured by out1, but not out2</span>
</pre></div>
</div>
<p>It’s a little bit hard to actually integrate C mode and non-C mode
together, so for the time being, you gotta have 2 context managers
if you want to capture absolutely everything, C or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out</strong> – if True, captures stdout, else captures stderr</p></li>
<li><p><strong>c</strong> – whether to capture at the C/C++ level or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.capturePlt">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">capturePlt</span></span><a class="reference internal" href="_modules/k1lib/_context.html#capturePlt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.capturePlt" title="Link to this definition"></a></dt>
<dd><p>Bases:</p>
<p>Tries to capture matplotlib plot.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">with</span> <span class="n">k1</span><span class="o">.</span><span class="n">capturePlt</span><span class="p">()</span> <span class="k">as</span> <span class="n">fig</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">capturedImage</span> <span class="o">=</span> <span class="n">fig</span><span class="p">()</span> <span class="c1"># reference it here</span>
</pre></div>
</div>
<p>This is a convenience function to deal with libraries that call <code class="docutils literal notranslate"><span class="pre">plt.show()</span></code>
and doesn’t let us intercept at the middle to generate an image.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.ignoreWarnings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">ignoreWarnings</span></span><a class="reference internal" href="_modules/k1lib/_context.html#ignoreWarnings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ignoreWarnings" title="Link to this definition"></a></dt>
<dd><p>Bases:</p>
<p>Context manager to ignore every warning.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="k">with</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">ignoreWarnings</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;some random stuff&quot;</span><span class="p">)</span> <span class="c1"># will not show anything</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.timer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">timer</span></span><a class="reference internal" href="_modules/k1lib/_context.html#timer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.timer" title="Link to this definition"></a></dt>
<dd><p>Bases:</p>
<p>Times generic code.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">timer</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span>
<span class="c1"># prints out float close to 1.1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">())</span>
</pre></div>
</div>
<p>The with- statement will actually return a <a class="reference internal" href="#k1lib.Wrapper" title="k1lib.Wrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wrapper</span></code></a> with value
None. The correct time will be deposited into it after the code block ends.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="k1lib.attrContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">attrContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_context.html#attrContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.attrContext" title="Link to this definition"></a></dt>
<dd><p>Bases:</p>
<p>Temporarily sets variable’s attribute to something else.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span> <span class="k">pass</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p">)</span> <span class="c1"># prints &quot;3&quot;</span>
<span class="k">with</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">attrContext</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="c1"># prints &quot;4 5&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="c1"># prints &quot;3 None&quot;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Link to this heading"></a></h2>
<p>These exceptions are used within <a class="reference internal" href="#k1lib.Learner" title="k1lib.Learner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Learner</span></code></a> to cancel things early on.
If you raise <a class="reference internal" href="#k1lib.CancelBatchException" title="k1lib.CancelBatchException"><code class="xref py py-class docutils literal notranslate"><span class="pre">CancelBatchException</span></code></a> while passing through the model,
the <a class="reference internal" href="#k1lib.Learner" title="k1lib.Learner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Learner</span></code></a> will catch it, run cleanup code (including checkpoint
<code class="docutils literal notranslate"><span class="pre">endBatch</span></code> ), then proceeds as usual.</p>
<p>If you raise something more major, like <a class="reference internal" href="#k1lib.CancelRunException" title="k1lib.CancelRunException"><code class="xref py py-class docutils literal notranslate"><span class="pre">CancelRunException</span></code></a>,
<a class="reference internal" href="#k1lib.Learner" title="k1lib.Learner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Learner</span></code></a> will first catch it at batch level, run clean up code, then
rethrow it. <a class="reference internal" href="#k1lib.Learner" title="k1lib.Learner"><code class="xref py py-class docutils literal notranslate"><span class="pre">Learner</span></code></a> will then recatch it at the epoch level, run
clean up code, then rethrow again. Same deal at the run level.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="k1lib.CancelRunException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">CancelRunException</span></span><a class="reference internal" href="_modules/k1lib/_learner.html#CancelRunException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.CancelRunException" title="Link to this definition"></a></dt>
<dd><p>Used in core training loop, to skip the run entirely</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="k1lib.CancelEpochException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">CancelEpochException</span></span><a class="reference internal" href="_modules/k1lib/_learner.html#CancelEpochException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.CancelEpochException" title="Link to this definition"></a></dt>
<dd><p>Used in core training loop, to skip to next epoch</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="k1lib.CancelBatchException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">CancelBatchException</span></span><a class="reference internal" href="_modules/k1lib/_learner.html#CancelBatchException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.CancelBatchException" title="Link to this definition"></a></dt>
<dd><p>Used in core training loop, to skip to next batch</p>
</dd></dl>

</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k1lib.isNumeric">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">isNumeric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="_modules/k1lib/_basics.html#isNumeric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.isNumeric" title="Link to this definition"></a></dt>
<dd><p>Returns whether object is actually a number</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.patch">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">patch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#patch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.patch" title="Link to this definition"></a></dt>
<dd><p>Patches a function to a class/object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_class</strong> – object to patch function. Can also be a type</p></li>
<li><p><strong>name</strong> – name of patched function, if different from current</p></li>
<li><p><strong>docs</strong> – docs of patched function. Can be object with defined __doc__ attr</p></li>
<li><p><strong>static</strong> – whether to wrap this inside <code class="xref py py-class docutils literal notranslate"><span class="pre">staticmethod</span></code> or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>modified function just before patching</p>
</dd>
</dl>
<p>Intended to be used like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">methA</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;inside methA&quot;</span>

<span class="nd">@k1lib</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">methB</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;inside methB&quot;</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">methB</span><span class="p">()</span> <span class="c1"># returns &quot;inside methB&quot;</span>
</pre></div>
</div>
<p>You can do <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> attributes like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span> <span class="k">pass</span>

<span class="nd">@k1lib</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s2">&quot;propC&quot;</span><span class="p">)</span>
<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">propC</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_propC</span>

<span class="nd">@k1lib</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s2">&quot;propC&quot;</span><span class="p">)</span>
<span class="nd">@propC</span><span class="o">.</span><span class="n">setter</span>
<span class="k">def</span> <span class="nf">propC</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_propC</span> <span class="o">=</span> <span class="n">value</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">();</span> <span class="n">a</span><span class="o">.</span><span class="n">propC</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>
<span class="n">a</span><span class="o">.</span><span class="n">propC</span> <span class="c1"># returns &quot;abc&quot;</span>
</pre></div>
</div>
<p>The attribute name unfortunately has to be explicitly declared, as I can’t
really find a way to extract the original name. You can also do static
methods like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span> <span class="k">pass</span>

<span class="nd">@k1lib</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">static</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">staticD</span><span class="p">(</span><span class="n">arg1</span><span class="p">):</span> <span class="k">return</span> <span class="n">arg1</span>

<span class="n">A</span><span class="o">.</span><span class="n">staticD</span><span class="p">(</span><span class="s2">&quot;def&quot;</span><span class="p">)</span> <span class="c1"># returns &quot;def&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.wraps">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">wraps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ogF</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#wraps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.wraps" title="Link to this definition"></a></dt>
<dd><p>Kinda like <code class="xref py py-meth docutils literal notranslate"><span class="pre">functools.wraps()</span></code>, but don’t update __annotations__.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.squeeze">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">squeeze</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">hard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#squeeze"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.squeeze" title="Link to this definition"></a></dt>
<dd><p>If list only has 1 element, returns that element, else returns original
list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hard</strong> – If True, then if list/tuple, filters out None, and takes the first
element out even if that list/tuple has more than 1 element</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.raiseEx">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">raiseEx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><span class="pre">Exception</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#raiseEx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.raiseEx" title="Link to this definition"></a></dt>
<dd><p>Raises a specific exception. May be useful in lambdas</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.numDigits">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">numDigits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="reference internal" href="_modules/k1lib/_basics.html#numDigits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.numDigits" title="Link to this definition"></a></dt>
<dd><p>Get the number of digits/characters of this number/object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.limitLines">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">limitLines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/k1lib/_basics.html#limitLines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.limitLines" title="Link to this definition"></a></dt>
<dd><p>If input string is too long, truncates it and adds ellipsis</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.limitChars">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">limitChars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#limitChars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.limitChars" title="Link to this definition"></a></dt>
<dd><p>If input string is too long, truncates to first <cite>limit</cite> characters of the first line</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.showLog">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">showLog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loggerName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#showLog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.showLog" title="Link to this definition"></a></dt>
<dd><p>Prints out logs of a particular logger at a particular level</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.beep">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">beep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#beep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.beep" title="Link to this definition"></a></dt>
<dd><p>Plays a beeping sound, may be useful as notification for long-running tasks</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.dontWrap">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">dontWrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#dontWrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.dontWrap" title="Link to this definition"></a></dt>
<dd><p>Don’t wrap horizontally when in a notebook. Normally, if you’re
displaying something long, like the output of <code class="docutils literal notranslate"><span class="pre">print('a'*1000)</span></code> in a notebook,
it will display it in multiple lines. This may be undesirable, so this solves
that by displaying some HTML with css styles so that the notebook doesn’t wrap.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.debounce">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">debounce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wait</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threading</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#debounce"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.debounce" title="Link to this definition"></a></dt>
<dd><p>Decorator that will postpone a function’s execution until after
<code class="docutils literal notranslate"><span class="pre">wait</span></code> seconds have elapsed since the last time it was invoked. Taken
from <a class="reference external" href="https://ipywidgets.readthedocs.io/en/latest/examples/Widget%20Events.html">ipywidgets</a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">k1lib</span><span class="o">,</span> <span class="nn">time</span><span class="p">;</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nd">@k1lib</span><span class="o">.</span><span class="n">debounce</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">global</span> <span class="n">value</span><span class="p">;</span> <span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">);</span> <span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="c1"># prints &quot;0&quot;</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.7</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="c1"># prints &quot;9&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wait</strong> – wait time in seconds</p></li>
<li><p><strong>threading</strong> – if True, use multiple threads, else just use async stuff</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.scaleSvg">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">scaleSvg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">svg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/k1lib/_basics.html#scaleSvg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.scaleSvg" title="Link to this definition"></a></dt>
<dd><p>Scales an svg xml string by some amount.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.pValue">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">pValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zScore</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#pValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.pValue" title="Link to this definition"></a></dt>
<dd><p>2-sided p value of a particular z score. Requires <a class="reference external" href="https://docs.scipy.org/doc/scipy/index.html#module-scipy" title="(in SciPy v1.15.1)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.now">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">now</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#now"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.now" title="Link to this definition"></a></dt>
<dd><p>Convenience function for returning a simple time
string, with timezone and whatnot.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.pushNotification">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">pushNotification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Some</span> <span class="pre">title'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Some</span> <span class="pre">content'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'https://k1lib.com'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#pushNotification"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.pushNotification" title="Link to this definition"></a></dt>
<dd><p>Sends push notification to your device.</p>
<p>Setting things up:
- Download this app: <a class="reference external" href="https://play.google.com/store/apps/details?id=net.xdroid.pn">https://play.google.com/store/apps/details?id=net.xdroid.pn</a>
- Set the <cite>settings.pushNotificationKey</cite> key obtained from the app. Example key: <cite>k-967fe9…</cite>
- Alternatively, set the environment variable <cite>k1lib_pushNotificationKey</cite> instead
- Run the function as usual</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.dep">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">dep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#dep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.dep" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.ticks">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">ticks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rounding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">6</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#ticks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.ticks" title="Link to this definition"></a></dt>
<dd><p>Get tick locations in a plot that look reasonable.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ticks</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>     <span class="c1"># returns [-10.0, -5.0, 0.0, 5.0, 10.0, 15.0, 20.0, 25.0, 30.0, 35.0, 40.0, 45.0]</span>
<span class="n">ticks</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.07</span><span class="p">)</span> <span class="c1"># returns [0.05, 0.0525, 0.055, 0.0575, 0.06, 0.0625, 0.065, 0.0675, 0.07, 0.0725]</span>
<span class="n">ticks</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>      <span class="c1"># returns [-6.0, -5.0, -4.0, -3.0, -2.0, -1.0, 0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0]</span>
</pre></div>
</div>
<p>So essentially, whenever you try to plot something, you want both the x and y axis
to not have too many lines, and that the tick values snap to a nice number.</p>
<p>Normally you don’t have to do this, as matplotlib does this automatically behind
the scenes, but sometimes you need to implement plotting again, in strange
situations, so this function comes in handy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – start of interval</p></li>
<li><p><strong>y</strong> – end of interval</p></li>
<li><p><strong>rounding</strong> – internally, it rounds tick values to this number of
digits, to fix tiny float overflows that make numbers ugly. So
you can disable it if you’re working with really small numbers</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.perlin3d">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">perlin3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shape=(100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">100)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res=(2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">2)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tileable=(False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">False)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolant=&lt;function</span> <span class="pre">interpolant&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_perlin.html#perlin3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.perlin3d" title="Link to this definition"></a></dt>
<dd><p>Generate a 3D numpy array of perlin noise. Not my code! All credits go
to the author of this library: <a class="reference external" href="https://github.com/pvigier/perlin-numpy">https://github.com/pvigier/perlin-numpy</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shape</strong> – The shape of the generated array (tuple of three ints).
This must be a multiple of res.</p></li>
<li><p><strong>res</strong> – The number of periods of noise to generate along each
axis (tuple of three ints). Note shape must be a multiple
of res.</p></li>
<li><p><strong>tileable</strong> – If the noise should be tileable along each axis
(tuple of three bools). Defaults to (False, False, False).</p></li>
<li><p><strong>interpolant</strong> – The interpolation function, defaults to
t*t*t*(t*(t*6 - 15) + 10).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A numpy array of shape shape with the generated noise.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – If shape is not a multiple of res.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.graph">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">graph</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.graph" title="Link to this definition"></a></dt>
<dd><p>Convenience method for creating a new graphviz Graph. See also: <a class="reference internal" href="#k1lib.digraph" title="k1lib.digraph"><code class="xref py py-meth docutils literal notranslate"><span class="pre">digraph()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.digraph">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">digraph</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#digraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.digraph" title="Link to this definition"></a></dt>
<dd><p>Convenience method for creating a new graphviz Digraph.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">graph</span><span class="p">()</span>
<span class="n">g</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">)</span>
<span class="n">g</span> <span class="c1"># displays arrows from &quot;a&quot; to &quot;b&quot; and &quot;a&quot; to &quot;c&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.tempObj">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">tempObj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#tempObj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.tempObj" title="Link to this definition"></a></dt>
<dd><p>Stores an object that’s meant to exist for a short amount of time,
and then will be automatically deleted. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">tempObj</span><span class="p">(</span><span class="s2">&quot;Suika Ibuki&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c1"># stores some string that will only last for 10 seconds</span>
<span class="n">k1</span><span class="o">.</span><span class="n">tempObj</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>                     <span class="c1"># returns &quot;Suika Ibuki&quot;</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">k1</span><span class="o">.</span><span class="n">tempObj</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>                     <span class="c1"># returns None</span>
</pre></div>
</div>
<p>The default timeout value is 60 seconds, configurable in <a class="reference internal" href="#k1lib.settings" title="k1lib.settings"><code class="xref py py-data docutils literal notranslate"><span class="pre">settings</span></code></a>.tempObjLifetime</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.aes_encrypt">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">aes_encrypt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plaintext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/k1lib/_advanced.html#aes_encrypt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.aes_encrypt" title="Link to this definition"></a></dt>
<dd><p>Encrypts a message using AES.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">aes_encrypt</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;some message&quot;</span><span class="p">)</span> <span class="c1"># can return &#39;3HV7PKKQL2DLWQWBBTETQTXNMC4Q6DJ2FSS73A7NCRAX6K4ZZKXQ====&#39;</span>
<span class="n">k1</span><span class="o">.</span><span class="n">aes_descrypt</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="c1"># returns b&quot;some message&quot;</span>
</pre></div>
</div>
<p>After encrypting, this is encoded using base32, ready to be used in urls. This function
is a convenience function meant for small messages here and there, and is not intended
for heavy duty encryption.</p>
<p>The key is automatically generated, and is configurable via <code class="docutils literal notranslate"><span class="pre">settings.cred.aes.key</span></code></p>
<p>See also: <a class="reference internal" href="#k1lib.aes_encrypt_json" title="k1lib.aes_encrypt_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aes_encrypt_json()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plaintext</strong> – plaintext to encrypt</p></li>
<li><p><strong>key</strong> – 128 bit key, if not specified then will auto generate one on library load at <code class="docutils literal notranslate"><span class="pre">settings.cred.aes.key</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.aes_decrypt">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">aes_decrypt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ciphertext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></span><a class="reference internal" href="_modules/k1lib/_advanced.html#aes_decrypt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.aes_decrypt" title="Link to this definition"></a></dt>
<dd><p>Decrypts a message using AES.
See <a class="reference internal" href="#k1lib.aes_encrypt" title="k1lib.aes_encrypt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aes_encrypt()</span></code></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ciphertext</strong> – ciphertext to decrypt</p></li>
<li><p><strong>key</strong> – 128 bit key, if not specified then will auto generate one on library load at <code class="docutils literal notranslate"><span class="pre">settings.cred.aes.key</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.aes_encrypt_json">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">aes_encrypt_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="reference internal" href="_modules/k1lib/_advanced.html#aes_encrypt_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.aes_encrypt_json" title="Link to this definition"></a></dt>
<dd><p>Encrypts a Python object using AES.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">aes_encrypt_json</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="n">k1</span><span class="o">.</span><span class="n">aes_decrypt_json</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># returns {&quot;a&quot;: 3}</span>

<span class="n">k1</span><span class="o">.</span><span class="n">aes_decrypt_json</span><span class="p">(</span><span class="n">k1</span><span class="o">.</span><span class="n">aes_encrypt_json</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span> <span class="c1"># returns [1, 2, 3]</span>
<span class="n">k1</span><span class="o">.</span><span class="n">aes_decrypt_json</span><span class="p">(</span><span class="n">k1</span><span class="o">.</span><span class="n">aes_encrypt_json</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">))</span>     <span class="c1"># returns &quot;abc&quot;</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#k1lib.aes_encrypt" title="k1lib.aes_encrypt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aes_encrypt()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.aes_decrypt_json">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">aes_decrypt_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ciphertext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><span class="pre">dict</span></a></span></span><a class="reference internal" href="_modules/k1lib/_advanced.html#aes_decrypt_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.aes_decrypt_json" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.modbusCrc">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">modbusCrc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/k1lib/_basics.html#modbusCrc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.modbusCrc" title="Link to this definition"></a></dt>
<dd><p>Calculates Modbus CRC-16 checksum for a given message.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">k1</span><span class="o">.</span><span class="n">modbusCrc</span><span class="p">([</span><span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">])</span> <span class="c1"># returns (228, 12), or (0xe4, 0x0c)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.parseTimeStr">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">parseTimeStr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeStr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_basics.html#parseTimeStr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.parseTimeStr" title="Link to this definition"></a></dt>
<dd><p>Parses time string and returns 2 unix timestamps.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">k1</span><span class="o">.</span><span class="n">parseTimeStr</span><span class="p">(</span><span class="s2">&quot;3 minute&quot;</span><span class="p">)</span> <span class="c1"># returns [now - 3*60, now]</span>
<span class="n">k1</span><span class="o">.</span><span class="n">parseTimeStr</span><span class="p">(</span><span class="s2">&quot;3 min&quot;</span><span class="p">)</span>    <span class="c1"># returns [now - 3*60, now]</span>
<span class="n">k1</span><span class="o">.</span><span class="n">parseTimeStr</span><span class="p">(</span><span class="s2">&quot;1 hour&quot;</span><span class="p">)</span>   <span class="c1"># returns [now - 3600, now]</span>
<span class="n">k1</span><span class="o">.</span><span class="n">parseTimeStr</span><span class="p">(</span><span class="s2">&quot;2.3 hour&quot;</span><span class="p">)</span> <span class="c1"># returns [now - 3600*2.3, now]</span>
</pre></div>
</div>
<p>You get the idea. This is useful in quickly parsing time series graphs between a
time period in the past and now. There are a bunch of period strings with their
corresponding multiplier:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">,</span>             <span class="n">second</span> <span class="c1"># second, sec</span>
<span class="mi">60</span><span class="p">,</span>            <span class="n">minute</span> <span class="c1"># minute, min</span>
<span class="mi">3600</span><span class="p">,</span>          <span class="n">hour</span>   <span class="c1"># hour,   hr</span>
<span class="mi">86400</span><span class="p">,</span>         <span class="n">day</span>    <span class="c1"># day</span>
<span class="mi">7</span>   <span class="o">*</span>  <span class="mi">86400</span><span class="p">,</span>  <span class="n">week</span>   <span class="c1"># week,   wk</span>
<span class="mi">30</span><span class="o">*</span>    <span class="mi">86400</span><span class="p">,</span>  <span class="n">month</span>  <span class="c1"># month,  mo</span>
<span class="mf">365.25</span><span class="o">*</span><span class="mi">86400</span><span class="p">,</span>  <span class="n">year</span>   <span class="c1"># year,   yr</span>
<span class="mf">365.25</span><span class="o">*</span><span class="mi">864000</span><span class="p">,</span> <span class="n">decade</span> <span class="c1"># decade, dec</span>
</pre></div>
</div>
<p>Fastest to access are the shortest period strings, like “sec”, “min”, etc. Use those if
you care about speed.</p>
<p>Unfortunately, this function can’t parse composite time strings, like “1 hr 5 min”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeStr</strong> – time string to parse</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.compileCExt">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">compileCExt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cppCode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moduleName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/k1lib/_advanced.html#compileCExt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.compileCExt" title="Link to this definition"></a></dt>
<dd><p>Conveniently compiles a python C extension module and returns it.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mod</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">compileCExt</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    // pure math func, simple data types</span>
<span class="s2">    double func1(double x) { for (int i = 0; i &lt; 1000000; i++) x = std::cos(x); return x; }</span>
<span class="s2">    // takes in array</span>
<span class="s2">    double func2(std::vector&lt;double&gt;&amp; arr) { double sum = 0; for (auto v : arr) sum += v; return sum; }</span>
<span class="s2">    // returns array</span>
<span class="s2">    std::vector&lt;int&gt; func3(int x, int n) { std::vector&lt;int&gt; ans; for (int i = 0; i &lt; n; i++) ans.push_back(x+i); return ans; }</span>
<span class="s2">    // nested arrays</span>
<span class="s2">    std::vector&lt;std::vector&lt;int&gt;&gt; func4(int x, int n) {</span>
<span class="s2">        std::vector&lt;std::vector&lt;int&gt;&gt; ans; std::vector&lt;int&gt; ans1, ans2;</span>
<span class="s2">        for (int i = 0; i &lt; n; i++) ans1.push_back(x+i);</span>
<span class="s2">        for (int i = 0; i &lt; n; i++) ans2.push_back(x+i*2);</span>
<span class="s2">        ans.push_back(ans1); ans.push_back(ans2); return ans;</span>
<span class="s2">    }</span>
<span class="s2">    // complex string manipulation, splitting things like &quot;A,3</span><span class="se">\n</span><span class="s2">B,4&quot;, std::vector&lt;std::pair&lt;std::string, int&gt;&gt;</span>
<span class="s2">    std::vector&lt;std::pair&lt;std::string, int&gt;&gt; func5(std::string text) {</span>
<span class="s2">        std::vector&lt;std::pair&lt;std::string, int&gt;&gt; ans; std::string line;</span>
<span class="s2">        std::istringstream f(text); std::pair&lt;std::string, int&gt; pair;</span>
<span class="s2">        while (std::getline(f, line)) {</span>
<span class="s2">            int pos = line.find(&quot;,&quot;); pair.first = line.substr(0, pos);</span>
<span class="s2">            pair.second = std::stoi(line.substr(pos+1)); ans.push_back(pair);</span>
<span class="s2">        } return ans;</span>
<span class="s2">    }</span>

<span class="s2">    PYBIND11_MODULE(genM1, m) {</span>
<span class="s2">        m.def(&quot;func1&quot;, &amp;func1); m.def(&quot;func2&quot;, &amp;func2); m.def(&quot;func3&quot;, &amp;func3);</span>
<span class="s2">        m.def(&quot;func4&quot;, &amp;func4); m.def(&quot;func5&quot;, &amp;func5);</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;genM1&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># this takes around 15s to run. Yes it&#39;s slow, but it works</span>

<span class="c1"># python-equivalent functions</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000000</span><span class="p">):</span> <span class="n">x</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>
<span class="k">def</span> <span class="nf">func2</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span> <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">func3</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span> <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<span class="k">def</span> <span class="nf">func4</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span> <span class="k">return</span> <span class="p">[[</span><span class="n">x</span><span class="o">+</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)],</span> <span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]]</span>
<span class="k">def</span> <span class="nf">func5</span><span class="p">(</span><span class="n">s</span><span class="p">):</span> <span class="k">return</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)]]</span>

<span class="n">mod</span><span class="o">.</span><span class="n">func1</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="c1"># 22.8 ms ± 1.83 ms, 7.6x faster</span>
<span class="n">func1</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>         <span class="c1"># 174 ms ± 24.1 ms</span>

<span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
<span class="n">mod</span><span class="o">.</span><span class="n">func2</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>     <span class="c1"># 7.25 μs ± 761 ns, 3.1x slower</span>
<span class="n">func2</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>         <span class="c1"># 2.33 μs ± 299 ns</span>

<span class="n">mod</span><span class="o">.</span><span class="n">func3</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c1"># 1.16 μs ± 97 ns, 1.2x slower</span>
<span class="n">func3</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>     <span class="c1"># 946 ns ± 128 ns</span>

<span class="n">mod</span><span class="o">.</span><span class="n">func4</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c1"># 2.23 μs ± 188 ns, 1.25x faster</span>
<span class="n">func4</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>     <span class="c1"># 2.78 μs ± 292 ns</span>

<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;A,3</span><span class="se">\n</span><span class="s2">B,4</span><span class="se">\n</span><span class="s2">C,5</span><span class="se">\n</span><span class="s2">D,6</span><span class="se">\n</span><span class="s2">E,7</span><span class="se">\n</span><span class="s2">F,8</span><span class="se">\n</span><span class="s2">G,9&quot;</span>
<span class="n">mod</span><span class="o">.</span><span class="n">func5</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>     <span class="c1"># 4.5 μs ± 286 ns, 1.07x faster</span>
<span class="n">func5</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>         <span class="c1"># 4.81 μs ± 866 ns</span>
</pre></div>
</div>
<p>Behind the scenes, this function generates a C source file, compiles it into a
python C extension module, then loads it in the current interpreter session. So
purpose of this is to very quickly drop down to C whenever the need arises.
Solutions like Cython is neat and all, but it’s quite awkward to code in, and
doesn’t have the full power of C++. Meanwhile, doing it like this gives you full
C++ features, as well as an easy python binding interface via pybind11.</p>
<p>Several header files are included by default, so you don’t have to include them, like
&lt;string&gt;, &lt;fstream&gt;, etc. A list of them are in <code class="docutils literal notranslate"><span class="pre">settings.cExt.includes</span></code>. You can
get a dict of all compiled modules via <code class="docutils literal notranslate"><span class="pre">k1.compileCExt.mods()</span></code></p>
<p>Also, as you can see from the tiny benchmark results, it’s not always faster to use
the C version, if input and output translation operations takes longer than the
function itself. So although there’s a lot of potential for speedups, you have to
be really careful about this, or else you risk slowing it down and wasting a bunch
of time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cppCode</strong> – C++ source code. Common headers are included</p></li>
<li><p><strong>moduleName</strong> – name of the module</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="higher-order-functions">
<h2>Higher order functions<a class="headerlink" href="#higher-order-functions" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="k1lib.polyfit">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">polyfit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">6</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/k1lib/_higher.html#polyfit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.polyfit" title="Link to this definition"></a></dt>
<dd><p>Returns a function that approximate <span class="math notranslate nohighlight">\(f(x) = y\)</span>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">ys</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">k1</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>This will create a best-fit function. You can just use it as a regular,
normal function. You can even pass in <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># returns some float</span>
<span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># plots fit function from 0 to 5</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>deg</strong> – degree of the polynomial of the returned function</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.derivative">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">derivative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-06</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/k1lib/_higher.html#derivative"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.derivative" title="Link to this definition"></a></dt>
<dd><p>Returns the derivative of a function.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">derivative</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">df</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># returns roughly 6 </span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.optimize">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span></span><a class="reference internal" href="_modules/k1lib/_higher.html#optimize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.optimize" title="Link to this definition"></a></dt>
<dd><p>Given <span class="math notranslate nohighlight">\(f(x) = 0\)</span>, solves for x using Newton’s method with initial value
<cite>v</cite>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mi">2</span>
<span class="c1"># returns 1.4142 (root 2)</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="c1"># returns -1.4142 (negative root 2)</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Interestingly, for some reason, result of this is more accurate than <a class="reference internal" href="#k1lib.derivative" title="k1lib.derivative"><code class="xref py py-meth docutils literal notranslate"><span class="pre">derivative()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.inverse">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/k1lib/_higher.html#inverse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.inverse" title="Link to this definition"></a></dt>
<dd><p>Returns the inverse of a function.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
<span class="n">fInv</span> <span class="o">=</span> <span class="n">k1lib</span><span class="o">.</span><span class="n">inverse</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="c1"># returns roughly 3</span>
<span class="n">fInv</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The inverse function takes a long time to run, so don’t use this
where you need lots of speed. Also, as you might imagine, the
inverse function isn’t really airtight. Should work well with
monotonic functions, but all bets are off with other functions.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.integral">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">integral</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#k1lib.Range" title="k1lib._baseClasses.Range"><span class="pre">Range</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span></span><a class="reference internal" href="_modules/k1lib/_higher.html#integral"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.integral" title="Link to this definition"></a></dt>
<dd><p>Integrates a function over a range.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
<span class="c1"># returns roughly 9</span>
<span class="n">k1lib</span><span class="o">.</span><span class="n">integral</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p>There is also the cli <a class="reference internal" href="cli/index.html#k1lib.cli.modifier.integrate" title="k1lib.cli.modifier.integrate"><code class="xref py py-class docutils literal notranslate"><span class="pre">integrate</span></code></a>
which has a slightly different api.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="k1lib.batchify">
<span class="sig-prename descclassname"><span class="pre">k1lib.</span></span><span class="sig-name descname"><span class="pre">batchify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">singleFn</span></span></span><a class="reference internal" href="_modules/k1lib/_higher.html#batchify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#k1lib.batchify" title="Link to this definition"></a></dt>
<dd><p>Transforms a function taking in batches to taking in singles,
for performance reasons.</p>
<p>Say you have this function that does some heavy computation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f1</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="c1"># simulating heavy load, like loading large libraries/binaries</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>      <span class="c1"># does not take lots of time</span>
</pre></div>
</div>
<p>Let’s also say that a lot of time, you want to execute that function over multiple samples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># will be filled with [3, 7, 11]</span>
<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]:</span>
    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f1</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
<p>This would take 3 seconds to complete. But a lot of time, it might be advantageous to merge
them together and execute everything all at once:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                       <span class="c1"># loading large libraries/binaries only once</span>
    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">):</span> <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>      <span class="c1"># run through all samples quickly</span>
    <span class="k">return</span> <span class="n">res</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">f2</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span> <span class="c1"># filled with [3, 7, 11], just like before</span>
</pre></div>
</div>
<p>But, may be you’re in a multithreaded application and desire the original function “f1(x, y)”,
instead of the batched function “f2(xs, ys)”, like running an LLM (large language model) on
requests submitted by people on the internet. Each request that comes in runs on different
threads, but it’s still desirable to pool together all of those requests, run through the model
once, and then split up the results to each respective request. That’s where this functionality
comes in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@k1</span><span class="o">.</span><span class="n">batchify</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>     <span class="c1"># pool up all calls every 0.1 seconds</span>
<span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">):</span>
    <span class="o">...</span>               <span class="c1"># same as previous example</span>
<span class="nd">@k1</span><span class="o">.</span><span class="n">batchify</span>          <span class="c1"># can also do it like this. It&#39;ll default to a period of 0.1</span>
<span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">):</span>
    <span class="o">...</span>               <span class="c1"># same as previous example</span>

<span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
<span class="n">t3</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)))</span>
<span class="n">ths</span> <span class="o">=</span> <span class="p">[</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">]</span>
<span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">ths</span><span class="p">:</span> <span class="n">th</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">ths</span><span class="p">:</span> <span class="n">th</span><span class="o">.</span><span class="n">join</span><span class="p">()</span> <span class="c1"># after this point, res will have a permutation of [3, 7, 11] (because t1, t2, t3 execution order is not known)</span>
</pre></div>
</div>
<p>This will take on average 1 + 0.1 seconds (heavy load execution time + refresh rate). You can
decorate this on any Flask endpoint you want and it will just work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/run/&lt;int:nums&gt;&quot;</span><span class="p">)</span>
<span class="nd">@k1</span><span class="o">.</span><span class="n">batchify</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">nums</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># long running process</span>
    <span class="k">return</span> <span class="n">nums</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="s2">&quot;x**2&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">|</span> <span class="n">deref</span><span class="p">()</span>
</pre></div>
</div>
<p>Now, if you send 10 requests within a window of 0.3s, then the total running time would only be
1.3s, instead of 10s like before</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="k1lib library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cli/index.html" class="btn btn-neutral float-right" title="k1lib.cli module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Quang Ho.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>